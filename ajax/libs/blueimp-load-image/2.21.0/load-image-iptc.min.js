!function(t){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],t):"object"==typeof module&&module.exports?t(require("./load-image"),require("./load-image-meta")):t(window.loadImage)}(function(g){"use strict";g.IptcMap=function(){return this},g.IptcMap.prototype.map={ObjectName:5},g.IptcMap.prototype.get=function(t){return this[t]||this[this.map[t]]},g.parseIptcTags=function(t,e,a,i){function n(t,e,a){for(var i="",n=e;n<e+a;n++)i+=String.fromCharCode(t.getUint8(n));return i}for(var o,r,p=e;p<e+a;)28===t.getUint8(p)&&2===t.getUint8(p+1)&&(r=t.getUint8(p+2))in i.iptc.tags&&(o=n(t,p+5,t.getInt16(p+3)),i.iptc.hasOwnProperty(r)?i.iptc[r]instanceof Array?i.iptc[r].push(o):i.iptc[r]=[i.iptc[r],o]:i.iptc[r]=o),p++},g.parseIptcData=function(t,e,a,i,n){if(!n.disableIptc){for(var o,r,p=e+a;e+8<p;){if(r=e,943868237===(o=t).getUint32(r)&&1028===o.getUint16(r+4)){var c=t.getUint8(e+7);c%2!=0&&(c+=1),0===c&&(c=4);var s=e+8+c;if(p<s){console.log("Invalid IPTC data: Invalid segment offset.");break}var f=t.getUint16(e+6+c);if(p<e+f){console.log("Invalid IPTC data: Invalid segment size.");break}return i.iptc=new g.IptcMap,g.parseIptcTags(t,s,f,i)}e++}console.log("No IPTC data at this offset - could be XMP")}},g.metaDataParsers.jpeg[65517].push(g.parseIptcData)});