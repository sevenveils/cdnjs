!function(z,A){var E="snapper";A.fn[E]=function(q){var t,F,I=arguments,e="scroll-snap-type",M=z.CSS&&z.CSS.supports&&(z.CSS.supports(e,"x mandatory")||z.CSS.supports(e,"mandatory")||z.CSS.supports("-webkit-"+e,"mandatory")||z.CSS.supports("-ms-"+e,"mandatory"));function i(t,e){var a=A(t).find("."+E+"_item"),r=A(t).width(),n=[];return a.each(function(t){this.offsetLeft>=e-5&&this.offsetLeft<e+r-5&&n.push(this)}),A(n)}function P(t){return t.width()+parseFloat(t.css("margin-left"))+parseFloat(t.css("margin-right"))}function V(t,e,a){a=a?a+"-":"";var r=i(t,e);A(t).trigger(E+"."+a+"snap",{activeSlides:r})}function j(t,e,a,r){!1,V(t,e);function n(){t.scrollLeft=e,A(t).closest("."+E).removeClass(E+"-looping"),A(t).trigger(E+".after-goto",{activeSlides:i(t,e)}),r&&r(),V(t,e,"after"),!0}!z.toss&&z.overthrow&&(z.toss=z.overthrow.toss),void 0===z.toss||a?(t.scrollLeft=e,n()):z.toss(t,{left:e,finished:n})}return t=this.each(function(){if(void 0===F){var r,n=this,i=A(n),t=i.is("[data-"+E+"-nextprev]"),g=A("."+E+"_pane",n),m=g.find("."+E+"_items"),y=m.children();y.addClass(E+"_item");var _=y.length,p=A("."+E+"_nav",n),d=E+"_nav_item-selected",s="false"!==i.attr("data-snapper-deeplinking");if("string"!=typeof q){if(!i.attr("data-"+E+"-enhanced")){var c=p.find("."+E+"_nav_inner");if(c.length||(c=A('<div class="'+E+'_nav_inner"></div>').append(p.children()).appendTo(p)),g.attr("tabindex","0"),b(),A(n).addClass("snapper-enhanced"),t){var e=A('<ul class="snapper_nextprev"><li class="snapper_nextprev_item"><a href="#prev" class="snapper_nextprev_prev">Prev</a></li><li class="snapper_nextprev_item"><a href="#next" class="snapper_nextprev_next">Next</a></li></ul>'),a=A(".snapper_nextprev_contain",n);a.length||(a=A(n)),e.appendTo(a)}A("a",this).bind("click",function(t){clearTimeout(r);var e=A(this).attr("href");if(A(this).is(".snapper_nextprev_next"))return t.preventDefault(),D(!0);if(A(this).is(".snapper_nextprev_prev"))return t.preventDefault(),D(!1);if(0===e.indexOf("#")&&1<e.length){t.preventDefault();var a=A(e,n);a.length&&(j(g[0],a[0].offsetLeft),s&&"replaceState"in z.history&&z.history.replaceState({},document.title,e))}}),A(this).bind("keydown",function(t){37!==t.keyCode&&38!==t.keyCode||(clearTimeout(r),t.preventDefault(),t.stopImmediatePropagation(),D(!1)),39!==t.keyCode&&40!==t.keyCode||(clearTimeout(r),t.preventDefault(),t.stopImmediatePropagation(),D(!0))});var o,l,f,u=!1;if(A(z).bind("resize",function(){var t=g[0].scrollLeft,e=y.length,a=m.width();void 0===o&&(o=Math.round(t/a*e)),l&&clearTimeout(l),l=setTimeout(function(){b(),j(g[0],y[o].offsetLeft,!0),o=l=void 0},50)}),p.length){var v;function h(t){var e=(new Date).getTime();if(!(!t&&v&&e-v<200)){v=e;var a=g[0].scrollLeft,r=P(m),n=P(p),i=function(t){return t.height()+parseFloat(t.css("margin-bottom"))+parseFloat(t.css("margin-top"))}(p),s=Math.round(a/r*_)||0,o=p.find("a").removeClass(d).eq(s).addClass(d),l=o[0].offsetLeft-n/2,f=o[0].offsetTop-i/2;!function(t,e,a){void 0!==z.toss?z.toss(t,{left:e,top:a}):(t.scrollLeft=e,t.scrollTop=a)}(c[0],l,f)}}h(),g.bind("scroll",h)}var w=0;g.bind("scroll",function(t){w=(new Date).getTime(),f=!0}),setInterval(function(){f&&w<=(new Date).getTime()-150&&(k(),h(!0),f=!1)},150);var x=!1;g.bind("touchstart",function(){clearTimeout(r),x=!0}),g.bind("touchend",function(){x=!1,u&&!f&&(k(),f=!1)}),function e(t){t&&(r=setTimeout(function(){var t=T();t&&(D(!0),e(t))},t))}(T()),i.attr("data-"+E+"-enhanced",!0)}}else{var C,S=Array.prototype.slice.call(I,1),L=m.width()/_;switch(q){case"goto":C=S[0]%_,offset=L*C,j(g[0],offset,!1,function(){k(),"function"==typeof S[1]&&S[1]()});break;case"getIndex":F=Math.floor((g[0].scrollLeft+1)/L);break;case"updateWidths":b()}}}function T(){var t=i.attr("data-autoplay")||i.attr("data-snapper-autoplay"),e=!1;if(t){try{t=parseInt(t,10)}catch(t){e=!0}if(!t||e){throw new Error("Snapper: `data-autoplay` must have an natural number value.")}}return t}function b(){var t=m.attr("style");m.attr("style","");var e=y.eq(0).attr("style");y.eq(0).attr("style","");var a=g.width(),r=y.eq(0).width(),n=z.getComputedStyle(y[0],null),i=parseFloat(n.getPropertyValue("margin-left")),s=parseFloat(n.getPropertyValue("margin-right")),o=r+i+s;y.eq(0).attr("style",e),m.attr("style",t);var l=_/Math.round(a/o)*100,f=r/a*100,p=s/a*100,d=i/a*100,c=f+d+p,u=f/c,v=p/c,h=d/c;m.css("width",l+"%"),y.css("width",100/_*u+"%"),y.css("margin-left",100/_*h+"%"),y.css("margin-right",100/_*v+"%")}function k(){if(x)u=!0;else{var t=g[0].scrollLeft,e=m.width(),a=y[1]?y[1].offsetLeft:P(y.eq(0)),r=Math.round(t/a)*a,n=e-g.width();n<r&&(r=n),t!==r&&(M?(V(g[0],r),V(g[0],r,"after")):j(g[0],r)),u=!1}}function D(t){var e=g[0].scrollLeft,a=m.width(),r=P(g);return t?a-r-5<=e?(i.addClass(E+"-looping"),void j(g[0],0)):void j(g[0],g[0].scrollLeft+m.width()/_,!1,function(){g.trigger(E+".after-next")}):0===e?(i.addClass(E+"-looping"),void j(g[0],m.width()-g.width())):void j(g[0],g[0].scrollLeft-m.width()/_,!1,function(){g.trigger(E+".after-prev")})}}),void 0!==F?F:t}}(this,jQuery);