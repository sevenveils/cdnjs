!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tone=e():t.Tone=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=47)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);function o(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];if(!r.length)return t;var a=r.shift();if(i.isObject(t)&&i.isObject(a))for(var u in a)i.isObject(a[u])?(t[u]||Object.assign(t,((e={})[u]={},e)),o(t[u],a[u])):Object.assign(t,((n={})[u]=a[u],n));return o.apply(void 0,[t].concat(r))}e.deepMerge=o,e.optionsFromArguments=function(t,e,n){void 0===n&&(n=[]);var r={},s=Array.from(e);if(1===s.length&&i.isObject(s[0]))o(r,s[0]);else for(var a=0;a<n.length;a++)i.isDefined(s[a])&&(r[n[a]]=s[a]);return o(t,r)},e.getDefaultsFromInstance=function(t){return t.constructor.getDefaults()},e.defaultArg=function(t,e){return i.isUndef(t)?e:t}},function(t,e,n){"use strict";function i(t){return void 0===t}function o(t){return"string"==typeof t}Object.defineProperty(e,"__esModule",{value:!0}),e.isUndef=i,e.isDefined=function(t){return!i(t)},e.isFunction=function(t){return"function"==typeof t},e.isNumber=function(t){return"number"==typeof t},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},e.isBoolean=function(t){return"boolean"==typeof t},e.isArray=function(t){return Array.isArray(t)},e.isString=o,e.isNote=function(t){return o(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.readOnly=function t(e,n){i.isArray(n)?n.forEach(function(n){return t(e,n)}):Object.defineProperty(e,n,{enumerable:!0,writable:!1})},e.writable=function t(e,n){i.isArray(n)?n.forEach(function(n){return t(e,n)}):Object.defineProperty(e,n,{writable:!0})},e.noOp=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(30),r=n(20);function s(t){i=t,t.initialize(),window.TONE_CONTEXT=t}if(i=window.TONE_CONTEXT,e.getContext=function(){return i||s(new r.Context),i},e.setContext=s,e.start=function(){return i.resume()},!this.TONE_SILENCE_LOGGING){var a="v";"dev"===o.version&&(a="");var u=" * Tone.js "+a+o.version+" * ";console.log("%c"+u,"background: #000; color: #fff")}},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),s=n(1),a=n(7),u=function(t){function e(){var n=t.call(this,r.optionsFromArguments(e.getDefaults(),arguments,["context"]))||this;n.name="AudioNode";var i=r.optionsFromArguments(e.getDefaults(),arguments,["context"]);return n.numberOfInputs=i.numberOfInputs,n.numberOfOutputs=i.numberOfInputs,n}return o(e,t),e.getDefaults=function(){return Object.assign(a.ToneWithContext.getDefaults(),{channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",numberOfInputs:0,numberOfOutputs:0})},e.prototype.createInsOuts=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=0),1===t)this.input=this.context.createGain();else if(t>1){this.input=[];for(var n=0;n<t;n++)this.input[n]=this.context.createGain()}if(1===e)this.output=this.context.createGain();else if(e>1){this.output=[];for(var i=0;i<e;i++)this.output[i]=this.context.createGain()}},e.prototype._setChannelProperties=function(t){this._internalChannels.length&&this._internalChannels.forEach(function(e){e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation})},e.prototype._getChannelProperties=function(){if(this._internalChannels.length){var t=this._internalChannels[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}return{channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"}},Object.defineProperty(e.prototype,"channelCount",{get:function(){return this._getChannelProperties().channelCount},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"channelCountMode",{get:function(){return this._getChannelProperties().channelCountMode},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"channelInterpretation",{get:function(){return this._getChannelProperties().channelInterpretation},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))},enumerable:!0,configurable:!0}),e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),p(this,t,e,n),this},e.prototype.toDestination=function(){return this.connect(this.context.destination),this},e.prototype.toMaster=function(){return this.toDestination()},e.prototype.disconnect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),h(this,t,e,n),this},e.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c.apply(void 0,[this].concat(t)),this},e.prototype.fan=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach(function(e){return t.connect(e)}),this},e.prototype.dispose=function(){return s.isDefined(this.input)&&(s.isArray(this.input)?this.input.forEach(function(t){t instanceof e?t.dispose():t instanceof AudioNode&&t.disconnect()}):this.input instanceof AudioNode&&this.input.disconnect()),s.isDefined(this.output)&&(s.isArray(this.output)?this.output.forEach(function(t){t instanceof e?t.dispose():t.disconnect()}):this.output.disconnect()),this._internalChannels=[],this},e}(a.ToneWithContext);function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();t.reduce(function(t,e){return(t instanceof u||t instanceof AudioNode)&&p(t,e),e},n)}function p(t,e,n,i){for(void 0===n&&(n=0),void 0===i&&(i=0);!(e instanceof AudioNode||e instanceof AudioParam);)s.isArray(e.input)?(this.assert(e.input.length<i,"the output number is greater than the number of outputs"),e=e.input[i]):s.isDefined(e.input)&&(e=e.input),i=0;t instanceof u&&(s.isArray(t.output)?(this.assert(t.output.length<n,"the output number is greater than the number of outputs"),t=t.output[n]):s.isDefined(t.output)&&(t=t.output),n=0),e instanceof AudioParam?t.connect(e,n):t.connect(e,n,i)}function h(t,e,n,i){if(void 0===n&&(n=0),void 0===i&&(i=0),s.isDefined(e))for(;e instanceof u;)s.isArray(e.input)?(s.isNumber(i)?(this.assert(e.input.length<i,"the input number is greater than the number of inputs"),e=e.input[i]):e.input.forEach(function(e){try{h(t,e,n)}catch(t){}}),i=0):e.input&&(e=e.input);for(;!(t instanceof AudioNode);)s.isArray(t.output)?(this.assert(t.output.length<n,"the output number is greater than the number of outputs"),t=t.output[n]):s.isDefined(t.output)&&(t=t.output),n=0;e instanceof AudioParam?t.disconnect(e,n):e instanceof AudioNode?t.disconnect(e,n,i):t.disconnect()}e.ToneAudioNode=u,e.connectSeries=c,e.connect=p,e.disconnect=h},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),s=n(0),a=function(t){function e(){var n=t.call(this)||this;n.name="Timeline",n._timeline=[];var i=s.optionsFromArguments(e.getDefaults(),arguments,["memory"]);return n.memory=i.memory,n}return o(e,t),e.getDefaults=function(){return{memory:1/0}},Object.defineProperty(e.prototype,"length",{get:function(){return this._timeline.length},enumerable:!0,configurable:!0}),e.prototype.add=function(t){this.assert(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf();var e=this._search(t.time);if(this._timeline.splice(e+1,0,t),this.length>this.memory){var n=this.length-this.memory;this._timeline.splice(0,n)}return this},e.prototype.remove=function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this},e.prototype.get=function(t,e){void 0===e&&(e="time");var n=this._search(t,e);return-1!==n?this._timeline[n]:null},e.prototype.peek=function(){return this._timeline[0]},e.prototype.shift=function(){return this._timeline.shift()},e.prototype.getAfter=function(t,e){void 0===e&&(e="time");var n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null},e.prototype.getBefore=function(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var n=this._search(t);return n-1>=0?this._timeline[n-1]:null},e.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var n=e;n>=0&&this._timeline[n].time===t;n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},e.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},e.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},e.prototype._search=function(t,e){if(void 0===e&&(e="time"),0===this._timeline.length)return-1;var n=0,i=this._timeline.length,o=i;if(i>0&&this._timeline[i-1][e]<=t)return i-1;for(;n<o;){var r=Math.floor(n+(o-n)/2),s=this._timeline[r],a=this._timeline[r+1];if(s[e]===t){for(var u=r;u<this._timeline.length;u++){this._timeline[u][e]===t&&(r=u)}return r}if(s[e]<t&&a[e]>t)return r;s[e]>t?o=r:n=r+1}return-1},e.prototype._iterate=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this._timeline.length-1),this._timeline.slice(e,n+1).forEach(t)},e.prototype.forEach=function(t){return this._iterate(t),this},e.prototype.forEachBefore=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this},e.prototype.forEachAfter=function(t,e){var n=this._search(t);return this._iterate(e,n+1),this},e.prototype.forEachBetween=function(t,e,n){var i=this._search(t),o=this._search(e);return-1!==i&&-1!==o?(this._timeline[i].time!==t&&(i+=1),this._timeline[o].time===e&&(o-=1),this._iterate(n,i,o)):-1===i&&this._iterate(n,0,o),this},e.prototype.forEachFrom=function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this},e.prototype.forEachAtTime=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(function(n){n.time===t&&e(n)},0,n),this},e.prototype.dispose=function(){return this._timeline=[],this},e}(r.Tone);e.Timeline=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});
/**
 *  Tone.js
 *  @author Yotam Mann
 *  @license http://opensource.org/licenses/MIT MIT License
 *  @copyright 2014-2019 Yotam Mann
 */
var i=n(30);n(11);var o=function(){function t(){this.debug=!1}return t.getDefaults=function(){return{}},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.assert=function(t,e){if(!t)throw new Error(e)},t.prototype.toString=function(){return this.name},t.version=i.version,t}();e.Tone=o},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),s=n(6),a=n(29),u=n(9),c=n(14);n(11);var p=n(0),h=n(1),l=function(t){function e(n){var i=this,o=p.optionsFromArguments(e.getDefaults(),arguments,["context"]);return(i=t.call(this)||this).defaultContext?i.context=i.defaultContext:i.context=o.context,i}return o(e,t),e.getDefaults=function(){return{context:r.getContext()}},e.prototype.now=function(){return this.context.currentTime+this.context.lookAhead},e.prototype.immediate=function(){return this.context.currentTime},Object.defineProperty(e.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate},enumerable:!0,configurable:!0}),e.prototype.toSeconds=function(t){return new u.TimeClass(this.context,t).toSeconds()},e.prototype.toFrequency=function(t){return new a.FrequencyClass(this.context,t).toFrequency()},e.prototype.toTicks=function(t){return new c.TransportTimeClass(this.context,t).toTicks()},e.prototype.get=function(){var t=this,n=p.getDefaultsFromInstance(this);return Object.keys(n).forEach(function(i){if(Reflect.has(t,i)){var o=t[i];h.isDefined(o)&&h.isDefined(o.value)?n[i]=o.value:n[i]=o instanceof e?o.get():o}}),n},e.prototype.set=function(t){var n=this;return Object.keys(t).forEach(function(i){Reflect.has(n,i)&&(h.isDefined(n[i])&&h.isDefined(n[i].value)?n[i].value=t[i]:n[i]instanceof e?n[i].set(t[i]):n[i]=t[i])}),this},e}(s.Tone);e.ToneWithContext=l},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(15);n(11);var s=n(0),a=n(5),u=n(1),c=n(7),p=function(t){function e(){var n=t.call(this,s.optionsFromArguments(e.getDefaults(),arguments,["param","units","convert"]))||this;n.name="Param",n.overridden=!1,n._minOutput=1e-5;var i=s.optionsFromArguments(e.getDefaults(),arguments,["param","units","convert"]);return n.assert(u.isDefined(i.param)&&i.param instanceof AudioParam,"param must be an AudioParam"),n._param=n.input=i.param,n._events=new a.Timeline(1e3),n._initialValue=n._param.value,n.units=i.units,n.convert=i.convert,u.isDefined(i.value)&&n.setValueAtTime(i.value,0),n}return o(e,t),e.getDefaults=function(){return Object.assign(c.ToneWithContext.getDefaults(),{convert:!0,units:"number"})},Object.defineProperty(e.prototype,"value",{get:function(){var t=this.now();return this.getValueAtTime(t)},set:function(t){this._initialValue=this._fromType(t),this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue},enumerable:!0,configurable:!0}),e.prototype._is=function(t,e){return this.units===e},e.prototype._fromType=function(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?r.dbToGain(t):this._is(t,"frequency")?this.toFrequency(t):this._is(t,"normalRange")?Math.min(Math.max(t,0),1):this._is(t,"audioRange")?Math.min(Math.max(t,-1),1):this._is(t,"positive")?Math.max(t,0):(this._is(t,"number"),t):t},e.prototype._toType=function(t){return this.convert&&"decibels"===this.units?r.gainToDb(t):t},e.prototype.setValueAtTime=function(t,e){e=this.toSeconds(e);var n=this._fromType(t);return this._events.add({time:e,type:"setValue",value:n}),this.log("setValue",t,e),this._param.setValueAtTime(n,e),this},e.prototype.getValueAtTime=function(t){var e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),i=this._events.get(e),o=this._initialValue;if(null===i)o=this._initialValue;else if("setTarget"!==i.type||null!==n&&"setValue"!==n.type)if(null===n)o=i.value;else if("linear"===n.type||"exponential"===n.type){var r=i.value;if("setTarget"===i.type)r=null===(s=this._events.getBefore(i.time))?this._initialValue:s.value;o="linear"===n.type?this._linearInterpolate(i.time,r,n.time,n.value,e):this._exponentialInterpolate(i.time,r,n.time,n.value,e)}else o=i.value;else{var s,a=void 0;a=null===(s=this._events.getBefore(i.time))?this._initialValue:s.value,u.isDefined(i.constant)&&(o=this._exponentialApproach(i.time,a,i.value,i.constant,e))}return this._toType(o)},e.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this},e.prototype.linearRampToValueAtTime=function(t,e){var n=this._fromType(t);return e=this.toSeconds(e),this._events.add({time:e,type:"linear",value:n}),this.log("linear",t,e),this._param.linearRampToValueAtTime(n,e),this},e.prototype.exponentialRampToValueAtTime=function(t,e){var n=this._fromType(t);return n=Math.max(this._minOutput,n),e=this.toSeconds(e),this._events.add({time:e,type:"exponential",value:n}),this.log("exponential",t,e),this._param.exponentialRampToValueAtTime(n,e),this},e.prototype.exponentialRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this},e.prototype.linearRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this},e.prototype.targetRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this},e.prototype.exponentialApproachValueAtTime=function(t,e,n){var i=Math.log(this.toSeconds(n)+1)/Math.log(200);return e=this.toSeconds(e),this.setTargetAtTime(t,e,i)},e.prototype.setTargetAtTime=function(t,e,n){var i=this._fromType(t);return this.assert(n>0,"timeConstant must be greater than 0"),e=this.toSeconds(e),this._events.add({constant:n,time:e,type:"setTarget",value:i}),this.log("setTarget",t,e,n),this._param.setTargetAtTime(i,e,n),this},e.prototype.setValueCurveAtTime=function(t,e,n,i){void 0===i&&(i=1),n=this.toSeconds(n),e=this.toSeconds(e);var o=this._fromType(t[0])*i;this.setValueAtTime(this._toType(o),e);for(var r=n/(t.length-1),s=1;s<t.length;s++){var a=this._fromType(t[s])*i;this.linearRampToValueAtTime(this._toType(a),e+s*r)}return this},e.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log("cancel",t),this},e.prototype.cancelAndHoldAtTime=function(t){t=this.toSeconds(t);var e=this._fromType(this.getValueAtTime(t));this.log("cancelAndHoldAtTime",t,"value="+e),this._param.cancelScheduledValues(t);var n=this._events.get(t),i=this._events.getAfter(t);return n&&n.time===t?i?this._events.cancel(i.time):this._events.cancel(t+this.sampleTime):i&&(this._events.cancel(i.time),"linear"===i.type?this.linearRampToValueAtTime(this._toType(e),t):"exponential"===i.type&&this.exponentialRampToValueAtTime(this._toType(e),t)),this._events.add({time:t,type:"setValue",value:e}),this._param.setValueAtTime(e,t),this},e.prototype.rampTo=function(t,e,n){return void 0===e&&(e=.1),"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this},e.prototype.dispose=function(){return this._events.dispose(),this},e.prototype._exponentialApproach=function(t,e,n,i,o){return n+(e-n)*Math.exp(-(o-t)/i)},e.prototype._linearInterpolate=function(t,e,n,i,o){return e+(o-t)/(n-t)*(i-e)},e.prototype._exponentialInterpolate=function(t,e,n,i,o){return e*Math.pow(i/e,(o-t)/(n-t))},e}(c.ToneWithContext);e.Param=p},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),s=n(15),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Time",e}return o(e,t),e.prototype._getExpressions=function(n){var i=this;return Object.assign(t.prototype._getExpressions.call(this,n),{now:{method:function(t){return i._now()+new e(i.context,t).valueOf()},regexp:/^\+(.+)/},quantize:{method:function(t){var n=new e(i.context,t).valueOf();return i._secondsToUnits(i.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})},e.prototype.quantize=function(t,n){void 0===n&&(n=1);var i=new e(this.context,t).valueOf(),o=this.valueOf();return o+(Math.round(o/i)*i-o)*n},e.prototype.toNotation=function(){for(var t=this,n=this.toSeconds(),i=["1m"],o=1;o<9;o++){var r=Math.pow(2,o);i.push(r+"n."),i.push(r+"n"),i.push(r+"t")}i.push("0");var s=i[0],a=new e(this.context,i[0]).toSeconds();return i.forEach(function(i){var o=new e(t.context,i).toSeconds();Math.abs(o-n)<Math.abs(a-n)&&(s=i,a=o)}),s},e.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var n=Math.floor(e/this._getTimeSignature()),i=e%1*4;e=Math.floor(e)%this._getTimeSignature();var o=i.toString();return o.length>3&&(i=parseFloat(parseFloat(o).toFixed(3))),[n,e,i].join(":")},e.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},e.prototype.toSeconds=function(){return this.valueOf()},e.prototype.toMidi=function(){return s.ftom(this.toFrequency())},e.prototype._now=function(){return this.context.now()},e}(n(43).TypeBaseClass);e.TimeClass=a,e.Time=function(t,e){return new a(r.getContext(),t,e)}},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(8);n(11);var s=n(0),a=n(2),u=n(4),c=function(t){function e(){var n=t.call(this,s.optionsFromArguments(e.getDefaults(),arguments,["gain","units"]))||this;n.name="Gain",n._gainNode=n.context.createGain(),n.input=n._gainNode,n.output=n._gainNode,n._internalChannels=[n._gainNode];var i=s.optionsFromArguments(e.getDefaults(),arguments,["gain","units"]);return n.gain=new r.Param({context:n.context,convert:i.convert,param:n._gainNode.gain,units:i.units,value:i.gain}),a.readOnly(n,"gain"),n}return o(e,t),e.getDefaults=function(){return Object.assign(u.ToneAudioNode.getDefaults(),{convert:!0,gain:1,numberOfInputs:1,numberOfOutputs:1,units:"gain"})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gainNode.disconnect(),this.gain.dispose(),this},e}(u.ToneAudioNode);e.Gain=c},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4);e.connect=i.connect,e.disconnect=i.disconnect,e.connectSeries=i.connectSeries},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){void 0===e&&(e="stopped");var n=t.call(this)||this;return n._initial=e,n}return o(e,t),e.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},e.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},e.prototype.getLastState=function(t,e){for(var n=this._search(e);n>=0;n--){var i=this._timeline[n];if(i.state===t)return i}},e.prototype.getNextState=function(t,e){var n=this._search(e);if(-1!==n)for(var i=n;i<this._timeline.length;i++){var o=this._timeline[i];if(o.state===t)return o}},e}(n(5).Timeline);e.StateTimeline=r},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="TransportTime",e}return o(e,t),e.prototype._now=function(){return this.context.transport.seconds},e}(n(9).TimeClass);e.TransportTimeClass=s,e.TransportTime=function(t,e){return new s(r.getContext(),t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(11),e.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},e.dbToGain=function(t){return Math.pow(10,t/20)},e.gainToDb=function(t){return Math.log(t)/Math.LN10*20},e.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)};var i=440;e.getA4=function(){return i},e.setA4=function(t){i=t},e.ftom=function(t){return 69+Math.round(12*Math.log2(t/i))}},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),s=n(1),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Emitter",e}return o(e,t),e.prototype.on=function(t,e){var n=this;return t.split(/\W+/).forEach(function(t){s.isUndef(n._events)&&(n._events={}),n._events.hasOwnProperty(t)||(n._events[t]=[]),n._events[t].push(e)}),this},e.prototype.once=function(t,e){var n=this,i=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];e.apply(void 0,o),n.off(t,i)};return this.on(t,i),this},e.prototype.off=function(t,e){var n=this;return t.split(/\W+/).forEach(function(i){if(s.isUndef(n._events)&&(n._events={}),n._events.hasOwnProperty(t))if(s.isUndef(e))n._events[t]=[];else for(var o=n._events[t],r=0;r<o.length;r++)o[r]===e&&o.splice(r,1)}),this},e.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this._events&&this._events.hasOwnProperty(t))for(var i=this._events[t].slice(0),o=0,r=i.length;o<r;o++)i[o].apply(this,e);return this},e.mixin=function(t){["on","once","off","emit"].forEach(function(n){var i=Object.getOwnPropertyDescriptor(e.prototype,n);Object.defineProperty(t.prototype,n,i)})},e.prototype.dispose=function(){return this._events=void 0,this},e}(r.Tone);e.Emitter=a},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Ticks",e.defaultUnits="i",e}return o(e,t),e.prototype._now=function(){return this.context.transport.ticks},e.prototype._beatsToUnits=function(t){return this._getPPQ()*t},e.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},e.prototype._ticksToUnits=function(t){return t},e.prototype.toTicks=function(){return this.valueOf()},e.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())},e}(n(14).TransportTimeClass);e.TicksClass=s,e.Ticks=function(t,e){return new s(r.getContext(),t,e)}},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function s(t){try{u(i.next(t))}catch(t){r(t)}}function a(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),u=n(6),c=n(0),p=n(2),h=n(1),l=function(t){function e(){var n=t.call(this)||this;n.name="ToneAudioBuffer",n.onload=p.noOp;var i=c.optionsFromArguments(e.getDefaults(),arguments,["url","onload","onerror"]);return n.reverse=i.reverse,n.onload=i.onload,i.url&&i.url instanceof AudioBuffer||i.url instanceof e?n.set(i.url):h.isString(i.url)&&n.load(i.url).catch(i.onerror),n}return o(e,t),e.getDefaults=function(){return{onerror:p.noOp,onload:p.noOp,reverse:!1}},Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this._buffer?this._buffer.sampleRate:a.getContext().sampleRate},enumerable:!0,configurable:!0}),e.prototype.set=function(t){var n=this;return t instanceof e?t.loaded?this._buffer=t.get():t.onload=function(){n.set(t),n.onload(n)}:this._buffer=t,this._reversed&&this._reverse(),this},e.prototype.get=function(){return this._buffer},e.prototype.load=function(t){return r(this,void 0,void 0,function(){var n,i,o,r;return s(this,function(s){switch(s.label){case 0:n=e.load(t),e.downloads.push(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n];case 2:return i=s.sent(),this.set(i),this.onload(this),[3,4];case 3:throw o=s.sent(),r=e.downloads.indexOf(n),e.downloads.splice(r,1),o;case 4:return[2,this]}})})},e.prototype.dispose=function(){return this._buffer=void 0,this},e.prototype.fromArray=function(t){for(var e=h.isArray(t)&&t[0].length>0,n=e?t.length:1,i=e?t[0].length:t.length,o=a.getContext(),r=o.createBuffer(n,i,o.sampleRate),s=e||1!==n?t:[t],u=0;u<n;u++)r.copyToChannel(s[u],u);return this._buffer=r,this},e.prototype.toMono=function(t){if(h.isNumber(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),n=this.numberOfChannels,i=0;i<n;i++)for(var o=this.toArray(i),r=0;r<o.length;r++)e[r]+=o[r];e=e.map(function(t){return t/n}),this.fromArray(e)}return this},e.prototype.toArray=function(t){if(h.isNumber(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],n=0;n<this.numberOfChannels;n++)e[n]=this.getChannelData(n);return e},e.prototype.getChannelData=function(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)},e.prototype.slice=function(t,n){void 0===n&&(n=this.length);for(var i=Math.floor(t*this.sampleRate),o=Math.floor(n*this.sampleRate),r=[],s=0;s<this.numberOfChannels;s++)r[s]=this.toArray(s).slice(i,o);return(new e).fromArray(r)},e.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(e.prototype,"loaded",{get:function(){return this.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())},enumerable:!0,configurable:!0}),e.fromArray=function(t){return(new e).fromArray(t)},e.fromUrl=function(t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,(new e).load(t)];case 1:return[2,n.sent()]}})})},e.load=function(t){return r(this,void 0,void 0,function(){var n,i,o,r,u,c,p,h;return s(this,function(s){switch(s.label){case 0:if(n=t.match(/\[(.+\|?)+\]$/)){for(i=n[1].split("|"),o=i[0],r=0,u=i;r<u.length;r++)if(c=u[r],e.supportsType(c)){o=c;break}t=t.replace(n[0],o)}return[4,fetch(e.baseUrl+t)];case 1:if(!(p=s.sent()).ok)throw new Error("could not load url: "+t);return[4,p.arrayBuffer()];case 2:return h=s.sent(),[4,a.getContext().decodeAudioData(h)];case 3:return[2,s.sent()]}})})},e.supportsType=function(t){var e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)},e.loaded=function(){return r(this,void 0,void 0,function(){var t,n;return s(this,function(i){switch(i.label){case 0:t=0,n=e.downloads,i.label=1;case 1:return t<n.length?[4,n[t]]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e.baseUrl="",e.downloads=[],e}(u.Tone);e.ToneAudioBuffer=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[];e.onContextInit=function(t){i.push(t)},e.initializeContext=function(t){i.forEach(function(e){return e(t)})}},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function s(t){try{u(i.next(t))}catch(t){r(t)}}function a(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(46),u=n(0),c=n(16),p=n(5),h=n(1),l=n(45),f=n(19),_=function(t){function e(){var n=t.call(this)||this;n.name="Context",n._constants=new Map,n._timeouts=new p.Timeline,n._timeoutIds=0,n._initialized=!1;var i=u.optionsFromArguments(e.getDefaults(),arguments,["context"]);return n._context=i.context,n._latencyHint=i.latencyHint,n.lookAhead=i.lookAhead,n._ticker=new a.Ticker(n.emit.bind(n,"tick"),i.clockSource,i.updateInterval),n.on("tick",n._timeoutLoop.bind(n)),n._context.addEventListener("statechange",function(){n.emit("statechange",n.state)}),n}return o(e,t),e.getDefaults=function(){return{clockSource:"worker",context:l.getAudioContext(),latencyHint:"interactive",lookAhead:.1,updateInterval:.03}},e.prototype.initialize=function(){return this._initialized||(f.initializeContext(this),this._initialized=!0),this},e.prototype.createAnalyser=function(){return this._context.createAnalyser()},e.prototype.createOscillator=function(){return this._context.createOscillator()},e.prototype.createBufferSource=function(){return this._context.createBufferSource()},e.prototype.createBiquadFilter=function(){return this._context.createBiquadFilter()},e.prototype.createBuffer=function(t,e,n){return this._context.createBuffer(t,e,n)},e.prototype.createChannelMerger=function(t){return this._context.createChannelMerger(t)},e.prototype.createChannelSplitter=function(t){return this._context.createChannelSplitter(t)},e.prototype.createConstantSource=function(){return this._context.createConstantSource()},e.prototype.createConvolver=function(){return this._context.createConvolver()},e.prototype.createDelay=function(t){return this._context.createDelay(t)},e.prototype.createDynamicsCompressor=function(){return this._context.createDynamicsCompressor()},e.prototype.createGain=function(){return this._context.createGain()},e.prototype.createIIRFilter=function(t,e){return this._context.createIIRFilter(t,e)},e.prototype.createPanner=function(){return this._context.createPanner()},e.prototype.createPeriodicWave=function(t,e,n){return this._context.createPeriodicWave(t,e,n)},e.prototype.createStereoPanner=function(){return this._context.createStereoPanner()},e.prototype.createWaveShaper=function(){return this._context.createWaveShaper()},e.prototype.decodeAudioData=function(t){return this._context.decodeAudioData(t)},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._context.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._context.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this._context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listener",{get:function(){return this._context.listener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transport",{get:function(){return this.assert(this._initialized,"The context must be initialized before being used by invoking context.initialize()"),this._transport},set:function(t){this.assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destination",{get:function(){return this.assert(this._initialized,"The context must be initialized before being used by invoking context.initialize()"),this._destination},set:function(t){this.assert(!this._initialized,"The transport cannot be set after initialization."),this._destination=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=0;if(this._latencyHint=t,h.isString(t))switch(t){case"interactive":e=.1;break;case"playback":e=.8;break;case"balanced":e=.25;break;case"fastest":e=.01}this.lookAhead=e,this.updateInterval=e/3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawContext",{get:function(){return this._context},enumerable:!0,configurable:!0}),e.prototype.now=function(){return this._context.currentTime+this.lookAhead},e.prototype.resume=function(){return"suspended"===this._context.state&&this._context instanceof AudioContext?this._context.resume():Promise.resolve()},e.prototype.close=function(){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this._context instanceof AudioContext?[4,this._context.close()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,this]}})})},e.prototype.getConstant=function(t){if(this._constants.has(t))return this._constants.get(t);for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),i=0;i<n.length;i++)n[i]=t;var o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=e,o.loop=!0,o.start(0),this._constants.set(t,o),o},e.prototype.dispose=function(){var t=this;return this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(function(e){return t._constants[e].disconnect()}),this},e.prototype._timeoutLoop=function(){for(var t=this.now(),e=this._timeouts.peek();this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()},e.prototype.setTimeout=function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds},e.prototype.clearTimeout=function(t){var e=this;return this._timeouts.forEach(function(n){n.id===t&&e._timeouts.remove(n)}),this},e}(c.Emitter);e.Context=_},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),s=n(8),a=n(0),u=n(22),c=function(t){function e(){var n=t.call(this,a.optionsFromArguments(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="ToneOscillatorNode",n._oscillator=n.context.createOscillator(),n._internalChannels=[n._gainNode,n._oscillator];var i=a.optionsFromArguments(e.getDefaults(),arguments,["frequency","type"]);return r.connect(n._oscillator,n._gainNode),n.type=i.type,n.frequency=new s.Param({context:n.context,param:n._oscillator.frequency,units:"frequency",value:n.toFrequency(i.frequency)}),n.detune=new s.Param({context:n.context,param:n._oscillator.detune,units:"cents",value:i.detune}),n}return o(e,t),e.getDefaults=function(){return Object.assign(u.OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})},e.prototype.start=function(t){this.log("start",t);var e=this.toSeconds(t);return this._startGain(e),this._oscillator.start(e),this},e.prototype._stopSource=function(t){this._oscillator.stop(t)},e.prototype.setPeriodicWave=function(t){return this._oscillator.setPeriodicWave(t),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this},e}(u.OneShotSource);e.ToneOscillatorNode=c},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),s=n(4),a=n(2),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onended=a.noOp,e._startTime=-1,e._stopTime=-1,e._timeout=-1,e.output=new r.Gain({context:e.context,gain:0}),e._gainNode=e.output,e._fadeIn=0,e._fadeOut=0,e._curve="linear",e.getStateAtTime=function(t){var e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},e}return o(e,t),e.getDefaults=function(){return Object.assign(s.ToneAudioNode.getDefaults(),{onended:a.noOp})},e.prototype._startGain=function(t,e){void 0===e&&(e=1),this.assert(-1===this._startTime,"Source cannot be started more than once");var n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this},e.prototype.stop=function(t){return this._stopGain(this.toSeconds(t)),this},e.prototype._stopGain=function(t){var e=this;this.assert(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();var n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(function(){e._stopSource(e.now()),e.onended(),setTimeout(function(){return e._gainNode.disconnect()},100)},this._stopTime-this.context.currentTime),this},Object.defineProperty(e.prototype,"state",{get:function(){return this.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.cancelStop=function(){return this.assert(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this},e}(s.ToneAudioNode);e.OneShotSource=u},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),s=n(8),a=n(18),u=n(0),c=n(2),p=n(1),h=n(22),l=function(t){function e(){var n=t.call(this,u.optionsFromArguments(e.getDefaults(),arguments,["buffer","onload"]))||this;n.name="ToneBufferSource",n._source=n.context.createBufferSource(),n._internalChannels=[n._gainNode,n._source],n._sourceStarted=!1,n._sourceStopped=!1;var i=u.optionsFromArguments(e.getDefaults(),arguments,["buffer","onload"]);return r.connect(n._source,n._gainNode),n._source.onended=n._stopSource.bind(n),n.playbackRate=new s.Param({context:n.context,param:n._source.playbackRate,units:"positive",value:i.playbackRate}),n.loop=i.loop,n.loopStart=i.loopStart,n.loopEnd=i.loopEnd,n._buffer=new a.ToneAudioBuffer(i.buffer,i.onload),n}return o(e,t),e.getDefaults=function(){return Object.assign(h.OneShotSource.getDefaults(),{buffer:new a.ToneAudioBuffer,curve:"linear",fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:c.noOp,playbackRate:1})},Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curve",{get:function(){return this._curve},set:function(t){this._curve=t},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e,n,i){if(void 0===i&&(i=1),this.assert(this.buffer.loaded,"buffer is either not set or not loaded"),t=this.toSeconds(t),this._startGain(t,i),e=this.loop?u.defaultArg(e,this.loopStart):u.defaultArg(e,0),e=this.toSeconds(e),e=Math.max(e,0),this.loop){var o=this.toSeconds(this.loopEnd)||this.buffer.duration,r=this.toSeconds(this.loopStart);e>=o&&(e=(e-r)%(o-r)+r)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,e<this.buffer.duration&&(this._sourceStarted=!0,this._source.start(t,e)),p.isDefined(n)){var s=this.toSeconds(n);s=Math.max(s,0),this.stop(t+s)}return this},e.prototype._stopSource=function(){var t=this;if(!this._sourceStopped){this._sourceStopped=!0;var e="exponential"===this._curve?2*this.toSeconds(this._fadeOut):0;this._sourceStarted&&-1!==this._stopTime&&this._source.stop(this._stopTime+e),this.onended(),this.onended=c.noOp,setTimeout(function(){t._source&&(t._source.disconnect(),t._gainNode.disconnect())},1e3*e+100)}},Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this},e}(h.OneShotSource);e.ToneBufferSource=l},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(26),s=n(4),a=n(0),u=n(2),c=n(13),p=n(1),h=function(t){function e(){var e=t.call(this,a.optionsFromArguments(r.Volume.getDefaults(),arguments,["volume"]))||this;e._volume=new r.Volume({context:e.context}),e.output=e._volume,e._internalChannels=[e.output],e.input=void 0,e.volume=e._volume.volume,e._state=new c.StateTimeline("stopped"),e._synced=!1,e._scheduled=[],e._syncedStart=u.noOp,e._syncedStop=u.noOp;var n=a.optionsFromArguments(r.Volume.getDefaults(),arguments,["volume"]);return u.readOnly(e,"volume"),e._state.memory=100,e.volume.value=n.volume,e.mute=n.mute,e}return o(e,t),e.getDefaults=function(){return Object.assign(s.ToneAudioNode.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(e.prototype,"state",{get:function(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e,n){var i=this;if(p.isUndef(t)&&this._synced?t=this.context.transport.seconds:(t=this.toSeconds(t),t=Math.max(t,this.context.currentTime)),"started"===this._state.getValueAtTime(t))this._state.cancel(t),this._state.setStateAtTime("started",t),this.restart(t,e,n);else if(this._state.setStateAtTime("started",t),this._synced){var o=this._state.get(t);o&&(o.offset=this.toSeconds(a.defaultArg(e,0)),o.duration=this.toSeconds(n));var r=this.context.transport.schedule(function(t){i._start(t,e,n)},t);this._scheduled.push(r),"started"===this.context.transport.state&&this._syncedStart(this.now(),this.context.transport.seconds)}else this._start.apply(this,arguments);return this},e.prototype.stop=function(t){if(p.isUndef(t)&&this._synced?t=this.context.transport.seconds:(t=this.toSeconds(t),t=Math.max(t,this.context.currentTime)),this._synced){var e=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop.apply(this,arguments);return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this},e.prototype.sync=function(){var t=this;return this._synced||(this._synced=!0,this._syncedStart=function(e,n){if(n>0){var i=t._state.get(n);if(i&&"started"===i.state&&i.time!==n){var o=n-t.toSeconds(i.time),r=void 0;i.duration&&(r=t.toSeconds(i.duration)-o),t._start(e,t.toSeconds(i.offset)+o,r)}}},this._syncedStop=function(e){var n=t.context.transport.getSecondsAtTime(Math.max(e-t.sampleTime,0));"started"===t._state.getValueAtTime(n)&&t._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this},e.prototype.unsync=function(){var t=this;return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(function(e){return t.context.transport.clear(e)}),this._scheduled=[],this._state.cancel(0),this},e.prototype.dispose=function(){return this.unsync(),this._volume.dispose(),this._state.dispose(),this},e}(s.ToneAudioNode);e.Source=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=function(){function t(e,n){this.id=t._eventId++;var i=Object.assign(t.getDefaults(),n);this.transport=e,this.callback=i.callback,this._once=i.once,this.time=i.time}return t.getDefaults=function(){return{callback:i.noOp,once:!1,time:0}},t.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))},t.prototype.dispose=function(){return this.callback=void 0,this},t._eventId=0,t}();e.TransportEvent=o},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),s=n(4),a=n(0),u=n(2),c=function(t){function e(){var n=t.call(this,a.optionsFromArguments(e.getDefaults(),arguments,["volume"]))||this;n.name="Volume",n.output=new r.Gain({context:n.context,units:"decibels"}),n._internalChannels=[n.output],n.input=n.output,n.volume=n.output.gain;var i=a.optionsFromArguments(e.getDefaults(),arguments,["volume"]);return n.volume.value=i.volume,u.readOnly(n,"volume"),n._unmutedVolume=i.volume,n.mute=i.mute,n}return o(e,t),e.getDefaults=function(){return Object.assign(s.ToneAudioNode.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return this.input.dispose(),this.volume.dispose(),this},e}(s.ToneAudioNode);e.Volume=c},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),s=n(1),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="IntervalTimeline",e._root=null,e._length=0,e}return o(e,t),e.prototype.add=function(t){this.assert(s.isDefined(t.time),"Events must have a time property"),this.assert(s.isDefined(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();var e=new u(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this},e.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o.event===t){this._removeNode(o),this._length--;break}}}return this},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.cancel=function(t){var e=this;return this.forEachFrom(t,function(t){return e.remove(t)}),this},e.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},e.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},e.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e=void 0,n=null;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()},e.prototype._rotateLeft=function(t){var e=t.parent,n=t.isLeftChild(),i=t.right;t.right=i.left,i.left=t,null!==e?n?e.left=i:e.right=i:this._setRoot(i)},e.prototype._rotateRight=function(t){var e=t.parent,n=t.isLeftChild(),i=t.left;t.left=i.right,i.right=t,null!==e?n?e.left=i:e.right=i:this._setRoot(i)},e.prototype._rebalance=function(t){var e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},e.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],i=1;i<e.length;i++)e[i].low>n.low&&(n=e[i]);return n.event}}return null},e.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse(function(t){return e.push(t)}),e.forEach(function(e){e.event&&t(e.event)})}return this},e.prototype.forEachAtTime=function(t,e){if(null!==this._root){var n=[];this._root.search(t,n),n.forEach(function(t){t.event&&e(t.event)})}return this},e.prototype.forEachFrom=function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n),n.forEach(function(t){t.event&&e(t.event)})}return this},e.prototype.dispose=function(){return null!==this._root&&this._root.traverse(function(t){return t.dispose()}),this._root=null,this},e}(r.Tone);e.IntervalTimeline=a;var u=function(){function t(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}return t.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},t.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},t.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},t.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},t.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},t.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},t.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},t.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(t.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t}()},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),s=n(0),a=n(16),u=n(2),c=n(13),p=n(40),h=function(t){function e(){var n=t.call(this,s.optionsFromArguments(e.getDefaults(),arguments,["callback","frequency"]))||this;n.name="Clock",n.callback=u.noOp,n._lastUpdate=0,n._state=new c.StateTimeline("stopped"),n._boundLoop=n._loop.bind(n);var i=s.optionsFromArguments(e.getDefaults(),arguments,["callback","frequency"]);return n.callback=i.callback,n._tickSource=new p.TickSource({context:n.context,frequency:i.frequency,units:i.units}),n._lastUpdate=0,n.frequency=n._tickSource.frequency,u.readOnly(n,"frequency"),n._state.setStateAtTime("stopped",0),n.context.on("tick",n._boundLoop),n}return o(e,t),e.getDefaults=function(){return Object.assign(r.ToneWithContext.getDefaults(),{callback:u.noOp,frequency:1,units:"hertz"})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){this.context.resume();var n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this},e.prototype.stop=function(t){var e=this.toSeconds(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this},e.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this},Object.defineProperty(e.prototype,"ticks",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t},enumerable:!0,configurable:!0}),e.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},e.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},e.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},e.prototype.nextTickTime=function(t,e){var n=this.toSeconds(e),i=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(i+t,n)},e.prototype._loop=function(){var t=this,e=this._lastUpdate,n=this.now();this._lastUpdate=n,e!==n&&(this._state.forEachBetween(e,n,function(e){switch(e.state){case"started":var n=t._tickSource.getTicksAtTime(e.time);t.emit("start",e.time,n);break;case"stopped":0!==e.time&&t.emit("stop",e.time);break;case"paused":t.emit("pause",e.time)}}),this._tickSource.forEachTickBetween(e,n,function(e,n){t.callback(e,n)}))},e.prototype.getStateAtTime=function(t){var e=this.toSeconds(t);return this._state.getValueAtTime(e)},e.prototype.dispose=function(){return this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this},e}(r.ToneWithContext);e.Clock=h,a.Emitter.mixin(h)},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),s=n(15),a=n(15),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Frequency",e.defaultUnits="hz",e}return o(e,t),Object.defineProperty(e,"A4",{get:function(){return a.getA4()},set:function(t){a.setA4(t)},enumerable:!0,configurable:!0}),e.prototype._getExpressions=function(n){return Object.assign({},t.prototype._getExpressions.call(this,n),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this._defaultUnits?t:e.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,n){var i=c[t.toLowerCase()]+12*(parseInt(n,10)+1);return"midi"===this._defaultUnits?i:e.mtof(i)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var i=1;return t&&"0"!==t&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}}})},e.prototype.transpose=function(t){return new e(this.context,this.valueOf()*s.intervalToFrequencyRatio(t))},e.prototype.harmonize=function(t){var e=this;return t.map(function(t){return e.transpose(t)})},e.prototype.toMidi=function(){return e.ftom(this.valueOf())},e.prototype.toNote=function(){var t=this.toFrequency(),n=Math.log2(t/e.A4),i=Math.round(12*n)+57,o=Math.floor(i/12);return o<0&&(i+=-12*o),p[i%12]+o.toString()},e.prototype.toSeconds=function(){return 1/t.prototype.toSeconds.call(this)},e.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())},e.prototype._noArg=function(){return 0},e.prototype._frequencyToUnits=function(t){return t},e.prototype._ticksToUnits=function(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))},e.prototype._beatsToUnits=function(e){return 1/t.prototype._beatsToUnits.call(this,e)},e.prototype._secondsToUnits=function(t){return 1/t},e.mtof=function(t){return e.A4*Math.pow(2,(t-69)/12)},e.ftom=function(t){return a.ftom(t)},e}(n(9).TimeClass);e.FrequencyClass=u;var c={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},p=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];e.Frequency=function(t,e){return new u(r.getContext(),t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version="14.0.2"},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),s=n(4),a=n(0),u=function(t){function e(){var n=t.call(this,a.optionsFromArguments(e.getDefaults(),arguments,["value","units"]))||this;n.name="Signal",n.override=!0,n._constantSource=n.context.createConstantSource(),n.output=n._constantSource,n._internalChannels=[n._constantSource];var i=a.optionsFromArguments(e.getDefaults(),arguments,["value","units"]);return n._constantSource.start(0),n.input=n._param=new r.Param({context:n.context,convert:i.convert,param:n._constantSource.offset,units:i.units,value:i.value}),n}return o(e,t),e.getDefaults=function(){return Object.assign(s.ToneAudioNode.getDefaults(),{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",convert:!0,numberOfInputs:1,numberOfOutputs:1,units:"number",value:0})},e.prototype.connect=function(n,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),(n instanceof r.Param||n instanceof AudioParam||n instanceof e&&n.override)&&(n.cancelScheduledValues(0),n.setValueAtTime(0,0),n instanceof e&&(n.overridden=!0)),t.prototype.connect.call(this,n,i,o),this},e.prototype.setValueAtTime=function(t,e){return this._param.setValueAtTime(t,e),this},e.prototype.getValueAtTime=function(t){return this._param.getValueAtTime(t)},e.prototype.setRampPoint=function(t){return this._param.setRampPoint(t),this},e.prototype.linearRampToValueAtTime=function(t,e){return this._param.linearRampToValueAtTime(t,e),this},e.prototype.exponentialRampToValueAtTime=function(t,e){return this._param.exponentialRampToValueAtTime(t,e),this},e.prototype.exponentialRampTo=function(t,e,n){return this._param.exponentialRampTo(t,e,n),this},e.prototype.linearRampTo=function(t,e,n){return this._param.linearRampTo(t,e,n),this},e.prototype.targetRampTo=function(t,e,n){return this._param.targetRampTo(t,e,n),this},e.prototype.exponentialApproachValueAtTime=function(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this},e.prototype.setTargetAtTime=function(t,e,n){return this._param.setTargetAtTime(t,e,n),this},e.prototype.setValueCurveAtTime=function(t,e,n,i){return this._param.setValueCurveAtTime(t,e,n,i),this},e.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(t),this},e.prototype.cancelAndHoldAtTime=function(t){return this._param.cancelAndHoldAtTime(t),this},e.prototype.rampTo=function(t,e,n){return this._param.rampTo(t,e,n),this},Object.defineProperty(e.prototype,"value",{get:function(){return this._param.value},set:function(t){this._param.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"convert",{get:function(){return this._param.convert},set:function(t){this._param.convert=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return this._param.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overridden",{get:function(){return this._param.overridden},set:function(t){this._param.overridden=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return this._param.maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return this._param.minValue},enumerable:!0,configurable:!0}),e}(s.ToneAudioNode);e.Signal=u},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),s=n(2),a=n(31),u=n(24),c=n(21),p=function(t){function e(){var n=t.call(this,r.optionsFromArguments(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="Oscillator",n._oscillator=null;var i=r.optionsFromArguments(e.getDefaults(),arguments,["frequency","type"]);return n.frequency=new a.Signal({context:n.context,units:"frequency",value:i.frequency}),s.readOnly(n,"frequency"),n.detune=new a.Signal({context:n.context,units:"cents",value:i.detune}),s.readOnly(n,"detune"),n._partials=i.partials,n._partialCount=i.partialCount,n._phase=i.phase,n._type=i.type,i.partialCount&&"custom"!==i.type&&(n._type=n.baseType+i.partialCount.toString()),n.phase=n._phase,n}return o(e,t),e.getDefaults=function(){return Object.assign(u.Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})},e.prototype._start=function(t){var e=this;this.log("start",t);var n=new c.ToneOscillatorNode({context:this.context});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),n.onended=function(){setTimeout(function(){e.frequency.disconnect(n.frequency),e.detune.disconnect(n.detune)},100)},t=this.toSeconds(t),this._oscillator.start(t)},e.prototype._stop=function(t){return this.log("stop",t),this._oscillator&&(t=this.toSeconds(t),this._oscillator.stop(t)),this},e.prototype.restart=function(t){return this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(this.toSeconds(t)),this},e.prototype.syncFrequency=function(){return this.context.transport.syncSignal(this.frequency),this},e.prototype.unsyncFrequency=function(){return this.context.transport.unsyncSignal(this.frequency),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){var e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{var n=this._getRealImaginary(t,this._phase),i=n[0],o=n[1],r=this.context.createPeriodicWave(i,o);this._wave=r,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._type.replace(this.partialCount,"")},set:function(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._partialCount},set:function(t){var e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);n&&(e=n[1]),"custom"!==this._type&&(this.type=0===t?e:e+t.toString())},enumerable:!0,configurable:!0}),e.prototype.get=function(){var e=t.prototype.get.call(this);return"custom"!==e.type&&delete e.partials,e},e.prototype._getRealImaginary=function(t,e){var n=2048,i=new Float32Array(n),o=new Float32Array(n),r=1;if("custom"===t)r=this._partials.length+1,this._partialCount=this._partials.length,n=r;else{var s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);s?(r=parseInt(s[2],10)+1,this._partialCount=parseInt(s[2],10),t=s[1],n=r=Math.max(r,2)):this._partialCount=0,this._partials=[]}for(var a=1;a<n;++a){var u=2/(a*Math.PI),c=void 0;switch(t){case"sine":c=a<=r?1:0,this._partials[a-1]=c;break;case"square":c=1&a?2*u:0,this._partials[a-1]=c;break;case"sawooth":c=u*(1&a?1:-1),this._partials[a-1]=c;break;case"triangle":c=1&a?u*u*2*(a-1>>1&1?-1:1):0,this._partials[a-1]=c;break;case"custom":c=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==c?(i[a]=-c*Math.sin(e*a),o[a]=c*Math.cos(e*a)):(i[a]=0,o[a]=0)}return[i,o]},e.prototype._inverseFFT=function(t,e,n){for(var i=0,o=t.length,r=0;r<o;r++)i+=t[r]*Math.cos(r*n)+e[r]*Math.sin(r*n);return i},e.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],n=t[1],i=0,o=2*Math.PI,r=0;r<8;r++)i=Math.max(this._inverseFFT(e,n,r/8*o),i);return-this._inverseFFT(e,n,this._phase)/i},Object.defineProperty(e.prototype,"partials",{get:function(){return this._partials},set:function(t){this._partials=t,this.type="custom"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this},e}(u.Source);e.Oscillator=p},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),s=n(0),a=n(24),u=n(23),c=function(t){function e(){var n=t.call(this,s.optionsFromArguments(e.getDefaults(),arguments,["type"]))||this;n.name="Noise",n._source=null;var i=s.optionsFromArguments(e.getDefaults(),arguments,["type"]);return n._playbackRate=i.playbackRate,n.type=i.type,n}return o(e,t),e.getDefaults=function(){return Object.assign(a.Source.getDefaults(),{playbackRate:1,type:"white"})},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){if(this.assert(t in h,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){var e=this.now();this._stop(e),this._start(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)},enumerable:!0,configurable:!0}),e.prototype._start=function(t){var e=h[this._type];this._source=new u.ToneBufferSource(e).connect(this.output),this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))},e.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},e.prototype.restart=function(t){return this._stop(t),this._start(t),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._source&&this._source.disconnect(),this},e}(a.Source);e.Noise=c;var p={brown:null,pink:null,white:null},h={get brown(){if(!p.brown){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var i=0,o=0;o<220500;o++){var s=2*Math.random()-1;n[o]=(i+.02*s)/1.02,i=n[o],n[o]*=3.5}}p.brown=(new r.ToneAudioBuffer).fromArray(t)}return p.brown},get pink(){if(!p.pink){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;var i=void 0,o=void 0,s=void 0,a=void 0,u=void 0,c=void 0,h=void 0;i=o=s=a=u=c=h=0;for(var l=0;l<220500;l++){var f=2*Math.random()-1;i=.99886*i+.0555179*f,o=.99332*o+.0750759*f,s=.969*s+.153852*f,a=.8665*a+.3104856*f,u=.55*u+.5329522*f,c=-.7616*c-.016898*f,n[l]=i+o+s+a+u+c+h+.5362*f,n[l]*=.11,h=.115926*f}}p.pink=(new r.ToneAudioBuffer).fromArray(t)}return p.pink},get white(){if(!p.white){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var i=0;i<220500;i++)n[i]=2*Math.random()-1}p.white=(new r.ToneAudioBuffer).fromArray(t)}return p.white}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(33);e.Noise=i.Noise;var o=n(32);e.Oscillator=o.Oscillator;var r=n(21);e.ToneOscillatorNode=r.ToneOscillatorNode;var s=n(23);e.ToneBufferSource=s.ToneBufferSource},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),s=n(25),a=function(t){function e(n,i){var o=t.call(this,n,i)||this;o._currentId=-1,o._nextId=-1,o._nextTick=o.time,o._boundRestart=o._restart.bind(o);var s=Object.assign(e.getDefaults(),i);return o.duration=r.Ticks(s.duration).valueOf(),o._interval=r.Ticks(s.interval).valueOf(),o._nextTick=s.time,o.transport.on("start",o._boundRestart),o.transport.on("loopStart",o._boundRestart),o.context=o.transport.context,o._restart(),o}return o(e,t),e.getDefaults=function(){return Object.assign({},s.TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})},e.prototype.invoke=function(e){this._createEvents(e),t.prototype.invoke.call(this,e)},e.prototype._createEvents=function(t){var e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new r.TicksClass(this.context,this._nextTick).toSeconds()))},e.prototype._restart=function(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;var e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new r.TicksClass(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new r.TicksClass(this.context,this._nextTick).toSeconds())},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this},e}(s.TransportEvent);e.TransportRepeatEvent=a},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),s=n(19),a=n(10),u=n(7),c=n(17),p=n(14),h=n(0),l=n(16),f=n(2),_=n(27),d=n(5),m=n(1),y=n(28),v=n(25),g=n(35),b=function(t){function e(){var n=t.call(this,h.optionsFromArguments(e.getDefaults(),arguments))||this;n.name="Transport",n.loop=!1,n._loopStart=0,n._loopEnd=0,n._scheduledEvents={},n._timeline=new d.Timeline,n._repeatedEvents=new _.IntervalTimeline,n._syncedSignals=[],n._swingAmount=0;var i=h.optionsFromArguments(e.getDefaults(),arguments);return n._ppq=i.ppq,n._clock=new y.Clock({callback:n._processTick.bind(n),context:n.context,frequency:0,units:"bpm"}),n._bindClockEvents(),n.bpm=n._clock.frequency,n._clock.frequency.multiplier=i.ppq,n.bpm.value=i.bpm,f.readOnly(n,"bpm"),n._timeSignature=i.timeSignature,n._swingTicks=i.ppq/2,n}return o(e,t),e.getDefaults=function(){return Object.assign(u.ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})},e.prototype._processTick=function(t,e){if(this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){var n=e%(2*this._swingTicks)/(2*this._swingTicks),i=Math.sin(n*Math.PI)*this._swingAmount;t+=new c.TicksClass(this.context,2*this._swingTicks/3).toSeconds()*i}this.loop&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._timeline.forEachAtTime(e,function(e){return e.invoke(t)})},e.prototype.schedule=function(t,e){var n=new v.TransportEvent(this,{callback:t,time:new p.TransportTimeClass(this.context,e).toTicks()});return this._addEvent(n,this._timeline)},e.prototype.scheduleRepeat=function(t,e,n,i){void 0===i&&(i=1/0);var o=new g.TransportRepeatEvent(this,{callback:t,duration:new r.TimeClass(this.context,i).toTicks(),interval:new r.TimeClass(this.context,e).toTicks(),time:new p.TransportTimeClass(this.context,n).toTicks()});return this._addEvent(o,this._repeatedEvents)},e.prototype.scheduleOnce=function(t,e){var n=new v.TransportEvent(this,{callback:t,once:!0,time:new p.TransportTimeClass(this.context,e).toTicks()});return this._addEvent(n,this._timeline)},e.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},e.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},e.prototype.cancel=function(t){var e=this;void 0===t&&(t=0);var n=this.toTicks(t);return this._timeline.forEachFrom(n,function(t){return e.clear(t.id)}),this._repeatedEvents.forEachFrom(n,function(t){return e.clear(t.id)}),this},e.prototype._bindClockEvents=function(){var t=this;this._clock.on("start",function(e,n){n=new c.TicksClass(t.context,n).toSeconds(),t.emit("start",e,n)}),this._clock.on("stop",function(e){t.emit("stop",e)}),this._clock.on("pause",function(e){t.emit("pause",e)})},Object.defineProperty(e.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){var n;return m.isDefined(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this},e.prototype.stop=function(t){return this._clock.stop(t),this},e.prototype.pause=function(t){return this._clock.pause(t),this},e.prototype.toggle=function(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this},Object.defineProperty(e.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){m.isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return r.Time(this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return r.Time(this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)},enumerable:!0,configurable:!0}),e.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(e.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swingSubdivision",{get:function(){return new c.TicksClass(this.context,this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return new c.TicksClass(this.context,e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();"started"===this.state?(this.emit("stop",e),this._clock.setTicksAtTime(t,e),this.emit("start",e,this.seconds)):this._clock.setTicksAtTime(t,e)}},enumerable:!0,configurable:!0}),e.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},e.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(e.prototype,"PPQ",{get:function(){return this._clock.frequency.multiplier},set:function(t){this._clock.frequency.multiplier=t},enumerable:!0,configurable:!0}),e.prototype.nextSubdivision=function(t){if(t=this.toTicks(t),"started"!==this.state)return 0;var e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)},e.prototype.syncSignal=function(t,e){if(!e){var n=this.now();if(0!==t.getValueAtTime(n)){var i=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/i}else e=0}var o=new a.Gain(e);return this.bpm.connect(o),o.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:o,signal:t}),t.value=0,this},e.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this},e.prototype.dispose=function(){return this._clock.dispose(),f.writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this},e}(u.ToneWithContext);e.Transport=b,l.Emitter.mixin(b),s.onContextInit(function(t){t.transport=new b({context:t})})},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(26),s=n(12),a=n(0),u=n(19),c=n(10),p=n(4),h=function(t){function e(){var n=t.call(this,a.optionsFromArguments(e.getDefaults(),arguments))||this;n.name="Destination",n.input=new r.Volume({context:n.context}),n.output=new c.Gain({context:n.context}),n.volume=n.input.volume,n._internalChannels=[n.input,n.output];var i=a.optionsFromArguments(e.getDefaults(),arguments);return s.connectSeries(n.input,n.output,n.context.rawContext.destination),n.volume.value=i.volume,n.mute=i.mute,n}return o(e,t),e.getDefaults=function(){return Object.assign(p.ToneAudioNode.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this.input.mute},set:function(t){this.input.mute=t},enumerable:!0,configurable:!0}),e.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.input.disconnect(),t.unshift(this.input),t.push(this.output),s.connectSeries.apply(void 0,t),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.volume.dispose(),this},e}(p.ToneAudioNode);e.Destination=h,u.onContextInit(function(t){t.destination=new h({context:t})})},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),s=n(5),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Draw",e.expiration=.25,e.anticipation=.008,e._events=new s.Timeline,e._boundDrawLoop=e._drawLoop.bind(e),e._animationFrame=-1,e}return o(e,t),e.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this},e.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},e.prototype._drawLoop=function(){for(var t=this.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=t;){var e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))},e.prototype.dispose=function(){return this._events.dispose(),cancelAnimationFrame(this._animationFrame),this},e}(r.ToneWithContext);e.Draw=a},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),s=n(8),a=n(3),u=n(0),c=n(5),p=n(1),h=function(t){function e(){var n=t.call(this,u.optionsFromArguments(e.getDefaults(),arguments,["value"]))||this;n.name="TickSignal",n._events=new c.Timeline(1/0),n._sig=n.context.createConstantSource(),n._param=n._sig.offset,n._multiplier=1;var i=u.optionsFromArguments(e.getDefaults(),arguments,["value"]);return n._sig=n.context.createConstantSource(),n._sig.start(0),n._param=n._sig.offset,n.multiplier=i.multiplier,n.cancelScheduledValues(0),n._events.add({ticks:0,time:0,type:"setValue",value:n._fromType(i.value)}),n.setValueAtTime(i.value,0),n}return o(e,t),e.getDefaults=function(){return Object.assign(s.Param.getDefaults(),{multiplier:1,param:a.getContext().createConstantSource().offset,units:"hertz",value:1})},e.prototype.setTargetAtTime=function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);for(var i=this._fromType(t),o=this._events.get(e),r=Math.round(Math.max(1/n,1)),s=0;s<=r;s++){var a=n*s+e,u=this._exponentialApproach(o.time,o.value,i,n,a);this.linearRampToValueAtTime(this._toType(u),a)}return this},e.prototype.setValueAtTime=function(e,n){var i=this.toSeconds(n);t.prototype.setValueAtTime.call(this,e,n);var o=this._events.get(i),r=this._events.previousEvent(o),s=this._getTicksUntilEvent(r,i);return o.ticks=Math.max(s,0),this},e.prototype.linearRampToValueAtTime=function(e,n){var i=this.toSeconds(n);t.prototype.linearRampToValueAtTime.call(this,e,n);var o=this._events.get(i),r=this._events.previousEvent(o),s=this._getTicksUntilEvent(r,i);return o.ticks=Math.max(s,0),this},e.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e);for(var n=this._fromType(t),i=this._events.get(e),o=Math.round(Math.max(10*(e-i.time),1)),r=(e-i.time)/o,s=0;s<=o;s++){var a=r*s+i.time,u=this._exponentialInterpolate(i.time,i.value,e,n,a);this.linearRampToValueAtTime(this._toType(u),a)}return this},e.prototype._getTicksUntilEvent=function(t,e){if(null===t)t={ticks:0,time:0,type:"setValue",value:0};else if(p.isUndef(t.ticks)){var n=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(n,t.time)}var i=this._fromType(this.getValueAtTime(t.time)),o=this._fromType(this.getValueAtTime(e)),r=this._events.get(e);return r&&r.time===e&&"setValue"===r.type&&(o=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(i+o)+t.ticks},e.prototype.getTicksAtTime=function(t){var e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)},e.prototype.getDurationOfTicks=function(t,e){var n=this.toSeconds(e),i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-n},e.prototype.getTimeOfTick=function(t){var e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linear"===n.type&&e.value!==n.value){var i=this._fromType(this.getValueAtTime(e.time)),o=(this._fromType(this.getValueAtTime(n.time))-i)/(n.time-e.time),r=Math.sqrt(Math.pow(i,2)-2*o*(e.ticks-t)),s=(-i+r)/o;return(s>0?s:(-i-r)/o)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue},e.prototype.ticksToTime=function(t,e){return this.getDurationOfTicks(t,e)},e.prototype.timeToTicks=function(t,e){var n=this.toSeconds(e),i=this.toSeconds(t),o=this.getTicksAtTime(n);return this.getTicksAtTime(n+i)-o},e.prototype._fromType=function(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):t.prototype._fromType.call(this,e)},e.prototype._toType=function(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:t.prototype._toType.call(this,e)},Object.defineProperty(e.prototype,"multiplier",{get:function(){return this._multiplier},set:function(t){var e=this.value;this._multiplier=t,this.value=e},enumerable:!0,configurable:!0}),e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),r.connect(this._sig,t,e,n),this},e}(s.Param);e.TickSignal=h},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),s=n(0),a=n(2),u=n(13),c=n(5),p=n(1),h=n(39),l=function(t){function e(){var n=t.call(this,s.optionsFromArguments(e.getDefaults(),arguments,["frequency"]))||this;n.name="TickSource",n._state=new u.StateTimeline,n._tickOffset=new c.Timeline;var i=s.optionsFromArguments(e.getDefaults(),arguments,["frequency"]);return n.frequency=new h.TickSignal({context:n.context,units:i.units,value:n.toFrequency(i.frequency)}),a.readOnly(n,"frequency"),n._state.setStateAtTime("stopped",0),n.setTicksAtTime(0,0),n}return o(e,t),e.getDefaults=function(){return Object.assign({frequency:1,units:"hertz"},r.ToneWithContext.getDefaults())},Object.defineProperty(e.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){var n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),p.isDefined(e)&&this.setTicksAtTime(e,n)),this},e.prototype.stop=function(t){var e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){var n=this._state.get(e);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this},e.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this},e.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},e.prototype.getTicksAtTime=function(t){var e=this,n=this.toSeconds(t),i=this._state.getLastState("stopped",n),o={state:"paused",time:n};this._state.add(o);var r=i,s=0;return this._state.forEachBetween(i.time,n+this.sampleTime,function(t){var n=r.time,i=e._tickOffset.get(t.time);i&&i.time>=r.time&&(s=i.ticks,n=i.time),"started"===r.state&&"started"!==t.state&&(s+=e.frequency.getTicksAtTime(t.time)-e.frequency.getTicksAtTime(n)),r=t}),this._state.remove(o),s},Object.defineProperty(e.prototype,"ticks",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)},enumerable:!0,configurable:!0}),e.prototype.getSecondsAtTime=function(t){var e=this;t=this.toSeconds(t);var n=this._state.getLastState("stopped",t),i={state:"paused",time:t};this._state.add(i);var o=n,r=0;return this._state.forEachBetween(n.time,t+this.sampleTime,function(t){var n=o.time,i=e._tickOffset.get(t.time);i&&i.time>=o.time&&(r=i.seconds,n=i.time),"started"===o.state&&"started"!==t.state&&(r+=t.time-n),o=t}),this._state.remove(i),r},e.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this},e.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},e.prototype.getTimeOfTick=function(t,e){void 0===e&&(e=this.now());var n=this._tickOffset.get(e),i=this._state.get(e),o=Math.max(n.time,i.time),r=this.frequency.getTicksAtTime(o)+t-n.ticks;return this.frequency.getTimeOfTick(r)},e.prototype.forEachTickBetween=function(t,e,n){var i=this,o=this.toSeconds(t),r=this.toSeconds(e),s=this._state.get(o);this._state.forEachBetween(o,r,function(t){s&&"started"===s.state&&"started"!==t.state&&i.forEachTickBetween(Math.max(s.time,o),t.time-i.sampleTime,n),s=t});var a=null;if(s&&"started"===s.state&&this._state){var u=Math.max(s.time,o),c=this.frequency.getTicksAtTime(u),p=(c-this.frequency.getTicksAtTime(s.time))%1;0!==p&&(p=1-p);for(var h=this.frequency.getTimeOfTick(c+p);h<r&&this._state;){try{n(h,Math.round(this.getTicksAtTime(h)))}catch(t){a=t;break}this._state&&(h+=this.frequency.getDurationOfTicks(1,h))}}if(a)throw a;return this},e.prototype.dispose=function(){return this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this},e}(r.ToneWithContext);e.TickSource=l},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),s=n(0),a=n(2),u=n(4),c=function(t){function e(){var n=t.call(this,s.optionsFromArguments(e.getDefaults(),arguments,["delayTime","maxDelay"]))||this;n.name="Delay";var i=s.optionsFromArguments(e.getDefaults(),arguments,["delayTime","maxDelay"]);return n.maxDelay=Math.max(n.toSeconds(i.maxDelay),n.toSeconds(i.delayTime)),n._delayNode=n.input=n.output=n.context.createDelay(i.maxDelay),n._internalChannels=[n._delayNode],n.delayTime=new r.Param({context:n.context,param:n._delayNode.delayTime,units:"time",value:i.delayTime}),a.readOnly(n,"delayTime"),n}return o(e,t),e.getDefaults=function(){return Object.assign(u.ToneAudioNode.getDefaults(),{delayTime:0,maxDelay:1,numberOfInputs:1,numberOfOutputs:1})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._delayNode.disconnect(),this.delayTime.dispose(),this},e}(u.ToneAudioNode);e.Delay=c},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,i){var o=t.call(this,{clockSource:"offline",context:e instanceof OfflineAudioContext?e:new OfflineAudioContext(e,n*i,i),lookAhead:0,updateInterval:e instanceof OfflineAudioContext?128/e.sampleRate:128/i})||this;return o.name="OfflineContext",o._currentTime=0,o._duration=e instanceof OfflineAudioContext?e.length/e.sampleRate:n,o}return o(e,t),e.prototype.now=function(){return this._currentTime},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._currentTime},enumerable:!0,configurable:!0}),e.prototype.render=function(){for(;this._duration-this._currentTime>=0;)this.emit("tick"),this._currentTime+=.005;return this._context.startRendering()},e.prototype.close=function(){return Promise.resolve(this)},e}(n(20).Context);e.OfflineContext=r},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),s=n(3),a=n(1),u=function(t){function e(n,i,o){var r=t.call(this)||this;return r.defaultUnits="s",r._val=i,r._units=o,r.context=n,r._expressions=r._getExpressions(r.defaultUnits),i instanceof e&&r.fromType(i),r}return o(e,t),e.getDefaults=function(){return{context:s.getContext()}},e.prototype._getExpressions=function(t){var e=this;return{hz:{method:function(t){return e._frequencyToUnits(parseFloat(t))},regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:function(t){return e._ticksToUnits(parseInt(t,10))},regexp:/^(\d+)i$/i},m:{method:function(t){return e._beatsToUnits(parseInt(t,10)*e._getTimeSignature())},regexp:/^(\d+)m$/i},n:{method:function(t,n){var i=parseInt(t,10),o="."===n?1.5:1;return 1===i?e._beatsToUnits(e._getTimeSignature())*o:e._beatsToUnits(4/i)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:function(n){return e._expressions[t].method.call(e,n)},regexp:/^(\d+(?:\.\d+)?)$/},s:{method:function(t){return e._secondsToUnits(parseFloat(t))},regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:function(t){return parseInt(t,10)/e.context.sampleRate},regexp:/^(\d+)samples$/},t:{method:function(t){var n=parseInt(t,10);return e._beatsToUnits(8/(3*Math.floor(n)))},regexp:/^(\d+)t$/i},tr:{method:function(t,n,i){var o=0;return t&&"0"!==t&&(o+=e._beatsToUnits(e._getTimeSignature()*parseFloat(t))),n&&"0"!==n&&(o+=e._beatsToUnits(parseFloat(n))),i&&"0"!==i&&(o+=e._beatsToUnits(parseFloat(i)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}},e.prototype.valueOf=function(){if(a.isUndef(this._val))return this._noArg();if(a.isString(this._val)&&a.isUndef(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(a.isObject(this._val)){var e=0;for(var n in this._val)if(a.isDefined(this._val[n])){var i=this._val[n];e+=new this.constructor(this.context,n).valueOf()*i}return e}if(a.isDefined(this._units)){var o=this._expressions[this._units],r=this._val.toString().trim().match(o.regexp);return r?o.method.apply(this,r.slice(1)):o.method.call(this,this._val)}return a.isString(this._val)?parseFloat(this._val):this._val},e.prototype._frequencyToUnits=function(t){return 1/t},e.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},e.prototype._secondsToUnits=function(t){return t},e.prototype._ticksToUnits=function(t){return t*this._beatsToUnits(1)/this._getPPQ()},e.prototype._noArg=function(){return this._now()},e.prototype._getBpm=function(){return this.context.transport.bpm.value},e.prototype._getTimeSignature=function(){return this.context.transport.timeSignature},e.prototype._getPPQ=function(){return this.context.transport.PPQ},e.prototype.fromType=function(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency()}},e.prototype.toFrequency=function(){return 1/this.toSeconds()},e.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},e.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},e.prototype.toTicks=function(){return 0},e.prototype.dispose=function(){return this},e}(r.Tone);e.TypeBaseClass=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10);e.Gain=i.Gain;var o=n(20);e.Context=o.Context;var r=n(42);e.OfflineContext=r.OfflineContext;var s=n(18);e.ToneAudioBuffer=s.ToneAudioBuffer;var a=n(41);e.Delay=a.Delay;var u=n(28);e.Clock=u.Clock;var c=n(29);e.Frequency=c.Frequency;var p=n(9);e.Time=p.Time;var h=n(17);e.Ticks=h.Ticks;var l=n(14);e.TransportTime=l.TransportTime;var f=n(38);e.Draw=f.Draw;var _=n(13);e.StateTimeline=_.StateTimeline;var d=n(27);e.IntervalTimeline=d.IntervalTimeline;var m=n(5);e.Timeline=m.Timeline;var y=n(16);e.Emitter=y.Emitter;var v=n(6);e.Tone=v.Tone;var g=n(37);e.Destination=g.Destination;var b=n(36);e.Transport=b.Transport},function(t,e,n){"use strict";var i;function o(t){i=t,window.TONE_AUDIO_CONTEXT=i}Object.defineProperty(e,"__esModule",{value:!0}),i=window.TONE_AUDIO_CONTEXT,e.getAudioContext=function(){return i||o(new AudioContext),i},e.setAudioContext=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}return t.prototype._createWorker=function(){var t=new Blob(["var timeoutTime =  "+(1e3*this._updateInterval).toFixed(1)+";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();"]),e=window.URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n},t.prototype._createTimeout=function(){var t=this;this._timeout=window.setTimeout(function(){t._createTimeout(),t._callback()},1e3*this._updateInterval)},t.prototype._createClock=function(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()},t.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)},Object.defineProperty(t.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._disposeClock()},t}();e.Ticker=i},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3);e.getContext=o.getContext,e.setContext=o.setContext,i(n(44)),i(n(34));var r=n(3);e.now=function(){return r.getContext().now()}}])});
//# sourceMappingURL=Tone.js.map