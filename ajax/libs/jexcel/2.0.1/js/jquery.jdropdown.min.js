!function(i){var n={init:function(o){i(this).html("");var n=i(this),d=(o=i.extend({data:[],multiple:!1,autocomplete:!1,type:null,width:200,opened:!1,onchange:null,onblur:null,value:null},o),i(this).prop("id"));d||(d="jdropdown-"+Math.floor(100*Math.random()+1),i(this).prop("id",d)),(i.fn.jdropdown.configuration[d]=o).url?i.ajax({url:o.url,type:"GET",dataType:"json",success:function(o){i.fn.jdropdown.configuration[d].data=o,i(n).jdropdown("create")}}):i(this).jdropdown("create")},create:function(){var n=i(this),o=i(this).prop("id"),d=i.fn.jdropdown.configuration[o];i(this).addClass("jdropdown"),"searchbar"==d.type?i(this).addClass("jdropdown-searchbar"):"list"==d.type?i(this).addClass("jdropdown-list"):"picker"==d.type?i(this).addClass("jdropdown-picker"):i(document).width()<800?i(this).addClass("jdropdown-picker"):(i(this).css("width",d.width),i(this).addClass("jdropdown-default"));var r=document.createElement("div");i(r).prop("class","jdropdown-container-header");var e=document.createElement("input");i(e).prop("class","jdropdown-header");var t=document.createElement("div");i(t).prop("class","jdropdown-container");var a=document.createElement("div");i(a).prop("class","jdropdown-content");var p=document.createElement("div");i(p).prop("class","jdropdown-close"),i(p).html("Done");var s=document.createElement("div");i(s).prop("class","jdropdown-backdrop"),1==d.autocomplete?(i(this).data("autocomplete",!0),i(e).prop("placeholder","Search..."),i(e).on("keyup",function(o){i(n).jdropdown("find",i(this).val())})):i(e).prop("readonly","readonly"),d.placeholder&&i(e).prop("placeholder",d.placeholder),i(r).append(e),i(t).append(p),i(t).append(a),i(this).append(r),i(this).append(t),i(this).append(s),i(this).jdropdown("setData"),d.value&&i(this).jdropdown("setValue",d.value),setTimeout(function(){"default"==d.type&&i(t).css("min-width",i(e).outerWidth()),1==d.opened&&i(n).jdropdown("open")},0),i.fn.jdropdown.onclick||(i.fn.jdropdown.onclick=function(o){if(i(o.target).hasClass("jdropdown-header")){var n=i(o.target).parent().parent().prop("id");i.fn.jdropdown.current?i.fn.jdropdown.current!=n&&(i("#"+i.fn.jdropdown.current).jdropdown("close"),i(o.target).parent().parent().jdropdown("open")):i(o.target).parent().parent().jdropdown("open"),o.stopPropagation(),o.preventDefault()}else if(i(o.target).hasClass("jdropdown-container"))o.stopPropagation(),o.preventDefault();else if(i(o.target).hasClass("jdropdown-container-header"))o.stopPropagation(),o.preventDefault();else if(i(o.target).hasClass("jdropdown-content"))o.stopPropagation(),o.preventDefault();else if(i(o.target).hasClass("jdropdown-group"))o.stopPropagation(),o.preventDefault();else if(i(o.target).hasClass("jdropdown-group-name")){var d=i(o.target).parent().find(".jdropdown-item");i.each(d,function(o,n){i(n).is(":visible")&&i.fn.jdropdown("selectItem",i(n))}),o.stopPropagation(),o.preventDefault()}else i(o.target).hasClass("jdropdown-group-arrow")?i(o.target).hasClass("jdropdown-group-arrow-down")?(i(o.target).removeClass("jdropdown-group-arrow-down"),i(o.target).addClass("jdropdown-group-arrow-up"),i(o.target).parent().next().hide()):(i(o.target).removeClass("jdropdown-group-arrow-up"),i(o.target).addClass("jdropdown-group-arrow-down"),i(o.target).parent().next().show()):i(o.target).hasClass("jdropdown-group-itens")?(o.stopPropagation(),o.preventDefault()):i(o.target).hasClass("jdropdown-item")?(i.fn.jdropdown("selectItem",i(o.target)),o.stopPropagation(),o.preventDefault()):i(o.target).hasClass("jdropdown-image")?(i("#"+i.fn.jdropdown.current).jdropdown("selectIndex",i(o.target).parent().data("index")),o.stopPropagation(),o.preventDefault()):i(o.target).hasClass("jdropdown-title")?(i("#"+i.fn.jdropdown.current).jdropdown("selectIndex",i(o.target).parent().data("index")),o.stopPropagation(),o.preventDefault()):i(o.target).hasClass("jdropdown-close")||i(o.target).hasClass("jdropdown-backdrop")?(i("#"+i.fn.jdropdown.current).jdropdown("close"),o.stopPropagation(),o.preventDefault()):i.fn.jdropdown.current&&i("#"+i.fn.jdropdown.current).jdropdown("close")},i(document).on("click",i.fn.jdropdown.onclick),i.fn.jdropdown.onkeydown=function(o){if(i.fn.jdropdown.current){var n=i.fn.jdropdown.currentIndex;13!=o.which&&35!=o.which&&36!=o.which&&38!=o.which&&40!=o.which||(13==o.which?i("#"+i.fn.jdropdown.current).jdropdown("selectIndex",n):38==o.which?null==n?i("#"+i.fn.jdropdown.current).jdropdown("updateCursorPosition",0):0<n&&i("#"+i.fn.jdropdown.current).jdropdown("updateCursorPosition","prev"):40==o.which?null==n?i("#"+i.fn.jdropdown.current).jdropdown("updateCursorPosition",0):n+1<i(i.fn.jdropdown.configuration[i.fn.jdropdown.current].data).length&&i("#"+i.fn.jdropdown.current).jdropdown("updateCursorPosition","next"):36==o.which?i("#"+i.fn.jdropdown.current).jdropdown("updateCursorPosition","first"):35==o.which&&i("#"+i.fn.jdropdown.current).jdropdown("updateCursorPosition","last"),o.stopPropagation(),o.preventDefault())}},i(document).on("keydown",i.fn.jdropdown.onkeydown))},setData:function(o){var a=i(this).prop("id");o?i.fn.jdropdown.configuration[a].data=o:o=i.fn.jdropdown.configuration[a].data;var p=i(this).find(".jdropdown-content");i(p).html("");var s={};i.each(o,function(o,n){if("object"!=typeof n){var d=n;(n={}).id=d,n.name=d,i.fn.jdropdown.configuration[a].data[o]=n}var r=document.createElement("div");if(i(r).prop("class","jdropdown-item"),i(r).data("value",n.id),i(r).html(n.name),n.image){var e=document.createElement("img");i(e).prop("class","jdropdown-image"),i(e).prop("src",n.image),i(r).prepend(e)}if(n.title){var t=document.createElement("div");i(t).prop("class","jdropdown-title"),i(t).html(n.title),i(r).append(t)}else n.image&&i(e).addClass("jdropdown-image-small");n.group?(s[n.group]||(s[n.group]=document.createElement("div"),i(s[n.group]).prop("class","jdropdown-group-itens")),i(s[n.group]).append(r)):i(p).append(r)}),0<i(s).length&&i.each(s,function(o,n){var d=document.createElement("div");i(d).prop("class","jdropdown-group"),i(d).html('<div class="jdropdown-group-name">'+o+'<i class="jdropdown-group-arrow jdropdown-group-arrow-down"></i></div>'),i(d).append(n),i(p).append(d)});var n=i(p).find(".jdropdown-item");i.each(n,function(o,n){i(n).data("index",o)}),i(this).jdropdown("setValue","")},getText:function(o){var n=i(this).find(".jdropdown-item.jdropdown-selected"),d=[];return i.each(n,function(o,n){d.push(i(n).html())}),o?d:d.join(";")},getValue:function(o){var n=i(this).find(".jdropdown-item.jdropdown-selected"),d=[];return i.each(n,function(o,n){d.push(i(n).data("value"))}),o?d:d.join(";")},updateCursorPosition:function(o){if(i.fn.jdropdown.current){var n=i("#"+i.fn.jdropdown.current).find(".jdropdown-item");if("next"==o){for(var d=null,r=i.fn.jdropdown.currentIndex+1;r<i.fn.jdropdown.configuration[i.fn.jdropdown.current].data.length;r++)if("none"!=i(n[r]).css("display")){d=r;break}if(null==d)return!1;o=d}else if("prev"==o){for(d=null,r=i.fn.jdropdown.currentIndex-1;0<=r;r--)if("none"!=i(n[r]).css("display")){d=r;break}if(null==d)return!1;o=d}else if("last"==o){for(d=null,r=i.fn.jdropdown.currentIndex+1;r<i.fn.jdropdown.configuration[i.fn.jdropdown.current].data.length;r++)"none"!=i(n[r]).css("display")&&(d=r);if(null==d)return!1;o=d}else if("first"==o){for(d=null,r=i.fn.jdropdown.currentIndex-1;0<=r;r--)"none"!=i(n[r]).css("display")&&(d=r);if(null==d)return!1;o=d}i(n[i.fn.jdropdown.currentIndex]).removeClass("jdropdown-cursor"),i(n[o]).addClass("jdropdown-cursor"),i.fn.jdropdown.currentIndex=o;var e=i(this).find(".jdropdown-content").scrollTop(),t=i(n[i.fn.jdropdown.currentIndex]).position().top;i(this).find(".jdropdown-content").scrollTop(e+t-95)}},setValue:function(d){var o=i(this).find(".jdropdown-selected").removeClass("jdropdown-selected");o=i(this).find(".jdropdown-item");"function"==typeof d.forEach?i.each(o,function(o,n){d.forEach(function(o){i(n).data("value")==o&&i(n).addClass("jdropdown-selected")})}):i.each(o,function(o,n){i(n).data("value")==d&&i(n).addClass("jdropdown-selected")}),i(this).jdropdown("updateLabel")},selectIndex:function(o){var n=i.fn.jdropdown.current,d=i(this).find(".jdropdown-item");if(i.fn.jdropdown.configuration[i.fn.jdropdown.current].multiple?(i(d[o]).hasClass("jdropdown-selected")?(i(d[o]).removeClass("jdropdown-selected"),i(d[o]).removeClass("jdropdown-cursor")):(i(d[o]).addClass("jdropdown-selected"),i(d).removeClass("jdropdown-cursor"),i(d[o]).addClass("jdropdown-cursor")),i.fn.jdropdown.currentIndex=o,i(this).data("autocomplete")||i(this).jdropdown("updateLabel")):(i(d).removeClass("jdropdown-selected"),i(d[o]).addClass("jdropdown-selected"),i(this).jdropdown("close"),i(d).removeClass("jdropdown-cursor"),i(d[o]).addClass("jdropdown-cursor")),"function"==typeof i.fn.jdropdown.configuration[n].onchange){var r=i("#"+n).jdropdown("getValue"),e=i(d[o]).data("value");i.fn.jdropdown.configuration[n].onchange(i("#"+n),o,r,e)}},selectItem:function(o){if(i.fn.jdropdown.current)i("#"+i.fn.jdropdown.current).jdropdown("selectIndex",i(o).data("index"));else{var n=i(o).data("index"),d=i(o).parents(".jdropdown"),r=i(d).prop("id");if("list"==i.fn.jdropdown.configuration[r].type){var e=i(d).find(".jdropdown-item");i.fn.jdropdown.configuration[r].multiple?(i(e[n]).hasClass("jdropdown-selected")?(i(e[n]).removeClass("jdropdown-selected"),i(e[n]).removeClass("jdropdown-cursor")):(i(e[n]).addClass("jdropdown-selected"),i(e).removeClass("jdropdown-cursor"),i(e[n]).addClass("jdropdown-cursor")),i.fn.jdropdown.currentIndex=n):(i(e).removeClass("jdropdown-selected"),i(e[n]).addClass("jdropdown-selected"),i(e).removeClass("jdropdown-cursor"),i(e[n]).addClass("jdropdown-cursor"))}}},find:function(d){var o=i(this).find(".jdropdown-item");i.each(o,function(o,n){null==d||i(n).hasClass("jdropdown-selected")||-1!=i(n).html().toLowerCase().indexOf(d.toLowerCase())?i(n).show():i(n).hide()});var n=i(this).find(".jdropdown-group");i.each(n,function(o,n){0<i(n).find(".jdropdown-item").filter(function(){return"none"!=i(this).css("display")}).length?i(n).find(".jdropdown-group-name").show():i(n).find(".jdropdown-group-name").hide()})},updateLabel:function(){var r=i(this).prop("id"),o=i(this).find(".jdropdown-selected"),e="";i.each(o,function(o,n){var d=i(n).data("index");e&&(e+="; "),i.fn.jdropdown.configuration[r].data[d]&&(e+=i.fn.jdropdown.configuration[r].data[d].name)}),i(this).find(".jdropdown-header").val(e)},open:function(){if(!i.fn.jdropdown.current){var n=i(this);setTimeout(function(){if(i.fn.jdropdown.current=i(n).prop("id"),!i(n).hasClass("jdropdown-focus")){i(n).addClass("jdropdown-focus"),i(document).width()<800&&"picker"==i.fn.jdropdown.configuration[i.fn.jdropdown.current].type&&i(n).find(".jdropdown-container").addClass("slide-bottom-in"),1==i(n).data("autocomplete")&&(i(n).jdropdown("find",null),i(n).find(".jdropdown-header").val("").focus());var o=i(n).find(".jdropdown-selected");0<i(o).length&&i(n).jdropdown("updateCursorPosition",i(o[0]).data("index"))}"function"==typeof i.fn.jdropdown.configuration[i.fn.jdropdown.current].onopen&&i.fn.jdropdown.configuration[i.fn.jdropdown.current].onopen(i(n))},0)}},close:function(){i.fn.jdropdown.current&&(i(this).removeClass("jdropdown-focus"),i(this).find(".jdropdown-cursor").removeClass("jdropdown-cursor"),i(this).jdropdown("updateLabel"),"function"==typeof i.fn.jdropdown.configuration[i.fn.jdropdown.current].onclose&&i.fn.jdropdown.configuration[i.fn.jdropdown.current].onclose(i(this)),i(this).find(".jdropdown-header").blur(),i.fn.jdropdown.current=null,i.fn.jdropdown.currentIndex=null)},reset:function(){i(this).find(".jdropdown-selected").removeClass(".jdropdown-selected");i(this).find(".jdropdown-header").val("")}};i.fn.jdropdown=function(o){return n[o]?n[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void i.error("Method "+o+" does not exist on jQuery.tooltip"):n.init.apply(this,arguments)},i.fn.jdropdown.configuration={},i.fn.jdropdown.current=null,i.fn.jdropdown.currentIndex=null}(jQuery);