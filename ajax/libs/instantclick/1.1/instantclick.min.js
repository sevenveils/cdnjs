var InstantClick=function(){var r,a=0,d={},l=[],n="pushState"in history,u=!1,i={change:[]};function f(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function o(t){for(;"A"!=t.nodeName;)t=t.parentNode;return t}function c(t){for(var e=0;e<i[t].length;e++)i[t][e]()}function s(t){for(var e,n=document.getElementsByTagName("a"),r=location.protocol+"//"+location.host,i=n.length-1;0<=i;i--)(e=n[i]).target||0!=e.href.indexOf(r+"/")||-1<e.href.indexOf("#")&&f(e.href)==f(location.href)||(u?e.hasAttribute("data-no-instant"):!e.hasAttribute("data-instant"))||(e.addEventListener("mouseover",h),e.addEventListener("click",m));if(!t){var o,a,d,l,s=document.getElementsByTagName("script");for(i=0,j=s.length;i<j;i++)(o=s[i]).hasAttribute("data-no-instant")||(a=document.createElement("script"),o.src&&(a.src=o.src),o.innerHTML&&(a.innerHTML=o.innerHTML),d=o.parentNode,l=o.nextSibling,d.removeChild(o),d.insertBefore(a,l))}c("change")}function h(t){var e=o(t.target);e.addEventListener("mouseout",b),function(t){var e=a;"waiting"==l[a].state&&(e^=1);l[e].state="preloading",l[e].url=t,l[e].body=!1,l[e].hasBody=!0,l[e].timingStart=+new Date,l[e].timing=!1,l[e].xhr.open("GET",t,!0),l[e].xhr.send()}(e.href)}function g(t){var e=t.target.id;if(!(l[e].xhr.readyState<4)){var n=l[e].xhr.responseText;l[e].timing=+new Date-l[e].timingStart;var r=n.indexOf("<title");-1<r&&(l[e].title=n.substr(n.indexOf(">",r)+1),l[e].title=l[e].title.substr(0,l[e].title.indexOf("</title")));var i=n.indexOf("<body");if(-1<i){l[e].body=n.substr(n.indexOf(">",i)+1);var o=l[e].body.indexOf("</body");-1<o&&(l[e].body=l[e].body.substr(0,o)),d[f(l[e].url)]={body:l[e].body,title:l[e].title}}else l[e].hasBody=!1;e==a&&"waiting"==l[a].state&&y(l[a].url)}}function m(t){1<t.which||t.metaKey||t.ctrlKey||(t.preventDefault(),y(o(t.target).href))}function y(t){if(l[a].url!=t&&l[1^a].url==t&&(a^=1),!l[a].body)return l[a].hasBody?void(l[a].state="waiting"):void(location.href=l[a].url);if(l[a].state="displayed",document.body.innerHTML=l[a].body,document.title=l[a].title,l[a].url!=location.href){if(-1==l[a].url.indexOf("#"))scrollTo(0,0);else{var e=l[a].url.substr(l[a].url.indexOf("#")+1);if(document.getElementById(e)||0<document.getElementsByName(e).length){e=document.getElementById(e)||document.getElementsByTagName(e)[0];for(var n=0;e.offsetParent;e=e.offsetParent)n+=e.offsetTop;scrollTo(0,n)}else scrollTo(0,0)}history.pushState(null,null,l[a].url)}r=f(location.href),s()}function b(t){var e=o(t.target),n=a;l[n].url!=e.href&&l[1^n].url==e.href&&(n^=1),"preloading"==l[n].state&&(l[n].xhr.abort(),l[n].state="")}return{init:function(t){if(n){if(!l.length){t&&(u=!0),r=f(location.href),d[f(location.href)]={body:document.body.innerHTML,title:document.title};for(var e=0;e<2;e++)l[e]={},l[e].xhr=new XMLHttpRequest,l[e].xhr.id=e,l[e].xhr.addEventListener("readystatechange",g),l[e].url=!1,l[e].body=!1,l[e].hasBody=!0,l[e].title=!1,l[e].state="",l[e].timingStart=!1,l[e].timing=!1;s(!0),addEventListener("popstate",function(){var t=f(location.href);t!=r&&(t in d?(r=t,document.body.innerHTML=d[t].body,document.title=d[t].title,s()):location.href=location.href)})}}else c("change")},supported:n,on:function(t,e){i[t].push(e)},debug:function(){return{currentLocationWithoutHash:r,p0:l[0],p1:l[1],pHistory:d,pId:a,supported:n,useBlacklist:u}}}}();