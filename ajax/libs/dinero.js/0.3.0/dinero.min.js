(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?module.exports=b():'function'==typeof define&&define.amd?define(b):a.Dinero=b()})(this,function(){'use strict';function a(a){var b=/^(?:(\$|USD)?0(?:(,)0)?(\.)?(0+)?|0(?:(,)0)?(\.)?(0+)?\s?(dollar)?)$/gm.exec(a);return{getMatches:function(){return null===b?[]:b.slice(1).filter(function(a){return'undefined'!=typeof a})},getMinimumFractionDigits:function(){var a=function(a){return'.'===a};return'undefined'==typeof this.getMatches().find(a)?0:this.getMatches()[this.getMatches().findIndex(a)+1].split('').length},getCurrencyDisplay:function(){return{USD:'code',dollar:'name',$:'symbol'}[this.getMatches().find(function(a){return'USD'===a||'dollar'===a||'$'===a})]},getStyle:function(){return'undefined'==typeof this.getCurrencyDisplay(this.getMatches())?'decimal':'currency'},getUseGrouping:function(){return'undefined'!=typeof this.getMatches().find(function(a){return','===a})}}}var b=Object.assign(function b(c){var d=Object.assign({},{amount:b.defaultAmount,currency:b.defaultCurrency},c),e=d.amount,f=d.currency,g=b.globalLocale,h=b.globalFormat,j=function(a){var c=Object.assign({},Object.assign({},{amount:e,currency:f},a),Object.assign({},{locale:this.locale},a));return Object.assign(b({amount:c.amount,currency:c.currency}),{locale:c.locale})},i=function(a){return this.getCurrency()===a.getCurrency()},k={hasSameCurrency:function(a){if(!i.call(this,a))throw new TypeError('You must provide a Dinero instance with the same currency.')},isPercentage:function(a){if(!(!isNaN(parseInt(a))&&isFinite(a)&&100>=a&&0<=a))throw new RangeError('You must provide a numeric value between 0 and 100.')},areValidRatios:function(a){if(!(a.length&&a.every(function(a){return 0<a})))throw new TypeError('You must provide a non-empty array of numeric values greater than 0.')}};return{getAmount:function(){return e},getCurrency:function(){return f},getLocale:function(){return this.locale||g},setLocale:function(a){return j.call(this,{locale:a})},add:function(a){return k.hasSameCurrency.call(this,a),j.call(this,{amount:this.getAmount()+a.getAmount()})},subtract:function(a){return k.hasSameCurrency.call(this,a),j.call(this,{amount:this.getAmount()-a.getAmount()})},multiply:function(a){return j.call(this,{amount:this.getAmount()*a})},divide:function(a){return j.call(this,{amount:this.getAmount()/a})},percentage:function(a){return k.isPercentage(a),this.multiply(a/100)},allocate:function(a){var b=this;k.areValidRatios(a);for(var c=a.reduce(function(c,a){return c+a}),d=this.getAmount(),e=a.map(function(a){var e=Math.floor(b.getAmount()*a/c);return d-=e,j.call(b,{amount:e})}),f=0;0<d;f++)e[f]=e[f].add(j.call(this,{amount:1})),--d;return e},equalsTo:function(a){return this.hasSameAmount(a)&&this.hasSameCurrency(a)},lessThan:function(a){return k.hasSameCurrency.call(this,a),this.getAmount()<a.getAmount()},lessThanOrEqual:function(a){return k.hasSameCurrency.call(this,a),this.getAmount()<=a.getAmount()},greaterThan:function(a){return k.hasSameCurrency.call(this,a),this.getAmount()>a.getAmount()},greaterThanOrEqual:function(a){return k.hasSameCurrency.call(this,a),this.getAmount()>=a.getAmount()},isZero:function(){return 0===this.getAmount()},isPositive:function(){return 0<=this.getAmount()},isNegative:function(){return 0>this.getAmount()},hasCents:function(){return 0!=this.getAmount()%100},hasSameCurrency:function(a){return i.call(this,a)},hasSameAmount:function(a){return this.getAmount()===a.getAmount()},toFormat:function(b){var c=a(b||h);return this.toRoundedUnit(c.getMinimumFractionDigits()).toLocaleString(this.getLocale(),{currencyDisplay:c.getCurrencyDisplay(),useGrouping:c.getUseGrouping(),minimumFractionDigits:c.getMinimumFractionDigits(),style:c.getStyle(),currency:this.getCurrency()})},toUnit:function(){return this.getAmount()/100},toRoundedUnit:function(a){var b=Math.pow(10,a);return Math.round(this.toUnit()*b)/b},toObject:function(){return{amount:e,currency:f}}}},{defaultAmount:0,defaultCurrency:'USD'},{globalLocale:'en-US',globalFormat:'$0,0.00'});return b});
