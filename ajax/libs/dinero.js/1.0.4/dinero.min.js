(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?module.exports=b():'function'==typeof define&&define.amd?define(b):a.Dinero=b()})(this,function(){'use strict';function a(a){return!isNaN(parseInt(a))&&isFinite(a)}function b(a){return 0==a%2}function c(b){return a(b)&&!j(b)}function d(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,b=a.toString().split('.')[1];return b?b.length:0}function e(){var e=function(c,a){var b=function(a){return i(10,d(a))},e=Math.max(b(c),b(a));return c*e*(a*e)/(e*e)};return{add:function(c,a){return c+a},subtract:function(c,a){return c-a},multiply:function(d,a){return c(d)||c(a)?e(d,a):d*a},divide:function(c,a){return c/a},modulo:function(c,a){return c%a},bankersRound:function(a){var c=h(a);return .5==g(a)%1?b(c)?c:c-1:c}}}function f(a){var b=/^(?:(\$|USD)?0(?:(,)0)?(\.)?(0+)?|0(?:(,)0)?(\.)?(0+)?\s?(dollar)?)$/gm.exec(a);return{getMatches:function(){return null===b?[]:b.slice(1).filter(function(a){return'undefined'!=typeof a})},getMinimumFractionDigits:function(){var a=function(a){return'.'===a};return'undefined'==typeof this.getMatches().find(a)?0:this.getMatches()[k.add(this.getMatches().findIndex(a),1)].split('').length},getCurrencyDisplay:function(){return{USD:'code',dollar:'name',$:'symbol'}[this.getMatches().find(function(a){return'USD'===a||'dollar'===a||'$'===a})]},getStyle:function(){return'undefined'==typeof this.getCurrencyDisplay(this.getMatches())?'decimal':'currency'},getUseGrouping:function(){return'undefined'!=typeof this.getMatches().find(function(a){return','===a})}}}var g=Math.abs,h=Math.round,i=Math.pow,j=Number.isInteger,k=e(),l=e(),m=Object.assign(function b(c){var d={hasSameCurrency:function(a){if(!q.call(this,a))throw new TypeError('You must provide a Dinero instance with the same currency.')},isPercentage:function(b){if(!(a(b)&&100>=b&&0<=b))throw new RangeError('You must provide a numeric value between 0 and 100.')},areValidRatios:function(a){if(!(a.length&&a.every(function(a){return 0<a})))throw new TypeError('You must provide a non-empty array of numeric values greater than 0.')},isInteger:function(a){if(!j(a))throw new TypeError('You must provide an integer.')}},e=Object.assign({},{amount:b.defaultAmount,currency:b.defaultCurrency},c),k=e.amount,m=e.currency;d.isInteger(k);var n=b.globalLocale,o=b.globalFormat,p=function(a){var c=Object.assign({},Object.assign({},{amount:k,currency:m},a),Object.assign({},{locale:this.locale},a));return Object.assign(b({amount:c.amount,currency:c.currency}),{locale:c.locale})},q=function(a){return this.getCurrency()===a.getCurrency()};return{getAmount:function(){return k},getCurrency:function(){return m},getLocale:function(){return this.locale||n},setLocale:function(a){return p.call(this,{locale:a})},add:function(a){return d.hasSameCurrency.call(this,a),p.call(this,{amount:l.add(this.getAmount(),a.getAmount())})},subtract:function(a){return d.hasSameCurrency.call(this,a),p.call(this,{amount:l.subtract(this.getAmount(),a.getAmount())})},multiply:function(a){return p.call(this,{amount:l.bankersRound(l.multiply(this.getAmount(),a))})},divide:function(a){return p.call(this,{amount:l.bankersRound(l.divide(this.getAmount(),a))})},percentage:function(a){return d.isPercentage(a),this.multiply(l.divide(a,100))},allocate:function(a){var b=this;d.areValidRatios(a);for(var c=a.reduce(function(c,a){return l.add(c,a)}),e=this.getAmount(),f=a.map(function(a){var d=Math.floor(l.divide(l.multiply(b.getAmount(),a),c));return e=l.subtract(e,d),p.call(b,{amount:d})}),g=0;0<e;g++)f[g]=f[g].add(p.call(this,{amount:1})),e=l.subtract(e,1);return f},equalsTo:function(a){return this.hasSameAmount(a)&&this.hasSameCurrency(a)},lessThan:function(a){return d.hasSameCurrency.call(this,a),this.getAmount()<a.getAmount()},lessThanOrEqual:function(a){return d.hasSameCurrency.call(this,a),this.getAmount()<=a.getAmount()},greaterThan:function(a){return d.hasSameCurrency.call(this,a),this.getAmount()>a.getAmount()},greaterThanOrEqual:function(a){return d.hasSameCurrency.call(this,a),this.getAmount()>=a.getAmount()},isZero:function(){return 0===this.getAmount()},isPositive:function(){return 0<=this.getAmount()},isNegative:function(){return 0>this.getAmount()},hasCents:function(){return 0!==l.modulo(this.getAmount(),100)},hasSameCurrency:function(a){return q.call(this,a)},hasSameAmount:function(a){return this.getAmount()===a.getAmount()},toFormat:function(a){var b=f(a||o);return this.toRoundedUnit(b.getMinimumFractionDigits()).toLocaleString(this.getLocale(),{currencyDisplay:b.getCurrencyDisplay(),useGrouping:b.getUseGrouping(),minimumFractionDigits:b.getMinimumFractionDigits(),style:b.getStyle(),currency:this.getCurrency()})},toUnit:function(){return l.divide(this.getAmount(),100)},toRoundedUnit:function(a){var b=i(10,a);return l.divide(l.multiply(Math.sign(this.toUnit()),h(g(l.multiply(this.toUnit(),b)))),b)},toObject:function(){return{amount:k,currency:m}}}},{defaultAmount:0,defaultCurrency:'USD'},{globalLocale:'en-US',globalFormat:'$0,0.00'});return m});
