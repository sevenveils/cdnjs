!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).VueMask={})}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n="_",r="function",a=[];function o(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}var i="[]";var u=[],c="";function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!o(s)){if(t(s)!==r)throw new Error("Text-mask:conformToMask; The mask property must be an array.");s=function(e){for(var t,n=[];-1!==(t=e.indexOf(i));)n.push(t),e.splice(t,1);return{maskWithoutCaretTraps:e,indexes:n}}(s=s(e,f)).maskWithoutCaretTraps}var l=f.guide,d=void 0===l||l,v=f.previousConformedValue,p=void 0===v?c:v,h=f.placeholderChar,m=void 0===h?n:h,y=f.placeholder,g=void 0===y?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;if(!o(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(t))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+"The placeholder character that was received is: ".concat(JSON.stringify(t),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map(function(e){return e instanceof RegExp?t:e}).join("")}(s,m):y,k=f.currentCaretPosition,b=f.keepCharPositions,w=!1===d&&void 0!==p,x=e.length,T=p.length,E=g.length,C=s.length,M=x-T,O=M>0,S=k+(O?-M:0),V=S+Math.abs(M);if(!0===b&&!O){for(var A=c,P=S;P<V;P++)g[P]===m&&(A+=m);e=e.slice(0,S)+A+e.slice(S,x)}for(var _=e.split(c).map(function(e,t){return{char:e,isNew:t>=S&&t<V}}),N=x-1;N>=0;N--){var R=_[N].char;if(R!==m)R===g[N>=S&&T===C?N-M:N]&&_.splice(N,1)}var j=c,L=!1;e:for(var z=0;z<E;z++){var H=g[z];if(H===m){if(_.length>0)for(;_.length>0;){var I=_.shift(),J=I.char,W=I.isNew;if(J===m&&!0!==w){j+=m;continue e}if(s[z].test(J)){if(!0===b&&!1!==W&&p!==c&&!1!==d&&O){for(var $=_.length,q=null,B=0;B<$;B++){var D=_[B];if(D.char!==m&&!1===D.isNew)break;if(D.char===m){q=B;break}}null!==q?(j+=J,_.splice(q,1)):z--}else j+=J;continue e}L=!0}!1===w&&(j+=g.substr(z,E));break}j+=H}if(w&&!1===O){for(var U=null,X=0;X<j.length;X++)g[X]===m&&(U=X);j=null!==U?j.substr(0,U+1):c}return{conformedValue:j,meta:{someCharsRejected:L}}}var f={__nextCharOptional__:!0};function l(e,t){if(!t)return e;var n={"#":/\d/,A:/[a-z]/i,N:/[a-z0-9]/i,"?":f,X:/./},r=function(e){return t=e.toString().replace(/.(\/)[gmiyus]{0,6}$/,function(e){return e.replace("/","?/")}),n=t.lastIndexOf("/"),new RegExp(t.slice(1,n),t.slice(n+1));var t,n},a=function(e){return e instanceof RegExp?e:function(e){return new RegExp("/[".concat(function(e){return"[\\^$.|?*+()".split("").includes(e)?"\\".concat(e):e}(e),"]/"))}(e)};return s(e,t.split("").map(function(e,t,o){var i=n[e]||e,u=o[t-1];if(i===f)return null;if((n[u]||u)===f){var c=a(i);return r(c)}return i}).filter(Boolean),{guide:!1}).conformedValue}var d=function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)},v=function(e){return e instanceof HTMLInputElement?e:e.querySelector("input")||e},p="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase(),h=p&&p.indexOf("edge/")>0,m=p&&p.indexOf("android")>0,y=p&&/chrome\/\d+/.test(p)&&!h;function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.value,r=e.dataset,a=r.previousValue,o=void 0===a?"":a,i=r.mask;(t||n&&n!==o&&n.length>o.length)&&(e.value=l(n,i),m&&y?setTimeout(function(){return d(e,"input")},0):d(e,"input")),e.dataset.previousValue=n}function k(e,t){e.dataset.mask=t}var b={bind:function(e,t){var n=t.value;k(e=v(e),n),g(e)},componentUpdated:function(e,t){var n=t.value,r=t.oldValue;e=v(e);var a=n!==r;a&&k(e,n),g(e,a)}},w=function(e){e.directive("mask",b)};e.VueMaskDirective=b,e.VueMaskPlugin=w,e.default=w,Object.defineProperty(e,"__esModule",{value:!0})});
