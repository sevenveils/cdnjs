{"version":3,"file":"persist-migrate.js","sources":["../src/browser.js","../src/persist-migrate.js"],"sourcesContent":["const win = (typeof window !== `undefined` && window) || {};\n\nexport {win as window};\nexport const console = win.console;\nexport const document = win.document;\nexport const history = win.history;\nexport const localStorage = win.localStorage;\nexport const location = win.location;\nexport const sessionStorage = win.sessionStorage;\nexport const navigator = win.navigator;\nexport const parseFloat = win.parseFloat;\nexport const performance = win.performance;\n","/* eslint-disable */\nimport {window} from \"./browser\";\n\nexport default (function(eg) {\n\tif (!eg || !eg.Persist) {\n\t\treturn;\n\t}\n\n\tvar GLOBAL_KEY = \"KEY___persist___\";\n\tvar oldConstructor = eg.Persist.prototype;\n\tvar isNeeded = eg.Persist.isNeeded;\n\tvar StorageManager = eg.Persist.StorageManager;\n\n\teg.Persist = function Persist(key, value) {\n\t\t// when called as plain method\n\t\tif (!(this instanceof Persist)) {\n\t\t\tif (arguments.length === 0) {\n\t\t\t\treturn StorageManager.getStateByKey(GLOBAL_KEY);\n\t\t\t}\n\n\t\t\tif (arguments.length === 1 && typeof key !== \"string\") {\n\t\t\t\tvar value_ = key;\n\n\t\t\t\tStorageManager.setStateByKey(GLOBAL_KEY, value_);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (arguments.length === 2) {\n\t\t\t\tStorageManager.setStateByKey(key, value);\n\t\t\t}\n\n\t\t\treturn StorageManager.getStateByKey(key);\n\t\t}\n\n\t\t// when called as constructer\n\t\tthis.key = key;\n\t\treturn undefined;\n\t};\n\teg.Persist.isNeeded = isNeeded;\n\teg.Persist.prototype = oldConstructor;\n\treturn eg.Persist;\n})(window.eg);\n\n/* eslint-enable */\n"],"names":["win","window","console","document","history","localStorage","location","sessionStorage","navigator","parseFloat","performance","eg","Persist","GLOBAL_KEY","oldConstructor","prototype","isNeeded","StorageManager","key","value","arguments","length","getStateByKey","value_","setStateByKey","undefined"],"mappings":";;;;;;;;;;;;;;;CAAA,IAAMA,GAAG,GAAI,OAAOC,MAAP,oBAAiCA,MAAlC,IAA6C,EAAzD;AAEA,CACO,IAAMC,OAAO,GAAGF,GAAG,CAACE,OAApB;AACP,CAAO,IAAMC,QAAQ,GAAGH,GAAG,CAACG,QAArB;AACP,CAAO,IAAMC,OAAO,GAAGJ,GAAG,CAACI,OAApB;AACP,CAAO,IAAMC,YAAY,GAAGL,GAAG,CAACK,YAAzB;AACP,CAAO,IAAMC,QAAQ,GAAGN,GAAG,CAACM,QAArB;AACP,CAAO,IAAMC,cAAc,GAAGP,GAAG,CAACO,cAA3B;AACP,CAAO,IAAMC,SAAS,GAAGR,GAAG,CAACQ,SAAtB;AACP,CAAO,IAAMC,UAAU,GAAGT,GAAG,CAACS,UAAvB;AACP,CAAO,IAAMC,WAAW,GAAGV,GAAG,CAACU,WAAxB;;CCXP;AACA,AAEA,sBAAe,CAAC,UAASC,EAAT,EAAa;CAC5B,MAAI,CAACA,EAAD,IAAO,CAACA,EAAE,CAACC,OAAf,EAAwB;CACvB;CACA;;CAED,MAAIC,UAAU,GAAG,kBAAjB;CACA,MAAIC,cAAc,GAAGH,EAAE,CAACC,OAAH,CAAWG,SAAhC;CACA,MAAIC,QAAQ,GAAGL,EAAE,CAACC,OAAH,CAAWI,QAA1B;CACA,MAAIC,cAAc,GAAGN,EAAE,CAACC,OAAH,CAAWK,cAAhC;;CAEAN,EAAAA,EAAE,CAACC,OAAH,GAAa,SAASA,OAAT,CAAiBM,GAAjB,EAAsBC,KAAtB,EAA6B;CACzC;CACA,QAAI,EAAE,gBAAgBP,OAAlB,CAAJ,EAAgC;CAC/B,UAAIQ,SAAS,CAACC,MAAV,KAAqB,CAAzB,EAA4B;CAC3B,eAAOJ,cAAc,CAACK,aAAf,CAA6BT,UAA7B,CAAP;CACA;;CAED,UAAIO,SAAS,CAACC,MAAV,KAAqB,CAArB,IAA0B,OAAOH,GAAP,KAAe,QAA7C,EAAuD;CACtD,YAAIK,MAAM,GAAGL,GAAb;CAEAD,QAAAA,cAAc,CAACO,aAAf,CAA6BX,UAA7B,EAAyCU,MAAzC;CACA,eAAOE,SAAP;CACA;;CAED,UAAIL,SAAS,CAACC,MAAV,KAAqB,CAAzB,EAA4B;CAC3BJ,QAAAA,cAAc,CAACO,aAAf,CAA6BN,GAA7B,EAAkCC,KAAlC;CACA;;CAED,aAAOF,cAAc,CAACK,aAAf,CAA6BJ,GAA7B,CAAP;CACA,KAnBwC;;;CAsBzC,SAAKA,GAAL,GAAWA,GAAX;CACA,WAAOO,SAAP;CACA,GAxBD;;CAyBAd,EAAAA,EAAE,CAACC,OAAH,CAAWI,QAAX,GAAsBA,QAAtB;CACAL,EAAAA,EAAE,CAACC,OAAH,CAAWG,SAAX,GAAuBD,cAAvB;CACA,SAAOH,EAAE,CAACC,OAAV;CACA,CAtCc,EAsCZX,GAAM,CAACU,EAtCK,CAAf;CAwCA;;;;;;;;"}