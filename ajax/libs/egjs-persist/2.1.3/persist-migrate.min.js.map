{"version":3,"file":"persist-migrate.min.js","sources":["../src/browser.js","../src/persist-migrate.js"],"sourcesContent":["const win = (typeof window !== `undefined` && window) || {};\n\nexport {win as window};\nexport const console = win.console;\nexport const document = win.document;\nexport const history = win.history;\nexport const localStorage = win.localStorage;\nexport const location = win.location;\nexport const sessionStorage = win.sessionStorage;\nexport const navigator = win.navigator;\nexport const parseFloat = win.parseFloat;\nexport const performance = win.performance;\n","/* eslint-disable */\nimport {window} from \"./browser\";\n\nexport default (function(eg) {\n\tif (!eg || !eg.Persist) {\n\t\treturn;\n\t}\n\n\tvar GLOBAL_KEY = \"KEY___persist___\";\n\tvar oldConstructor = eg.Persist.prototype;\n\tvar isNeeded = eg.Persist.isNeeded;\n\tvar StorageManager = eg.Persist.StorageManager;\n\n\teg.Persist = function Persist(key, value) {\n\t\t// when called as plain method\n\t\tif (!(this instanceof Persist)) {\n\t\t\tif (arguments.length === 0) {\n\t\t\t\treturn StorageManager.getStateByKey(GLOBAL_KEY);\n\t\t\t}\n\n\t\t\tif (arguments.length === 1 && typeof key !== \"string\") {\n\t\t\t\tvar value_ = key;\n\n\t\t\t\tStorageManager.setStateByKey(GLOBAL_KEY, value_);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (arguments.length === 2) {\n\t\t\t\tStorageManager.setStateByKey(key, value);\n\t\t\t}\n\n\t\t\treturn StorageManager.getStateByKey(key);\n\t\t}\n\n\t\t// when called as constructer\n\t\tthis.key = key;\n\t\treturn undefined;\n\t};\n\teg.Persist.isNeeded = isNeeded;\n\teg.Persist.prototype = oldConstructor;\n\treturn eg.Persist;\n})(window.eg);\n\n/* eslint-enable */\n"],"names":["win","window","console","document","history","localStorage","location","sessionStorage","navigator","parseFloat","performance","eg","Persist","GLOBAL_KEY","oldConstructor","prototype","isNeeded","StorageManager","key","value","this","arguments","length","getStateByKey","setStateByKey","value_"],"mappings":"sMAAA,IAAMA,sBAAcC,QAA0BA,QAAW,GAGlCD,EAAIE,QACHF,EAAIG,SACLH,EAAII,QACCJ,EAAIK,aACRL,EAAIM,SACEN,EAAIO,eACTP,EAAIQ,UACHR,EAAIS,WACHT,EAAIU,mBCRhB,SAAUC,MACnBA,GAAOA,EAAGC,aAIXC,EAAa,mBACbC,EAAiBH,EAAGC,QAAQG,UAC5BC,EAAWL,EAAGC,QAAQI,SACtBC,EAAiBN,EAAGC,QAAQK,sBAEhCN,EAAGC,QAAU,SAASA,EAAQM,EAAKC,MAE5BC,gBAAgBR,OAoBjBM,IAAMA,UAnBe,IAArBG,UAAUC,cACNL,EAAeM,cAAcV,MAGZ,IAArBQ,UAAUC,QAA+B,iBAARJ,SAOZ,IAArBG,UAAUC,QACbL,EAAeO,cAAcN,EAAKC,GAG5BF,EAAeM,cAAcL,OAV/BO,EAASP,EAEbD,EAAeO,cAAcX,EAAYY,KAe5Cd,EAAGC,QAAQI,SAAWA,EACtBL,EAAGC,QAAQG,UAAYD,EAChBH,EAAGC,SArCI,CAsCZX,EAAOU"}