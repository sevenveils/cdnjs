jQuery.fn.caret=function(e){var t=this[0],n="true"===t.contentEditable;if(0!=arguments.length)return-1==e&&(e=this[n?"text":"val"]().length),window.getSelection?n?(t.focus(),window.getSelection().collapse(t.firstChild,e)):t.setSelectionRange(e,e):document.body.createTextRange&&((a=document.body.createTextRange()).moveToElementText(t),a.moveStart("character",e),a.collapse(!0),a.select()),n||t.focus(),e;if(window.getSelection){if(n){t.focus();var o=window.getSelection();return o.rangeCount?((c=(r=o.getRangeAt(0)).cloneRange()).selectNodeContents(t),c.setEnd(r.endContainer,r.endOffset),c.toString().length):0}return t.selectionStart}if(document.selection){if(t.focus(),n){var r=document.selection.createRange();return(c=document.body.createTextRange()).moveToElementText(t),c.setEndPoint("EndToEnd",r),c.text.length}e=0;var c,a=t.createTextRange(),i=(c=document.selection.createRange().duplicate()).getBookmark();for(a.moveToBookmark(i);0!==a.moveStart("character",-1);)e++;return e}return 0};