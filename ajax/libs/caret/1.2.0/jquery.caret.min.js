jQuery.fn.caret=function(e){var t=this[0];if(0==arguments.length){if(window.getSelection)return"true"!=t.contentEditable?t.selectionStart:(t.focus(),(o=(n=window.getSelection().getRangeAt(0)).cloneRange()).selectNodeContents(t),o.setEnd(n.endContainer,n.endOffset),o.toString().length);if(document.selection){if(t.focus(),"true"==t.contentEditable){var n=document.selection.createRange();return(o=document.body.createTextRange()).moveToElementText(t),o.setEndPoint("EndToEnd",n),o.text.length}e=0;var o,c=t.createTextRange(),a=(o=document.selection.createRange().duplicate()).getBookmark();for(c.moveToBookmark(a);0!==c.moveStart("character",-1);)e++;return e}return 0}window.getSelection?"true"==t.contentEditable?(t.focus(),window.getSelection().collapse(t.firstChild,e)):t.setSelectionRange(e,e):document.body.createTextRange&&((c=document.body.createTextRange()).moveToElementText(t),c.moveStart("character",e),c.collapse(!0),c.select())};