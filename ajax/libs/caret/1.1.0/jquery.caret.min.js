jQuery.fn.caret=function(e){var t=this[0];if(0==arguments.length){if(window.getSelection)return"true"!=t.contentEditable?t.selectionStart:(t.focus(),(n=(o=window.getSelection().getRangeAt(0)).cloneRange()).selectNodeContents(t),n.setEnd(o.endContainer,o.endOffset),n.toString().length);if(document.selection){t.focus();var n,o=document.selection.createRange();return(n=document.body.createTextRange()).moveToElementText(t),n.setEndPoint("EndToEnd",o),n.text.length}return 0}if(window.getSelection)"true"==t.contentEditable?(t.focus(),window.getSelection().collapse(t.firstChild,e)):t.setSelectionRange(e,e);else if(document.body.createTextRange){var c=document.body.createTextRange();c.moveToElementText(t),c.moveStart("character",e),c.collapse(!0),c.select()}};