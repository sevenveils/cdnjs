/*! jquery-fracs v1.0.1 - https://larsjung.de/jquery-fracs/ */
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var n,e,o=window,i=o.document,r=o.jQuery,s=r(o),l=r(i),h=r.extend,u=r.isFunction,c=Math.max,f=Math.min,a=Math.round,p=function(t,n){return _typeof(t)===n},v=function(t,n){return t instanceof n},d=function(t){return t&&t.nodeType},w=function(t){return d(t)?t:v(t,r)?t[0]:void 0},b=(n={},e=1,function(t){return t?(n[t]||(n[t]=e,e+=1),n[t]):0}),m=function(t,n,e){if(t===n)return!0;if(!t||!n||t.constructor!==n.constructor)return!1;for(var i=0,o=e.length;i<o;i+=1){var r=e[i];if(t[r]&&u(t[r].equals)&&!t[r].equals(n[r]))return!1;if(t[r]!==n[r])return!1}return!0};function g(t,n,e,i){this.left=a(t),this.top=a(n),this.width=a(e),this.height=a(i),this.right=this.left+this.width,this.bottom=this.top+this.height}function y(t,n,e,i){this.visible=t||0,this.viewport=n||0,this.possible=e||0,this.rects=i&&h({},i)||null}function T(t,n){this.els=t,this.viewport=n}h(g.prototype,{equals:function(t){return m(this,t,["left","top","width","height"])},area:function(){return this.width*this.height},relativeTo:function(t){return new g(this.left-t.left,this.top-t.top,this.width,this.height)},intersection:function(t){if(!v(t,g))return null;var n=c(this.left,t.left),e=f(this.right,t.right),i=c(this.top,t.top),o=e-n,r=f(this.bottom,t.bottom)-i;return 0<=o&&0<=r?new g(n,i,o,r):null},envelope:function(t){if(!v(t,g))return this;var n=f(this.left,t.left),e=c(this.right,t.right),i=f(this.top,t.top);return new g(n,i,e-n,c(this.bottom,t.bottom)-i)}}),h(g,{ofContent:function(t,n){return t&&t!==i&&t!==o?n?new g(0,0,t.scrollWidth,t.scrollHeight):new g(t.offsetLeft-t.scrollLeft,t.offsetTop-t.scrollTop,t.scrollWidth,t.scrollHeight):new g(0,0,l.width(),l.height())},ofViewport:function(t,n){return t&&t!==i&&t!==o?n?new g(t.scrollLeft,t.scrollTop,t.clientWidth,t.clientHeight):new g(t.offsetLeft,t.offsetTop,t.clientWidth,t.clientHeight):new g(s.scrollLeft(),s.scrollTop(),s.width(),s.height())},ofElement:function(t){var n=r(t);if(!n.is(":visible"))return null;var e=n.offset();return new g(e.left,e.top,n.outerWidth(),n.outerHeight())}}),h(y.prototype,{equals:function(t){return this.fracsEqual(t)&&this.rectsEqual(t)},fracsEqual:function(t){return m(this,t,["visible","viewport","possible"])},rectsEqual:function(t){return m(this.rects,t.rects,["document","element","viewport"])}}),h(y,{of:function(t,n){if(t=d(t)&&g.ofElement(t)||t,n=d(n)&&g.ofViewport(n)||n||g.ofViewport(),!v(t,g))return new y;var e=t.intersection(n);if(!e)return new y;var i=e.area(),o=f(t.width,n.width)*f(t.height,n.height);return new y(i/t.area(),i/n.area(),i/o,{document:e,element:e.relativeTo(t),viewport:e.relativeTo(n)})}});var k=["width","height","left","right","top","bottom"],S=["possible","visible","viewport"],E=function(t,n){return t.val-n.val},_=function(t,n){return n.val-t.val};function q(t){var n=g.ofContent(t,!0),e=g.ofViewport(t,!0),i=n.width-e.width,o=n.height-e.height;this.content=n,this.viewport=e,this.width=i<=0?null:e.left/i,this.height=o<=0?null:e.top/o,this.left=e.left,this.top=e.top,this.right=n.right-e.right,this.bottom=n.bottom-e.bottom}function x(t){this.el=t||o}h(T.prototype,{sorted:function(n,t){var e=this.viewport;return r.map(this.els,function(t){return{el:t,val:function(t,n,e){var i;return k.includes(e)?i=g.ofElement(t):S.includes(e)&&(i=y.of(t,n)),i?i[e]:0}(t,e,n)}}).sort(t?_:E)},best:function(t,n){return this.els.length?this.sorted(t,n)[0]:null}}),h(q.prototype,{equals:function(t){return m(this,t,["width","height","left","top","right","bottom","content","viewport"])}}),h(x.prototype,{equals:function(t){return m(this,t,["el"])},scrollState:function(){return new q(this.el)},scrollTo:function(t,n,e){var i=this.el===o?r("html,body"):r(this.el);t=t||0,n=n||0,e=isNaN(e)?1e3:e,i.stop(!0).animate({scrollLeft:t,scrollTop:n},e)},scrollToRect:function(t,n,e,i){n=n||0,e=e||0,this.scrollTo(t.left-n,t.top-e,i)},scrollToElement:function(t,n,e,i){var o=g.ofElement(t).relativeTo(g.ofContent(this.el));this.scrollToRect(o,n,e,i)}});var t={context:null,updatedValue:function(){return null},init:function(t){this.callbacks=r.Callbacks("memory unique"),this.curr_val=null,this.prev_val=null,r(t||o).on("load resize scroll",r.proxy(this.check,this))},bind:function(t){this.callbacks.add(t)},unbind:function(t){t?this.callbacks.remove(t):this.callbacks.empty()},check:function(t){var n=this.updatedValue(t);return void 0!==n&&(this.prev_val=this.curr_val,this.curr_val=n,this.callbacks.fireWith(this.context,[this.curr_val,this.prev_val]),!0)}};function V(t,n){this.context=t,this.viewport=n,this.init()}function C(t,n,e,i){this.context=new T(t,n),this.property=e,this.descending=i,this.init()}function L(t){this.context=t&&t!==o&&t!==i?t:o,this.init(this.context)}h(V.prototype,t,{updatedValue:function(){var t=y.of(this.context,this.viewport);if(!t.equals(this.curr_val))return t}}),h(C.prototype,t,{updatedValue:function(){var t=this.context.best(this.property,this.descending);if(t&&(t=0<t.val?t.el:null,this.curr_val!==t))return t}}),h(L.prototype,t,{updatedValue:function(){var t=new q(this.context);if(!t.equals(this.curr_val))return t}});var W={content:function(t){return this.length?g.ofContent(this[0],t):null},envelope:function(){var i;return r.each(this,function(t,n){var e=g.ofElement(n);i=i?i.envelope(e):e}),i},fracs:function(t,e,i){p(t,"string")||(i=e,e=t,t=null),u(e)||(i=e,e=null),i=w(i);var o="fracs."+b(i);return"unbind"===t?this.each(function(){var t=r(this).data(o);t&&t.unbind(e)}):"check"===t?this.each(function(){var t=r(this).data(o);t&&t.check()}):u(e)?this.each(function(){var t=r(this),n=t.data(o);n||(n=new V(this,i),t.data(o,n)),n.bind(e)}):this.length?y.of(this[0],i):null},intersection:function(){var i;return r.each(this,function(t,n){var e=g.ofElement(n);i=i?i.intersection(e):e}),i},max:function(t,n,e){return u(n)||(e=n,n=null),e=w(e),n?(new C(this,e,t,!0).bind(n),this):this.pushStack(new T(this,e).best(t,!0).el)},min:function(t,n,e){return u(n)||(e=n,n=null),e=w(e),n?(new C(this,e,t).bind(n),this):this.pushStack(new T(this,e).best(t).el)},rect:function(){return this.length?g.ofElement(this[0]):null},scrollState:function(t,e){var i="fracs.scrollState";return p(t,"string")||(e=t,t=null),"unbind"===t?this.each(function(){var t=r(this).data(i);t&&t.unbind(e)}):"check"===t?this.each(function(){var t=r(this).data(i);t&&t.check()}):u(e)?this.each(function(){var t=r(this),n=t.data(i);n||(n=new L(this),t.data(i,n)),n.bind(e)}):this.length?new q(this[0]):null},scroll:function(t,n,e){return this.each(function(){new x(this).scroll(t,n,e)})},scrollTo:function(t,n,e,i){return r.isNumeric(t)&&(i=e,e=n,n=t,t=null),t=w(t),this.each(function(){t?new x(this).scrollToElement(t,n,e,i):new x(this).scrollTo(n,e,i)})},scrollToThis:function(t,n,e,i){return(i=new x(w(i))).scrollToElement(this[0],t,n,e),this},sort:function(t,n,e){return p(n,"boolean")||(e=n,n=null),e=w(e),this.pushStack(r.map(new T(this,e).sorted(t,!n),function(t){return t.el}))},viewport:function(t){return this.length?g.ofViewport(this[0],t):null}};r.fracs=function(t,n){return y.of(t,n)},r.fracs._={Rect:g,Fractions:y,Group:T,ScrollState:q,Viewport:x,FracsCallbacks:V,GroupCallbacks:C,ScrollStateCallbacks:L},r.fn.fracs=function(){for(var t=W.fracs,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return u(W[e[0]])&&(t=W[e.shift()]),Reflect.apply(t,this,e)}}();