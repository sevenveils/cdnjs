!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).redom={})}(this,function(e){"use strict";var t="#".charCodeAt(0),i=".".charCodeAt(0),n=0,o=1,r=2;function l(e,l){var s=function(e){for(var l=null,s=null,u=null,a=n,f=0,d=0;d<=e.length;d++){var v=e.charCodeAt(d),h=v===t,c=v===i;(h||c||!v)&&(a===n?l=0===d?"div":e.substring(f,d):a===o?s=e.substring(f,d):u?u+=" "+e.substring(f,d):u=e.substring(f,d),h?a=o:c&&(a=r),f=d+1)}return{tag:l,id:s,className:u}}(e),u=s.tag,a=s.id,f=s.className,d=l?document.createElementNS(l,u):document.createElement(u);return a&&(d.id=a),f&&(l?d.setAttribute("class",f):d.className=f),d}function s(e,t){var i=N(e),n=N(t);return t===n&&n.__redom_view&&(t=n.__redom_view),n.parentNode&&(u(t,n,i),i.removeChild(n)),t}function u(e,t,i){var n=t.__redom_lifecycle;if(a(n))t.__redom_mounted=!1;else{var o=i;for(t.__redom_mounted&&h(t,"onunmount");o;){var r=o.__redom_lifecycle||{};for(var l in n)r[l]&&(r[l]-=n[l]);a(r)&&(o.__redom_lifecycle=null),o=o.parentNode}}}function a(e){if(null==e)return!0;for(var t in e)if(e[t])return!1;return!0}var f=["onmount","onremount","onunmount"],d="undefined"!=typeof window&&"ShadowRoot"in window;function v(e,t,i,n){var o=N(e),r=N(t);t===r&&r.__redom_view&&(t=r.__redom_view),t!==r&&(r.__redom_view=t);var l=r.__redom_mounted,s=r.parentNode;return l&&s!==o&&u(0,r,s),null!=i?n?o.replaceChild(r,N(i)):o.insertBefore(r,N(i)):o.appendChild(r),function(e,t,i,n){for(var o=t.__redom_lifecycle||(t.__redom_lifecycle={}),r=i===n,l=!1,s=0,u=f;s<u.length;s+=1){var a=u[s];r||e!==t&&a in e&&(o[a]=(o[a]||0)+1),o[a]&&(l=!0)}if(!l)return void(t.__redom_mounted=!0);var v=i,c=!1;(r||v&&v.__redom_mounted)&&(h(t,r?"onremount":"onmount"),c=!0);for(;v;){var _=v.parentNode,p=v.__redom_lifecycle||(v.__redom_lifecycle={});for(var m in o)p[m]=(p[m]||0)+o[m];if(c)break;(v===document||d&&v instanceof window.ShadowRoot||_&&_.__redom_mounted)&&(h(v,r?"onremount":"onmount"),c=!0),v=_}}(t,r,o,s),t}function h(e,t){"onmount"===t||"onremount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var i=e.__redom_lifecycle;if(i){var n=e.__redom_view,o=0;for(var r in n&&n[t]&&n[t](),i)r&&o++;if(o)for(var l=e.firstChild;l;){var s=l.nextSibling;h(l,t),l=s}}}function c(e,t,i){var n=N(e);if("object"==typeof t)for(var o in t)_(n,o,t[o]);else _(n,t,i)}function _(e,t,i){e.style[t]=null==i?"":i}var p="http://www.w3.org/1999/xlink";function m(e,t,i,n){var o=N(e);if("object"==typeof t)for(var r in t)m(o,r,t[r],n);else{var l=o instanceof SVGElement,s="function"==typeof i;if("style"===t&&"object"==typeof i)c(o,i);else if(l&&s)o[t]=i;else if("dataset"===t)y(o,i);else if(!l&&(t in o||s))o[t]=i;else{if(l&&"xlink"===t)return void w(o,i);n&&"class"===t&&(i=o.className+" "+i),null==i?o.removeAttribute(t):o.setAttribute(t,i)}}}function w(e,t,i){if("object"==typeof t)for(var n in t)w(e,n,t[n]);else null!=i?e.setAttributeNS(p,t,i):e.removeAttributeNS(p,t,i)}function y(e,t,i){if("object"==typeof t)for(var n in t)y(e,n,t[n]);else null!=i?e.dataset[t]=i:delete e.dataset[t]}function g(e){return document.createTextNode(null!=e?e:"")}function b(e,t,i){for(var n=0,o=t;n<o.length;n+=1){var r=o[n];if(0===r||r){var l=typeof r;"function"===l?r(e):"string"===l||"number"===l?e.appendChild(g(r)):k(N(r))?v(e,r):r.length?b(e,r,i):"object"===l&&m(e,r,null,i)}}}function x(e){return"string"==typeof e?S(e):N(e)}function N(e){return e.nodeType&&e||!e.el&&e||N(e.el)}function k(e){return e&&e.nodeType}var A={};function S(e){for(var t,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];var o=typeof e;if("string"===o)t=j(e).cloneNode(!1);else if(k(e))t=e.cloneNode(!1);else{if("function"!==o)throw new Error("At least one argument required");var r=e;t=new(Function.prototype.bind.apply(r,[null].concat(i)))}return b(N(t),i,!0),t}var C=S,V=S;function j(e){return A[e]||(A[e]=l(e))}function D(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var n=function e(t,i,n){var o=n;var r=new Array(i.length);for(var l=0;l<i.length;l++)r[l]=i[l]&&N(i[l]);for(var s=0;s<i.length;s++){var u=i[s];if(u){var a=r[s];if(a!==o)if(k(a)){var f=o&&o.nextSibling,d=null!=u.__redom_index,h=d&&f===r[s+1];v(t,u,o,h),h&&(o=f)}else null!=u.length&&(o=e(t,u,o));else o=o.nextSibling}}return o}(e,t,N(e).firstChild);n;){var o=n.nextSibling;s(e,n),n=o}}S.extend=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n=j(e);return S.bind.apply(S,[this,n].concat(t))};var E=function(e,t,i){this.View=e,this.initData=i,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],null!=t&&(this.key="function"==typeof t?t:function(e){return function(t){return t[e]}}(t))};function L(e,t,i,n){return new P(e,t,i,n)}E.prototype.update=function(e,t){for(var i=this.View,n=this.key,o=this.initData,r=null!=n,l=this.lookup,s={},u=new Array(e.length),a=this.views,f=0;f<e.length;f++){var d=e[f],v=void 0;if(r){var h=n(d);v=l[h]||new i(o,d,f,e),s[h]=v,v.__redom_id=h}else v=a[f]||new i(o,d,f,e);v.update&&v.update(d,f,e,t),N(v.el).__redom_view=v,u[f]=v}this.oldViews=a,this.views=u,this.oldLookup=l,this.lookup=s};var P=function(e,t,i,n){this.__redom_list=!0,this.View=t,this.initData=n,this.views=[],this.pool=new E(t,i,n),this.el=x(e),this.keySet=null!=i};P.prototype.update=function(e,t){void 0===e&&(e=[]);var i=this.keySet,n=this.views;this.pool.update(e,t);var o=this.pool,r=o.views,l=o.lookup;if(i)for(var u=0;u<n.length;u++){var a=n[u];null==l[a.__redom_id]&&(a.__redom_index=null,s(this,a))}for(var f=0;f<r.length;f++){r[f].__redom_index=f}D(this,r),i&&(this.lookup=l),this.views=r},P.extend=function(e,t,i,n){return P.bind(P,e,t,i,n)},L.extend=P.extend;var R=function(e,t){this.el=g(""),this.visible=!1,this.view=null,this._placeholder=this.el,e instanceof Node?this._el=e:this._View=e,this._initData=t};R.prototype.update=function(e,t){var i=this._placeholder,n=this.el.parentNode;if(e){if(!this.visible){if(this._el)return v(n,this._el,i),s(n,i),this.el=this._el,void(this.visible=e);var o=new(0,this._View)(this._initData);this.el=N(o),this.view=o,v(n,o,i),s(n,i)}this.view&&this.view.update&&this.view.update(t)}else if(this.visible){if(this._el)return v(n,i,this._el),s(n,this._el),this.el=i,void(this.visible=e);v(n,i,this.view),s(n,this.view),this.el=i,this.view=null}this.visible=e};var T=function(e,t,i){this.el=x(e),this.Views=t,this.initData=i};T.prototype.update=function(e,t){if(e!==this.route){var i=this.Views[e];this.route=e,this.view=i&&new i(this.initData,t),D(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var q="http://www.w3.org/2000/svg",F={};function B(e){for(var t,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];var o=typeof e;if("string"===o)t=M(e).cloneNode(!1);else if(k(e))t=e.cloneNode(!1);else{if("function"!==o)throw new Error("At least one argument required");var r=e;t=new(Function.prototype.bind.apply(r,[null].concat(i)))}return b(N(t),i,!0),t}var G=B;function M(e){return F[e]||(F[e]=l(e,q))}B.extend=function(e){var t=M(e);return B.bind(this,t)},B.ns=q,e.el=C,e.h=V,e.html=S,e.list=L,e.List=P,e.listPool=function(e,t,i){return new E(e,t,i)},e.ListPool=E,e.mount=v,e.unmount=s,e.place=function(e,t){return new R(e,t)},e.Place=R,e.router=function(e,t,i){return new T(e,t,i)},e.Router=T,e.setAttr=function(e,t,i){m(e,t,i)},e.setXlink=w,e.setData=y,e.setStyle=c,e.setChildren=D,e.s=G,e.svg=B,e.text=g,Object.defineProperty(e,"__esModule",{value:!0})});