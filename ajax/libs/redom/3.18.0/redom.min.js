!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).redom={})}(this,function(e){"use strict";var t="#".charCodeAt(0),i=".".charCodeAt(0),n=function(e,n){var o=function(e){for(var n=null,o=null,r=null,l=0,s=0,u=0;u<=e.length;u++){var a=e.charCodeAt(u),f=a===t,d=a===i;(f||d||!a)&&(0===l?n=0===u?"div":e.substring(s,u):1===l?o=e.substring(s,u):r?r+=" "+e.substring(s,u):r=e.substring(s,u),f?l=1:d&&(l=2),s=u+1)}return{tag:n,id:o,className:r}}(e),r=o.tag,l=o.id,s=o.className,u=n?document.createElementNS(n,r):document.createElement(r);return l&&(u.id=l),s&&(n?u.setAttribute("class",s):u.className=s),u},o=function(e,t){var i=m(e),n=m(t);return t===n&&n.__redom_view&&(t=n.__redom_view),n.parentNode&&(r(t,n,i),i.removeChild(n)),t},r=function(e,t,i){var n=t.__redom_lifecycle;if(l(n))t.__redom_mounted=!1;else{var o=i;for(t.__redom_mounted&&d(t,"onunmount");o;){var r=o.__redom_lifecycle||{};for(var s in n)r[s]&&(r[s]-=n[s]);l(r)&&(o.__redom_lifecycle=null),o=o.parentNode}}},l=function(e){if(null==e)return!0;for(var t in e)if(e[t])return!1;return!0},s=["onmount","onremount","onunmount"],u="undefined"!=typeof window&&"ShadowRoot"in window,a=function(e,t,i,n){var o=m(e),l=m(t);t===l&&l.__redom_view&&(t=l.__redom_view),t!==l&&(l.__redom_view=t);var s=l.__redom_mounted,u=l.parentNode;return s&&u!==o&&r(t,l,u),null!=i?n?o.replaceChild(l,m(i)):o.insertBefore(l,m(i)):o.appendChild(l),f(t,l,o,u),t},f=function(e,t,i,n){for(var o=t.__redom_lifecycle||(t.__redom_lifecycle={}),r=i===n,l=!1,a=0,f=s;a<f.length;a+=1){var h=f[a];r||e!==t&&h in e&&(o[h]=(o[h]||0)+1),o[h]&&(l=!0)}if(l){var v=i,c=!1;for((r||v&&v.__redom_mounted)&&(d(t,r?"onremount":"onmount"),c=!0);v;){var _=v.parentNode,p=v.__redom_lifecycle||(v.__redom_lifecycle={});for(var w in o)p[w]=(p[w]||0)+o[w];if(c)break;(v===document||u&&v instanceof window.ShadowRoot||_&&_.__redom_mounted)&&(d(v,r?"onremount":"onmount"),c=!0),v=_}}else t.__redom_mounted=!0},d=function(e,t){"onmount"===t||"onremount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var i=e.__redom_lifecycle;if(i){var n=e.__redom_view,o=0;for(var r in n&&n[t]&&n[t](),i)r&&o++;if(o)for(var l=e.firstChild;l;){var s=l.nextSibling;d(l,t),l=s}}},h=function(e,t,i){var n=m(e);if(void 0!==i)n.style[t]=i;else if("string"==typeof t)n.setAttribute("style",t);else for(var o in t)h(n,o,t[o])},v="http://www.w3.org/1999/xlink",c=function(e,t,i){var n=m(e),o=n instanceof SVGElement,r="function"==typeof i;if(void 0!==i)if("style"===t)h(n,i);else if(o&&r)n[t]=i;else if("dataset"===t)!function(e,t){for(var i in t)e.dataset[i]=t[i]}(n,i);else if(!o&&(t in n||r))n[t]=i;else{if(o&&"xlink"===t)return void function(e,t){for(var i in t)e.setAttributeNS(v,i,t[i])}(n,i);n.setAttribute(t,i)}else for(var l in t)c(n,l,t[l])};var _=function(e){return document.createTextNode(null!=e?e:"")},p=function(e,t){for(var i=0,n=t;i<n.length;i+=1){var o=n[i];if(0===o||o){var r=typeof o;"function"===r?o(e):"string"===r||"number"===r?e.appendChild(_(o)):y(m(o))?a(e,o):o.length?p(e,o):"object"===r&&c(e,o)}}},w=function(e){return"string"==typeof e?x(e):m(e)},m=function(e){return e.nodeType&&e||!e.el&&e||m(e.el)},y=function(e){return e&&e.nodeType},g={},b=function(e){return g[e]||(g[e]=n(e))},x=function(e){for(var t,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];var o=typeof e;if("string"===o)t=b(e).cloneNode(!1);else if(y(e))t=e.cloneNode(!1);else{if("function"!==o)throw new Error("At least one argument required");var r=e;t=new(Function.prototype.bind.apply(r,[null].concat(i)))}return p(m(t),i),t};x.extend=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n=b(e);return x.bind.apply(x,[this,n].concat(t))};var N=x,k=x,A=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var n=function e(t,i,n){var o=n;var r=new Array(i.length);for(var l=0;l<i.length;l++)r[l]=i[l]&&m(i[l]);for(var s=0;s<i.length;s++){var u=i[s];if(u){var f=r[s];if(f!==o)if(y(f)){var d=o&&o.nextSibling,h=null!=u.__redom_index,v=h&&d===r[s+1];a(t,u,o,v),v&&(o=d)}else null!=u.length&&(o=e(t,u,o));else o=o.nextSibling}}return o}(e,t,m(e).firstChild);n;){var r=n.nextSibling;o(e,n),n=r}};var S=function(e,t,i){this.View=e,this.initData=i,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],null!=t&&(this.key="function"==typeof t?t:function(e){return function(t){return t[e]}}(t))};S.prototype.update=function(e,t){for(var i=this.View,n=this.key,o=this.initData,r=null!=n,l=this.lookup,s={},u=new Array(e.length),a=this.views,f=0;f<e.length;f++){var d=e[f],h=void 0;if(r){var v=n(d);h=l[v]||new i(o,d,f,e),s[v]=h,h.__redom_id=v}else h=a[f]||new i(o,d,f,e);h.update&&h.update(d,f,e,t),m(h.el).__redom_view=h,u[f]=h}this.oldViews=a,this.views=u,this.oldLookup=l,this.lookup=s};var C=function(e,t,i,n){return new V(e,t,i,n)},V=function(e,t,i,n){this.__redom_list=!0,this.View=t,this.initData=n,this.views=[],this.pool=new S(t,i,n),this.el=w(e),this.keySet=null!=i};V.prototype.update=function(e,t){void 0===e&&(e=[]);var i=this.keySet,n=this.views;this.pool.update(e,t);var r=this.pool,l=r.views,s=r.lookup;if(i)for(var u=0;u<n.length;u++){var a=n[u];null==s[a.__redom_id]&&(a.__redom_index=null,o(this,a))}for(var f=0;f<l.length;f++){l[f].__redom_index=f}A(this,l),i&&(this.lookup=s),this.views=l},V.extend=function(e,t,i,n){return V.bind(V,e,t,i,n)},C.extend=V.extend;var D=function(e,t){this.el=_(""),this.visible=!1,this.view=null,this._placeholder=this.el,e instanceof Node?this._el=e:this._View=e,this._initData=t};D.prototype.update=function(e,t){var i=this._placeholder,n=this.el.parentNode;if(e){if(!this.visible){if(this._el)return a(n,this._el,i),o(n,i),this.el=this._el,void(this.visible=e);var r=new(0,this._View)(this._initData);this.el=m(r),this.view=r,a(n,r,i),o(n,i)}this.view&&this.view.update&&this.view.update(t)}else if(this.visible){if(this._el)return a(n,i,this._el),o(n,this._el),this.el=i,void(this.visible=e);a(n,i,this.view),o(n,this.view),this.el=i,this.view=null}this.visible=e};var E=function(e,t,i){this.el=w(e),this.Views=t,this.initData=i};E.prototype.update=function(e,t){if(e!==this.route){var i=this.Views[e];this.route=e,this.view=i&&new i(this.initData,t),A(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var L="http://www.w3.org/2000/svg",P={},j=function(e){return P[e]||(P[e]=n(e,L))},R=function(e){for(var t,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];var o=typeof e;if("string"===o)t=j(e).cloneNode(!1);else if(y(e))t=e.cloneNode(!1);else{if("function"!==o)throw new Error("At least one argument required");var r=e;t=new(Function.prototype.bind.apply(r,[null].concat(i)))}return p(m(t),i),t};R.extend=function(e){var t=j(e);return R.bind(this,t)},R.ns=L;var T=R;e.el=N,e.h=k,e.html=x,e.list=C,e.List=V,e.listPool=function(e,t,i){return new S(e,t,i)},e.ListPool=S,e.mount=a,e.unmount=o,e.place=function(e,t){return new D(e,t)},e.Place=D,e.router=function(e,t,i){return new E(e,t,i)},e.Router=E,e.setAttr=c,e.setStyle=h,e.setChildren=A,e.s=T,e.svg=R,e.text=_,Object.defineProperty(e,"__esModule",{value:!0})});