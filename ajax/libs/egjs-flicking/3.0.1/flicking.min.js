/*
Copyright (c) 2017 NAVER Corp.
@egjs/flicking JavaScript library
@egjs/flicking project is licensed under the MIT license

https://github.com/naver/egjs-flicking
@version 3.0.1
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@egjs/component"),require("@egjs/axes")):"function"==typeof define&&define.amd?define(["@egjs/component","@egjs/axes"],t):((e=e||self).eg=e.eg||{},e.eg.Flicking=t(e.eg.Component,e.eg.Axes))}(this,function(e,r){"use strict";var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function f(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(function(n){Object.keys(n).forEach(function(e){var t=n[e];i[e]=t})}),i}function c(e){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(e){if(o(e)){var t=document.createElement("div");t.innerHTML=e,n.push.apply(n,h(t.children))}else n.push(e)}),n}var s=function(){var e={webkitTransform:"-webkit-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",transform:"transform"},t=document.documentElement.style,n="";for(var i in e)i in t&&(n=i);if(!n)throw new Error("Browser doesn't support CSS3 2D Transforms.");var r=document.createElement("div");document.documentElement.insertBefore(r,null),r.style[n]="translate3d(1px, 1px, 1px)";var a=window.getComputedStyle(r).getPropertyValue(e[n]);r.parentElement.removeChild(r);var o={name:n,has3d:0<a.length&&"none"!==a};return s=function(){return o},o};function o(e){return"string"==typeof e}function l(t,n){Object.keys(n).forEach(function(e){t.style[e]=n[e]})}function C(e,t,n){return Math.max(Math.min(e,n),t)}function u(e,t,n){return t<=e&&e<=n}function h(e){return[].slice.call(e)}function p(e,t,n){var i=null!=n?n:t/2,r=/(?:(\+|\-)\s*)?(\d+(?:\.\d+)?(%|px)?)/g;if("number"==typeof e)return C(e,0,t);for(var a=0,o=0,s=r.exec(e);null!=s;){var l=s[1],c=s[2],h=s[3],u=parseFloat(c);if(a<=0&&(l=l||"+"),!l)return i;"%"===h&&(u=u/100*t),o+="+"===l?u:-u,++a,s=r.exec(e)}return 0===a?i:C(o,0,t)}function d(e,t){var n=t[0],i=t[1],r=t[2];return i<e&&r-i?(e-i)/(r-i):e<i&&i-n?(e-i)/(i-n):e!==i&&r-n?(e-n)/(r-n):0}function v(e,t){for(var n=0;n<e.length;n+=1){var i=e[n];if(i&&t(i))return n}return-1}function P(e,t,n,i){var r=i?n-t+1:n-t;if(e<t)e=n-(i?(t-e-1)%r:(t-e)%r);else if(n<e){e=t+(i?(e-n-1)%r:(e-n)%r)}return e}var g="snap",w="freeScroll",m={snap:{type:"snap",count:1},freeScroll:{type:"freeScroll"}},x={classPrefix:"eg-flick",deceleration:.0075,horizontal:!0,circular:!1,infinite:!1,infiniteThreshold:0,lastIndex:1/0,threshold:40,duration:100,panelEffect:function(e){return 1-Math.pow(1-e,3)},defaultIndex:0,inputType:["touch","mouse"],thresholdAngle:45,bounce:10,autoResize:!1,adaptive:!1,zIndex:2e3,bound:!1,overflow:!1,hanger:"50%",anchor:"50%",gap:0,moveType:m.snap},E={position:"relative",zIndex:x.zIndex,width:"100%",height:"100%",overflow:"hidden"},S={width:"100%",height:"100%",willChange:"transform"},A={position:"absolute"},b={HOLD_START:"holdStart",HOLD_END:"holdEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",CHANGE:"change",RESTORE:"restore",SELECT:"select",NEED_PANEL:"needPanel"},I={HOLD:"hold",CHANGE:"change",RELEASE:"release",ANIMATION_END:"animationEnd",FINISH:"finish"},M=0,y=1,T=2,z=3,N=4,R={PREV:"PREV",NEXT:"NEXT"},k=s(),H=function(){function a(e,t,n){this.element=e,this.viewport=n,this.prevSibling=null,this.nextSibling=null,this.state={index:t,position:0,relativeAnchorPosition:0,size:0,clonedPanels:[],isClone:!1,cloneIndex:-1,originalStyle:{className:e.getAttribute("class")||null,style:e.getAttribute("style")||null},cachedBbox:null};var i,r,a=n.options;a.classPrefix&&(i=e,r=a.classPrefix+"-panel",i.classList?i.classList.add(r):i.className.indexOf(r)<0&&(i.className=(i.className+" "+r).replace(/\s{2,}/g," "))),l(this.element,A)}var e=a.prototype;return e.resize=function(){var e=this.state,t=this.viewport.options,n=this.getBbox();e.size=t.horizontal?n.width:n.height,e.relativeAnchorPosition=p(t.anchor,e.size),e.isClone||e.clonedPanels.forEach(function(e){return e.resize()})},e.unCacheBbox=function(){this.state.cachedBbox=null},e.getProgress=function(){var e=this.viewport,t=e.options,n=e.panelManager.getPanelCount(),i=e.getScrollAreaSize();return(t.circular?Math.floor(this.getPosition()/i)*n:0)+this.getIndex()-e.getCurrentProgress()},e.getOutsetProgress=function(){var e=this.viewport,t=[-this.getSize(),e.getRelativeHangerPosition()-this.getRelativeAnchorPosition(),e.getSize()];return d(this.getPosition()-e.getCameraPosition(),t)},e.getVisibleRatio=function(){var e=this.viewport,t=this.getSize(),n=this.getPosition()-e.getCameraPosition(),i=n+t,r=Math.min(e.getSize(),i)-Math.max(n,0);return 0<=r?r/t:0},e.focus=function(e){var t=this.viewport,n=t.getCurrentPanel();if(t.getHangerPosition()!==this.getAnchorPosition()&&n){var i=n.getPosition()===this.getPosition()?"":b.CHANGE;t.moveTo(this,t.findEstimatedPosition(this),i,null,e)}},e.update=function(t){this.getIdenticalPanels().forEach(function(e){t(e.getElement()),e.unCacheBbox()}),this.viewport.resize()},e.prev=function(){var e=this.viewport.options,t=this.prevSibling;if(!t)return null;var n=this.getIndex(),i=this.getPosition(),r=t.getIndex(),a=t.getPosition(),o=t.getSize(),s=1<n-r,l=e.infinite&&0<n&&n<r;if(s||l)return null;var c=i-o-e.gap,h=t;return a!==c&&(h=t.clone(t.getCloneIndex(),!0)).setPosition(c,!0),h},e.next=function(){var e=this.viewport,t=e.options,n=this.nextSibling,i=e.panelManager.getLastIndex();if(!n)return null;var r=this.getIndex(),a=this.getPosition(),o=n.getIndex(),s=n.getPosition(),l=1<o-r,c=t.infinite&&r<i&&o<r;if(l||c)return null;var h=a+this.getSize()+t.gap,u=n;return s!==h&&(u=n.clone(n.getCloneIndex(),!0)).setPosition(h,!0),u},e.insertBefore=function(e){var t=this.viewport,n=c(e),i=t.panelManager.firstPanel(),r=this.prevSibling,a=r&&i.getIndex()!==this.getIndex()?Math.max(r.getIndex()+1,this.getIndex()-n.length):Math.max(this.getIndex()-n.length,0);return t.insert(a,n)},e.insertAfter=function(e){return this.viewport.insert(this.getIndex()+1,e)},e.remove=function(){return this.viewport.remove(this.getIndex()),this},e.destroy=function(){var e=this.element,t=this.state.originalStyle;for(var n in t.className?e.setAttribute("class",t.className):e.removeAttribute("class"),t.style?e.setAttribute("style",t.style):e.removeAttribute("style"),this)this[n]=null},e.getElement=function(){return this.element},e.getAnchorPosition=function(){return this.state.position+this.state.relativeAnchorPosition},e.getRelativeAnchorPosition=function(){return this.state.relativeAnchorPosition},e.getIndex=function(){return this.state.index},e.getPosition=function(){return this.state.position},e.getSize=function(){return this.state.size},e.getBbox=function(){var e=this.state;return e.cachedBbox||(e.cachedBbox=this.element.getBoundingClientRect()),e.cachedBbox},e.isClone=function(){return this.state.isClone},e.getCloneIndex=function(){return this.state.cloneIndex},e.getClonedPanels=function(){var e=this.state;return e.isClone?this.original.getClonedPanels():e.clonedPanels},e.getIdenticalPanels=function(){var e=this.state;return e.isClone?this.original.getIdenticalPanels():[this].concat(e.clonedPanels)},e.getOriginalPanel=function(){return this.state.isClone?this.original:this},e.setIndex=function(t){var e=this.state;e.index=t,e.clonedPanels.forEach(function(e){return e.state.index=t})},e.setPosition=function(e,t){void 0===t&&(t=!1);var n=this.state,i=this.viewport.options,r=this.element.style;return n.position=e,t||(i.horizontal?r.left=e+"px":r.top=e+"px"),this},e.clone=function(e,t){void 0===t&&(t=!1);var n=this.state,i=new a(t?this.element:this.element.cloneNode(!0),n.index,this.viewport),r=i.state;return i.original=this,r.isClone=!0,r.cloneIndex=e,r.size=n.size,r.relativeAnchorPosition=n.relativeAnchorPosition,r.originalStyle=n.originalStyle,r.cachedBbox=n.cachedBbox,t?(i.prevSibling=this.prevSibling,i.nextSibling=this.nextSibling):n.clonedPanels.push(i),i},e.removeElement=function(){var e=this.element;e.parentNode.removeChild(e),this.state.isClone||this.removeClonedPanelsAfter(0)},e.removeClonedPanelsAfter=function(e){this.state.clonedPanels.splice(e).forEach(function(e){e.removeElement()})},a}(),O=function(){function e(e,t){this.cameraElement=e,this.panels=[],this.clones=[],this.range={min:-1,max:-1},this.length=0,this.options=t,this.lastIndex=t.lastIndex}var t=e.prototype;return t.firstPanel=function(){return this.panels[this.range.min]},t.lastPanel=function(){return this.panels[this.range.max]},t.allPanels=function(){return this.panels.concat(this.clonedPanels())},t.originalPanels=function(){return this.panels},t.clonedPanels=function(){return this.clones.reduce(function(e,t){return e.concat(t)},[])},t.has=function(e){return!!this.panels[e]},t.get=function(e){return this.panels[e]},t.getPanelCount=function(){return this.length},t.getLastIndex=function(){return this.lastIndex},t.getRange=function(){return this.range},t.getCloneCount=function(){return this.clones.length},t.setLastIndex=function(e){this.lastIndex=e;var t=this.firstPanel(),n=this.lastPanel();if(t&&n){var i=this.range;if(n.getIndex()>e){var r=this.panels.splice(e+1);r.forEach(function(e){return e.removeElement()}),this.length-=r.length;var a=r.filter(function(e){return!!e})[0].prevSibling;i.max=a?a.getIndex():i.min=-1}}},t.append=function(e){var t,n=this.range;(t=this.panels).push.apply(t,e),0<e.length&&(n.min=Math.max(0,n.min),n.max+=e.length,this.length+=e.length)},t.insert=function(n,e){var i=this.panels,t=this.range,r=this.cameraElement,a=this.options.circular,o=this.lastIndex,s=this.findFirstPanelFrom(n),l=this.firstPanel(),c=s?s.getElement():a&&l?l.getClonedPanels()[0].getElement():null,h=document.createDocumentFragment();e.forEach(function(e){return h.appendChild(e.getElement())}),r.insertBefore(h,c);var u=e.length;if(n>t.max)e.forEach(function(e,t){i[n+t]=e});else{var g=i.slice(n,n+e.length),f=v(g,function(e){return!!e});if(f<0&&(f=g.length),u=e.length-f,i.splice.apply(i,[n,f].concat(e)),i.length>o+1){var p=i.splice(o+1).filter(function(e){return Boolean(e)});p.forEach(function(e){return e.removeElement()}),this.length-=p.length;var d=o-v(this.panels.concat().reverse(),function(e){return!!e});this.panels.splice(d+1),this.range.max=d}}return 0<u&&i.slice(n+e.length).forEach(function(e){e.setIndex(e.getIndex()+u)}),a&&this.addNewClones(n,e,e.length-u,s),this.length+=e.length,this.updateIndex(n),u},t.replace=function(e,t){var n=this.panels,i=this.range,r=this.cameraElement,a=this.options.circular,o=this.findFirstPanelFrom(e+t.length),s=this.firstPanel(),l=o?o.getElement():a&&s?s.getClonedPanels()[0].getElement():null,c=document.createDocumentFragment();t.forEach(function(e){return c.appendChild(e.getElement())}),r.insertBefore(c,l),e>i.max&&(n[e]=null);var h=n.splice.apply(n,[e,t.length].concat(t)),u=h.filter(function(e){return Boolean(e)}).length;h.forEach(function(e){e&&e.removeElement()}),this.length+=t.length-u,this.updateIndex(e),a&&this.addNewClones(e,t,t.length,o)},t.remove=function(t,n){void 0===n&&(n=1);var e=this.options.circular,i=this.panels,r=this.clones;n=Math.max(n,0);var a=i.splice(t,n).filter(function(e){return!!e});a.forEach(function(e){e.removeElement()}),e&&r.forEach(function(e){e.splice(t,n)}),i.slice(t).forEach(function(e){e.setIndex(e.getIndex()-n)});var o=i.length-1;if(!i[o]){var s=v(i.concat().reverse(),function(e){return!!e});o=s<0?-1:o-s,i.splice(o+1),e&&r.forEach(function(e){e.splice(o+1)})}return this.range={min:v(i,function(e){return!!e}),max:o},this.length-=a.length,this.length<=0&&(this.clones=[]),a},t.chainAllPanels=function(){var r=this.allPanels().filter(function(e){return!!e}),a=r.length;if(!(a<=0)&&(r.forEach(function(e,t){var n=0<t?r[t-1]:null,i=t<a-1?r[t+1]:null;e.prevSibling=n,e.nextSibling=i}),this.options.circular)){var e=r[0],t=r[a-1];(e.prevSibling=t).nextSibling=e}},t.insertClones=function(e,n,t,i){void 0===i&&(i=0);var r=this.clones,a=this.lastIndex;if(r[e]){var o=r[e];n>=o.length?t.forEach(function(e,t){o[n+t]=e}):(o.splice.apply(o,[n,i].concat(t)),t.length>a+1&&t.splice(a+1))}else{var s=[];t.forEach(function(e,t){s[n+t]=e}),r[e]=s}},t.removeClonesAfter=function(t){this.panels.forEach(function(e){e.removeClonedPanelsAfter(t)}),this.clones.splice(t)},t.clear=function(){this.panels.forEach(function(e){e.removeElement()}),this.panels=[],this.clones=[],this.length=0,this.range={min:-1,max:-1}},t.clearClone=function(){this.panels.forEach(function(e){e.removeClonedPanelsAfter(0)}),this.clones=[]},t.findPanelOf=function(e){for(var t=0,n=this.allPanels();t<n.length;t++){var i=n[t];if(i)if(i.getElement().contains(e))return i}},t.findFirstPanelFrom=function(e){for(var t=0,n=this.panels;t<n.length;t++){var i=n[t];if(i&&i.getIndex()>=e)return i}},t.addNewClones=function(a,o,s,e){for(var l=this.cameraElement,t=this.getCloneCount(),n=this.lastPanel(),c=n?n.getClonedPanels():[],h=e?e.getClonedPanels():[],i=function(n){var e=h[n],t=c[n],i=e?e.getElement():t?t.getElement().nextElementSibling:null,r=o.map(function(e){var t=e.clone(n);return l.insertBefore(t.getElement(),i),t});u.insertClones(n,a,r,s)},u=this,r=0,g=function(e){for(var t=[],n=0;n<e;n+=1)t[n]=n;return t}(t);r<g.length;r++){i(g[r])}},t.updateIndex=function(e){var t=this.panels,n=this.range,i=t.length-1;i>n.max&&(n.max=i),(e<n.min||n.min<0)&&(n.min=e)},e}(),t=function(){function e(){this.delta=0,this.direction=null,this.targetPanel=null,this.lastPosition=0}var t=e.prototype;return t.onEnter=function(e){this.delta=e.delta,this.direction=e.direction,this.targetPanel=e.targetPanel,this.lastPosition=e.lastPosition},t.onExit=function(e){},t.onHold=function(e,t){},t.onChange=function(e,t){},t.onRelease=function(e,t){},t.onAnimationEnd=function(e,t){},t.onFinish=function(e,t){},e}(),B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=M,e.holding=!1,e.playing=!1,e}a(e,t);var n=e.prototype;return n.onEnter=function(){this.direction=null,this.targetPanel=null,this.delta=0,this.lastPosition=0},n.onHold=function(e,t){var n=t.flicking,i=t.viewport,r=t.triggerEvent,a=t.transitTo;n.getPanelCount()<=0?a(N):(this.lastPosition=i.getCameraPosition(),r(b.HOLD_START,e,!0).onSuccess(function(){a(y)}).onStopped(function(){a(N)}))},n.onChange=function(e,t){var n=t.triggerEvent,i=t.transitTo;n(b.MOVE_START,e,!1).onSuccess(function(){i(z).onChange(e,t)}).onStopped(function(){i(N)})},e}(t),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=y,e.holding=!0,e.playing=!0,e.releaseEvent=null,e}a(e,t);var n=e.prototype;return n.onChange=function(e,t){var n=t.flicking,i=t.triggerEvent,r=t.transitTo,a=n.options.horizontal?e.inputEvent.offsetX:e.inputEvent.offsetY;this.direction=a<0?R.NEXT:R.PREV,i(b.MOVE_START,e,!0).onSuccess(function(){r(T).onChange(e,t)}).onStopped(function(){r(N)})},n.onRelease=function(e,t){var n=t.viewport,i=t.triggerEvent,r=t.transitTo;if(i(b.HOLD_END,e,!0),0!==e.delta.flick)return e.setTo({flick:n.getCameraPosition()},0),void r(M);this.releaseEvent=e},n.onFinish=function(e,t){var n=t.viewport,i=t.triggerEvent;if((0,t.transitTo)(M),this.releaseEvent){var r=this.releaseEvent.inputEvent.srcEvent.target,a=n.panelManager.findPanelOf(r),o=n.getCameraPosition();if(a){var s=a.getPosition();i(b.SELECT,null,!0,{direction:o<s?R.NEXT:s<o?R.PREV:null,index:a.getIndex(),panel:a})}}},e}(t),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=T,e.holding=!0,e.playing=!0,e}a(e,t);var n=e.prototype;return n.onChange=function(e,t){var n=t.moveCamera,i=t.transitTo;e.delta.flick&&n(e).onStopped(function(){i(N)})},n.onRelease=function(e,t){var n=t.flicking,i=t.viewport,r=t.triggerEvent,a=t.transitTo,o=t.stopCamera,s=this.delta,l=n.options,c=l.horizontal,h=i.moveType,u=h.is(w),g=e.inputEvent,f=c?g.velocityX:g.velocityY,p=c?g.deltaX:g.deltaY,d=1<Math.abs(f)?f<0:0<Math.abs(s)?0<s:p<0,v=Math.max(Math.abs(s),Math.abs(p)),P=g.deltaX?Math.abs(180*Math.atan(g.deltaY/g.deltaX)/Math.PI):90,m=c?P<=l.thresholdAngle:P>l.thresholdAngle,x=v>=l.threshold&&m;r(b.HOLD_END,e,!0);var E=this.targetPanel;if(!x&&E){var C=u?e.destPos.flick:i.findEstimatedPosition(E);return i.moveTo(E,C,"",e),void a(z)}var S=i.getCurrentPanel(),A=i.getNearestPanel();if(!S||!A)return e.stop(),void a(M);var I={viewport:i,axesEvent:e,swipeDistance:v,isNextDirection:d},y=x?h.findTargetPanel(I):h.findRestorePanel(I);i.moveTo(y.panel,y.destPos,y.eventType,e,y.duration).onSuccess(function(){a(z)}).onStopped(function(){a(N),o(e)})},e}(t),V=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=z,e.holding=!1,e.playing=!0,e}a(e,t);var n=e.prototype;return n.onHold=function(e,t){var n=t.viewport,i=t.triggerEvent,r=t.transitTo,a=n.options,o=n.getScrollArea(),s=n.getScrollAreaSize(),l=Math.floor((this.lastPosition+this.delta-o.prev)/s),c=this.targetPanel;if(a.circular&&0!==l&&c){var h=n.panelManager.getCloneCount(),u=c.getPosition(),g=P(c.getCloneIndex()-l,-1,h-1,!0),f=u-l*s,p=c.getIdenticalPanels()[g+1].clone(g,!0);p.setPosition(f,!0),this.targetPanel=p}this.delta=0,this.lastPosition=n.getCameraPosition(),n.setCurrentPanel(n.getNearestPanel()),i(b.HOLD_START,e,!0).onSuccess(function(){r(T)}).onStopped(function(){r(N)})},n.onChange=function(e,t){var n=t.moveCamera,i=t.transitTo;e.delta.flick&&n(e).onStopped(function(){i(N)})},n.onFinish=function(e,t){var n=t.flicking,i=t.viewport,r=t.triggerEvent,a=t.transitTo,o=e&&e.isTrusted;i.options.bound?i.setCurrentPanel(this.targetPanel):i.setCurrentPanel(i.getNearestPanel()),a(M),r(b.MOVE_END,e,o,{direction:this.direction}),n.options.adaptive&&i.updateAdaptiveSize()},e}(t),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=N,e.holding=!1,e.playing=!0,e}a(e,t);var n=e.prototype;return n.onAnimationEnd=function(e,t){(0,t.transitTo)(M)},n.onChange=function(e,t){var n=t.viewport,i=t.transitTo;e.stop(),n.updateAxesPosition(n.getCameraPosition()),i(M)},n.onRelease=function(e,t){var n=t.transitTo;0===e.delta.flick&&n(M)},e}(t),F=function(){function e(){var i=this;this.state=new B,this.transitTo=function(e){var t=i.state;if(t.type!==e){var n=void 0;switch(e){case M:n=new B;break;case y:n=new D;break;case T:n=new L;break;case z:n=new V;break;case N:n=new _}t.onExit(n),n.onEnter(t),i.state=n}return i.state}}var t=e.prototype;return t.fire=function(e,t,n){var i=this.state;switch(e){case I.HOLD:i.onHold(t,n);break;case I.CHANGE:i.onChange(t,n);break;case I.RELEASE:i.onRelease(t,n);break;case I.ANIMATION_END:i.onAnimationEnd(t,n);break;case I.FINISH:i.onFinish(t,n)}},t.getState=function(){return this.state},e}(),n=function(n){function e(e){var t=n.call(this)||this;return t.type=g,t.count=e,t}a(e,n);var t=e.prototype;return t.findTargetPanel=function(e){var t=e.viewport,n=e.axesEvent,i=e.swipeDistance,r=this.count,a=Math.abs(n.delta.flick),o=t.getCurrentPanel(),s=t.getNearestPanel(),l=this.calcBrinkOfChange(e),c=t.canSetBoundMode()&&s.getIndex()===o.getIndex(),h=!t.isOutOfBound()&&(i<=l||c);return 1<r&&l<a?this.findSnappedPanel(e):h?this.findAdjacentPanel(e):{panel:s,duration:t.options.duration,destPos:t.findEstimatedPosition(s),eventType:i<=l?b.RESTORE:b.CHANGE}},t.findSnappedPanel=function(e){for(var t=e.axesEvent,n=e.viewport,i=e.isNextDirection,r=this.count,a=n.options,o=n.getScrollAreaSize(),s=a.gap/2,l=t.destPos.flick+n.getRelativeHangerPosition(),c=n.getNearestPanel(),h=c.getCloneIndex()+1,u=0;u<r;){var g=i?c.nextSibling:c.prevSibling;if(!g)break;var f=c.getIndex(),p=g.getIndex();(i&&p<=f||!i&&f<=p)&&(h=i?h+1:h-1),u+=1;var d=(c=g).getOriginalPanel(),v=d.getPosition()+h*o,P=d.getSize();if(i&&l<v+P+s||!i&&v-s<l)break}var m=c.getOriginalPanel().getPosition();(c=c.clone(c.getCloneIndex(),!0)).setPosition(m+h*o,!0);var x=n.options.duration,E=C(t.duration,x,x*u);return{panel:c,destPos:n.findEstimatedPosition(c),duration:E,eventType:0<u?b.CHANGE:b.RESTORE}},t.findAdjacentPanel=function(e){var t=e.viewport,n=e.isNextDirection,i=t.options,r=t.getCurrentIndex(),a=t.panelManager.get(r),o=t.getHangerPosition(),s=a.getIdenticalPanels()[1],l=i.circular&&Math.abs(a.getAnchorPosition()-o)>Math.abs(s.getAnchorPosition()-o)?s:a,c=l.getPosition(),h=n?l.nextSibling:l.prevSibling,u=h?b.CHANGE:b.RESTORE,g=h||l,f=g.getRelativeAnchorPosition(),p=i.circular?n?c+l.getSize()+f+i.gap:c-(g.getSize()-f)-i.gap:g.getAnchorPosition();return{panel:g,destPos:p-t.getRelativeHangerPosition(),duration:i.duration,eventType:u}},e}(function(){function e(){}var t=e.prototype;return t.is=function(e){return e===this.type},t.findRestorePanel=function(e){var t=e.viewport,n=t.options,i=n.circular?this.findRestorePanelInCircularMode(e):t.getCurrentPanel();return{panel:i,destPos:t.findEstimatedPosition(i),duration:n.duration,eventType:b.RESTORE}},t.calcBrinkOfChange=function(e){var t=e.viewport,n=e.isNextDirection,i=t.options,r=t.getCurrentPanel(),a=i.gap/2,o=r.getRelativeAnchorPosition(),s=n?r.getSize()-o+a:o+a;return s=Math.max(s,i.threshold)},t.findRestorePanelInCircularMode=function(e){var t=e.viewport,n=t.getCurrentPanel().getOriginalPanel(),i=t.getHangerPosition(),r=n.getIdenticalPanels()[1],a=Math.abs(n.getAnchorPosition()-i)>Math.abs(r.getAnchorPosition()-i);return!e.isNextDirection&&a?r:n},e}()),X=function(c){function e(){var e=c.call(this,1/0)||this;return e.type=w,e}a(e,c);var t=e.prototype;return t.findTargetPanel=function(e){var t=e.axesEvent,n=e.viewport,i=e.swipeDistance,r=t.destPos.flick,a=this.calcBrinkOfChange(e);if(a<Math.abs(t.delta.flick)){var o=c.prototype.findSnappedPanel.call(this,e);return o.destPos=r,o.eventType=o.eventType===b.RESTORE?"":b.CHANGE,o}var s=n.getScrollArea(),l=P(r,s.prev,s.next,!1)+n.getRelativeHangerPosition();return{panel:n.findNearestPanelAt(l),destPos:r,duration:n.options.duration,eventType:a<i?b.CHANGE:""}},t.findRestorePanel=function(e){return this.findTargetPanel(e)},t.calcBrinkOfChange=function(e){var t=e.viewport,n=e.isNextDirection,i=t.options,r=t.getCurrentPanel(),a=i.gap/2,o=t.stateMachine.getState().lastPosition,s=r.getPosition(),l=o+t.getRelativeHangerPosition(),c=n?s+r.getSize()-l+a:l-s+a;return c=Math.max(c,i.threshold)},e}(n),j=function(){function e(e,t,n,i,r){var a=this;this.stopCamera=function(e){e&&e.setTo&&e.setTo({flick:a.state.position},0),a.stateMachine.transitTo(M)},this.flicking=e,this.viewportElement=t,this.cameraElement=n,this.triggerEvent=r,this.state={size:0,position:0,relativeHangerPosition:0,scrollArea:{prev:0,next:0},translate:k,infiniteThreshold:0,checkedIndexes:[]},this.options=i,this.stateMachine=new F,this.panelManager=new O(n,i),this.build()}var t=e.prototype;return t.moveTo=function(e,t,n,i,r){var a=this;void 0===r&&(r=this.options.duration);var o,s=this.state,l=this.stateMachine.getState(),c=s.position,h=!!i&&i.isTrusted,u=t===c?null:c<t?R.NEXT:R.PREV;return(o=n===b.CHANGE?this.triggerEvent(b.CHANGE,i,h,{index:e.getIndex(),panel:e,direction:u}):n===b.RESTORE?this.triggerEvent(b.RESTORE,i,h):{onSuccess:function(e){return e(),this},onStopped:function(){return this}}).onSuccess(function(){l.delta=0,l.lastPosition=a.getCameraPosition(),l.targetPanel=e,l.direction=t===c?null:c<t?R.NEXT:R.PREV,t===c&&(a.nearestPanel=e,a.currentPanel=e),i&&i.setTo?i.setTo({flick:t},r):a.axes.setTo({flick:t},r)}),o},t.moveCamera=function(e,t){var n=this.state,i=this.options,r=n.translate.name;n.position=e,this.nearestPanel=this.findNearestPanel();var a=this.nearestPanel,o=a?a.getPosition():0;this.checkNeedPanel(t),e+=(a?a.getPosition():0)-o,n.position=e;var s=(i.horizontal?[-e,0]:[0,-e]).map(function(e){return Math.round(e)+"px"}).join(", ");this.cameraElement.style[r]=n.translate.has3d?"translate3d("+s+", 0px)":"translate("+s+")"},t.resize=function(){var e=this.panelManager;this.updateSize(),this.updateOriginalPanelPositions(),this.updateAdaptiveSize(),this.updateScrollArea(),this.options.circular&&0<e.getPanelCount()&&(this.clonePanels(),this.updateClonedPanelPositions()),e.chainAllPanels(),this.updateCameraPosition()},t.findNearestPanel=function(){var e=this.state,t=this.panelManager,n=this.getHangerPosition();return this.isOutOfBound()?e.position<=e.scrollArea.prev?t.firstPanel():t.lastPanel():this.findNearestPanelAt(n)},t.findNearestPanelAt=function(e){for(var t,n=1/0,i=0,r=this.panelManager.allPanels();i<r.length;i++){var a=r[i];if(a){var o=a.getPosition(),s=o+a.getSize(),l=u(e,o,s)?0:Math.min(Math.abs(o-e),Math.abs(s-e));if(n<l)break;if(l===n&&Math.abs(e-t.getAnchorPosition())<Math.abs(e-a.getAnchorPosition()))break;n=l,t=a}}return t},t.findNearestIdenticalPanel=function(e){var i=e,r=1/0,a=this.getHangerPosition();return e.getIdenticalPanels().forEach(function(e){var t=e.getAnchorPosition(),n=Math.abs(t-a);n<r&&(i=e,r=n)}),i},t.findShortestPositionToPanel=function(e){var t=this.state,n=this.options,i=e.getAnchorPosition(),r=this.getHangerPosition(),a=Math.abs(r-i),o=t.scrollArea.next-t.scrollArea.prev;if(n.circular)return a<=o-a?i-t.relativeHangerPosition:r<i?i-t.relativeHangerPosition-o:i-t.relativeHangerPosition+o;var s=i-t.relativeHangerPosition;return this.canSetBoundMode()?C(s,t.scrollArea.prev,t.scrollArea.next):s},t.findEstimatedPosition=function(e){var t=this.getScrollArea(),n=e.getAnchorPosition()-this.getRelativeHangerPosition();return n=this.canSetBoundMode()?C(n,t.prev,t.next):n},t.enable=function(){this.panInput.enable()},t.disable=function(){this.panInput.disable()},t.insert=function(r,e){var n=this,t=this.panelManager.getLastIndex();if(r<0||t<r)return[];var a=this.state,i=c(e).map(function(e,t){return new H(e,r+t,n)}).slice(0,t-r+1);if(i.length<=0)return[];var o=this.panelManager.insert(r,i);return this.currentPanel||(this.currentPanel=i[0]),a.checkedIndexes.forEach(function(e,t){var n=e[0],i=e[1];u(r,n,i)?a.checkedIndexes.splice(t,1):r<n&&a.checkedIndexes.splice(t,1,[n+o,i+o])}),this.resize(),i},t.replace=function(r,e){var n=this,t=this.panelManager,i=t.getLastIndex();if(r<0||i<r)return[];var a=this.state,o=c(e).map(function(e,t){return new H(e,r+t,n)}).slice(0,i-r+1);if(o.length<=0)return[];t.replace(r,o);var s=this.currentPanel,l=!s;return l?this.currentPanel=o[0]:u(s.getIndex(),r,r+o.length-1)&&(this.currentPanel=t.get(s.getIndex())),a.checkedIndexes.forEach(function(e,t){var n=e[0],i=e[1];r<=i&&r+o.length>n&&a.checkedIndexes.splice(t,1)}),this.resize(),"freeScroll"===this.options.moveType.type&&l&&this.moveTo(this.currentPanel,this.findEstimatedPosition(this.currentPanel),"",null,0),o},t.remove=function(e,t){void 0===t&&(t=1),e=Math.max(e,0);var n=this.panelManager,i=this.getCurrentIndex(),r=n.remove(e,t);if(u(i,e,e+t-1)){var a=Math.max(e-1,n.getRange().min);this.currentPanel=n.get(a)}return this.resize(),r},t.updateAdaptiveSize=function(){var e=this.options,i=e.horizontal,t=this.getCurrentPanel();if(t){var n;if(e.adaptive){var r=t.getBbox();n=i?r.height:r.width}else{n=this.panelManager.originalPanels().reduce(function(e,t){var n=t.getBbox();return Math.max(e,i?n.height:n.width)},0)}var a=this.viewportElement.style;i?(a.height=n+"px",a.minHeight="100%",a.width="100%"):(a.width=n+"px",a.minWidth="100%",a.height="100%")}},t.destroy=function(){var e=this.viewportElement,t=e.parentElement;for(var n in t.removeChild(e),this.axes.destroy(),this.panInput.destroy(),this.panelManager.originalPanels().forEach(function(e){t.appendChild(e.getElement()),e.destroy()}),this)this[n]=null},t.restore=function(e){var n=e.panels,t=this.options.defaultIndex,i=this.cameraElement,r=this.panelManager;r.clear(),i.innerHTML=e.panels.map(function(e){return e.html}).join(""),this.createPanels(),r.originalPanels().forEach(function(e,t){e.setIndex(n[t].index)}),this.currentPanel=r.get(e.index)||r.get(t)||r.firstPanel(),this.resize(),this.axes.setTo({flick:e.position},0),this.moveCamera(e.position)},t.getCurrentPanel=function(){return this.currentPanel},t.getCurrentIndex=function(){var e=this.currentPanel;return e?e.getIndex():-1},t.getNearestPanel=function(){return this.nearestPanel},t.getCurrentProgress=function(){var e=this.stateMachine.getState(),t=e.playing||e.holding?this.nearestPanel:this.currentPanel,n=this.panelManager;if(!t)return NaN;var i=this.getScrollArea(),r=i.prev,a=i.next,o=this.getCameraPosition(),s=this.isOutOfBound(),l=t.prevSibling,c=t.nextSibling,h=this.getHangerPosition(),u=t.getAnchorPosition();s&&l&&c&&o<a&&h-l.getAnchorPosition()<u-h&&(c=(t=l).nextSibling,l=t.prevSibling,u=t.getAnchorPosition());var g=t.getIndex()+(t.getCloneIndex()+1)*n.getPanelCount(),f=t.getSize();if(s){var p=this.getRelativeHangerPosition();a+p<u?h=u+h-p-a:u<r+p&&(h=u+h-p-r)}var d=u<=h,v=this.options.gap,P=u,m=u;d?m=c?c.getAnchorPosition():u+f+v:P=l?l.getAnchorPosition():P=u-f-v;var x=(h-P)/(m-P);return(d?g:l?l.getIndex():g-1)+x},t.updateAxesPosition=function(e){var t=this.axes;t.off(),t.setTo({flick:e},0),t.on(this.axesHandlers)},t.getSize=function(){return this.state.size},t.getScrollArea=function(){return this.state.scrollArea},t.isOutOfBound=function(){var e=this.state,t=this.options,n=e.scrollArea;return!t.circular&&t.bound&&(e.position<=n.prev||e.position>=n.next)},t.canSetBoundMode=function(){var e=this.state,t=this.options,n=this.panelManager.lastPanel();if(!n)return!1;var i=n.getPosition()+n.getSize();return t.bound&&!t.circular&&i>=e.size},t.getScrollAreaSize=function(){var e=this.state.scrollArea;return e.next-e.prev},t.getRelativeHangerPosition=function(){return this.state.relativeHangerPosition},t.getHangerPosition=function(){return this.state.position+this.state.relativeHangerPosition},t.getCameraPosition=function(){return this.state.position},t.setCurrentPanel=function(e){this.currentPanel=e},t.setLastIndex=function(e){var t=this.currentPanel,n=this.panelManager;n.setLastIndex(e),t&&t.getIndex()>e&&(this.currentPanel=n.lastPanel()),this.resize()},t.connectAxesHandler=function(e){var t=this.axes;this.axesHandlers=e,t.on(e)},t.build=function(){this.applyCSSValue(),this.setMoveType(),this.setAxesInstance(),this.createPanels(),this.setDefaultPanel(),this.resize(),this.moveToDefaultPanel()},t.applyCSSValue=function(){var e=this.options,t=this.viewportElement,n=this.cameraElement,i=e.classPrefix;t.className=i+"-viewport",n.className=i+"-camera",l(t,E),l(n,S),e.zIndex&&(t.style.zIndex=""+e.zIndex),e.overflow&&(t.style.overflow="visible")},t.setMoveType=function(){var e=this.options.moveType;switch(e.type){case g:this.moveType=new n(e.count);break;case w:this.moveType=new X;break;default:throw new Error("moveType is not correct!")}},t.setAxesInstance=function(){var e=this.state,t=this.options,n=e.scrollArea,i=t.horizontal;this.axes=new r({flick:{range:[n.prev,n.next],circular:t.circular,bounce:[0,0]}},{easing:t.panelEffect,deceleration:t.deceleration,interruptable:!0}),this.panInput=new r.PanInput(this.viewportElement,{inputType:t.inputType,thresholdAngle:t.thresholdAngle,scale:t.horizontal?[-1,0]:[0,-1]}),this.axes.connect(i?["flick",""]:["","flick"],this.panInput)},t.createPanels=function(){var n=this,e=h(this.cameraElement.children).map(function(e,t){return new H(e,t,n)});0<e.length&&this.panelManager.append(e)},t.setDefaultPanel=function(){var e=this.options,t=this.panelManager,n=this.panelManager.getRange(),i=C(e.defaultIndex,n.min,n.max);this.currentPanel=t.get(i)},t.clonePanels=function(){var i=this,e=this.state,t=this.panelManager,n=e.size,r=t.firstPanel(),a=t.lastPanel();if(r){var o=a.getPosition()+a.getSize()-r.getPosition()+this.options.gap,s=n+r.getRelativeAnchorPosition(),l=t.originalPanels(),c=Math.ceil(s/o),h=t.getCloneCount();if(h<c)for(var u=function(n){var e=l.map(function(e){var t=e.clone(n);return i.cameraElement.appendChild(t.getElement()),t});t.insertClones(n,0,e)},g=h;g<c;g++)u(g);else c<h&&t.removeClonesAfter(c)}},t.moveToDefaultPanel=function(){var e=this.state,t=this.panelManager,n=this.options,i=this.panelManager.getRange(),r=C(n.defaultIndex,i.min,i.max),a=t.get(r),o=0;a&&(o=a.getAnchorPosition()-e.relativeHangerPosition,o=this.canSetBoundMode()?C(o,e.scrollArea.prev,e.scrollArea.next):o),this.moveCamera(o),this.axes.setTo({flick:o},0)},t.updateSize=function(){var e=this.state,t=this.options,n=this.viewportElement,i=this.panelManager.originalPanels();t.horizontal||(n.style.width="",n.style.minWidth="");var r=n.getBoundingClientRect();e.size=t.horizontal?r.width:r.height,e.relativeHangerPosition=p(t.hanger,e.size),e.infiniteThreshold=p(t.infiniteThreshold,e.size),i.forEach(function(e){e.resize()})},t.updateOriginalPanelPositions=function(){var r=this.options.gap,e=this.panelManager,t=e.firstPanel(),n=e.originalPanels();if(t){var i=this.currentPanel,a=this.nearestPanel,o=this.stateMachine.getState(),s=this.state.scrollArea,l=t.getPosition(),c=t;if(a)c=!u(o.lastPosition+o.delta,s.prev,s.next)?i:a;else 0<t.getIndex()&&(c=i);var h=n.slice(0,c.getIndex()+(c.getCloneIndex()+1)*n.length).reduce(function(e,t){return e+t.getSize()+r},0);l=c.getPosition()-h,n.forEach(function(e){var t=l,n=e.getPosition(),i=e.getSize();n!==t&&e.setPosition(t),l+=i+r})}},t.updateClonedPanelPositions=function(){var e=this.state,t=this.options,n=this.panelManager,i=n.clonedPanels().filter(function(e){return!!e}),r=e.scrollArea,a=n.firstPanel(),o=n.lastPanel();if(a){for(var s=o.getPosition()+o.getSize()-a.getPosition()+t.gap,l=0,c=i;l<c.length;l++){if(d=c[l]){var h=d.getOriginalPanel(),u=s*(d.getCloneIndex()+1)+h.getPosition();d.setPosition(u)}}for(var g=a.getPosition(),f=0,p=i.concat().reverse();f<p.length;f++){var d,v=(d=p[f]).getSize(),P=g-v-t.gap;if(P+v<=r.prev)break;d.setPosition(P),g=P}}},t.updateScrollArea=function(){var e=this.state,t=this.panelManager,n=this.options,i=this.axes,r=t.firstPanel(),a=t.lastPanel(),o=e.relativeHangerPosition;if(r)if(this.canSetBoundMode())e.scrollArea={prev:r.getPosition(),next:a.getPosition()+a.getSize()-e.size};else if(n.circular){var s=a.getPosition()+a.getSize()-r.getPosition()+n.gap;e.scrollArea={prev:r.getAnchorPosition()-o,next:s+r.getAnchorPosition()-o}}else e.scrollArea={prev:r.getAnchorPosition()-o,next:a.getAnchorPosition()-o};else e.scrollArea={prev:0,next:0};var l,c=e.size,h=n.bounce,u=h;if((l=h)&&l.constructor===Array)u=h.map(function(e){return p(e,c,x.bounce)});else{var g=p(h,c,x.bounce);u=[g,g]}var f=i.axis.flick;f.range=[e.scrollArea.prev,e.scrollArea.next],f.bounce=u},t.updateCameraPosition=function(){var e=this.state,t=this.getCurrentPanel(),n=this.stateMachine.getState(),i="freeScroll"===this.options.moveType.type;if(!(n.holding||n.playing||i)){var r=t?t.getAnchorPosition()-e.relativeHangerPosition:this.getCameraPosition();this.canSetBoundMode()&&(r=C(r,e.scrollArea.prev,e.scrollArea.next)),this.updateAxesPosition(r),this.moveCamera(r)}},t.checkNeedPanel=function(e){var t=this.state,n=this.options,i=this.panelManager,r=this.currentPanel,a=this.nearestPanel,o=this.stateMachine.getState();if(n.infinite){var s=n.gap,l=t.infiniteThreshold,c=i.getLastIndex();if(!(c<0))if(r&&a){for(var h=a.getPosition(),u=o.holding||o.playing?a:r;u;){var g=u.getIndex(),f=u.nextSibling,p=g===i.lastPanel().getIndex(),d=!p&&f?f.getIndex():c+1,v=a.getPosition(),P=u.getPosition()+u.getSize()-(v-h)+s-l<=t.position+t.size;if(1<d-g&&P&&this.triggerNeedPanel({axesEvent:e,siblingPanel:u,direction:R.NEXT,indexRange:{min:g+1,max:d-1,length:d-g-1}}),n.circular&&g===c&&P){var m=i.firstPanel().getIndex();0<m&&this.triggerNeedPanel({axesEvent:e,siblingPanel:u,direction:R.NEXT,indexRange:{min:0,max:m-1,length:m}})}if((p=g===i.lastPanel().getIndex())||!P)break;u=u.nextSibling}for(u=a;u;){var x=t.position,E=u.getIndex(),C=u.prevSibling,S=E===i.firstPanel().getIndex(),A=!S&&C?C.getIndex():-1;v=a.getPosition(),P=x<=u.getPosition()-(v-h)-s+l;if(1<E-A&&P&&this.triggerNeedPanel({axesEvent:e,siblingPanel:u,direction:R.PREV,indexRange:{min:A+1,max:E-1,length:E-A-1}}),n.circular&&0===E&&P){var I=i.lastPanel().getIndex();I<c&&this.triggerNeedPanel({axesEvent:e,siblingPanel:u,direction:R.PREV,indexRange:{min:I+1,max:c,length:c-I}})}if((S=E===i.firstPanel().getIndex())||!P)break;u=u.prevSibling}}else this.triggerNeedPanel({axesEvent:e,siblingPanel:null,direction:null,indexRange:{min:0,max:c,length:c+1}})}},t.triggerNeedPanel=function(e){var t=e.axesEvent,n=e.siblingPanel,i=e.direction,r=e.indexRange,a=this.state.checkedIndexes,o=a.some(function(e){var t=e[0],n=e[1];return t===r.min||n===r.max}),s=this.flicking.hasOn(b.NEED_PANEL);if(!o&&s){a.push([r.min,r.max]);var l=n?n.getIndex():0,c=!!t&&t.isTrusted;this.triggerEvent(b.NEED_PANEL,t,c,{index:l,panel:n,direction:i,range:r})}},e}();return function(g){function e(e,t){void 0===t&&(t={});var n,u=g.call(this)||this;if(u.plugins=[],u.triggerEvent=function(e,t,n,i){void 0===i&&(i={});var r=u.viewport,a=!0;if(r){var o=r.stateMachine.getState(),s=r.getScrollArea(),l=s.prev,c=s.next,h=d(r.getCameraPosition(),[l,l,c]);u.options.circular&&(h%=1),a=!g.prototype.trigger.call(u,e,f({type:e,index:u.getIndex(),panel:u.getCurrentPanel(),direction:o.direction,holding:o.holding,progress:h,axesEvent:t,isTrusted:n},i))}return{onSuccess:function(e){return a||e(),this},onStopped:function(e){return a&&e(),this}}},u.moveCamera=function(e){var t=u.viewport,n=t.stateMachine.getState(),i=u.options,r=e.pos.flick,a=t.getCameraPosition();if(e.isTrusted&&n.holding){var o=i.horizontal?e.inputEvent.offsetX:e.inputEvent.offsetY,s=r-a,l=o<0===r<a;if(i.circular&&l)s=(0<s?-1:1)*(t.getScrollAreaSize()-Math.abs(s));var c=0===s?n.direction:0<s?R.NEXT:R.PREV;n.direction=c}return n.delta+=e.delta.flick,t.moveCamera(r,e),u.triggerEvent(b.MOVE,e,e.isTrusted).onStopped(function(){t.moveCamera(a,e)})},o(e)){if(!(n=document.querySelector(e)))throw new Error("Base element doesn't exist.")}else{if(!e.nodeName||1!==e.nodeType)throw new Error("Element should be provided in string or HTMLElement.");n=e}u.wrapper=n,u.options=f({},x,t);var i=u.options,r=i.moveType;return r in m&&(i.moveType=m[r]),u.build(),u}a(e,g);var t=e.prototype;return t.prev=function(e){var t=this.getCurrentPanel(),n=this.viewport.stateMachine.getState();if(!t||n.type!==M)return this;var i=t.prev();return i&&i.focus(e),this},t.next=function(e){var t=this.getCurrentPanel(),n=this.viewport.stateMachine.getState();if(!t||n.type!==M)return this;var i=t.next();return i&&i.focus(e),this},t.moveTo=function(e,t){var n=this.viewport,i=n.panelManager.get(e),r=n.stateMachine.getState();if(!i||r.type!==M)return this;var a=i.getAnchorPosition(),o=n.getHangerPosition(),s=i;if(this.options.circular){var l=n.getScrollAreaSize(),c=[a-l,a,a+l].reduce(function(e,t){return Math.abs(t-o)<Math.abs(e-o)?t:e},1/0)-i.getRelativeAnchorPosition(),h=i.getIdenticalPanels(),u=c-a;0<u?s=h[1]:u<0&&(s=h[h.length-1]),(s=s.clone(s.getCloneIndex(),!0)).setPosition(c,!0)}var g=this.getIndex();if(o===s.getAnchorPosition()&&g===e)return this;var f=i.getIndex()===n.getCurrentIndex()?"":b.CHANGE;return n.moveTo(s,n.findEstimatedPosition(s),f,null,t),this},t.getIndex=function(){return this.viewport.getCurrentIndex()},t.getElement=function(){return this.wrapper},t.getCurrentPanel=function(){var e=this.viewport.getCurrentPanel();return e||null},t.getPanel=function(e){var t=this.viewport.panelManager.get(e);return t||null},t.getAllPanels=function(e){var t=this.viewport.panelManager;return(e?t.allPanels():t.originalPanels()).filter(function(e){return!!e})},t.getVisiblePanels=function(){return this.getAllPanels(!0).filter(function(e){var t=e.getOutsetProgress();return-1<t&&t<1})},t.getPanelCount=function(){return this.viewport.panelManager.getPanelCount()},t.setLastIndex=function(e){return this.viewport.setLastIndex(e),this},t.isPlaying=function(){return this.viewport.stateMachine.getState().playing},t.enableInput=function(){return this.viewport.enable(),this},t.disableInput=function(){return this.viewport.disable(),this},t.getStatus=function(){var e=this.viewport,t=e.panelManager.originalPanels().filter(function(e){return!!e}).map(function(e){return{html:e.getElement().outerHTML,index:e.getIndex()}});return{index:e.getCurrentIndex(),panels:t,position:e.getCameraPosition()}},t.setStatus=function(e){this.viewport.restore(e)},t.addPlugins=function(e){var t=this,n=[].concat(e);return n.forEach(function(e){e.init(t)}),this.plugins=this.plugins.concat(n),this},t.removePlugins=function(e){var n=this,i=this.plugins;return[].concat(e).forEach(function(e){var t=i.indexOf(e);-1<t&&i.splice(t,1),e.destroy(n)}),this},t.destroy=function(){var t=this;for(var e in this.off(),this.viewport.destroy(),this.plugins.forEach(function(e){e.destroy(t)}),this)this[e]=null},t.resize=function(){var e=this.viewport;return e.panelManager.allPanels().forEach(function(e){return e.unCacheBbox()}),e.resize(),this},t.prepend=function(e){var t=this.viewport,n=c(e),i=Math.max(t.panelManager.getRange().min-n.length,0);return t.insert(i,n)},t.append=function(e){var t=this.viewport;return t.insert(t.panelManager.getRange().max+1,e)},t.replace=function(e,t){return this.viewport.replace(e,t)},t.remove=function(e,t){return void 0===t&&(t=1),this.viewport.remove(e,t)},t.build=function(){this.initViewport(),this.listenInput(),this.listenResize()},t.initViewport=function(){var e=this.wrapper,t=this.options,n=document.createElement("div");h(e.children).forEach(function(e){n.appendChild(e)});var i=document.createElement("div");i.appendChild(n),e.appendChild(i),this.viewport=new j(this,i,n,t,this.triggerEvent)},t.listenInput=function(){var n=this,e=n.viewport,i=e.stateMachine;n.eventContext={flicking:n,viewport:n.viewport,transitTo:i.transitTo,triggerEvent:n.triggerEvent,moveCamera:n.moveCamera,stopCamera:e.stopCamera};var r={},t=function(e){var t=I[e];r[t]=function(e){return i.fire(t,e,n.eventContext)}};for(var a in I)t(a);n.viewport.connectAxesHandler(r)},t.listenResize=function(){var e=this;this.options.autoResize&&window.addEventListener("resize",function(){e.resize()})},e.VERSION="3.0.1",e.DIRECTION=R,e.EVENTS=b,e}(e)});
//# sourceMappingURL=flicking.min.js.map
