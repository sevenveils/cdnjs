!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).search=e()}}(function(){return function s(o,l,a){function h(t,e){if(!l[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=l[t]={exports:{}};o[t][0].call(n.exports,function(e){return h(o[t][1][e]||e)},n,n.exports,s,o,l,a)}return l[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)h(a[e]);return h}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=" ~!@#$%^&*()+`-=[]{}|;:\"',./<>?",n=(s.prototype.findNext=function(e,t){var i,r=this._terminal._core.selectionManager,n=t.incremental;if(!e||0===e.length)return r.clearSelection(),!1;var s=0,o=this._terminal._core.buffer.ydisp;r.selectionEnd&&0!==this._terminal.getSelection().length&&(o=n?r.selectionStart[1]:r.selectionEnd[1],s=n?r.selectionStart[0]:r.selectionEnd[0]),this._initLinesCache();for(var l=o,a=s;this._terminal._core.buffer.lines.get(l).isWrapped;)l--,a+=this._terminal.cols;if(!(i=this._findInLine(e,l,a,t)))for(var h=o+1;h<this._terminal._core.buffer.ybase+this._terminal.rows&&!(i=this._findInLine(e,h,0,t));h++);if(!i)for(h=0;h<l&&!(i=this._findInLine(e,h,0,t));h++);return this._selectResult(i)},s.prototype.findPrevious=function(e,t){var i,r=this._terminal._core.selectionManager;if(!e||0===e.length)return r.clearSelection(),!1;var n=this._terminal._core.buffer.ydisp+this._terminal.rows-1,s=this._terminal.cols;if(r.selectionStart&&0!==this._terminal.getSelection().length&&(n=r.selectionStart[1],s=r.selectionStart[0]),this._initLinesCache(),!(i=this._findInLine(e,n,s,t,!0))){var o=this._terminal.cols;this._terminal._core.buffer.lines.get(n).isWrapped&&(o+=s);for(var l=n-1;0<=l&&!(i=this._findInLine(e,l,o,t,!0));l--)this._terminal._core.buffer.lines.get(l).isWrapped?o+=this._terminal.cols:o=this._terminal.cols}if(!i){var a=this._terminal._core.buffer.ybase+this._terminal.rows-1;for(o=this._terminal.cols,l=a;n<=l&&!(i=this._findInLine(e,l,o,t,!0));l--)this._terminal._core.buffer.lines.get(l).isWrapped?o+=this._terminal.cols:o=this._terminal.cols}return this._selectResult(i)},s.prototype._initLinesCache=function(){var e=this;this._linesCache||(this._linesCache=new Array(this._terminal._core.buffer.length),this._cursorMoveListener=this._terminal.onCursorMove(function(){return e._destroyLinesCache()}),this._resizeListener=this._terminal.onResize(function(){return e._destroyLinesCache()})),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(function(){return e._destroyLinesCache()},15e3)},s.prototype._destroyLinesCache=function(){this._linesCache=null,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)},s.prototype._isWholeWord=function(e,t,i){return!(0!==e&&-1===r.indexOf(t[e-1])||e+i.length!==t.length&&-1===r.indexOf(t[e+i.length]))},s.prototype._findInLine=function(e,t,i,r,n){if(void 0===r&&(r={}),void 0===n&&(n=!1),!this._terminal._core.buffer.lines.get(t).isWrapped){var s=this._linesCache?this._linesCache[t]:void 0;void 0===s&&(s=this.translateBufferLineToStringWithWrap(t,!0),this._linesCache&&(this._linesCache[t]=s));var o=r.caseSensitive?e:e.toLowerCase(),l=r.caseSensitive?s:s.toLowerCase(),a=-1;if(r.regex){var h=RegExp(o,"g"),c=void 0;if(n)for(;c=h.exec(l.slice(0,i));)a=h.lastIndex-c[0].length,e=c[0],h.lastIndex-=e.length-1;else(c=h.exec(l.slice(i)))&&0<c[0].length&&(a=i+(h.lastIndex-c[0].length),e=c[0])}else n?0<=i-o.length&&(a=l.lastIndexOf(o,i-o.length)):a=l.indexOf(o,i);if(0<=a){if(a>=this._terminal.cols&&(t+=Math.floor(a/this._terminal.cols),a%=this._terminal.cols),r.wholeWord&&!this._isWholeWord(a,l,e))return;for(var f=this._terminal._core.buffer.lines.get(t),_=0;_<a;_++){var u=f.get(_),d=u[1];1<d.length&&(a-=d.length-1),0===u[2]&&a++}return{term:e,col:a,row:t}}}},s.prototype.translateBufferLineToStringWithWrap=function(e,t){var i,r="";do{var n=this._terminal._core.buffer.lines.get(e+1);i=!!n&&n.isWrapped,r+=this._terminal._core.buffer.translateBufferLineToString(e,!i&&t).substring(0,this._terminal.cols),e++}while(i);return r},s.prototype._selectResult=function(e){return e?(this._terminal._core.selectionManager.setSelection(e.col,e.row,e.term.length),this._terminal.scrollLines(e.row-this._terminal._core.buffer.ydisp),!0):(this._terminal.clearSelection(),!1)},s);function s(e){this._terminal=e,this._linesCache=null,this._linesCacheTimeoutId=0,this._destroyLinesCache=this._destroyLinesCache.bind(this)}i.SearchHelper=n},{}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./SearchHelper");function r(e,t,i){void 0===i&&(i={});var r=e;return r.__searchHelper||(r.__searchHelper=new n.SearchHelper(r)),r.__searchHelper.findNext(t,i)}function s(e,t,i){var r=e;return r.__searchHelper||(r.__searchHelper=new n.SearchHelper(r)),r.__searchHelper.findPrevious(t,i)}i.findNext=r,i.findPrevious=s,i.apply=function(e){e.prototype.findNext=function(e,t){return r(this,e,t)},e.prototype.findPrevious=function(e,t){return s(this,e,t)}}},{"./SearchHelper":1}]},{},[2])(2)});