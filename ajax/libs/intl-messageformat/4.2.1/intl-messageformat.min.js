!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).IntlMessageFormat=r()}(this,function(){"use strict";var t,r,e=(t=Yt,r=Error,n.prototype=r.prototype,t.prototype=new n,Yt.buildMessage=function(t,r){var e,u={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var r,e="";for(r=0;r<t.parts.length;r++)e+=t.parts[r]instanceof Array?i(t.parts[r][0])+"-"+i(t.parts[r][1]):i(t.parts[r]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}return"Expected "+function(t){var r,e,n,o=new Array(t.length);for(r=0;r<t.length;r++)o[r]=(n=t[r],u[n.type](n));if(o.sort(),0<o.length){for(e=r=1;r<o.length;r++)o[r-1]!==o[r]&&(o[e]=o[r],e++);o.length=e}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(t)+" but "+((e=r)?'"'+o(e)+'"':"end of input")+" found."},{SyntaxError:Yt,parse:function(c,t){t=void 0!==t?t:{};var r,e,n,o,s={},u={start:Zt},i=Zt,a=function(t){return{type:"messageFormatPattern",elements:t,location:It()}},l=function(t){return t.reduce(function(t,r){return t.concat(r)},[]).join("")},f=function(t){return{type:"messageTextElement",value:t,location:It()}},p=function(t){return t.join("")},h="{",m=Mt("{",!1),d=",",g=Mt(",",!1),y="}",v=Mt("}",!1),b=function(t,r){return{type:"argumentElement",id:t,format:r&&r[2],location:It()}},A="number",w=Mt("number",!1),F="date",x=Mt("date",!1),C="time",O=Mt("time",!1),_=function(t,r){return{type:t+"Format",style:r&&r[2],location:It()}},P="plural",E=Mt("plural",!1),S=function(t){return{type:t.type,ordinal:!1,offset:t.offset||0,options:t.options,location:It()}},T="selectordinal",j=Mt("selectordinal",!1),I=function(t){return{type:t.type,ordinal:!0,offset:t.offset||0,options:t.options,location:It()}},M="select",N=Mt("select",!1),k=function(t){return{type:"selectFormat",options:t,location:It()}},R="=",L=Mt("=",!1),D=function(t,r){return{type:"optionalFormatPattern",selector:t,value:r,location:It()}},Z="offset:",U=Mt("offset:",!1),W=function(t){return t},$=function(t,r){return{type:"pluralFormat",offset:t,options:r,location:It()}},q=kt("whitespace"),z=/^[ \t\n\r]/,B=Nt([" ","\t","\n","\r"],!1,!1),G=kt("optionalWhitespace"),H=/^[0-9]/,J=Nt([["0","9"]],!1,!1),K=/^[0-9a-f]/i,Q=Nt([["0","9"],["a","f"]],!1,!0),V="0",X=Mt("0",!1),Y=/^[1-9]/,tt=Nt([["1","9"]],!1,!1),rt=function(t){return parseInt(t,10)},et="'",nt=Mt("'",!1),ot=/^[ \t\n\r,.+={}#]/,ut=Nt([" ","\t","\n","\r",",",".","+","=","{","}","#"],!1,!1),it={type:"any"},at=function(t){return t},ct=function(t){return t},st=/^[^{}\\\0-\x1F\x7F \t\n\r]/,lt=Nt(["{","}","\\",["\0",""],""," ","\t","\n","\r"],!0,!1),ft="\\\\",pt=Mt("\\\\",!1),ht=function(){return"\\"},mt="\\#",dt=Mt("\\#",!1),gt=function(){return"\\#"},yt="\\{",vt=Mt("\\{",!1),bt=function(){return"{"},At="\\}",wt=Mt("\\}",!1),Ft=function(){return"}"},xt="\\u",Ct=Mt("\\u",!1),Ot=function(t){return String.fromCharCode(parseInt(t,16))},_t=0,Pt=0,Et=[{line:1,column:1}],St=0,Tt=[],jt=0;if("startRule"in t){if(!(t.startRule in u))throw new Error("Can't start parsing from rule \""+t.startRule+'".');i=u[t.startRule]}function It(){return Lt(Pt,_t)}function Mt(t,r){return{type:"literal",text:t,ignoreCase:r}}function Nt(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function kt(t){return{type:"other",description:t}}function Rt(t){var r,e=Et[t];if(e)return e;for(r=t-1;!Et[r];)r--;for(e={line:(e=Et[r]).line,column:e.column};r<t;)10===c.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return Et[t]=e}function Lt(t,r){var e=Rt(t),n=Rt(r);return{start:{offset:t,line:e.line,column:e.column},end:{offset:r,line:n.line,column:n.column}}}function Dt(t){_t<St||(St<_t&&(St=_t,Tt=[]),Tt.push(t))}function Zt(){return Ut()}function Ut(){var t,r,e;for(t=_t,r=[],e=Wt();e!==s;)r.push(e),e=Wt();return r!==s&&(Pt=t,r=a(r)),t=r}function Wt(){var t;return(t=function(){var t,r;return t=_t,(r=function(){var t,r,e,n,o,u;if(r=[],e=t=_t,(e=(n=Bt())!==s?(o=Xt())!==s&&(u=Bt())!==s?n=[n,o,u]:(_t=e,s):(_t=e,s))!==s)for(;e!==s;)r.push(e),e=_t,n=Bt(),e=n!==s&&(o=Xt())!==s&&(u=Bt())!==s?n=[n,o,u]:(_t=e,s);else r=s;return r!==s&&(Pt=t,r=l(r)),(t=r)===s&&(t=_t,r=zt(),t=r!==s?c.substring(t,_t):r),t}())!==s&&(Pt=t,r=f(r)),t=r}())===s&&(t=function(){var t,r,e,n,o,u,i;return t=_t,123===c.charCodeAt(_t)?(r=h,_t++):(r=s,0===jt&&Dt(m)),t=r!==s?Bt()!==s&&(e=function(){var t,r,e;if((t=Jt())===s){for(t=_t,r=[],e=Kt();e!==s;)r.push(e),e=Kt();r!==s&&(Pt=t,r=p(r)),t=r}return t}())!==s&&Bt()!==s?(n=_t,44===c.charCodeAt(_t)?(o=d,_t++):(o=s,0===jt&&Dt(g)),(n=o!==s&&(u=Bt())!==s&&(i=function(){var t;return(t=function(){var t,r,e,n,o,u;return t=_t,c.substr(_t,6)===A?(r=A,_t+=6):(r=s,0===jt&&Dt(w)),r===s&&(c.substr(_t,4)===F?(r=F,_t+=4):(r=s,0===jt&&Dt(x)),r===s&&(c.substr(_t,4)===C?(r=C,_t+=4):(r=s,0===jt&&Dt(O)))),t=r!==s?Bt()!==s?(e=_t,44===c.charCodeAt(_t)?(n=d,_t++):(n=s,0===jt&&Dt(g)),(e=n!==s&&(o=Bt())!==s&&(u=Xt())!==s?n=[n,o,u]:(_t=e,s))===s&&(e=null),e!==s?(Pt=t,r=_(r,e)):(_t=t,s)):(_t=t,s):(_t=t,s)}())===s&&(t=function(){var t,r,e,n;return t=_t,c.substr(_t,6)===P?(r=P,_t+=6):(r=s,0===jt&&Dt(E)),t=r!==s?Bt()!==s?(44===c.charCodeAt(_t)?(e=d,_t++):(e=s,0===jt&&Dt(g)),e!==s&&Bt()!==s&&(n=qt())!==s?(Pt=t,r=S(n)):(_t=t,s)):(_t=t,s):(_t=t,s)}())===s&&(t=function(){var t,r,e,n;return t=_t,c.substr(_t,13)===T?(r=T,_t+=13):(r=s,0===jt&&Dt(j)),t=r!==s?Bt()!==s?(44===c.charCodeAt(_t)?(e=d,_t++):(e=s,0===jt&&Dt(g)),e!==s&&Bt()!==s&&(n=qt())!==s?(Pt=t,r=I(n)):(_t=t,s)):(_t=t,s):(_t=t,s)}())===s&&(t=function(){var t,r,e,n,o;if(t=_t,c.substr(_t,6)===M?(r=M,_t+=6):(r=s,0===jt&&Dt(N)),r!==s)if(Bt()!==s)if(44===c.charCodeAt(_t)?(e=d,_t++):(e=s,0===jt&&Dt(g)),e!==s)if(Bt()!==s){if(n=[],(o=$t())!==s)for(;o!==s;)n.push(o),o=$t();else n=s;t=n!==s?(Pt=t,r=k(n)):(_t=t,s)}else _t=t,t=s;else _t=t,t=s;else _t=t,t=s;else _t=t,t=s;return t}()),t}())!==s?o=[o,u,i]:(_t=n,s))===s&&(n=null),n!==s&&(o=Bt())!==s?(125===c.charCodeAt(_t)?(u=y,_t++):(u=s,0===jt&&Dt(v)),u!==s?(Pt=t,r=b(e,n)):(_t=t,s)):(_t=t,s)):(_t=t,s):(_t=t,s)}()),t}function $t(){var t,r,e,n,o;return t=_t,t=Bt()!==s&&(r=function(){var t,r,e,n;return r=t=_t,61===c.charCodeAt(_t)?(e=R,_t++):(e=s,0===jt&&Dt(L)),(t=(r=e!==s&&(n=Jt())!==s?e=[e,n]:(_t=r,s))!==s?c.substring(t,_t):r)===s&&(t=Xt()),t}())!==s&&Bt()!==s?(123===c.charCodeAt(_t)?(e=h,_t++):(e=s,0===jt&&Dt(m)),e!==s&&(n=Ut())!==s?(125===c.charCodeAt(_t)?(o=y,_t++):(o=s,0===jt&&Dt(v)),o!==s?(Pt=t,D(r,n)):(_t=t,s)):(_t=t,s)):(_t=t,s)}function qt(){var t,r,e,n;if(t=_t,(r=function(){var t,r,e;return t=_t,c.substr(_t,7)===Z?(r=Z,_t+=7):(r=s,0===jt&&Dt(U)),t=r!==s&&Bt()!==s&&(e=Jt())!==s?(Pt=t,r=W(e)):(_t=t,s)}())===s&&(r=null),r!==s)if(Bt()!==s){if(e=[],(n=$t())!==s)for(;n!==s;)e.push(n),n=$t();else e=s;t=e!==s?(Pt=t,r=$(r,e)):(_t=t,s)}else _t=t,t=s;else _t=t,t=s;return t}function zt(){var t,r;if(jt++,t=[],z.test(c.charAt(_t))?(r=c.charAt(_t),_t++):(r=s,0===jt&&Dt(B)),r!==s)for(;r!==s;)t.push(r),z.test(c.charAt(_t))?(r=c.charAt(_t),_t++):(r=s,0===jt&&Dt(B));else t=s;return jt--,t===s&&(r=s,0===jt&&Dt(q)),t}function Bt(){var t,r,e;for(jt++,t=_t,r=[],e=zt();e!==s;)r.push(e),e=zt();return t=r!==s?c.substring(t,_t):r,jt--,t===s&&(r=s,0===jt&&Dt(G)),t}function Gt(){var t;return H.test(c.charAt(_t))?(t=c.charAt(_t),_t++):(t=s,0===jt&&Dt(J)),t}function Ht(){var t;return K.test(c.charAt(_t))?(t=c.charAt(_t),_t++):(t=s,0===jt&&Dt(Q)),t}function Jt(){var t,r,e,n,o,u;if(t=_t,48===c.charCodeAt(_t)?(r=V,_t++):(r=s,0===jt&&Dt(X)),r===s){if(e=r=_t,Y.test(c.charAt(_t))?(n=c.charAt(_t),_t++):(n=s,0===jt&&Dt(tt)),n!==s){for(o=[],u=Gt();u!==s;)o.push(u),u=Gt();e=o!==s?n=[n,o]:(_t=e,s)}else _t=e,e=s;r=e!==s?c.substring(r,_t):e}return r!==s&&(Pt=t,r=rt(r)),t=r}function Kt(){var t,r,e;return r=t=_t,jt++,39===c.charCodeAt(_t)?(e=et,_t++):(e=s,0===jt&&Dt(nt)),e===s&&(ot.test(c.charAt(_t))?(e=c.charAt(_t),_t++):(e=s,0===jt&&Dt(ut))),jt--,(t=(r=e===s?void 0:(_t=r,s))!==s?(c.length>_t?(e=c.charAt(_t),_t++):(e=s,0===jt&&Dt(it)),e!==s?(Pt=t,r=at(e)):(_t=t,s)):(_t=t,s))===s&&(t=_t,39===c.charCodeAt(_t)?(r=et,_t++):(r=s,0===jt&&Dt(nt)),t=r!==s&&(e=function(){var t;return ot.test(c.charAt(_t))?(t=c.charAt(_t),_t++):(t=s,0===jt&&Dt(ut)),t===s&&(t=Qt()),t}())!==s?(Pt=t,r=ct(e)):(_t=t,s)),t}function Qt(){var t;return 39===c.charCodeAt(_t)?(t=et,_t++):(t=s,0===jt&&Dt(nt)),t}function Vt(){var t,r,e,n,o,u,i,a;return t=_t,39===c.charCodeAt(_t)?(r=et,_t++):(r=s,0===jt&&Dt(nt)),(t=r!==s&&(e=Qt())!==s?(Pt=t,r=ct(e)):(_t=t,s))===s&&(st.test(c.charAt(_t))?(t=c.charAt(_t),_t++):(t=s,0===jt&&Dt(lt)),t===s&&(t=_t,c.substr(_t,2)===ft?(r=ft,_t+=2):(r=s,0===jt&&Dt(pt)),r!==s&&(Pt=t,r=ht()),(t=r)===s&&(t=_t,c.substr(_t,2)===mt?(r=mt,_t+=2):(r=s,0===jt&&Dt(dt)),r!==s&&(Pt=t,r=gt()),(t=r)===s&&(t=_t,c.substr(_t,2)===yt?(r=yt,_t+=2):(r=s,0===jt&&Dt(vt)),r!==s&&(Pt=t,r=bt()),(t=r)===s&&(t=_t,c.substr(_t,2)===At?(r=At,_t+=2):(r=s,0===jt&&Dt(wt)),r!==s&&(Pt=t,r=Ft()),(t=r)===s&&(t=_t,c.substr(_t,2)===xt?(r=xt,_t+=2):(r=s,0===jt&&Dt(Ct)),t=r!==s?(n=e=_t,(e=(n=(o=Ht())!==s&&(u=Ht())!==s&&(i=Ht())!==s&&(a=Ht())!==s?o=[o,u,i,a]:(_t=n,s))!==s?c.substring(e,_t):n)!==s?(Pt=t,r=Ot(e)):(_t=t,s)):(_t=t,s))))))),t}function Xt(){var t,r,e;if(t=_t,r=[],(e=Vt())!==s)for(;e!==s;)r.push(e),e=Vt();else r=s;return r!==s&&(Pt=t,r=p(r)),t=r}if((r=i())!==s&&_t===c.length)return r;throw r!==s&&_t<c.length&&Dt({type:"end"}),e=Tt,n=St<c.length?c.charAt(St):null,o=St<c.length?Lt(St,St+1):Lt(St,St),new Yt(Yt.buildMessage(e,n),e,n,o)}});function Yt(t,r,e,n){this.message=t,this.expected=r,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Yt)}function n(){this.constructor=t}var o,u=(o=function(t,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)},function(t,r){function e(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}),a=(i.prototype.compile=function(t){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(t)},i.prototype.compileMessage=function(t){var r=this;if(!t||"messageFormatPattern"!==t.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var e=t.elements,n=e.filter(function(t){return"messageTextElement"===t.type||"argumentElement"===t.type}).map(function(t){return"messageTextElement"===t.type?r.compileMessageText(t):r.compileArgument(t)});if(n.length!==e.length)throw new Error("Message element does not have a valid type");return n},i.prototype.compileMessageText=function(t){return this.currentPlural&&/(^|[^\\])#/g.test(t.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new d(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,t.value)):t.value.replace(/\\#/g,"#")},i.prototype.compileArgument=function(t){var r=t.format,e=t.id;if(!r)return new l(e);var n=this.formats,o=this.locales;switch(r.type){case"numberFormat":return{id:e,format:new Intl.NumberFormat(o,n.number[r.style]).format};case"dateFormat":return{id:e,format:new Intl.DateTimeFormat(o,n.date[r.style]).format};case"timeFormat":return{id:e,format:new Intl.DateTimeFormat(o,n.time[r.style]).format};case"pluralFormat":return new p(e,r.ordinal,r.offset,this.compileOptions(t),o);case"selectFormat":return new y(e,this.compileOptions(t));default:throw new Error("Message element does not have a valid format type")}},i.prototype.compileOptions=function(t){var e=this,r=t.format,n=r.options;this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===r.type?t:null;var o=n.reduce(function(t,r){return t[r.selector]=e.compileMessage(r.value),t},{});return this.currentPlural=this.pluralStack.pop(),o},i);function i(t,r){this.locales=[],this.formats={number:{},date:{},time:{}},this.pluralNumberFormat=null,this.currentPlural=null,this.pluralStack=[],this.locales=t,this.formats=r}function c(t){this.id=t}var s,l=(u(f,s=c),f.prototype.format=function(t){return t||"number"==typeof t?"string"==typeof t?t:String(t):""},f);function f(){return null!==s&&s.apply(this,arguments)||this}var p=(h.prototype.getOption=function(t){var r=this.options;return r["="+t]||r[this.pluralRules.select(t-this.offset)]||r.other},h);function h(t,r,e,n,o){this.id=t,this.offset=e,this.options=n,this.pluralRules=new Intl.PluralRules(o,{type:r?"ordinal":"cardinal"})}var m,d=(u(g,m=c),g.prototype.format=function(t){var r=this.numberFormat.format(t-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+r).replace(/\\#/g,"#")},g);function g(t,r,e,n){var o=m.call(this,t)||this;return o.offset=r,o.numberFormat=e,o.string=n,o}var y=(v.prototype.getOption=function(t){var r=this.options;return r[t]||r.other},v);function v(t,r){this.id=t,this.options=r}var b,A=(b=function(t,r){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)},function(t,r){function e(){this.constructor=t}b(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}),w=function(){return(w=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};function F(e,n){return n?Object.keys(e).reduce(function(t,r){return t[r]=function(e,n){return n?w({},e||{},n||{},Object.keys(e).reduce(function(t,r){return t[r]=w({},e[r],n[r]||{}),t},{})):e}(e[r],n[r]),t},w({},e)):e}var x,C=(x=Error,A(O,x),O);function O(t,r){var e=x.call(this,t)||this;return e.variableId=r,e}var _=function(r,t,e){void 0===t&&(t=_.defaultLocale);var n="string"==typeof r?_.__parse(r):r;if(!n||"messageFormatPattern"!==n.type)throw new TypeError("A message must be provided as a String or AST.");var o=F(_.formats,e),u=function(t){"string"==typeof t&&(t=[t]);try{return Intl.NumberFormat.supportedLocalesOf(t,{localeMatcher:"best fit"})[0]}catch(t){return _.defaultLocale}}(t||[]),i=new a(t,o).compile(n);return{format:function(t){try{return function t(r,e){for(var n="",o=0,u=r;o<u.length;o++){var i=u[o];if("string"!=typeof i){var a=i.id;if(!(e&&a in e))throw new C("A value must be provided for: "+a,a);var c=e[a];i.options?n+=t(i.getOption(c),e):n+=i.format(c)}else n+=i}return n}(i,t)}catch(t){throw t.variableId?new Error("The intl string context variable '"+t.variableId+"' was not provided to the string '"+r+"'"):t}},resolvedOptions:function(){return{locale:u}},getAst:function(){return n}}};return _.defaultLocale="en",_.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},_.__parse=e.parse,_});
//# sourceMappingURL=intl-messageformat.min.js.map
