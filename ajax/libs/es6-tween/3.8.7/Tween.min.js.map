{"version":3,"file":"Tween.min.js","sources":["../src/core.js","../node_modules/intertween/index.js","../src/shim.js","../src/Easing.js","../src/PlaybackPosition.js","../src/Event.js","../src/NodeCache.js","../src/Tween.js","../src/Timeline.js"],"sourcesContent":["/* global process */\r\nimport { cancelAnimationFrame, requestAnimationFrame, root } from './shim';\r\n/**\r\n * Lightweight, effecient and modular ES6 version of tween.js\r\n * @copyright 2017 @dalisoft and es6-tween contributors\r\n * @license MIT\r\n * @namespace TWEEN\r\n * @example\r\n * // ES6\r\n * const {add, remove, isRunning, autoPlay} = TWEEN\r\n */\r\nconst _tweens = [];\r\nlet isStarted = false;\r\nlet _autoPlay = false;\r\nlet _tick;\r\nconst _ticker = requestAnimationFrame;\r\nconst _stopTicker = cancelAnimationFrame;\r\n/**\r\n * Adds tween to list\r\n * @param {Tween} tween Tween instance\r\n * @memberof TWEEN\r\n * @example\r\n * let tween = new Tween({x:0})\r\n * tween.to({x:200}, 1000)\r\n * TWEEN.add(tween)\r\n */\r\nconst add = (tween) => {\r\n    _tweens.push(tween);\r\n    if (_autoPlay && !isStarted) {\r\n        _tick = _ticker(update);\r\n        isStarted = true;\r\n    }\r\n};\r\n/**\r\n * Adds ticker like event\r\n * @param {Function} fn callback\r\n * @memberof TWEEN\r\n * @example\r\n * TWEEN.onTick(time => console.log(time))\r\n */\r\nconst onTick = fn => _tweens.push(fn);\r\n/**\r\n * @returns {Array<Tween>} List of tweens in Array\r\n * @memberof TWEEN\r\n * TWEEN.getAll() // list of tweens\r\n */\r\nconst getAll = () => _tweens;\r\n/**\r\n * Runs update loop automaticlly\r\n * @param {Boolean} state State of auto-run of update loop\r\n * @example TWEEN.autoPlay(true)\r\n * @memberof TWEEN\r\n */\r\nconst autoPlay = (state) => {\r\n    _autoPlay = state;\r\n};\r\n/**\r\n * Removes all tweens from list\r\n * @example TWEEN.removeAll() // removes all tweens, stored in global tweens list\r\n * @memberof TWEEN\r\n */\r\nconst removeAll = () => {\r\n    _tweens.length = 0;\r\n};\r\n/**\r\n * @param {Tween} tween Tween Instance to be matched\r\n * @return {Tween} Matched tween\r\n * @memberof TWEEN\r\n * @example\r\n * TWEEN.get(tween)\r\n */\r\nconst get = (tween) => {\r\n    for (let i = 0; i < _tweens.length; i++) {\r\n        if (tween === _tweens[i]) {\r\n            return _tweens[i];\r\n        }\r\n    }\r\n    return null;\r\n};\r\n/**\r\n * @param {Tween} tween Tween Instance to be matched\r\n * @return {Boolean} Status of Exists tween or not\r\n * @memberof TWEEN\r\n * @example\r\n * TWEEN.has(tween)\r\n */\r\nconst has = (tween) => {\r\n    return get(tween) !== null;\r\n};\r\n/**\r\n * Removes tween from list\r\n * @param {Tween} tween Tween instance\r\n * @memberof TWEEN\r\n * @example\r\n * TWEEN.remove(tween)\r\n */\r\nconst remove = (tween) => {\r\n    const i = _tweens.indexOf(tween);\r\n    if (i !== -1) {\r\n        _tweens.splice(i, 1);\r\n    }\r\n};\r\nconst now = (function () {\r\n    if (typeof (process) !== 'undefined' && process.hrtime !== undefined) {\r\n        return function () {\r\n            const time = process.hrtime();\r\n            // Convert [seconds, nanoseconds] to milliseconds.\r\n            return time[0] * 1000 + time[1] / 1000000;\r\n        };\r\n        // In a browser, use window.performance.now if it is available.\r\n    }\r\n    else if (root.performance !== undefined &&\r\n        root.performance.now !== undefined) {\r\n        // This must be bound, because directly assigning this function\r\n        // leads to an invocation exception in Chrome.\r\n        return root.performance.now.bind(root.performance);\r\n        // Use Date.now if it is available.\r\n    }\r\n    else {\r\n        const offset = root.performance && root.performance.timing && root.performance.timing.navigationStart ? root.performance.timing.navigationStart : Date.now();\r\n        return function () {\r\n            return Date.now() - offset;\r\n        };\r\n    }\r\n}());\r\n/**\r\n * Updates global tweens by given time\r\n * @param {number|Time} time Timestamp\r\n * @param {Boolean=} preserve Prevents tween to be removed after finish\r\n * @memberof TWEEN\r\n * @example\r\n * TWEEN.update(500)\r\n */\r\nconst update = (time, preserve) => {\r\n    time = time !== undefined ? time : now();\r\n    _tick = _ticker(update);\r\n    if (_tweens.length === 0) {\r\n        _stopTicker(_tick);\r\n        isStarted = false;\r\n        return false;\r\n    }\r\n    let i = 0;\r\n    while (i < _tweens.length) {\r\n        _tweens[i].update(time, preserve);\r\n        i++;\r\n    }\r\n    return true;\r\n};\r\n/**\r\n * The state of ticker running\r\n * @return {Boolean} Status of running updates on all tweens\r\n * @memberof TWEEN\r\n * @example TWEEN.isRunning()\r\n */\r\nconst isRunning = () => isStarted;\r\n/**\r\n * The plugins store object\r\n * @namespace TWEEN.Plugins\r\n * @memberof TWEEN\r\n * @example\r\n * let num = Plugins.num = function (node, start, end) {\r\n * return t => start + (end - start) * t\r\n * }\r\n *\r\n * @static\r\n */\r\nconst Plugins = {};\r\n// Normalise time when visiblity is changed (if available) ...\r\nif (root.document && root.document.addEventListener) {\r\n    const doc = root.document;\r\n    let timeDiff = 0;\r\n    let timePause = 0;\r\n    doc.addEventListener('visibilitychange', () => {\r\n        if (document.hidden) {\r\n            timePause = now();\r\n            _stopTicker(_tick);\r\n            isStarted = false;\r\n        }\r\n        else {\r\n            timeDiff = now() - timePause;\r\n            for (let i = 0, length = _tweens.length; i < length; i++) {\r\n                _tweens[i]._startTime += timeDiff;\r\n            }\r\n            _tick = _ticker(update);\r\n            isStarted = true;\r\n        }\r\n        return true;\r\n    });\r\n}\r\nexport { Plugins, get, has, getAll, removeAll, remove, add, now, update, autoPlay, onTick, isRunning };\r\n","/**\r\n * @name InterTween\r\n * @description The lightweight, fastest, smartest, effecient value interpolator with no-dependecy, zero-configuration and relative interpolation\r\n * @author dalisoft (https://github.com/dalisoft)\r\n * @license MIT-License\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define[\"amd\"]) {\r\n        define([], factory);\r\n    } else if (typeof module !== 'undefined' && module[\"exports\"]) {\r\n        module[\"exports\"] = factory();\r\n    } else {\r\n        root[\"InterTween\"] = factory();\r\n    }\r\n}\r\n    (typeof(window) !== 'undefined' ? window : this, function () {\r\n\r\n        // RegExp variables\r\n        var colorMatch = /rgb/g;\r\n        var isIncrementReqForColor = /argb/g;\r\n        // This RegExp (numRegExp) is original from @jkroso string tweening and optimized by @dalisoft\r\n        var numRegExp =\r\n                /\\s+|([A-Za-z?().,{}:\"\"[\\]#\\%]+)|([-+/*%]+=)?([-+*/%]+)?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g;\r\n        var hexColor = /^#([0-9a-f]{6}|[0-9a-f]{3})$/i;\r\n        var trimRegExp = /\\n|\\r|\\t/g;\r\n\t\tvar colorSpaceExp = /, | ,| , /g;\r\n        var rgbMax = 255;\r\n\r\n        // Helpers\r\n        function s2f(val) {\r\n            var floatedVal = parseFloat(val);\r\n            return typeof floatedVal === \"number\" && !isNaN(floatedVal) ? floatedVal : val;\r\n        }\r\n        var isArray = Array.isArray;\r\n\r\n        function h2r_f(all, hex) {\r\n            var r;\r\n            var g;\r\n            var b;\r\n            if (hex.length === 3) {\r\n                r = hex[0];\r\n                g = hex[1];\r\n                b = hex[2];\r\n                hex = r + r + g + g + b + b;\r\n            }\r\n            var color = parseInt(hex, 16);\r\n            r = color >> 16 & rgbMax;\r\n            g = color >> 8 & rgbMax;\r\n            b = color & rgbMax;\r\n            return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\r\n        };\r\n\r\n        function trim(str) {\r\n            return typeof str === \"string\" ? str.replace(trimRegExp, \"\").replace(colorSpaceExp, ',') : str;\r\n        };\r\n        var relativeModes = {\r\n            '+=': 1,\r\n            '-=': 1,\r\n            '*=': 2,\r\n            '/=': 3,\r\n            '%=': 4\r\n        };\r\n\r\n        function r2n(s, e) {\r\n            if (typeof e === 'number') {\r\n                return e;\r\n            } else {\r\n                var rv = relativeModes[e.substr(0, 2)],\r\n                v = e.substr(2);\r\n                if (rv === 1) {\r\n                    var e2 = e[0] + v;\r\n                    return s + parseFloat(e2);\r\n                } else if (rv === 2) {\r\n                    return s * +v;\r\n                } else if (rv === 3) {\r\n                    return s / +v;\r\n                } else if (rv === 4) {\r\n                    return s * (+v / 100);\r\n                }\r\n            }\r\n            return e;\r\n        }\r\n\r\n        var h2r = function (hex) {\r\n            return typeof hex !== 'string' ? hex : trim(hex)\r\n            .replace(hexColor, h2r_f);\r\n        }\r\n\r\n        function s2n(str) {\r\n\t\t\tvar hr = h2r(str);\r\n            return typeof hr === 'string' ? hr.match(numRegExp).map(s2f) : str;\r\n        }\r\n\r\n        // Splitted functions\r\n        function stringTween(s, e, d) {\r\n            d = d !== undefined ? d : 10000;\r\n            if (!numRegExp.test(e))\r\n                return e;\r\n            var sv = s2n(s);\r\n            var ev = s2n(e);\r\n            var uv = unitTween(sv, ev, d);\r\n            if (uv) {\r\n                return uv;\r\n            }\r\n            uv = null;\r\n            var cm = null;\r\n            var cmls = null;\r\n            var rv = [];\r\n\t\t\tvar i = 0;\r\n\t\t\tvar len = ev.length;\r\n            for (; i < len; i++) {\r\n                var ve = ev[i],\r\n                vs = sv[i];\r\n                rv[i] = typeof ve === 'string' && ve.indexOf('=') === 1 ? e : null;\r\n                if (isIncrementReqForColor.test(ve)) {\r\n                    cm = i + 2;\r\n                    cmls = i + 11;\r\n                } else if (colorMatch.test(ve)) {\r\n                    cm = i;\r\n                    cmls = i + 9;\r\n                }\r\n                ev[i] = vs === ve ? null : rv[i] !== null ? r2n(vs, ve) : ve;\r\n            }\r\n            return function (t) {\r\n                var str = '';\r\n\t\t\t\ti = 0;\r\n                for (; i < len; i++) {\r\n                    var a = sv[i],\r\n                    b = ev[i],\r\n                    r = rv[i];\r\n                    str += typeof b === 'number' ? cm !== null && i > cm &&\r\n                    i < cmls ? (a + ( b - a ) * t) | 0 : (((a + ( b - a ) * t) * d) |\r\n                        0) / d : a;\r\n                    if (t === 1 && r !== null) {\r\n                        sv[i] = b;\r\n                        ev[i] = r2n(b, r);\r\n                    }\r\n                }\r\n                return str;\r\n            }\r\n        }\r\n\r\n        function tweenThemTo(sv, ev) {\r\n            var vs = [];\r\n            for (var i = 0, len = sv.length; i < len; i++) {\r\n                var s = sv[i];\r\n                vs[i] = isArray(s) ? arrayTween(s, ev) : typeof s === 'object' ? objectTween(s, ev) : typeof s === 'string' ? stringTween(s, ev) : s;\r\n            }\r\n            return function (t) {\r\n                for (var i = 0, len = vs.length; i < len; i++) {\r\n                    sv[i] = typeof vs[i] === 'function' ? vs[i](t) : typeof vs[i] === 'number' ? vs[i] + (ev - vs[i]) * t : vs[i];\r\n                }\r\n                return sv;\r\n            }\r\n        };\r\n\r\n        function parseInterpolatables(sv, ev) {\r\n            var vs = [];\r\n            for (var i = 0, len = ev.length; i < len; i++) {\r\n                var e = ev[i];\r\n                vs[i] = mainTween(i === 0 ? sv : ev[i - 1], e);\r\n            }\r\n\t\t\tvar lastItem = ev[ev.length - 1];\r\n\t\t\tvs.push(mainTween(lastItem, lastItem));\r\n\t\t\tvar endLength = vs.length - 1;\r\n            return function (t) {\r\n\t\t\t\tvar totalTime = t * endLength;\r\n\t\t\t\tvar roundedTime = Math.max(0, Math.floor(totalTime));\r\n\t\t\t\tvar elapsed = totalTime - roundedTime;\r\n\r\n\t\t\t\tvar item = vs[roundedTime];\r\n\t\t\t\tvar interpolated = typeof item === 'function' ? item(elapsed) : item;\r\n\t\t\t\treturn interpolated;\r\n\t\t\t};\r\n        }\r\n\r\n        function arrayTween(sv, ev, d) {\r\n            d = d !== undefined ? d : 10000;\r\n            var s = sv.slice();\r\n            var rv = [];\r\n\t\t\tvar minLength = Math.min(sv.length, ev.length);\r\n            for (var i = 0; i < minLength; i++) {\r\n                var vs = s[i],\r\n                ve = ev[i];\r\n                rv[i] = typeof ve === 'string' && ve.indexOf('=') === 1 ? ve : null;\r\n                s[i] = ve.nodeType || ve.update ? ve.update : vs === ve ? null : isArray(ve) ?\r\n                    isArray(vs) && ve.length === vs.length ? arrayTween(vs, ve, d) : parseInterpolatables(vs, ve) : isArray(vs) ? tweenThemTo(vs, ve) : typeof vs === 'object' ?\r\n                    objectTween(vs, ve, d) : typeof vs === 'string' ?\r\n                    stringTween(vs, ve, d) : vs !== undefined ? vs : ve;\r\n\t\t\t\tev[i] = rv[i] !== null ? r2n(\r\n                        vs, ve) : ve;\r\n            }\r\n            return function (t) {\r\n                for (var i = 0; i < minLength; i++) {\r\n                    var a = s[i],\r\n                    b = ev[i],\r\n                    r = rv[i];\r\n                    if (a === null || a === undefined)\r\n                        continue;\r\n                    sv[i] = typeof a === 'number' ? (((a + (b - a) * t) * d) | 0) /\r\n                        d : typeof a === 'function' ? a(t) : a.update ? a.update(t) : b && b.update ? b.update(t) : b;\r\n                    if (r && t === 1) {\r\n                        s[i] = b;\r\n                        ev[i] = r2n(s[i], r);\r\n                    }\r\n                }\r\n                return sv;\r\n            }\r\n        }\r\n\r\n        var units = [\"px\", \"pt\", \"pc\", \"deg\", \"rad\", \"turn\", \"em\", \"ex\", \"cm\", \"mm\", \"dm\", \"inch\", \"in\", \"rem\", \"vw\", \"vh\", \"vmin\", \"vmax\", \"%\"];\r\n        function unitTween(sv, ev, d) {\r\n            d = d !== undefined ? d : 10000;\r\n            if (ev.length === 2 && sv.length === 2) {\r\n                var unidx = units.indexOf(ev[1]);\r\n                if (unidx !== -1) {\r\n                    var s = +sv[0],\r\n                    e = +ev[0],\r\n                    u = ev[1],\r\n\t\t\t\t\tr = typeof ev[0] === 'string' && ev[0].indexOf('=') === 1 ? ev[0] : null;\r\n\t\t\t\t\tif (r) {\r\n\t\t\t\t\t\te = r2n(s, e);\r\n\t\t\t\t\t}\r\n                    return s === e && ev[0] === u ? ev : function (t) {\r\n                        var v = ((((s + (e - s) * t) * d) | 0) / d) + u;\r\n\t\t\t\t\t\tif (r && t === 1) {\r\n\t\t\t\t\t\t\ts = e;\r\n\t\t\t\t\t\t\te = r2n(s, r);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn v;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        function objectTween(sv, ev, d) {\r\n            d = d !== undefined ? d : 10000;\r\n            var rv = {};\r\n            var s = {};\r\n            for (var i in ev) {\r\n                s[i] = sv && sv[i];\r\n                var vs = s[i],\r\n                ve = ev[i];\r\n                rv[i] = typeof ve === 'string' && ve.indexOf('=') === 1 ? ve : null;\r\n\t\t\t\tif (sv[i] === undefined) continue;\r\n                s[i] = ve && ve.nodeType ? ve : ve.update ? ve : vs === ve ? null : isArray(ve) ?\r\n                    isArray(vs) && ve.length === vs.length ? arrayTween(vs, ve, d) : parseInterpolatables(vs, ve) : isArray(vs) ? tweenThemTo(vs, ve) : typeof vs === 'object' ?\r\n                    objectTween(vs, ve, d) : typeof vs === 'string' ?\r\n                    stringTween(vs, ve, d) : vs !== undefined ? vs : ve;\r\n\t\t\t\tev[i] = rv[i] !== null ? r2n(vs, ve) : ve;\r\n            }\r\n            return function (t) {\r\n                for (var i in ev) {\r\n                    var a = s[i],\r\n                    b = ev[i],\r\n                    r = rv[i];\r\n                    if (a === null || a === undefined)\r\n                        continue;\r\n                    sv[i] = typeof a === 'number' ? (((a + (b - a) * t) * d) | 0) /\r\n                        d : typeof a === 'function' ? a(t) : a.update ? a.update(t) : b.update ? b.update(t) : b;\r\n                    if (r && t === 1) {\r\n                        s[i] = b;\r\n                        ev[i] = r2n(s[i], r);\r\n                    }\r\n                }\r\n                return sv;\r\n            }\r\n        }\r\n\r\n        function mainTween(sv, ev, d) {\r\n            d = d !== undefined ? d : 10000;\r\n\t\t\tvar rv = typeof(ev) === 'string' && typeof sv === 'number' && ev.indexOf('=') === 1 ? ev : null;\r\n\t\t\tif (rv) {\r\n\t\t\t\tev = r2n(sv, rv);\r\n\t\t\t}\r\n            return ev.nodeType ? ev : sv.nodeType ? sv : isArray(ev) ? isArray(sv) && sv.length === ev.length ? arrayTween(sv, ev, d) : parseInterpolatables(sv, ev) : isArray(sv) ? tweenThemTo(sv, ev) : typeof ev === 'object' ?\r\n            objectTween(sv, ev, d) : typeof ev === 'string' ? stringTween(sv, ev, d) :\r\n            typeof ev === 'function' ? ev : function (t) {\r\n\t\t\t\tvar vv = typeof ev === 'number' ? (((sv + (ev - sv) * t) *\r\n                        d) | 0) / d : sv\r\n\t\t\t\tif (rv && t === 1) {\r\n\t\t\t\t\tsv += ev;\r\n\t\t\t\t\tev = r2n(sv, rv);\r\n\t\t\t\t}\r\n                return vv;\r\n            }\r\n        }\r\n\r\n        return mainTween;\r\n\r\n    }));\r\n","/* global global */\r\nexport let create = Object.create || ((source) => {\r\n    return Object.assign({}, source || {});\r\n});\r\nexport let assign = Object.assign || ((source, ...args) => {\r\n    for (let i = 0, len = args.length; i < len; i++) {\r\n        const arg = args[i];\r\n        for (const p in arg) {\r\n            source[p] = arg[p];\r\n        }\r\n    }\r\n    return source;\r\n});\r\nexport let root = typeof (window) !== 'undefined' ? window : typeof (global) !== 'undefined' ? global : this;\r\nexport let requestAnimationFrame = root.requestAnimationFrame || (fn => root.setTimeout(fn, 16));\r\nexport let cancelAnimationFrame = root.cancelAnimationFrame || (id => root.clearTimeout(id));\r\n","/**\r\n * List of full easings\r\n * @namespace TWEEN.Easing\r\n * @example\r\n * import {Tween, Easing} from 'es6-tween'\r\n *\r\n * // then set via new Tween({x:0}).to({x:100}, 1000).easing(Easing.Quadratic.InOut).start()\r\n */\r\nconst Easing = {\r\n    Linear: {\r\n        None(k) {\r\n            return k;\r\n        }\r\n    },\r\n    Quadratic: {\r\n        In(k) {\r\n            return k * k;\r\n        },\r\n        Out(k) {\r\n            return k * (2 - k);\r\n        },\r\n        InOut(k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k;\r\n            }\r\n            return -0.5 * (--k * (k - 2) - 1);\r\n        }\r\n    },\r\n    Cubic: {\r\n        In(k) {\r\n            return k * k * k;\r\n        },\r\n        Out(k) {\r\n            return --k * k * k + 1;\r\n        },\r\n        InOut(k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k;\r\n            }\r\n            return 0.5 * ((k -= 2) * k * k + 2);\r\n        }\r\n    },\r\n    Quartic: {\r\n        In(k) {\r\n            return k * k * k * k;\r\n        },\r\n        Out(k) {\r\n            return 1 - (--k * k * k * k);\r\n        },\r\n        InOut(k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k * k;\r\n            }\r\n            return -0.5 * ((k -= 2) * k * k * k - 2);\r\n        }\r\n    },\r\n    Quintic: {\r\n        In(k) {\r\n            return k * k * k * k * k;\r\n        },\r\n        Out(k) {\r\n            return --k * k * k * k * k + 1;\r\n        },\r\n        InOut(k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k * k * k;\r\n            }\r\n            return 0.5 * ((k -= 2) * k * k * k * k + 2);\r\n        }\r\n    },\r\n    Sinusoidal: {\r\n        In(k) {\r\n            return 1 - Math.cos(k * Math.PI / 2);\r\n        },\r\n        Out(k) {\r\n            return Math.sin(k * Math.PI / 2);\r\n        },\r\n        InOut(k) {\r\n            return 0.5 * (1 - Math.cos(Math.PI * k));\r\n        }\r\n    },\r\n    Exponential: {\r\n        In(k) {\r\n            return k === 0 ? 0 : Math.pow(1024, k - 1);\r\n        },\r\n        Out(k) {\r\n            return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\r\n        },\r\n        InOut(k) {\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * Math.pow(1024, k - 1);\r\n            }\r\n            return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\r\n        }\r\n    },\r\n    Circular: {\r\n        In(k) {\r\n            return 1 - Math.sqrt(1 - k * k);\r\n        },\r\n        Out(k) {\r\n            return Math.sqrt(1 - (--k * k));\r\n        },\r\n        InOut(k) {\r\n            if ((k *= 2) < 1) {\r\n                return -0.5 * (Math.sqrt(1 - k * k) - 1);\r\n            }\r\n            return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\r\n        }\r\n    },\r\n    Elastic: {\r\n        In(k) {\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\r\n        },\r\n        Out(k) {\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\r\n        },\r\n        InOut(k) {\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            k *= 2;\r\n            if (k < 1) {\r\n                return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\r\n            }\r\n            return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\r\n        }\r\n    },\r\n    Back: {\r\n        In(k) {\r\n            const s = 1.70158;\r\n            return k * k * ((s + 1) * k - s);\r\n        },\r\n        Out(k) {\r\n            const s = 1.70158;\r\n            return --k * k * ((s + 1) * k + s) + 1;\r\n        },\r\n        InOut(k) {\r\n            const s = 1.70158 * 1.525;\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * (k * k * ((s + 1) * k - s));\r\n            }\r\n            return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\r\n        }\r\n    },\r\n    Bounce: {\r\n        In(k) {\r\n            return 1 - Easing.Bounce.Out(1 - k);\r\n        },\r\n        Out(k) {\r\n            if (k < (1 / 2.75)) {\r\n                return 7.5625 * k * k;\r\n            }\r\n            else if (k < (2 / 2.75)) {\r\n                return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\r\n            }\r\n            else if (k < (2.5 / 2.75)) {\r\n                return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\r\n            }\r\n            else {\r\n                return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\r\n            }\r\n        },\r\n        InOut(k) {\r\n            if (k < 0.5) {\r\n                return Easing.Bounce.In(k * 2) * 0.5;\r\n            }\r\n            return Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\r\n        }\r\n    }\r\n};\r\nexport default Easing;\r\n","export default class PlaybackPosition {\r\n    constructor() {\r\n        this.totalTime = 0;\r\n        this.labels = [];\r\n        this.offsets = [];\r\n    }\r\n    parseLabel(name, offset) {\r\n        const { offsets, labels } = this;\r\n        let i = labels.indexOf(name);\r\n        if (typeof name === 'string' && name.indexOf('=') !== -1 && !offset && i === -1) {\r\n            const rty = name.substr(name.indexOf('=') - 1, 2);\r\n            const rt = name.split(rty);\r\n            offset = rt.length === 2 ? rty + rt[1] : null;\r\n            name = rt[0];\r\n            i = labels.indexOf(name);\r\n        }\r\n        if (i !== -1 && name) {\r\n            let currOffset = offsets[i] || 0;\r\n            if (typeof offset === 'number') {\r\n                currOffset = offset;\r\n            }\r\n            else if (typeof offset === 'string') {\r\n                if (offset.indexOf('=') !== -1) {\r\n                    const type = offset.charAt(0);\r\n                    offset = Number(offset.substr(2));\r\n                    if (type === '+' || type === '-') {\r\n                        currOffset += parseFloat(type + offset);\r\n                    }\r\n                    else if (type === '*') {\r\n                        currOffset *= offset;\r\n                    }\r\n                    else if (type === '/') {\r\n                        currOffset /= offset;\r\n                    }\r\n                    else if (type === '%') {\r\n                        currOffset *= offset / 100;\r\n                    }\r\n                }\r\n            }\r\n            return currOffset;\r\n        }\r\n        return typeof offset === 'number' ? offset : 0;\r\n    }\r\n    addLabel(name, offset) {\r\n        this.labels.push(name);\r\n        this.offsets.push(this.parseLabel(name, offset));\r\n        return this;\r\n    }\r\n    setLabel(name, offset) {\r\n        const i = this.labels.indexOf(name);\r\n        if (i !== -1) {\r\n            this.offsets.splice(i, 1, this.parseLabel(name, offset));\r\n        }\r\n        return this;\r\n    }\r\n    eraseLabel(name) {\r\n        const i = this.labels.indexOf(name);\r\n        if (i !== -1) {\r\n            this.labels.splice(i, 1);\r\n            this.offsets.splice(i, 1);\r\n        }\r\n        return this;\r\n    }\r\n}\r\n","/**\r\n * Events class\r\n * @constructor\r\n * @class\r\n * @example\r\n * let ev = new EventClass()\r\n * ev.on('listen', name => `Hello ${name}`)\r\n * ev.emit('listen', 'World')\r\n */\r\nclass EventClass {\r\n    constructor() {\r\n        this._events = {};\r\n    }\r\n    /**\r\n     * Adds `event` to Events system\r\n     * @param {string} event - Event listener name\r\n     * @param {Function} callback - Event listener callback\r\n     * @memberof EventClass\r\n     */\r\n    on(event, callback) {\r\n        if (!this._events[event]) {\r\n            this._events[event] = [];\r\n        }\r\n        this._events[event].push(callback);\r\n        return this;\r\n    }\r\n    /**\r\n     * Adds `event` to Events system.\r\n     * Removes itself after fired once\r\n     * @param {string} event - Event listener name\r\n     * @param {Function} callback - Event listener callback\r\n     * @memberof EventClass\r\n     */\r\n    once(event, callback) {\r\n        if (!this._events[event]) {\r\n            this._events[event] = [];\r\n        }\r\n        const { _events } = this;\r\n        const spliceIndex = _events[event].length;\r\n        this._events[event].push((...args) => {\r\n            callback.apply(this, args);\r\n            _events[event].splice(spliceIndex, 1);\r\n        });\r\n        return this;\r\n    }\r\n    /**\r\n     * Removes `event` from Events system\r\n     * @param {string} event - Event listener name\r\n     * @param {Function} callback - Event listener callback\r\n     * @memberof EventClass\r\n     */\r\n    off(event, callback) {\r\n        const { _events } = this;\r\n        if (event === undefined || !_events[event]) {\r\n            return this;\r\n        }\r\n        if (callback) {\r\n            this._events[event] = this._events[event].filter((cb) => cb !== callback);\r\n        }\r\n        else {\r\n            this._events[event].length = 0;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Emits/Fired/Trigger `event` from Events system listeners\r\n     * @param {string} event - Event listener name\r\n     * @memberof EventClass\r\n     */\r\n    emit(event, arg1, arg2, arg3, arg4) {\r\n        const { _events } = this;\r\n        const _event = _events[event];\r\n        if (!_event || !_event.length) {\r\n            return this;\r\n        }\r\n        let i = 0;\r\n        const len = _event.length;\r\n        for (; i < len; i++) {\r\n            _event[i](arg1, arg2, arg3, arg4);\r\n        }\r\n        return this;\r\n    }\r\n}\r\nexport default EventClass;\r\n","import { assign } from './shim';\r\nconst Store = {};\r\nexport default function (node, tween) {\r\n    if (!node || !node.nodeType || !tween)\r\n        return tween;\r\n    const ID = node.queueID || 'queue_' + Math.round(Math.random() * 1000 + Date.now());\r\n    if (!node.queueID) {\r\n        node.queueID = ID;\r\n    }\r\n    if (Store[ID]) {\r\n        if (tween) {\r\n            Store[ID] = assign(Store[ID], tween);\r\n        }\r\n        return Store[ID];\r\n    }\r\n    Store[ID] = tween;\r\n    return Store[ID];\r\n}\r\n","import InterTween from 'intertween';\r\nimport { create } from './shim';\r\nimport { add, now, Plugins, remove } from './core';\r\nimport Easing from './Easing';\r\nimport EventClass from './Event';\r\nimport NodeCache from './NodeCache';\r\nObject.create = create;\r\n// Events list\r\nexport const EVENT_UPDATE = 'update';\r\nexport const EVENT_COMPLETE = 'complete';\r\nexport const EVENT_START = 'start';\r\nexport const EVENT_REPEAT = 'repeat';\r\nexport const EVENT_REVERSE = 'reverse';\r\nexport const EVENT_PAUSE = 'pause';\r\nexport const EVENT_PLAY = 'play';\r\nexport const EVENT_RS = 'restart';\r\nexport const EVENT_STOP = 'stop';\r\nexport const EVENT_SEEK = 'seek';\r\nlet _id = 0; // Unique ID\r\nconst defaultEasing = Easing.Linear.None;\r\n/**\r\n * Tween main constructor\r\n * @constructor\r\n * @extends EventClass\r\n * @param {Object|Element} node Node Element or Tween initial object\r\n * @param {Object=} object If Node Element is using, second argument is used for Tween initial object\r\n * @example let tween = new Tween(myNode, {width:'100px'}).to({width:'300px'}, 2000).start()\r\n */\r\nclass Tween extends EventClass {\r\n    /**\r\n     * Easier way to call the Tween\r\n     * @param {Element} node DOM Element\r\n     * @param {object} object - Initial value\r\n     * @param {object} to - Target value\r\n     * @param {object} params - Options of tweens\r\n     * @example Tween.fromTo(node, {x:0}, {x:200}, {duration:1000})\r\n     * @memberof Tween\r\n     * @static\r\n     */\r\n    static fromTo(node, object, to, params = {}) {\r\n        params.quickRender = params.quickRender ? params.quickRender : !to;\r\n        const tween = new Tween(node, object).to(to, params);\r\n        if (params.quickRender) {\r\n            tween.render().update(tween._startTime);\r\n            tween._rendered = false;\r\n            tween._onStartCallbackFired = false;\r\n        }\r\n        return tween;\r\n    }\r\n    /**\r\n     * Easier way calling constructor only applies the `to` value, useful for CSS Animation\r\n     * @param {Element} node DOM Element\r\n     * @param {object} to - Target value\r\n     * @param {object} params - Options of tweens\r\n     * @example Tween.to(node, {x:200}, {duration:1000})\r\n     * @memberof Tween\r\n     * @static\r\n     */\r\n    static to(node, to, params) {\r\n        return Tween.fromTo(node, null, to, params);\r\n    }\r\n    /**\r\n     * Easier way calling constructor only applies the `from` value, useful for CSS Animation\r\n     * @param {Element} node DOM Element\r\n     * @param {object} from - Initial value\r\n     * @param {object} params - Options of tweens\r\n     * @example Tween.from(node, {x:200}, {duration:1000})\r\n     * @memberof Tween\r\n     * @static\r\n     */\r\n    static from(node, from, params) {\r\n        return Tween.fromTo(node, from, null, params);\r\n    }\r\n    constructor(node, object) {\r\n        super();\r\n        this.id = _id++;\r\n        if (typeof node !== 'undefined' && !object && !node.nodeType) {\r\n            object = this.object = node;\r\n            node = null;\r\n        }\r\n        else if (typeof node !== 'undefined') {\r\n            this.node = node;\r\n            if (typeof object === 'object') {\r\n                object = this.object = NodeCache(node, object);\r\n            }\r\n            else {\r\n                this.object = object;\r\n            }\r\n        }\r\n        const isArr = this.isArr = Array.isArray(object);\r\n        this._valuesStart = isArr ? [] : {};\r\n        this._valuesEnd = null;\r\n        this._valuesFunc = {};\r\n        this._duration = 1000;\r\n        this._easingFunction = defaultEasing;\r\n        this._easingReverse = defaultEasing;\r\n        this._startTime = 0;\r\n        this._delayTime = 0;\r\n        this._repeat = 0;\r\n        this._r = 0;\r\n        this._isPlaying = false;\r\n        this._yoyo = false;\r\n        this._reversed = false;\r\n        this._onStartCallbackFired = false;\r\n        this._pausedTime = null;\r\n        this._isFinite = true;\r\n        this._elapsed = 0;\r\n        return this;\r\n    }\r\n    /**\r\n     * @return {boolean} State of playing of tween\r\n     * @example tween.isPlaying() // returns `true` if tween in progress\r\n     * @memberof Tween\r\n     */\r\n    isPlaying() {\r\n        return this._isPlaying;\r\n    }\r\n    /**\r\n     * @return {boolean} State of started of tween\r\n     * @example tween.isStarted() // returns `true` if tween in started\r\n     * @memberof Tween\r\n     */\r\n    isStarted() {\r\n        return this._onStartCallbackFired;\r\n    }\r\n    /**\r\n     * Reverses the tween state/direction\r\n     * @example tween.reverse()\r\n     * @memberof Tween\r\n     */\r\n    reverse() {\r\n        const { _reversed } = this;\r\n        this._reversed = !_reversed;\r\n        return this;\r\n    }\r\n    /**\r\n     * @return {boolean} State of reversed\r\n     * @example tween.reversed() // returns `true` if tween in reversed state\r\n     * @memberof Tween\r\n     */\r\n    reversed() {\r\n        return this._reversed;\r\n    }\r\n    /**\r\n     * Pauses tween\r\n     * @example tween.pause()\r\n     * @memberof Tween\r\n     */\r\n    pause() {\r\n        if (!this._isPlaying) {\r\n            return this;\r\n        }\r\n        this._isPlaying = false;\r\n        remove(this);\r\n        this._pausedTime = now();\r\n        return this.emit(EVENT_PAUSE, this.object);\r\n    }\r\n    /**\r\n     * Play/Resume the tween\r\n     * @example tween.play()\r\n     * @memberof Tween\r\n     */\r\n    play() {\r\n        if (this._isPlaying) {\r\n            return this;\r\n        }\r\n        this._isPlaying = true;\r\n        this._startTime += now() - this._pausedTime;\r\n        add(this);\r\n        this._pausedTime = now();\r\n        return this.emit(EVENT_PLAY, this.object);\r\n    }\r\n    /**\r\n     * Restarts tween from initial value\r\n     * @param {boolean=} noDelay If this param is set to `true`, restarts tween without `delay`\r\n     * @example tween.restart()\r\n     * @memberof Tween\r\n     */\r\n    restart(noDelay) {\r\n        this._repeat = this._r;\r\n        this._startTime = now() + (noDelay ? 0 : this._delayTime);\r\n        if (!this._isPlaying) {\r\n            add(this);\r\n        }\r\n        return this.emit(EVENT_RS, this.object);\r\n    }\r\n    /**\r\n     * Seek tween value by `time`\r\n     * @param {Time} time Tween update time\r\n     * @param {boolean=} keepPlaying When this param is set to `false`, tween pausing after seek\r\n     * @example tween.seek(500)\r\n     * @memberof Tween\r\n     */\r\n    seek(time, keepPlaying) {\r\n        this._startTime = now() + Math.max(0, Math.min(time, this._duration));\r\n        this.emit(EVENT_SEEK, time, this.object);\r\n        return keepPlaying ? this : this.pause();\r\n    }\r\n    /**\r\n     * Sets tween duration\r\n     * @param {number} amount Duration is milliseconds\r\n     * @example tween.duration(2000)\r\n     * @memberof Tween\r\n     */\r\n    duration(amount) {\r\n        this._duration = typeof (amount) === 'function' ? amount(this._duration) : amount;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets target value and duration\r\n     * @param {object} properties Target value (to value)\r\n     * @param {number|Object=} [duration=1000] Duration of tween\r\n     * @example let tween = new Tween({x:0}).to({x:100}, 2000)\r\n     * @memberof Tween\r\n     */\r\n    to(properties, duration = 1000, maybeUsed) {\r\n        this._valuesEnd = properties;\r\n        if (typeof duration === 'number' || typeof (duration) === 'function') {\r\n            this._duration = typeof (duration) === 'function' ? duration(this._duration) : duration;\r\n        }\r\n        else if (typeof duration === 'object') {\r\n            for (const prop in duration) {\r\n                if (typeof this[prop] === 'function') {\r\n                    const [arg1 = null, arg2 = null, arg3 = null, arg4 = null] = Array.isArray(duration[prop]) ? duration[prop] : [duration[prop]];\r\n                    this[prop](arg1, arg2, arg3, arg4);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Renders and computes value at first render\r\n     * @private\r\n     * @memberof Tween\r\n     */\r\n    render() {\r\n        if (this._rendered) {\r\n            return this;\r\n        }\r\n        let { _valuesEnd, _valuesFunc, _valuesStart, object, Renderer, node, InitialValues } = this;\r\n        if (node && InitialValues) {\r\n            if (!object) {\r\n                object = this.object = NodeCache(node, InitialValues(node, _valuesEnd));\r\n            }\r\n            else if (!_valuesEnd) {\r\n                _valuesEnd = this._valuesEnd = InitialValues(node, object);\r\n            }\r\n        }\r\n        for (const property in _valuesEnd) {\r\n            const start = object && object[property];\r\n            const end = _valuesEnd[property];\r\n            if (Plugins[property]) {\r\n                const plugin = Plugins[property].prototype.update ? new Plugins[property](this, start, end, property, object) : Plugins[property](this, start, end, property, object);\r\n                if (plugin) {\r\n                    _valuesFunc[property] = plugin;\r\n                }\r\n                continue;\r\n            }\r\n            if (!object || object[property] === undefined) {\r\n                continue;\r\n            }\r\n            if (typeof end === 'number' && typeof start === 'number') {\r\n                _valuesStart[property] = start;\r\n                _valuesEnd[property] = end;\r\n            }\r\n            else {\r\n                _valuesFunc[property] = InterTween(start, end);\r\n            }\r\n        }\r\n        if (Renderer && this.node) {\r\n            this.__render = new Renderer(this, object, _valuesEnd);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Start the tweening\r\n     * @param {number} time setting manual time instead of Current browser timestamp\r\n     * @example tween.start()\r\n     * @memberof Tween\r\n     */\r\n    start(time) {\r\n        this._startTime = time !== undefined ? time : now();\r\n        this._startTime += this._delayTime;\r\n        add(this);\r\n        this._isPlaying = true;\r\n        return this;\r\n    }\r\n    /**\r\n     * Stops the tween\r\n     * @example tween.stop()\r\n     * @memberof Tween\r\n     */\r\n    stop() {\r\n        const { _isPlaying, object, _startTime, _duration } = this;\r\n        if (!_isPlaying) {\r\n            return this;\r\n        }\r\n        this.update(_startTime + _duration);\r\n        remove(this);\r\n        this._isPlaying = false;\r\n        return this.emit(EVENT_STOP, object);\r\n    }\r\n    /**\r\n     * Set delay of tween\r\n     * @param {number} amount Sets tween delay / wait duration\r\n     * @example tween.delay(500)\r\n     * @memberof Tween\r\n     */\r\n    delay(amount) {\r\n        this._delayTime = typeof (amount) === 'function' ? amount(this._delayTime) : amount;\r\n        this._startTime += this._delayTime;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets how times tween is repeating\r\n     * @param {amount} amount the times of repeat\r\n     * @example tween.repeat(5)\r\n     * @memberof Tween\r\n     */\r\n    repeat(amount) {\r\n        this._repeat = typeof (amount) === 'function' ? amount(this._repeat) : amount;\r\n        this._r = this._repeat;\r\n        this._isFinite = isFinite(amount);\r\n        return this;\r\n    }\r\n    /**\r\n     * Set delay of each repeat of tween\r\n     * @param {number} amount Sets tween repeat delay / repeat wait duration\r\n     * @example tween.repeatDelay(400)\r\n     * @memberof Tween\r\n     */\r\n    repeatDelay(amount) {\r\n        this._repeatDelayTime = typeof (amount) === 'function' ? amount(this._repeatDelayTime) : amount;\r\n        return this;\r\n    }\r\n    /**\r\n     * Set delay of each repeat alternate of tween\r\n     * @param {number} amount Sets tween repeat alternate delay / repeat alternate wait duration\r\n     * @example tween.reverseDelay(500)\r\n     * @memberof Tween\r\n     */\r\n    reverseDelay(amount) {\r\n        this._reverseDelayTime = typeof (amount) === 'function' ? amount(this._reverseDelayTime) : amount;\r\n        return this;\r\n    }\r\n    /**\r\n     * Set `yoyo` state (enables reverse in repeat)\r\n     * @param {boolean} state Enables alternate direction for repeat\r\n     * @param {Function=} _easingReverse Easing function in reverse direction\r\n     * @example tween.yoyo(true)\r\n     * @memberof Tween\r\n     */\r\n    yoyo(state, _easingReverse) {\r\n        this._yoyo = typeof (state) === 'function' ? state(this._yoyo) : state === null ? this._yoyo : state;\r\n        this._easingReverse = _easingReverse || this._easingFunction;\r\n        return this;\r\n    }\r\n    /**\r\n     * Set easing\r\n     * @param {Function} _easingFunction Easing function in non-reverse direction\r\n     * @example tween.easing(Easing.Elastic.InOut)\r\n     * @memberof Tween\r\n     */\r\n    easing(_easingFunction) {\r\n        this._easingFunction = _easingFunction;\r\n        return this;\r\n    }\r\n    /**\r\n     * Reassigns value for rare-case like Tween#restart or for Timeline\r\n     * @private\r\n     * @memberof Tween\r\n     */\r\n    reassignValues() {\r\n        const { _valuesStart, _valuesEnd, object, isArr } = this;\r\n        let property;\r\n        for (property in _valuesEnd) {\r\n            if (isArr) {\r\n                property = parseInt(property);\r\n            }\r\n            const start = _valuesStart[property];\r\n            const end = _valuesEnd[property];\r\n            object[property] = typeof end === 'function' ? end(0) : start;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Updates initial object to target value by given `time`\r\n     * @param {Time} time Current time\r\n     * @param {boolean=} preserve Prevents from removing tween from store\r\n     * @example tween.update(100)\r\n     * @memberof Tween\r\n     */\r\n    update(time, preserve) {\r\n        const { _onStartCallbackFired, _easingFunction, _easingReverse, _repeat, _repeatDelayTime, _reverseDelayTime, _yoyo, _reversed, _startTime, _duration, _valuesStart, _valuesEnd, _valuesFunc, object, _isFinite, _isPlaying, __render } = this;\r\n        let elapsed;\r\n        let value;\r\n        let property;\r\n        let currentEasing;\r\n        time = time !== undefined ? time : now();\r\n        if (!_isPlaying || time < _startTime) {\r\n            return true;\r\n        }\r\n        if (!_onStartCallbackFired) {\r\n            if (!this._rendered) {\r\n                this.render();\r\n                this._rendered = true;\r\n            }\r\n            this.emit(EVENT_START, object);\r\n            this._onStartCallbackFired = true;\r\n        }\r\n        elapsed = (time - _startTime) / _duration;\r\n        elapsed = elapsed > 1 ? 1 : elapsed;\r\n        elapsed = _reversed ? 1 - elapsed : elapsed;\r\n        currentEasing = _reversed ? _easingReverse : _easingFunction;\r\n        if (!object) {\r\n            return true;\r\n        }\r\n        for (property in _valuesEnd) {\r\n            value = currentEasing[property] ? currentEasing[property](elapsed) : typeof currentEasing === 'function' ? currentEasing(elapsed) : defaultEasing(elapsed);\r\n            const start = _valuesStart[property];\r\n            const end = _valuesEnd[property];\r\n            const fnc = _valuesFunc[property];\r\n            if (fnc && fnc.update) {\r\n                fnc.update(value, elapsed);\r\n            }\r\n            else if (fnc) {\r\n                object[property] = fnc(value);\r\n            }\r\n            else if (typeof end === 'number') {\r\n                object[property] = start + (end - start) * value;\r\n            }\r\n            else {\r\n                object[property] = end;\r\n            }\r\n        }\r\n        if (__render) {\r\n            __render.update(object, elapsed);\r\n        }\r\n        this.emit(EVENT_UPDATE, object, elapsed);\r\n        if (elapsed === 1 || (_reversed && elapsed === 0)) {\r\n            if (_repeat) {\r\n                if (_isFinite) {\r\n                    this._repeat--;\r\n                }\r\n                if (_yoyo) {\r\n                    this._reversed = !_reversed;\r\n                }\r\n                this.emit(_yoyo && !_reversed ? EVENT_REVERSE : EVENT_REPEAT, object);\r\n                if (!_reversed && _repeatDelayTime) {\r\n                    this._startTime = time + _repeatDelayTime;\r\n                }\r\n                else if (_reversed && _reverseDelayTime) {\r\n                    this._startTime = time + _reverseDelayTime;\r\n                }\r\n                else {\r\n                    this._startTime = time;\r\n                }\r\n                return true;\r\n            }\r\n            else {\r\n                if (!preserve) {\r\n                    this._isPlaying = false;\r\n                    remove(this);\r\n                    _id--;\r\n                }\r\n                this.emit(EVENT_COMPLETE, object);\r\n                this._repeat = this._r;\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexport default Tween;\r\n","import { add, now, remove } from './core';\r\nimport PlaybackPosition from './PlaybackPosition';\r\nimport Tween, { EVENT_COMPLETE, EVENT_REPEAT, EVENT_REVERSE, EVENT_RS, EVENT_UPDATE } from './Tween';\r\nexport const shuffle = (a) => {\r\n    let j;\r\n    let x;\r\n    let i;\r\n    for (i = a.length; i; i -= 1) {\r\n        j = Math.floor(Math.random() * i);\r\n        x = a[i - 1];\r\n        a[i - 1] = a[j];\r\n        a[j] = x;\r\n    }\r\n    return a;\r\n};\r\nlet _id = 0;\r\n/**\r\n * Timeline main constructor.\r\n *\r\n * It works same as `Tween` instance, using `.repeat`, `.restart` or `etc` works like a `Tween`, so please see `Tween` class for methods\r\n * @constructor\r\n * @param {Object=} params Default params for new tweens\r\n * @example let tl = new Timeline({delay:200})\r\n * @extends Tween\r\n */\r\nclass Timeline extends Tween {\r\n    constructor(params) {\r\n        super();\r\n        this._duration = 0;\r\n        this._startTime = now();\r\n        this._tweens = [];\r\n        this._elapsed = 0;\r\n        this._id = _id++;\r\n        this._defaultParams = params;\r\n        this.position = new PlaybackPosition();\r\n        this.position.addLabel('afterLast', this._duration);\r\n        this.position.addLabel('afterInit', this._startTime);\r\n        return this;\r\n    }\r\n    mapTotal(fn) {\r\n        fn.call(this, this._tweens);\r\n        return this;\r\n    }\r\n    timingOrder(fn) {\r\n        const timing = fn(this._tweens.map((t) => t._startTime));\r\n        this._tweens.map((tween, i) => { tween._startTime = timing[i]; });\r\n        return this;\r\n    }\r\n    getTiming(mode, nodes, params, offset = 0) {\r\n        if (mode === 'reverse') {\r\n            const { stagger } = params;\r\n            const totalStagger = (stagger || 0) * (nodes.length - 1);\r\n            return nodes.map((node, i) => totalStagger - ((stagger || 0) * i) + offset);\r\n        }\r\n        else if (mode === 'async') {\r\n            return nodes.map((node) => offset);\r\n        }\r\n        else if (mode === 'sequence' || mode === 'delayed') {\r\n            let { stagger } = params;\r\n            if (!stagger) {\r\n                stagger = (params.duration || 1000) / (nodes.length - 1);\r\n            }\r\n            return nodes.map((node, i) => (stagger * i) + offset);\r\n        }\r\n        else if (mode === 'oneByOne') {\r\n            return nodes.map((node) => params.duration);\r\n        }\r\n        else if (mode === 'shuffle') {\r\n            const { stagger } = params;\r\n            return shuffle(nodes.map((node, i) => ((stagger || 0) * i) + offset));\r\n        }\r\n        else {\r\n            const { stagger } = params;\r\n            return nodes.map((node, i) => ((stagger || 0) * i) + offset);\r\n        }\r\n    }\r\n    /**\r\n     * @param {Array<Element>} nodes DOM Elements Collection (converted to Array)\r\n     * @param {object} from - Initial value\r\n     * @param {object} to - Target value\r\n     * @param {object} params - Options of tweens\r\n     * @example tl.fromTo(nodes, {x:0}, {x:200}, {duration:1000, stagger:200})\r\n     * @memberof Timeline\r\n     * @static\r\n     */\r\n    fromTo(nodes, from, to, params) {\r\n        if (Array.isArray(nodes)) {\r\n            if (this._defaultParams) {\r\n                params = Object.assign({}, this._defaultParams, params);\r\n            }\r\n            const position = params.label;\r\n            const offset = typeof position === 'number' ? position : this.position.parseLabel(typeof position !== 'undefined' ? position : 'afterLast', null);\r\n            const mode = this.getTiming(params.mode, nodes, params, offset);\r\n            nodes.map((node, i) => {\r\n                this.add(Tween.fromTo(node, typeof from === 'function' ? from(i, nodes.length) : Object.assign({}, from), typeof to === 'function' ? to(i, nodes.length) : to, typeof params === 'function' ? params(i, nodes.length) : params), mode[i]);\r\n            });\r\n        }\r\n        return this.start();\r\n    }\r\n    /**\r\n     * @param {Array<Element>} nodes DOM Elements Collection (converted to Array)\r\n     * @param {object} from - Initial value\r\n     * @param {object} params - Options of tweens\r\n     * @example tl.from(nodes, {x:200}, {duration:1000, stagger:200})\r\n     * @memberof Timeline\r\n     * @static\r\n     */\r\n    from(nodes, from, params) {\r\n        return this.fromTo(nodes, from, null, params);\r\n    }\r\n    /**\r\n     * @param {Array<Element>} nodes DOM Elements Collection (converted to Array)\r\n     * @param {object} to - Target value\r\n     * @param {object} params - Options of tweens\r\n     * @example tl.to(nodes, {x:200}, {duration:1000, stagger:200})\r\n     * @memberof Timeline\r\n     * @static\r\n     */\r\n    to(nodes, to, params) {\r\n        return this.fromTo(nodes, null, to, params);\r\n    }\r\n    /**\r\n     * Add label to Timeline\r\n     * @param {string} name Label name\r\n     * @param {any} offset Label value, can be `number` and/or `string`\r\n     * @example tl.add('label1', 200)\r\n     * @memberof Timeline\r\n     */\r\n    addLabel(name, offset) {\r\n        this.position.addLabel(name, offset);\r\n        return this;\r\n    }\r\n    map(fn) {\r\n        for (let i = 0, len = this._tweens.length; i < len; i++) {\r\n            const _tween = this._tweens[i];\r\n            fn(_tween, i);\r\n            this._duration = Math.max(this._duration, _tween._duration + _tween._startTime);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Add tween to Timeline\r\n     * @param {Tween} tween Tween instance\r\n     * @param {position} position Can be label name, number or relative number to label\r\n     * @example tl.add(new Tween(node, {x:0}).to({x:200}, 200))\r\n     * @memberof Timeline\r\n     */\r\n    add(tween, position) {\r\n        if (Array.isArray(tween)) {\r\n            tween.map((_tween) => {\r\n                this.add(_tween, position);\r\n            });\r\n            return this;\r\n        }\r\n        else if (typeof tween === 'object' && !(tween instanceof Tween)) {\r\n            tween = new Tween(tween.from).to(tween.to, tween);\r\n        }\r\n        const { _defaultParams, _duration } = this;\r\n        if (_defaultParams) {\r\n            for (const method in _defaultParams) {\r\n                if (typeof tween[method] === 'function') {\r\n                    tween[method](_defaultParams[method]);\r\n                }\r\n            }\r\n        }\r\n        const offset = typeof position === 'number' ? position : this.position.parseLabel(typeof position !== 'undefined' ? position : 'afterLast', null);\r\n        tween._startTime = Math.max(this._startTime, tween._delayTime);\r\n        tween._startTime += offset;\r\n        tween._isPlaying = true;\r\n        this._duration = Math.max(_duration, tween._startTime + tween._delayTime + tween._duration);\r\n        this._tweens.push(tween);\r\n        this.position.setLabel('afterLast', this._duration);\r\n        return this;\r\n    }\r\n    restart() {\r\n        this._startTime += now();\r\n        add(this);\r\n        return this.emit(EVENT_RS);\r\n    }\r\n    easing(easing) {\r\n        return this.map((tween) => tween.easing(easing));\r\n    }\r\n    interpolation(interpolation) {\r\n        return this.map((tween) => tween.interpolation(interpolation));\r\n    }\r\n    update(time) {\r\n        const { _tweens, _duration, _repeatDelayTime, _reverseDelayTime, _startTime, _reversed, _yoyo, _repeat, _isFinite, _elapsed, _isPlaying } = this;\r\n        if (!_isPlaying || time < _startTime) {\r\n            return true;\r\n        }\r\n        let elapsed = (time - _startTime) / _duration;\r\n        elapsed = elapsed > 1 ? 1 : elapsed;\r\n        elapsed = _reversed ? 1 - elapsed : elapsed;\r\n        elapsed = ((elapsed * 1000) | 0) / 1000;\r\n        if (elapsed === _elapsed) {\r\n            return true;\r\n        }\r\n        this._elapsed = elapsed;\r\n        const timing = time - _startTime;\r\n        const _timing = _reversed ? _duration - timing : timing;\r\n        let i = 0;\r\n        while (i < _tweens.length) {\r\n            _tweens[i].update(_timing, true);\r\n            i++;\r\n        }\r\n        this.emit(EVENT_UPDATE, elapsed, timing);\r\n        if (elapsed === 1 || (_reversed && elapsed === 0)) {\r\n            if (_repeat) {\r\n                if (_isFinite) {\r\n                    this._repeat--;\r\n                }\r\n                this.emit(_reversed ? EVENT_REVERSE : EVENT_REPEAT);\r\n                if (_yoyo) {\r\n                    this._reversed = !_reversed;\r\n                    this.timingOrder((timing) => timing.reverse());\r\n                }\r\n                if (!_reversed && _repeatDelayTime) {\r\n                    this._startTime = time + _repeatDelayTime;\r\n                }\r\n                else if (_reversed && _reverseDelayTime) {\r\n                    this._startTime = time + _reverseDelayTime;\r\n                }\r\n                else {\r\n                    this._startTime = time;\r\n                }\r\n                while (i < _tweens.length) {\r\n                    _tweens[i].reassignValues();\r\n                    i++;\r\n                }\r\n                return true;\r\n            }\r\n            else {\r\n                this.emit(EVENT_COMPLETE);\r\n                this._repeat = this._r;\r\n                remove(this);\r\n                this._isPlaying = false;\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    elapsed(value) {\r\n        return value !== undefined ? this.update(value * this._duration) : this._elapsed;\r\n    }\r\n}\r\nexport default Timeline;\r\n"],"names":["_tick","root","factory","module","window","this","s2f","val","floatedVal","parseFloat","isNaN","h2r_f","all","hex","r","g","b","length","color","parseInt","rgbMax","trim","str","replace","trimRegExp","colorSpaceExp","r2n","s","e","rv","relativeModes","substr","v","e2","s2n","hr","h2r","match","numRegExp","map","stringTween","d","undefined","test","sv","ev","uv","unitTween","cm","cmls","i","len","ve","vs","indexOf","isIncrementReqForColor","colorMatch","t","a","tweenThemTo","isArray","arrayTween","objectTween","parseInterpolatables","mainTween","lastItem","push","endLength","totalTime","roundedTime","Math","max","floor","elapsed","item","slice","minLength","min","nodeType","update","units","u","vv","hexColor","Array","+=","-=","*=","/=","%=","create","Object","source","assign","let","args","const","arg","p","global","_tweens","isStarted","_autoPlay","_ticker","requestAnimationFrame","fn","setTimeout","_stopTicker","cancelAnimationFrame","id","clearTimeout","add","tween","get","remove","splice","now","process","hrtime","time","performance","bind","offset","timing","navigationStart","Date","preserve","Plugins","document","addEventListener","timeDiff","timePause","hidden","_startTime","Easing","Linear","None","k","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","Bounce","PlaybackPosition","labels","offsets","parseLabel","name","rty","rt","split","currOffset","type","charAt","Number","addLabel","setLabel","eraseLabel","EventClass","_events","on","event","callback","once","spliceIndex","apply","off","filter","cb","emit","arg1","arg2","arg3","arg4","_event","Store","node","ID","queueID","round","random","_id","defaultEasing","Tween","object","super","NodeCache","isArr","_valuesStart","_valuesEnd","_valuesFunc","_duration","_easingFunction","_easingReverse","_delayTime","_repeat","_r","_isPlaying","_yoyo","_reversed","_onStartCallbackFired","_pausedTime","_isFinite","_elapsed","fromTo","to","params","quickRender","render","_rendered","from","isPlaying","reverse","reversed","pause","play","restart","noDelay","seek","keepPlaying","duration","amount","properties","maybeUsed","prop","Renderer","InitialValues","property","start","end","plugin","prototype","InterTween","__render","stop","delay","repeat","isFinite","repeatDelay","_repeatDelayTime","reverseDelay","_reverseDelayTime","yoyo","state","easing","reassignValues","value","currentEasing","fnc","shuffle","j","x","Timeline","_defaultParams","position","mapTotal","call","timingOrder","getTiming","mode","nodes","stagger","totalStagger","label","_tween","method","interpolation","_timing"],"mappings":"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"}