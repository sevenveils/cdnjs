{"version":3,"file":"Tween.js","sources":["../src/shim.js","../src/core.js","../src/Easing.js","../src/constants.js","../src/Interpolation.js","../src/NodeCache.js","../src/selector.js","../src/Tween.js","../src/Interpolator.js"],"sourcesContent":["/* global global */\nexport let assign = (source, ...args) => {\n  for (let i = 0, len = args.length; i < len; i++) {\n    const arg = args[i]\n    for (const p in arg) {\n      source[p] = arg[p]\n    }\n  }\n  return source\n}\nexport let create =\n  Object.create || ((source = {}) => ({ ...source }))\nexport let root =\n  typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined' ? global : this\nexport let requestAnimationFrame =\n  root.requestAnimationFrame ||\n  ((fn) => root.setTimeout(fn, 16))\nexport let cancelAnimationFrame =\n  root.cancelAnimationFrame ||\n  ((id) => root.clearTimeout(id))\n","/* global process */\nimport { requestAnimationFrame, root } from './shim'\n\n/**\n * Get browser/Node.js current time-stamp\n * @return Normalised current time-stamp in milliseconds\n * @memberof TWEEN\n * @example\n * TWEEN.now\n */\nconst now = (function () {\n  if (typeof process !== 'undefined' && process.hrtime !== undefined && (!process.versions || process.versions.electron === undefined)) {\n    return function () {\n      const time = process.hrtime()\n\n      // Convert [seconds, nanoseconds] to milliseconds.\n      return time[0] * 1000 + time[1] / 1000000\n    }\n    // In a browser, use window.performance.now if it is available.\n  } else if (\n    root.performance !== undefined &&\n    root.performance.now !== undefined\n  ) {\n    // This must be bound, because directly assigning this function\n    // leads to an invocation exception in Chrome.\n    return root.performance.now.bind(root.performance)\n    // Use Date.now if it is available.\n  } else {\n    const offset =\n      root.performance &&\n      root.performance.timing &&\n      root.performance.timing.navigationStart\n        ? root.performance.timing.navigationStart\n        : Date.now()\n    return function () {\n      return Date.now() - offset\n    }\n  }\n})()\n\n/**\n * Lightweight, effecient and modular ES6 version of tween.js\n * @copyright 2017 @dalisoft and es6-tween contributors\n * @license MIT\n * @namespace TWEEN\n * @example\n * // ES6\n * const {add, remove, isRunning, autoPlay} = TWEEN\n */\nconst _tweens = []\nlet isStarted = false\nlet _autoPlay = false\nlet _onRequestTick = []\nconst _ticker = requestAnimationFrame\nlet emptyFrame = 0\nlet powerModeThrottle = 120\n\nconst onRequestTick = (fn) => {\n  _onRequestTick.push(fn)\n}\n\nconst _requestTick = () => {\n  for (let i = 0; i < _onRequestTick.length; i++) {\n    _onRequestTick[i]()\n  }\n}\n\n/**\n * Adds tween to list\n * @param {Tween} tween Tween instance\n * @memberof TWEEN\n * @example\n * let tween = new Tween({x:0})\n * tween.to({x:200}, 1000)\n * TWEEN.add(tween)\n */\nconst add = (tween) => {\n  let i = _tweens.indexOf(tween)\n\n  if (i > -1) {\n    _tweens.splice(i, 1)\n  }\n\n  _tweens.push(tween)\n\n  emptyFrame = 0\n\n  if (_autoPlay && !isStarted) {\n    _ticker(update)\n    isStarted = true\n  } else {\n    _requestTick()\n  }\n}\n\n/**\n * Adds ticker like event\n * @param {Function} fn callback\n * @memberof TWEEN\n * @example\n * TWEEN.onTick(time => console.log(time))\n */\nconst onTick = (fn) => _tweens.push({ update: fn })\n\n/**\n * Sets after how much frames empty updating should stop\n * @param {number} [frameCount=120] count of frames that should stop after all tweens removed\n * @memberof TWEEN\n * @example\n * TWEEN.FrameThrottle(60)\n */\nconst FrameThrottle = (frameCount = 120) => {\n  powerModeThrottle = frameCount\n}\n\n/**\n * @returns {Array<Tween>} List of tweens in Array\n * @memberof TWEEN\n * TWEEN.getAll() // list of tweens\n */\nconst getAll = () => _tweens\n\n/**\n * Runs update loop automaticlly\n * @param {Boolean} state State of auto-run of update loop\n * @example TWEEN.autoPlay(true)\n * @memberof TWEEN\n */\nconst autoPlay = (state) => {\n  _autoPlay = state\n}\n\n/**\n * Removes all tweens from list\n * @example TWEEN.removeAll() // removes all tweens, stored in global tweens list\n * @memberof TWEEN\n */\nconst removeAll = () => {\n  _tweens.length = 0\n}\n\n/**\n * @param {Tween} tween Tween Instance to be matched\n * @return {Tween} Matched tween\n * @memberof TWEEN\n * @example\n * TWEEN.get(tween)\n */\nconst get = (tween) => {\n  for (let i = 0; i < _tweens.length; i++) {\n    if (tween === _tweens[i]) {\n      return _tweens[i]\n    }\n  }\n\n  return null\n}\n\n/**\n * @param {Tween} tween Tween Instance to be matched\n * @return {Boolean} Status of Exists tween or not\n * @memberof TWEEN\n * @example\n * TWEEN.has(tween)\n */\nconst has = (tween) => {\n  return get(tween) !== null\n}\n/**\n * Removes tween from list\n * @param {Tween} tween Tween instance\n * @memberof TWEEN\n * @example\n * TWEEN.remove(tween)\n */\nconst remove = (tween) => {\n  const i = _tweens.indexOf(tween)\n  if (i !== -1) {\n    _tweens.splice(i, 1)\n  }\n}\n\n/**\n * Updates global tweens by given time\n * @param {number=} time Timestamp\n * @param {Boolean=} preserve Prevents tween to be removed after finish\n * @memberof TWEEN\n * @example\n * TWEEN.update(500)\n */\n\nconst update = (time = now(), preserve) => {\n  if (emptyFrame >= powerModeThrottle) {\n    isStarted = false\n    emptyFrame = 0\n    return false\n  }\n\n  if (_autoPlay && isStarted) {\n    _ticker(update)\n  } else {\n    _requestTick()\n  }\n\n  if (!_tweens.length) {\n    emptyFrame++\n  }\n\n  let i = 0\n  let length = _tweens.length\n  while (i < length) {\n    _tweens[i++].update(time, preserve)\n\n    if (length > _tweens.length) {\n      // The tween has been removed, keep same index\n      i--\n    }\n\n    length = _tweens.length\n  }\n\n  return true\n}\n\n/**\n * The state of ticker running\n * @return {Boolean} Status of running updates on all tweens\n * @memberof TWEEN\n * @example TWEEN.isRunning()\n */\nconst isRunning = () => isStarted\n\n/**\n * The plugins store object\n * @namespace TWEEN.Plugins\n * @memberof TWEEN\n * @example\n * let num = Plugins.num = function (node, start, end) {\n * return t => start + (end - start) * t\n * }\n *\n * @static\n */\nconst Plugins = {}\n\nexport {\n  Plugins,\n  get,\n  has,\n  getAll,\n  removeAll,\n  remove,\n  add,\n  now,\n  update,\n  autoPlay,\n  onTick,\n  onRequestTick,\n  isRunning,\n  FrameThrottle\n}\n","/**\n * List of full easings\n * @namespace TWEEN.Easing\n * @example\n * import {Tween, Easing} from 'es6-tween'\n *\n * // then set via new Tween({x:0}).to({x:100}, 1000).easing(Easing.Quadratic.InOut).start()\n */\nconst Easing = {\n  Linear: {\n    None (k) {\n      return k\n    }\n  },\n\n  Quadratic: {\n    In (k) {\n      return k * k\n    },\n\n    Out (k) {\n      return k * (2 - k)\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k\n      }\n\n      return -0.5 * (--k * (k - 2) - 1)\n    }\n  },\n\n  Cubic: {\n    In (k) {\n      return k * k * k\n    },\n\n    Out (k) {\n      return --k * k * k + 1\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2)\n    }\n  },\n\n  Quartic: {\n    In (k) {\n      return k * k * k * k\n    },\n\n    Out (k) {\n      return 1 - --k * k * k * k\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2)\n    }\n  },\n\n  Quintic: {\n    In (k) {\n      return k * k * k * k * k\n    },\n\n    Out (k) {\n      return --k * k * k * k * k + 1\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2)\n    }\n  },\n\n  Sinusoidal: {\n    In (k) {\n      return 1 - Math.cos(k * Math.PI / 2)\n    },\n\n    Out (k) {\n      return Math.sin(k * Math.PI / 2)\n    },\n\n    InOut (k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k))\n    }\n  },\n\n  Exponential: {\n    In (k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1)\n    },\n\n    Out (k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k)\n    },\n\n    InOut (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1)\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2)\n    }\n  },\n\n  Circular: {\n    In (k) {\n      return 1 - Math.sqrt(1 - k * k)\n    },\n\n    Out (k) {\n      return Math.sqrt(1 - --k * k)\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1)\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1)\n    }\n  },\n\n  Elastic: {\n    In (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n    },\n\n    Out (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1\n    },\n\n    InOut (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      k *= 2\n\n      if (k < 1) {\n        return (\n          -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n        )\n      }\n\n      return (\n        0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1\n      )\n    }\n  },\n\n  Back: {\n    In (k) {\n      const s = 1.70158\n\n      return k * k * ((s + 1) * k - s)\n    },\n\n    Out (k) {\n      const s = 1.70158\n\n      return --k * k * ((s + 1) * k + s) + 1\n    },\n\n    InOut (k) {\n      const s = 1.70158 * 1.525\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s))\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2)\n    }\n  },\n\n  Bounce: {\n    In (k) {\n      return 1 - Easing.Bounce.Out(1 - k)\n    },\n\n    Out (k) {\n      if (k < 1 / 2.75) {\n        return 7.5625 * k * k\n      } else if (k < 2 / 2.75) {\n        return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75\n      } else if (k < 2.5 / 2.75) {\n        return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375\n      } else {\n        return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375\n      }\n    },\n\n    InOut (k) {\n      if (k < 0.5) {\n        return Easing.Bounce.In(k * 2) * 0.5\n      }\n\n      return Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5\n    }\n  },\n\n  Stepped: {\n    steps: steps => k => ((k * steps) | 0) / steps\n  }\n}\n\nexport default Easing\n","// Frame lag-fix constants\nexport const FRAME_MS = 50 / 3\nexport const TOO_LONG_FRAME_MS = 250\n\nexport const CHAINED_TWEENS = '_chainedTweens'\n\n// Event System\nexport const EVENT_CALLBACK = 'Callback'\nexport const EVENT_UPDATE = 'update'\nexport const EVENT_COMPLETE = 'complete'\nexport const EVENT_START = 'start'\nexport const EVENT_REPEAT = 'repeat'\nexport const EVENT_REVERSE = 'reverse'\nexport const EVENT_PAUSE = 'pause'\nexport const EVENT_PLAY = 'play'\nexport const EVENT_RESTART = 'restart'\nexport const EVENT_STOP = 'stop'\nexport const EVENT_SEEK = 'seek'\n\n// For String tweening stuffs\nexport const STRING_PROP = 'STRING_PROP'\n// Also RegExp's for string tweening\nexport const NUM_REGEX = /\\s+|([A-Za-z?().,{}:\"\"[\\]#%]+)|([-+]=+)?([-+]+)?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]=?\\d+)?/g\nexport const HEXC_REGEX = /^#([0-9a-f]{6}|[0-9a-f]{3})$/i\n\n// Copies everything, duplicates, no shallow-copy\nexport function deepCopy (source) {\n  if ((source && source.nodeType) || source === undefined || typeof source !== 'object') {\n    return source\n  } else if (Array.isArray(source)) {\n    return [].concat(source)\n  } else if (typeof source === 'object') {\n    let target = {}\n    for (let prop in source) {\n      target[prop] = deepCopy(source[prop])\n    }\n    return target\n  }\n  return source\n}\n\nconst isNaNForST = v =>\n  isNaN(+v) || ((v[0] === '+' || v[0] === '-') && v[1] === '=') || v === '' || v === ' '\n\nconst hexColor = /^#([0-9a-f]{6}|[0-9a-f]{3})$/i\nconst hex2rgb = (all, hex) => {\n  let r\n  let g\n  let b\n  if (hex.length === 3) {\n    r = hex[0]\n    g = hex[1]\n    b = hex[2]\n    hex = r + r + g + g + b + b\n  }\n  let color = parseInt(hex, 16)\n  r = color >> 16 & 255\n  g = color >> 8 & 255\n  b = color & 255\n  return 'rgb(' + r + ',' + g + ',' + b + ')'\n}\n\nexport function decomposeString (fromValue) {\n  return typeof fromValue !== 'string' ? fromValue : fromValue.replace(hexColor, hex2rgb).match(NUM_REGEX).map(v => (isNaNForST(v) ? v : +v))\n}\n\n// Decompose value, now for only `string` that required\nexport function decompose (prop, obj, from, to, stringBuffer) {\n  const fromValue = from[prop]\n  const toValue = to[prop]\n\n  if (typeof fromValue === 'string' || typeof toValue === 'string') {\n    let fromValue1 = Array.isArray(fromValue) && fromValue[0] === STRING_PROP ? fromValue : decomposeString(fromValue)\n    let toValue1 = Array.isArray(toValue) && toValue[0] === STRING_PROP ? toValue : decomposeString(toValue)\n\n    let i = 1\n    while (i < fromValue1.length) {\n      if (fromValue1[i] === toValue1[i] && typeof fromValue1[i - 1] === 'string') {\n        fromValue1.splice(i - 1, 2, fromValue1[i - 1] + fromValue1[i])\n        toValue1.splice(i - 1, 2, toValue1[i - 1] + toValue1[i])\n      } else {\n        i++\n      }\n    }\n\n    i = 0\n\n    if (fromValue1[0] === STRING_PROP) {\n      fromValue1.shift()\n    }\n    if (toValue1[0] === STRING_PROP) {\n      toValue1.shift()\n    }\n\n    let fromValue2 = {\n      isString: true,\n      length: fromValue1.length\n    }\n    let toValue2 = {\n      isString: true,\n      length: toValue1.length\n    }\n\n    while (i < fromValue2.length) {\n      fromValue2[i] = fromValue1[i]\n      toValue2[i] = toValue1[i]\n      i++\n    }\n\n    from[prop] = fromValue2\n    to[prop] = toValue2\n    return true\n  } else if (typeof fromValue === 'object' && typeof toValue === 'object') {\n    if (Array.isArray(fromValue)) {\n      return fromValue.map((v, i) =>\n        decompose(i, obj[prop], fromValue, toValue)\n      )\n    } else {\n      for (let prop2 in toValue) {\n        decompose(prop2, obj[prop], fromValue, toValue)\n      }\n    }\n    return true\n  }\n  return false\n}\n\n// Recompose value\nexport const RGB = 'rgb('\nexport const RGBA = 'rgba('\n\nexport const isRGBColor = (v, i, r = RGB) =>\n  typeof v[i] === 'number' &&\n  (v[i - 1] === r || v[i - 3] === r || v[i - 5] === r)\nexport function recompose (prop, obj, from, to, t, originalT, stringBuffer) {\n  const fromValue = stringBuffer ? from : from[prop]\n  const toValue = stringBuffer ? to : to[prop]\n  if (toValue === undefined) {\n    return fromValue\n  }\n  if (\n    fromValue === undefined ||\n    typeof fromValue === 'string' ||\n    fromValue === toValue\n  ) {\n    return toValue\n  } else if (typeof fromValue === 'object' && typeof toValue === 'object') {\n    if (!fromValue || !toValue) {\n      return obj[prop]\n    }\n    if (typeof fromValue === 'object' && !!fromValue && fromValue.isString) {\n      let STRING_BUFFER = ''\n      for (let i = 0, len = fromValue.length; i < len; i++) {\n        const isRelative = typeof fromValue[i] === 'number' && typeof toValue[i] === 'string' && toValue[i][1] === '='\n        let currentValue =\n          typeof fromValue[i] !== 'number'\n            ? fromValue[i]\n            : isRelative\n              ? fromValue[i] +\n                parseFloat(toValue[i][0] + toValue[i].substr(2)) * t\n              : fromValue[i] + (toValue[i] - fromValue[i]) * t\n        if (isRGBColor(fromValue, i) || isRGBColor(fromValue, i, RGBA)) {\n          currentValue |= 0\n        }\n        STRING_BUFFER += currentValue\n        if (isRelative && originalT === 1) {\n          fromValue[i] =\n            fromValue[i] +\n            parseFloat(toValue[i][0] + toValue[i].substr(2))\n        }\n      }\n      if (!stringBuffer) {\n        obj[prop] = STRING_BUFFER\n      }\n      return STRING_BUFFER\n    } else if (Array.isArray(fromValue) && fromValue[0] !== STRING_PROP) {\n      for (let i = 0, len = fromValue.length; i < len; i++) {\n        if (fromValue[i] === toValue[i]) {\n          continue\n        }\n        recompose(i, obj[prop], fromValue, toValue, t, originalT)\n      }\n    } else if (typeof fromValue === 'object' && !!fromValue && !fromValue.isString) {\n      for (let i in fromValue) {\n        if (fromValue[i] === toValue[i]) {\n          continue\n        }\n        recompose(i, obj[prop], fromValue, toValue, t, originalT)\n      }\n    }\n  } else if (typeof fromValue === 'number') {\n    const isRelative = typeof toValue === 'string'\n    obj[prop] =\n      isRelative\n        ? fromValue + parseFloat(toValue[0] + toValue.substr(2)) * t\n        : fromValue + (toValue - fromValue) * t\n    if (isRelative && originalT === 1) {\n      from[prop] = obj[prop]\n    }\n  } else if (typeof toValue === 'function') {\n    obj[prop] = toValue(t)\n  }\n  return obj[prop]\n}\n\n// Dot notation => Object structure converter\n// example\n// {'scale.x.y.z':'VALUE'} => {scale:{x:{y:{z:'VALUE'}}}}\n// Only works for 3-level parsing, after 3-level, parsing dot-notation not works as it's not affects\nconst propRegExp = /([.[])/g\nconst replaceBrace = /\\]/g\nconst propExtract = function (obj, property) {\n  const value = obj[property]\n  const props = property.replace(replaceBrace, '').split(propRegExp)\n  const propsLastIndex = props.length - 1\n  let lastArr = Array.isArray(obj)\n  let lastObj = typeof obj === 'object' && !lastArr\n  if (lastObj) {\n    obj[property] = null\n    delete obj[property]\n  } else if (lastArr) {\n    obj.splice(property, 1)\n  }\n  return props.reduce((nested, prop, index) => {\n    if (lastArr) {\n      if (prop !== '.' && prop !== '[') {\n        prop *= 1\n      }\n    }\n    let nextProp = props[index + 1]\n    let nextIsArray = nextProp === '['\n    if (prop === '.' || prop === '[') {\n      if (prop === '.') {\n        lastObj = true\n        lastArr = false\n      } else if (prop === '[') {\n        lastObj = false\n        lastArr = true\n      }\n      return nested\n    } else if (nested[prop] === undefined) {\n      if (lastArr || lastObj) {\n        nested[prop] =\n          index === propsLastIndex\n            ? value\n            : lastArr || nextIsArray ? [] : lastObj ? {} : null\n        lastObj = lastArr = false\n        return nested[prop]\n      }\n    } else if (nested[prop] !== undefined) {\n      if (index === propsLastIndex) {\n        nested[prop] = value\n      }\n      return nested[prop]\n    }\n    return nested\n  }, obj)\n}\n\nexport const SET_NESTED = function (nested) {\n  if (typeof nested === 'object' && !!nested) {\n    for (let prop in nested) {\n      if (prop.indexOf('.') !== -1 || prop.indexOf('[') !== -1) {\n        propExtract(nested, prop)\n      } else if (typeof nested[prop] === 'object' && !!nested[prop]) {\n        let nested2 = nested[prop]\n        for (let prop2 in nested2) {\n          if (prop2.indexOf('.') !== -1 || prop2.indexOf('[') !== -1) {\n            propExtract(nested2, prop2)\n          } else if (typeof nested2[prop2] === 'object' && !!nested2[prop2]) {\n            let nested3 = nested2[prop2]\n            for (let prop3 in nested3) {\n              if (prop3.indexOf('.') !== -1 || prop3.indexOf('[') !== -1) {\n                propExtract(nested3, prop3)\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  return nested\n}\n","import { isRGBColor, RGBA, STRING_PROP } from './constants'\n\n/**\n * List of full Interpolation\n * @namespace TWEEN.Interpolation\n * @example\n * import {Interpolation, Tween} from 'es6-tween'\n *\n * let bezier = Interpolation.Bezier\n * new Tween({x:0}).to({x:[0, 4, 8, 12, 15, 20, 30, 40, 20, 40, 10, 50]}, 1000).interpolation(bezier).start()\n * @memberof TWEEN\n */\nconst Interpolation = {\n  Linear (v, k, value) {\n    const m = v.length - 1\n    const f = m * k\n    const i = Math.floor(f)\n    const fn = Interpolation.Utils.Linear\n    if (k < 0) {\n      return fn(v[0], v[1], f, value)\n    }\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f, value)\n    }\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i, value)\n  },\n\n  Bezier (v, k, value) {\n    let b = Interpolation.Utils.Reset(value)\n    let n = v.length - 1\n    let pw = Math.pow\n    let fn = Interpolation.Utils.Bernstein\n\n    let isBArray = Array.isArray(b)\n\n    for (let i = 0; i <= n; i++) {\n      if (typeof b === 'number') {\n        b += pw(1 - k, n - i) * pw(k, i) * v[i] * fn(n, i)\n      } else if (isBArray) {\n        for (let p = 0, len = b.length; p < len; p++) {\n          if (typeof b[p] === 'number') {\n            b[p] += pw(1 - k, n - i) * pw(k, i) * v[i][p] * fn(n, i)\n          } else {\n            b[p] = v[i][p]\n          }\n        }\n      } else if (typeof b === 'object') {\n        for (let p in b) {\n          if (typeof b[p] === 'number') {\n            b[p] += pw(1 - k, n - i) * pw(k, i) * v[i][p] * fn(n, i)\n          } else {\n            b[p] = v[i][p]\n          }\n        }\n      } else if (typeof b === 'string') {\n        let STRING_BUFFER = ''\n        let idx = Math.round(n * k)\n        let vCurr = v[idx]\n        for (let ks = 1, len = vCurr.length; ks < len; ks++) {\n          STRING_BUFFER += vCurr[ks]\n        }\n        return STRING_BUFFER\n      }\n    }\n\n    return b\n  },\n\n  CatmullRom (v, k, value) {\n    const m = v.length - 1\n    let f = m * k\n    let i = Math.floor(f)\n    const fn = Interpolation.Utils.CatmullRom\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor((f = m * (1 + k)))\n      }\n\n      return fn(\n        v[(i - 1 + m) % m],\n        v[i],\n        v[(i + 1) % m],\n        v[(i + 2) % m],\n        f - i,\n        value\n      )\n    } else {\n      if (k < 0) {\n        return fn(v[1], v[1], v[0], v[0], -k, value)\n      }\n\n      if (k > 1) {\n        return fn(v[m - 1], v[m - 1], v[m], v[m], (k | 0) - k, value)\n      }\n\n      return fn(\n        v[i ? i - 1 : 0],\n        v[i],\n        v[m < i + 1 ? m : i + 1],\n        v[m < i + 2 ? m : i + 2],\n        f - i,\n        value\n      )\n    }\n  },\n\n  Utils: {\n    Linear (p0, p1, t, v) {\n      if (typeof p0 === 'string') {\n        return p1\n      } else if (typeof p0 === 'number') {\n        return typeof p0 === 'function' ? p0(t) : p0 + (p1 - p0) * t\n      } else if (typeof p0 === 'object') {\n        if (p0.length !== undefined) {\n          if (p0[0] === STRING_PROP) {\n            let STRING_BUFFER = ''\n            for (let i = 1, len = p0.length; i < len; i++) {\n              let currentValue =\n                typeof p0[i] === 'number' ? p0[i] + (p1[i] - p0[i]) * t : p1[i]\n              if (isRGBColor(p0, i) || isRGBColor(p0, i, RGBA)) {\n                currentValue |= 0\n              }\n              STRING_BUFFER += currentValue\n            }\n            return STRING_BUFFER\n          }\n          for (let p = 0, len = v.length; p < len; p++) {\n            v[p] = Interpolation.Utils.Linear(p0[p], p1[p], t, v[p])\n          }\n        } else {\n          for (const p in v) {\n            v[p] = Interpolation.Utils.Linear(p0[p], p1[p], t, v[p])\n          }\n        }\n        return v\n      }\n    },\n\n    Reset (value) {\n      if (Array.isArray(value)) {\n        for (let i = 0, len = value.length; i < len; i++) {\n          value[i] = Interpolation.Utils.Reset(value[i])\n        }\n        return value\n      } else if (typeof value === 'object') {\n        for (let i in value) {\n          value[i] = Interpolation.Utils.Reset(value[i])\n        }\n        return value\n      } else if (typeof value === 'number') {\n        return 0\n      }\n      return value\n    },\n\n    Bernstein (n, i) {\n      const fc = Interpolation.Utils.Factorial\n\n      return fc(n) / fc(i) / fc(n - i)\n    },\n\n    Factorial: (function () {\n      const a = [1]\n\n      return n => {\n        let s = 1\n\n        if (a[n]) {\n          return a[n]\n        }\n\n        for (let i = n; i > 1; i--) {\n          s *= i\n        }\n\n        a[n] = s\n        return s\n      }\n    })(),\n\n    CatmullRom (p0, p1, p2, p3, t, v) {\n      if (typeof p0 === 'string') {\n        return p1\n      } else if (typeof p0 === 'number') {\n        const v0 = (p2 - p0) * 0.5\n        const v1 = (p3 - p1) * 0.5\n        const t2 = t * t\n        const t3 = t * t2\n\n        return (\n          (2 * p1 - 2 * p2 + v0 + v1) * t3 +\n          (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 +\n          v0 * t +\n          p1\n        )\n      } else if (typeof p0 === 'object') {\n        if (p0.length !== undefined) {\n          if (p0[0] === STRING_PROP) {\n            let STRING_BUFFER = ''\n            for (let i = 1, len = p0.length; i < len; i++) {\n              let currentValue =\n                typeof p0[i] === 'number'\n                  ? Interpolation.Utils.CatmullRom(\n                    p0[i],\n                    p1[i],\n                    p2[i],\n                    p3[i],\n                    t\n                  )\n                  : p3[i]\n              if (isRGBColor(p0, i) || isRGBColor(p0, i, RGBA)) {\n                currentValue |= 0\n              }\n              STRING_BUFFER += currentValue\n            }\n            return STRING_BUFFER\n          }\n          for (let p = 0, len = v.length; p < len; p++) {\n            v[p] = Interpolation.Utils.CatmullRom(\n              p0[p],\n              p1[p],\n              p2[p],\n              p3[p],\n              t,\n              v[p]\n            )\n          }\n        } else {\n          for (const p in v) {\n            v[p] = Interpolation.Utils.CatmullRom(\n              p0[p],\n              p1[p],\n              p2[p],\n              p3[p],\n              t,\n              v[p]\n            )\n          }\n        }\n        return v\n      }\n    }\n  }\n}\n\nexport default Interpolation\n","import {\n  remove\n} from './core'\n\nexport const Store = {}\nexport default function (node, object, tween) {\n  if (!node || !node.nodeType) {\n    return object\n  }\n  const ID = node.queueID || 'q_' + Date.now()\n  if (!node.queueID) {\n    node.queueID = ID\n  }\n  const storeID = Store[ID]\n  if (storeID) {\n    if (\n      storeID.object === object &&\n      node === storeID.tween.node &&\n      tween._startTime === storeID.tween._startTime\n    ) {\n      remove(storeID.tween)\n    } else if (typeof object === 'object' && !!object && !!storeID.object) {\n      for (let prop in object) {\n        if (prop in storeID.object) {\n          if (tween._startTime === storeID.tween._startTime) {\n            delete storeID.object[prop]\n          } else {\n            storeID.propNormaliseRequired = true\n          }\n        }\n      }\n      storeID.object = { ...storeID.object,\n        ...object\n      }\n    }\n    return storeID.object\n  }\n\n  if (typeof object === 'object' && !!object) {\n    Store[ID] = {\n      tween,\n      object,\n      propNormaliseRequired: false\n    }\n    return Store[ID].object\n  }\n\n  return object\n}\n","export default function (selector, collection) {\n  if (collection) {\n    return !selector\n      ? null\n      : selector === window || selector === document\n        ? [selector]\n        : typeof selector === 'string'\n          ? !!document.querySelectorAll && document.querySelectorAll(selector)\n          : Array.isArray(selector)\n            ? selector\n            : selector.nodeType ? [selector] : []\n  }\n  return !selector\n    ? null\n    : selector === window || selector === document\n      ? selector\n      : typeof selector === 'string'\n        ? !!document.querySelector && document.querySelector(selector)\n        : Array.isArray(selector)\n          ? selector[0]\n          : selector.nodeType ? selector : null\n}\n","import {\n  add,\n  now,\n  Plugins,\n  remove\n} from './core'\nimport Easing from './Easing'\nimport Interpolation from './Interpolation'\nimport NodeCache, {\n  Store\n} from './NodeCache'\nimport Selector from './selector'\nimport {\n  decompose,\n  decomposeString,\n  recompose,\n  deepCopy,\n  SET_NESTED,\n  EVENT_CALLBACK,\n  CHAINED_TWEENS,\n  EVENT_UPDATE,\n  EVENT_COMPLETE,\n  EVENT_START,\n  EVENT_REPEAT,\n  EVENT_REVERSE,\n  EVENT_PAUSE,\n  EVENT_PLAY,\n  EVENT_RESTART,\n  EVENT_STOP,\n  EVENT_SEEK,\n  FRAME_MS,\n  TOO_LONG_FRAME_MS\n} from './constants'\n\nlet _id = 0 // Unique ID\nconst defaultEasing = Easing.Linear.None\n\n/**\n * Tween main constructor\n * @constructor\n * @class\n * @namespace TWEEN.Tween\n * @param {Object|Element} node Node Element or Tween initial object\n * @param {Object=} object If Node Element is using, second argument is used for Tween initial object\n * @example let tween = new Tween(myNode, {width:'100px'}).to({width:'300px'}, 2000).start()\n */\nclass Tween {\n  /**\n   * Easier way to call the Tween\n   * @param {Element} node DOM Element\n   * @param {object} object - Initial value\n   * @param {object} to - Target value\n   * @param {object} params - Options of tweens\n   * @example Tween.fromTo(node, {x:0}, {x:200}, {duration:1000})\n   * @memberof TWEEN.Tween\n   * @static\n   */\n  static fromTo (node, object, to, params = {}) {\n    params.quickRender = params.quickRender ? params.quickRender : !to\n    const tween = new Tween(node, object).to(to, params)\n    if (params.quickRender) {\n      tween.render().update(tween._startTime)\n      tween._rendered = false\n      tween._onStartCallbackFired = false\n    }\n    return tween\n  }\n  /**\n   * Easier way calling constructor only applies the `to` value, useful for CSS Animation\n   * @param {Element} node DOM Element\n   * @param {object} to - Target value\n   * @param {object} params - Options of tweens\n   * @example Tween.to(node, {x:200}, {duration:1000})\n   * @memberof TWEEN.Tween\n   * @static\n   */\n  static to (node, to, params) {\n    return Tween.fromTo(node, null, to, params)\n  }\n  /**\n   * Easier way calling constructor only applies the `from` value, useful for CSS Animation\n   * @param {Element} node DOM Element\n   * @param {object} from - Initial value\n   * @param {object} params - Options of tweens\n   * @example Tween.from(node, {x:200}, {duration:1000})\n   * @memberof TWEEN.Tween\n   * @static\n   */\n  static from (node, from, params) {\n    return Tween.fromTo(node, from, null, params)\n  }\n  constructor (node, object) {\n    this.id = _id++\n    if (!!node && typeof node === 'object' && !object && !node.nodeType) {\n      object = this.object = node\n      node = null\n    } else if (!!node &&\n      (node.nodeType || node.length || typeof node === 'string')\n    ) {\n      node = this.node = Selector(node)\n      object = this.object = NodeCache(node, object, this)\n    }\n    this._valuesEnd = null\n    this._valuesStart = {}\n\n    this._duration = 1000\n    this._easingFunction = defaultEasing\n    this._easingReverse = defaultEasing\n    this._interpolationFunction = Interpolation.Linear\n\n    this._startTime = 0\n    this._initTime = 0\n    this._delayTime = 0\n    this._repeat = 0\n    this._r = 0\n    this._isPlaying = false\n    this._yoyo = false\n    this._reversed = false\n\n    this._onStartCallbackFired = false\n    this._pausedTime = null\n    this._isFinite = true\n    this._maxListener = 15\n    this._chainedTweensCount = 0\n    this._prevTime = null\n\n    return this\n  }\n\n  /**\n   * Sets max `event` listener's count to Events system\n   * @param {number} count - Event listener's count\n   * @memberof TWEEN.Tween\n   */\n  setMaxListener (count = 15) {\n    this._maxListener = count\n    return this\n  }\n\n  /**\n   * Adds `event` to Events system\n   * @param {string} event - Event listener name\n   * @param {Function} callback - Event listener callback\n   * @memberof TWEEN.Tween\n   */\n  on (event, callback) {\n    const {\n      _maxListener\n    } = this\n    const callbackName = event + EVENT_CALLBACK\n    for (let i = 0; i < _maxListener; i++) {\n      const callbackId = callbackName + i\n      if (!this[callbackId]) {\n        this[callbackId] = callback\n        break\n      }\n    }\n    return this\n  }\n\n  /**\n   * Adds `event` to Events system.\n   * Removes itself after fired once\n   * @param {string} event - Event listener name\n   * @param {Function} callback - Event listener callback\n   * @memberof TWEEN.Tween\n   */\n  once (event, callback) {\n    const {\n      _maxListener\n    } = this\n    const callbackName = event + EVENT_CALLBACK\n    for (let i = 0; i < _maxListener; i++) {\n      const callbackId = callbackName + i\n      if (!this[callbackId]) {\n        this[callbackId] = (...args) => {\n          callback.apply(this, args)\n          this[callbackId] = null\n        }\n        break\n      }\n    }\n    return this\n  }\n\n  /**\n   * Removes `event` from Events system\n   * @param {string} event - Event listener name\n   * @param {Function} callback - Event listener callback\n   * @memberof TWEEN.Tween\n   */\n  off (event, callback) {\n    const {\n      _maxListener\n    } = this\n    const callbackName = event + EVENT_CALLBACK\n    for (let i = 0; i < _maxListener; i++) {\n      const callbackId = callbackName + i\n      if (this[callbackId] === callback) {\n        this[callbackId] = null\n      }\n    }\n    return this\n  }\n\n  /**\n   * Emits/Fired/Trigger `event` from Events system listeners\n   * @param {string} event - Event listener name\n   * @memberof TWEEN.Tween\n   */\n  emit (event, arg1, arg2, arg3, arg4) {\n    const {\n      _maxListener\n    } = this\n    const callbackName = event + EVENT_CALLBACK\n\n    if (!this[callbackName + 0]) {\n      return this\n    }\n    for (let i = 0; i < _maxListener; i++) {\n      const callbackId = callbackName + i\n      if (this[callbackId]) {\n        this[callbackId](arg1, arg2, arg3, arg4)\n      }\n    }\n    return this\n  }\n\n  /**\n   * @return {boolean} State of playing of tween\n   * @example tween.isPlaying() // returns `true` if tween in progress\n   * @memberof TWEEN.Tween\n   */\n  isPlaying () {\n    return this._isPlaying\n  }\n\n  /**\n   * @return {boolean} State of started of tween\n   * @example tween.isStarted() // returns `true` if tween in started\n   * @memberof TWEEN.Tween\n   */\n  isStarted () {\n    return this._onStartCallbackFired\n  }\n\n  /**\n   * Reverses the tween state/direction\n   * @example tween.reverse()\n   * @param {boolean=} state Set state of current reverse\n   * @memberof TWEEN.Tween\n   */\n  reverse (state) {\n    const {\n      _reversed\n    } = this\n\n    this._reversed = state !== undefined ? state : !_reversed\n\n    return this\n  }\n\n  /**\n   * @return {boolean} State of reversed\n   * @example tween.reversed() // returns `true` if tween in reversed state\n   * @memberof TWEEN.Tween\n   */\n  reversed () {\n    return this._reversed\n  }\n\n  /**\n   * Pauses tween\n   * @example tween.pause()\n   * @memberof TWEEN.Tween\n   */\n  pause () {\n    if (!this._isPlaying) {\n      return this\n    }\n\n    this._isPlaying = false\n\n    remove(this)\n    this._pausedTime = now()\n\n    return this.emit(EVENT_PAUSE, this.object)\n  }\n\n  /**\n   * Play/Resume the tween\n   * @example tween.play()\n   * @memberof TWEEN.Tween\n   */\n  play () {\n    if (this._isPlaying) {\n      return this\n    }\n\n    this._isPlaying = true\n\n    this._startTime += now() - this._pausedTime\n    this._initTime = this._startTime\n    add(this)\n    this._pausedTime = now()\n\n    return this.emit(EVENT_PLAY, this.object)\n  }\n\n  /**\n   * Restarts tween from initial value\n   * @param {boolean=} noDelay If this param is set to `true`, restarts tween without `delay`\n   * @example tween.restart()\n   * @memberof TWEEN.Tween\n   */\n  restart (noDelay) {\n    this._repeat = this._r\n    this.reassignValues()\n\n    add(this)\n\n    return this.emit(EVENT_RESTART, this.object)\n  }\n\n  /**\n   * Seek tween value by `time`. Note: Not works as excepted. PR are welcome\n   * @param {Time} time Tween update time\n   * @param {boolean=} keepPlaying When this param is set to `false`, tween pausing after seek\n   * @example tween.seek(500)\n   * @memberof TWEEN.Tween\n   * @deprecated Not works as excepted, so we deprecated this method\n   */\n  seek (time, keepPlaying) {\n    const {\n      _duration,\n      _initTime,\n      _startTime,\n      _reversed\n    } = this\n\n    let updateTime = _initTime + time\n    this._isPlaying = true\n\n    if (updateTime < _startTime && _startTime >= _initTime) {\n      this._startTime -= _duration\n      this._reversed = !_reversed\n    }\n\n    this.update(time, false)\n\n    this.emit(EVENT_SEEK, time, this.object)\n\n    return keepPlaying ? this : this.pause()\n  }\n\n  /**\n   * Sets tween duration\n   * @param {number} amount Duration is milliseconds\n   * @example tween.duration(2000)\n   * @memberof TWEEN.Tween\n   */\n  duration (amount) {\n    this._duration =\n      typeof amount === 'function' ? amount(this._duration) : amount\n\n    return this\n  }\n\n  /**\n   * Sets target value and duration\n   * @param {object} properties Target value (to value)\n   * @param {number|Object=} [duration=1000] Duration of tween\n   * @example let tween = new Tween({x:0}).to({x:100}, 2000)\n   * @memberof TWEEN.Tween\n   */\n  to (properties, duration = 1000, maybeUsed) {\n    this._valuesEnd = properties\n\n    if (typeof duration === 'number' || typeof duration === 'function') {\n      this._duration =\n        typeof duration === 'function' ? duration(this._duration) : duration\n    } else if (typeof duration === 'object') {\n      for (const prop in duration) {\n        if (typeof this[prop] === 'function') {\n          const [\n            arg1 = null,\n            arg2 = null,\n            arg3 = null,\n            arg4 = null\n          ] = Array.isArray(duration[prop]) ? duration[prop] : [duration[prop]]\n          this[prop](arg1, arg2, arg3, arg4)\n        }\n      }\n    }\n\n    return this\n  }\n\n  /**\n   * Renders and computes value at first render\n   * @private\n   * @memberof TWEEN.Tween\n   */\n  render () {\n    if (this._rendered) {\n      return this\n    }\n    let {\n      _valuesStart,\n      _valuesEnd,\n      object,\n      node,\n      InitialValues\n    } = this\n\n    SET_NESTED(object)\n    SET_NESTED(_valuesEnd)\n\n    if (node && node.queueID && Store[node.queueID]) {\n      const prevTweenByNode = Store[node.queueID]\n      if (\n        prevTweenByNode.propNormaliseRequired &&\n        prevTweenByNode.tween !== this\n      ) {\n        for (const property in _valuesEnd) {\n          if (prevTweenByNode.tween._valuesEnd[property] !== undefined) {\n            // delete prevTweenByNode.tween._valuesEnd[property];\n          }\n        }\n        prevTweenByNode.normalisedProp = true\n        prevTweenByNode.propNormaliseRequired = false\n      }\n    }\n\n    if (node && InitialValues) {\n      if (!object || Object.keys(object).length === 0) {\n        object = this.object = NodeCache(\n          node,\n          InitialValues(node, _valuesEnd),\n          this\n        )\n      } else if (!_valuesEnd || Object.keys(_valuesEnd).length === 0) {\n        _valuesEnd = this._valuesEnd = InitialValues(node, object)\n      }\n    }\n    for (const property in _valuesEnd) {\n      let start = object && object[property] && deepCopy(object[property])\n      let end = _valuesEnd[property]\n      if (Plugins[property] && Plugins[property].init) {\n        Plugins[property].init.call(this, start, end, property, object)\n        if (start === undefined && _valuesStart[property]) {\n          start = _valuesStart[property]\n        }\n        if (Plugins[property].skipProcess) {\n          continue\n        }\n      }\n      if (\n        (typeof start === 'number' && isNaN(start)) ||\n        start === null ||\n        end === null ||\n        start === false ||\n        end === false ||\n        start === undefined ||\n        end === undefined ||\n        start === end\n      ) {\n        continue\n      }\n      if (Array.isArray(end) && !Array.isArray(start)) {\n        end.unshift(start)\n        for (let i = 0, len = end.length; i < len; i++) {\n          if (typeof end[i] === 'string') {\n            let arrayOfStrings = decomposeString(end[i])\n            let stringObject = {\n              length: arrayOfStrings.length,\n              isString: true\n            }\n            for (let ii = 0, len2 = arrayOfStrings.length; ii < len2; ii++) {\n              stringObject[ii] = arrayOfStrings[ii]\n            }\n            end[i] = stringObject\n          }\n        }\n      }\n      _valuesStart[property] = start\n      if (typeof start === 'number' && typeof end === 'string' && end[1] === '=') {\n        continue\n      }\n      decompose(property, object, _valuesStart, _valuesEnd)\n    }\n\n    if (Tween.Renderer && this.node && Tween.Renderer.init) {\n      Tween.Renderer.init.call(this, object, _valuesStart, _valuesEnd)\n      this.__render = true\n    }\n\n    return this\n  }\n\n  /**\n   * Start the tweening\n   * @param {number|string} time setting manual time instead of Current browser timestamp or like `+1000` relative to current timestamp\n   * @example tween.start()\n   * @memberof TWEEN.Tween\n   */\n  start (time) {\n    this._startTime =\n      time !== undefined\n        ? typeof time === 'string' ? now() + parseFloat(time) : time\n        : now()\n    this._startTime += this._delayTime\n    this._initTime = this._prevTime = this._startTime\n\n    this._onStartCallbackFired = false\n    this._rendered = false\n    this._isPlaying = true\n\n    add(this)\n\n    return this\n  }\n\n  /**\n   * Stops the tween\n   * @example tween.stop()\n   * @memberof TWEEN.Tween\n   */\n  stop () {\n    let {\n      _isPlaying,\n      _isFinite,\n      object,\n      _startTime,\n      _duration,\n      _r,\n      _yoyo,\n      _reversed\n    } = this\n\n    if (!_isPlaying) {\n      return this\n    }\n\n    let atStart = _isFinite ? (_r + 1) % 2 === 1 : !_reversed\n\n    this._reversed = false\n\n    if (_yoyo && atStart) {\n      this.update(_startTime)\n    } else {\n      this.update(_startTime + _duration)\n    }\n    remove(this)\n\n    return this.emit(EVENT_STOP, object)\n  }\n\n  /**\n   * Set delay of tween\n   * @param {number} amount Sets tween delay / wait duration\n   * @example tween.delay(500)\n   * @memberof TWEEN.Tween\n   */\n  delay (amount) {\n    this._delayTime =\n      typeof amount === 'function' ? amount(this._delayTime) : amount\n\n    return this\n  }\n\n  /**\n   * Chained tweens\n   * @param {any} arguments Arguments list\n   * @example tween.chainedTweens(tween1, tween2)\n   * @memberof TWEEN.Tween\n   */\n  chainedTweens () {\n    this._chainedTweensCount = arguments.length\n    if (!this._chainedTweensCount) {\n      return this\n    }\n    for (let i = 0, len = this._chainedTweensCount; i < len; i++) {\n      this[CHAINED_TWEENS + i] = arguments[i]\n    }\n\n    return this\n  }\n\n  /**\n   * Sets how times tween is repeating\n   * @param {amount} amount the times of repeat\n   * @example tween.repeat(5)\n   * @memberof TWEEN.Tween\n   */\n  repeat (amount) {\n    this._repeat = !this._duration\n      ? 0\n      : typeof amount === 'function' ? amount(this._repeat) : amount\n    this._r = this._repeat\n    this._isFinite = isFinite(amount)\n\n    return this\n  }\n\n  /**\n   * Set delay of each repeat alternate of tween\n   * @param {number} amount Sets tween repeat alternate delay / repeat alternate wait duration\n   * @example tween.reverseDelay(500)\n   * @memberof TWEEN.Tween\n   */\n  reverseDelay (amount) {\n    this._reverseDelayTime =\n      typeof amount === 'function' ? amount(this._reverseDelayTime) : amount\n\n    return this\n  }\n\n  /**\n   * Set `yoyo` state (enables reverse in repeat)\n   * @param {boolean} state Enables alternate direction for repeat\n   * @param {Function=} _easingReverse Easing function in reverse direction\n   * @example tween.yoyo(true)\n   * @memberof TWEEN.Tween\n   */\n  yoyo (state, _easingReverse) {\n    this._yoyo =\n      typeof state === 'function'\n        ? state(this._yoyo)\n        : state === null ? this._yoyo : state\n    if (!state) {\n      this._reversed = false\n    }\n    this._easingReverse = _easingReverse || null\n\n    return this\n  }\n\n  /**\n   * Set easing\n   * @param {Function} _easingFunction Easing function, applies in non-reverse direction if Tween#yoyo second argument is applied\n   * @example tween.easing(Easing.Elastic.InOut)\n   * @memberof TWEEN.Tween\n   */\n  easing (_easingFunction) {\n    this._easingFunction = _easingFunction\n\n    return this\n  }\n\n  /**\n   * Set interpolation\n   * @param {Function} _interpolationFunction Interpolation function\n   * @example tween.interpolation(Interpolation.Bezier)\n   * @memberof TWEEN.Tween\n   */\n  interpolation (_interpolationFunction) {\n    if (typeof _interpolationFunction === 'function') {\n      this._interpolationFunction = _interpolationFunction\n    }\n\n    return this\n  }\n\n  /**\n   * Reassigns value for rare-case like Tween#restart or for Timeline\n   * @private\n   * @memberof TWEEN.Tween\n   */\n  reassignValues (time) {\n    const {\n      _valuesStart,\n      object,\n      _delayTime\n    } = this\n\n    this._isPlaying = true\n    this._startTime = time !== undefined ? time : now()\n    this._startTime += _delayTime\n    this._reversed = false\n    add(this)\n\n    for (const property in _valuesStart) {\n      const start = _valuesStart[property]\n\n      object[property] = start\n    }\n\n    return this\n  }\n\n  /**\n   * Updates initial object to target value by given `time`\n   * @param {Time} time Current time\n   * @param {boolean=} preserve Prevents from removing tween from store\n   * @param {boolean=} forceTime Forces to be frame rendered, even mismatching time\n   * @example tween.update(100)\n   * @memberof TWEEN.Tween\n   */\n  update (time, preserve, forceTime) {\n    let {\n      _onStartCallbackFired,\n      _easingFunction,\n      _interpolationFunction,\n      _easingReverse,\n      _repeat,\n      _delayTime,\n      _reverseDelayTime,\n      _yoyo,\n      _reversed,\n      _startTime,\n      _prevTime,\n      _duration,\n      _valuesStart,\n      _valuesEnd,\n      object,\n      _isFinite,\n      _isPlaying,\n      __render,\n      _chainedTweensCount\n    } = this\n\n    let elapsed\n    let currentEasing\n    let property\n    let propCount = 0\n\n    if (!_duration) {\n      elapsed = 1\n      _repeat = 0\n    } else {\n      time = time !== undefined ? time : now()\n\n      let delta = time - _prevTime\n      this._prevTime = time\n      if (delta > TOO_LONG_FRAME_MS) {\n        time -= delta - FRAME_MS\n      }\n\n      if (!_isPlaying || (time < _startTime && !forceTime)) {\n        return true\n      }\n\n      elapsed = (time - _startTime) / _duration\n      elapsed = elapsed > 1 ? 1 : elapsed\n      elapsed = _reversed ? 1 - elapsed : elapsed\n    }\n\n    if (!_onStartCallbackFired) {\n      if (!this._rendered) {\n        this.render()\n        this._rendered = true\n      }\n\n      this.emit(EVENT_START, object)\n\n      this._onStartCallbackFired = true\n    }\n\n    currentEasing = _reversed\n      ? _easingReverse || _easingFunction\n      : _easingFunction\n\n    if (!object) {\n      return true\n    }\n\n    for (property in _valuesEnd) {\n      const start = _valuesStart[property]\n      if (\n        (start === undefined || start === null) &&\n        !(Plugins[property] && Plugins[property].update)\n      ) {\n        continue\n      }\n      const end = _valuesEnd[property]\n      const value = currentEasing[property]\n        ? currentEasing[property](elapsed)\n        : typeof currentEasing === 'function'\n          ? currentEasing(elapsed)\n          : defaultEasing(elapsed)\n      const _interpolationFunctionCall = _interpolationFunction[property]\n        ? _interpolationFunction[property]\n        : typeof _interpolationFunction === 'function'\n          ? _interpolationFunction\n          : Interpolation.Linear\n\n      if (typeof end === 'number') {\n        object[property] = start + (end - start) * value\n      } else if (Array.isArray(end) && !Array.isArray(start)) {\n        object[property] = _interpolationFunctionCall(\n          end,\n          value,\n          object[property]\n        )\n      } else if (end && end.update) {\n        end.update(value)\n      } else if (typeof end === 'function') {\n        object[property] = end(value)\n      } else if (typeof end === 'string' && typeof start === 'number') {\n        object[property] = start + parseFloat(end[0] + end.substr(2)) * value\n      } else {\n        recompose(property, object, _valuesStart, _valuesEnd, value, elapsed)\n      }\n      if (Plugins[property] && Plugins[property].update) {\n        Plugins[property].update.call(\n          this,\n          object[property],\n          start,\n          end,\n          value,\n          elapsed,\n          property\n        )\n      }\n      propCount++\n    }\n\n    if (!propCount) {\n      remove(this)\n      return false\n    }\n\n    if (__render && Tween.Renderer && Tween.Renderer.update) {\n      Tween.Renderer.update.call(this, object, elapsed)\n    }\n\n    this.emit(EVENT_UPDATE, object, elapsed, time)\n\n    if (elapsed === 1 || (_reversed && elapsed === 0)) {\n      if (_repeat > 0 && _duration > 0) {\n        if (_isFinite) {\n          this._repeat--\n        }\n\n        if (_yoyo) {\n          this._reversed = !_reversed\n        } else {\n          for (property in _valuesEnd) {\n            let end = _valuesEnd[property]\n            if (typeof end === 'string' && typeof _valuesStart[property] === 'number') {\n              _valuesStart[property] += parseFloat(end[0] + end.substr(2))\n            }\n          }\n        }\n\n        this.emit(_yoyo && !_reversed ? EVENT_REVERSE : EVENT_REPEAT, object)\n\n        if (_reversed && _reverseDelayTime) {\n          this._startTime = time - _reverseDelayTime\n        } else {\n          this._startTime = time + _delayTime\n        }\n\n        return true\n      } else {\n        if (!preserve) {\n          this._isPlaying = false\n          remove(this)\n          _id--\n        }\n        this.emit(EVENT_COMPLETE, object)\n        this._repeat = this._r\n\n        if (_chainedTweensCount) {\n          for (let i = 0; i < _chainedTweensCount; i++) {\n            this[CHAINED_TWEENS + i].start(time + _duration)\n          }\n        }\n\n        return false\n      }\n    }\n\n    return true\n  }\n}\n\nexport default Tween\n","import { decompose, recompose, decomposeString } from './constants'\n\n/**\n * Tween helper for plugins\n * @namespace TWEEN.Interpolator\n * @memberof TWEEN\n * @param {any} a - Initial position\n * @param {any} b - End position\n * @return {Function} Returns function that accepts number between `0-1`\n */\nconst Interpolator = (a, b) => {\n  let isArray = Array.isArray(a)\n  let origin = typeof a === 'string' ? a : isArray ? a.slice() : { ...a }\n  if (isArray) {\n    for (let i = 0, len = a.length; i < len; i++) {\n      decompose(i, origin, a, b)\n    }\n  } else if (typeof a === 'object') {\n    for (let i in a) {\n      decompose(i, origin, a, b)\n    }\n  } else if (typeof a === 'string') {\n    a = decomposeString(a)\n    b = decomposeString(b)\n\n    let i = 1\n    while (i < a.length) {\n      if (a[i] === b[i] && typeof a[i - 1] === 'string') {\n        a.splice(i - 1, 2, a[i - 1] + a[i])\n        b.splice(i - 1, 2, b[i - 1] + b[i])\n      } else {\n        i++\n      }\n    }\n\n    let c = { isString: true, length: a.length }\n    let d = { isString: true, length: b.length }\n\n    while (i < c.length) {\n      c[i] = a[i]\n      d[i] = b[i]\n      i++\n    }\n  }\n  return function (t) {\n    if (isArray) {\n      for (let i = 0, len = a.length; i < len; i++) {\n        recompose(i, origin, a, b, t)\n      }\n    } else if (typeof origin === 'object') {\n      for (let i in a) {\n        recompose(i, origin, a, b, t)\n      }\n    } else if (typeof origin === 'string') {\n      origin = recompose(0, 0, a, b, t, t, true)\n    }\n    return origin\n  }\n}\n\nexport default Interpolator\n"],"names":["root","window","global","this","requestAnimationFrame","fn","setTimeout","cancelAnimationFrame","id","clearTimeout","now","process","hrtime","undefined","versions","electron","time","performance","bind","offset","timing","navigationStart","Date","_tweens","isStarted","_autoPlay","_onRequestTick","_ticker","emptyFrame","powerModeThrottle","onRequestTick","push","_requestTick","i","length","add","tween","indexOf","splice","update","onTick","FrameThrottle","frameCount","getAll","autoPlay","state","removeAll","get","has","remove","preserve","isRunning","Plugins","Easing","Linear","None","k","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","s","Bounce","Stepped","steps","FRAME_MS","TOO_LONG_FRAME_MS","CHAINED_TWEENS","EVENT_CALLBACK","EVENT_UPDATE","EVENT_COMPLETE","EVENT_START","EVENT_REPEAT","EVENT_REVERSE","EVENT_PAUSE","EVENT_PLAY","EVENT_RESTART","EVENT_STOP","EVENT_SEEK","STRING_PROP","NUM_REGEX","deepCopy","source","nodeType","Array","isArray","concat","target","prop","isNaNForST","v","isNaN","hexColor","hex2rgb","all","hex","r","g","b","color","parseInt","decomposeString","fromValue","replace","match","map","decompose","obj","from","to","stringBuffer","toValue","fromValue1","toValue1","shift","fromValue2","isString","toValue2","prop2","RGB","RGBA","isRGBColor","recompose","t","originalT","STRING_BUFFER","len","isRelative","currentValue","parseFloat","substr","propRegExp","replaceBrace","propExtract","property","value","props","split","propsLastIndex","lastArr","lastObj","reduce","nested","index","nextProp","nextIsArray","SET_NESTED","nested2","nested3","prop3","Interpolation","m","f","floor","Utils","Bezier","Reset","n","pw","Bernstein","isBArray","p","idx","round","vCurr","ks","CatmullRom","p0","p1","fc","Factorial","a","p2","p3","v0","v1","t2","t3","Store","node","object","ID","queueID","storeID","_startTime","propNormaliseRequired","selector","collection","document","querySelectorAll","querySelector","_id","defaultEasing","Tween","params","quickRender","render","_rendered","_onStartCallbackFired","fromTo","Selector","NodeCache","_valuesEnd","_valuesStart","_duration","_easingFunction","_easingReverse","_interpolationFunction","_initTime","_delayTime","_repeat","_r","_isPlaying","_yoyo","_reversed","_pausedTime","_isFinite","_maxListener","_chainedTweensCount","_prevTime","count","event","callback","callbackName","callbackId","args","apply","arg1","arg2","arg3","arg4","emit","noDelay","reassignValues","keepPlaying","updateTime","pause","amount","properties","duration","InitialValues","prevTweenByNode","normalisedProp","Object","keys","start","end","init","call","skipProcess","unshift","arrayOfStrings","stringObject","ii","len2","Renderer","__render","atStart","arguments","isFinite","_reverseDelayTime","forceTime","elapsed","currentEasing","propCount","delta","_interpolationFunctionCall","Interpolator","origin","slice","c","d"],"mappings":"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"}