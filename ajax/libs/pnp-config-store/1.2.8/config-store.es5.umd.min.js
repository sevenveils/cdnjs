/**
 * @license
 * v1.2.8
 * MIT (https://github.com/pnp/pnpjs/blob/master/LICENSE)
 * Copyright (c) 2019 Microsoft
 * docs: https://pnp.github.io/pnpjs/
 * source: https://github.com/pnp/pnpjs
 * bugs: https://github.com/pnp/pnpjs/issues
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@pnp/common")):"function"==typeof define&&define.amd?define(["exports","@pnp/common"],e):e((t.pnp=t.pnp||{},t.pnp["config-store"]={}),t.pnp.common)}(this,function(t,o){"use strict";var e=function(){function t(t){void 0===t&&(t=new Map),this._settings=t}return t.prototype.add=function(t,e){this._settings.set(t,e)},t.prototype.addJSON=function(t,e){this._settings.set(t,o.jsS(e))},t.prototype.apply=function(n){var i=this;return new Promise(function(t,e){try{i._settings=o.mergeMaps(i._settings,o.objectToMap(n)),t()}catch(t){e(t)}})},t.prototype.load=function(n){var i=this;return new Promise(function(e,t){n.getConfiguration().then(function(t){i._settings=o.mergeMaps(i._settings,o.objectToMap(t)),e()}).catch(t)})},t.prototype.get=function(t){return this._settings.get(t)||null},t.prototype.getJSON=function(t){var e=this.get(t);return null==e?e:JSON.parse(e)},t}(),n=function(){function t(t,e,n){this.wrappedProvider=t,this.cacheKey=e,this.wrappedProvider=t,this.store=n||this.selectPnPCache()}return t.prototype.getWrappedProvider=function(){return this.wrappedProvider},t.prototype.getConfiguration=function(){var e=this;return this.store&&this.store.enabled?this.store.getOrPut(this.cacheKey,function(){return e.wrappedProvider.getConfiguration().then(function(t){return e.store.put(e.cacheKey,t),t})}):this.wrappedProvider.getConfiguration()},t.prototype.selectPnPCache=function(){var t=new o.PnPClientStorage;if(t.local&&t.local.enabled)return t.local;if(t.session&&t.session.enabled)return t.session;throw Error("Cannot create a caching configuration provider since cache is not available.")},t}(),i=function(){function t(t,e,n,i){void 0===e&&(e="config"),void 0===n&&(n="Title"),void 0===i&&(i="Value"),this.web=t,this.listTitle=e,this.keyFieldName=n,this.valueFieldName=i}return t.prototype.getConfiguration=function(){var n=this;return this.web.lists.getByTitle(this.listTitle).items.select(this.keyFieldName,this.valueFieldName).get().then(function(t){return t.reduce(function(t,e){return t[e[n.keyFieldName]]=e[n.valueFieldName],t},{})})},t.prototype.asCaching=function(t){return void 0===t&&(t="pnp_configcache_splist_"+this.web.toUrl()+"+"+this.listTitle),new n(this,t)},t}();t.Settings=e,t.CachingConfigurationProvider=n,t.SPListConfigurationProvider=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=config-store.es5.umd.min.js.map
