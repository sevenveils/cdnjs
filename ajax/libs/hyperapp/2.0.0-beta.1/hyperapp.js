!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).hyperapp={})}(this,function(e){"use strict";var n={},t=[],r=t.map,o=Array.isArray,l=requestAnimationFrame||setTimeout,u=function(e){var n="";if("string"==typeof e)return e;if(o(e)&&e.length>0)for(var t,r=0;r<e.length;r++)""!==(t=u(e[r]))&&(n+=(n&&" ")+t);else for(var r in e)e[r]&&(n+=(n&&" ")+i);return n},f=function(e,n){var t={};for(var r in e)t[r]=e[r];for(var r in n)t[r]=n[r];return t},a=function(e){return e.reduce(function(e,n){return e.concat(!(!n||!0===n)&&("function"==typeof n[0]?[n]:a(n)))},t)},c=function(e,n){return o(e)&&o(n)&&e[0]===n[0]&&"function"==typeof e[0]},s=function(e,n){for(var t in f(e,n)){if(e[t]!==n[t]&&!c(e[t],n[t]))return!0;n[t]=e[t]}},p=function(e,n,t,r,o,i){if("key"===n);else if("style"===n)for(var l in f(t,r))t=null==r||null==r[l]?"":r[l],"-"===l[0]?e[n].setProperty(l,t):e[n][l]=t;else"o"===n[0]&&"n"===n[1]?((e.actions||(e.actions={}))[n=n.slice(2)]=r)?t||e.addEventListener(n,o,!!r.passive&&r):e.removeEventListener(n,o):!i&&"list"!==n&&n in e?e[n]=null==r?"":r:null==r||!1===r||"class"===n&&!(r=u(r))?e.removeAttribute(n):e.setAttribute(n,r)},d=function(e,n,t){var r=3===e.type?document.createTextNode(e.name):(t=t||"svg"===e.name)?document.createElementNS("http://www.w3.org/2000/svg",e.name):document.createElement(e.name),o=e.props;for(var i in o)p(r,i,null,o[i],n,t);for(var l=0,u=e.children.length;l<u;l++)r.appendChild(d(e.children[l]=h(e.children[l]),n,t));return e.node=r},v=function(e){return null==e?null:e.key},y=function(e,n,t,r,o,i){if(t===r);else if(null!=t&&3===t.type&&3===r.type)t.name!==r.name&&(n.nodeValue=r.name);else if(null==t||t.name!==r.name)n=e.insertBefore(d(r=h(r),o,i),n),null!=t&&e.removeChild(t.node);else{var l,u,a,c,s=t.props,m=r.props,g=t.children,z=r.children,w=0,C=0,k=g.length-1,b=z.length-1;for(var A in i=i||"svg"===r.name,f(s,m))("value"===A||"selected"===A||"checked"===A?n[A]:s[A])!==m[A]&&p(n,A,s[A],m[A],o,i);for(;C<=b&&w<=k&&null!=(a=v(g[w]))&&a===v(z[C]);)y(n,g[w].node,g[w],z[C]=h(z[C++],g[w++]),o,i);for(;C<=b&&w<=k&&null!=(a=v(g[k]))&&a===v(z[b]);)y(n,g[k].node,g[k],z[b]=h(z[b--],g[k--]),o,i);if(w>k)for(;C<=b;)n.insertBefore(d(z[C]=h(z[C++]),o,i),(u=g[w])&&u.node);else if(C>b)for(;w<=k;)n.removeChild(g[w++].node);else{A=w;for(var N={},x={};A<=k;A++)null!=(a=g[A].key)&&(N[a]=g[A]);for(;C<=b;)a=v(u=g[w]),c=v(z[C]=h(z[C],u)),x[a]||null!=c&&c===v(g[w+1])?(null==a&&n.removeChild(u.node),w++):null==c||1===t.type?(null==a&&(y(n,u&&u.node,u,z[C],o,i),C++),w++):(a===c?(y(n,u.node,u,z[C],o,i),x[c]=!0,w++):null!=(l=N[c])?(y(n,n.insertBefore(l.node,u&&u.node),l,z[C],o,i),x[c]=!0):y(n,u&&u.node,null,z[C],o,i),C++);for(;w<=k;)null==v(u=g[w++])&&n.removeChild(u.node);for(var A in N)null==x[A]&&n.removeChild(N[A].node)}}return r.node=n},h=function(e,n){return 2===e.type?((!n||function(e,n){for(var t in e)if(e[t]!==n[t])return!0;for(var t in n)if(e[t]!==n[t])return!0}(n.lazy,e.lazy))&&((n=e.lazy.view(e.lazy)).lazy=e.lazy),n):e},m=function(e,n,t,r,o,i){return{name:e,props:n,children:t,node:r,type:i,key:o}},g=function(e,r){return m(e,n,t,r,null,3)},z=function(e){return 3===e.nodeType?g(e.nodeValue,e):m(e.nodeName.toLowerCase(),n,r.call(e.childNodes,z),e,null,1)};e.Lazy=function(e){return{lazy:e,type:2}},e.h=function(e,t){for(var r,i=[],l=[],u=arguments.length;u-- >2;)i.push(arguments[u]);for(;i.length>0;)if(o(r=i.pop()))for(u=r.length;u-- >0;)i.push(r[u]);else!1===r||!0===r||null==r||l.push("object"==typeof r?r:g(r));return t=t||n,"function"==typeof e?e(t,l):m(e,t,l,null,t.key)},e.app=function(e,n){var t={},r=!1,i=e.view,u=e.node,f=u&&z(u),c=e.subscriptions,p=[],d=function(e){var n=this.actions[e.type];n.preventDefault&&e.preventDefault(),n.stopPropagation&&e.stopPropagation(),h(n.action||n,e)},v=function(e){return t===e||r||l(m,r=!0),t=e},h=(n||function(e){return e})(function(e,n){return"function"==typeof e?h(e(t,n)):o(e)?"function"==typeof e[0]?h(e[0],"function"==typeof e[1]?e[1](n):e[1]):(a(e.slice(1)).map(function(e){e&&e[0](e[1],h)},v(e[0])),t):v(e)}),m=function(){r=!1,c&&(p=function(e,n,t){for(var r,o,i=0,l=[];i<e.length||i<n.length;i++)r=e[i],o=n[i],l.push(o?!r||o[0]!==r[0]||s(o[1],r[1])?[o[0],o[1],o[0](o[1],t),r&&r[2]()]:r:r&&r[2]());return l}(p,a(c(t)),h)),i&&(u=y(u.parentNode,u,f,"string"==typeof(f=i(t))?g(f):f,d))};h(e.init)}});
//# sourceMappingURL=hyperapp.js.map