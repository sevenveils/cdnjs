/* Riot v4.0.0-alpha.8, @license MIT */(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.riot={}))})(this,function(a){"use strict";function b(a){return Array.isArray(a)?a:/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&"number"==typeof a.length?Array.from(a):[a]}function c(a,c,d){const e="string"==typeof c?[c]:c;return la(b(a).map(a=>la(e.map(b=>a[d](b)))))}function d(a,c,d){const e="object"==typeof c?c:{[c]:d},f=Object.keys(e);return b(a).forEach(a=>{f.forEach(b=>a.setAttribute(b,e[b]))}),a}function e(a,b){return c(a,b,"getAttribute")}function f(a){return Array.from(a.attributes).reduce((a,b)=>(a[b.name]=b.value,a),{})}function g(a){return e(a,ga)||a.tagName.toLowerCase()}function h(a,b){return typeof a===b}function i(a){return h(a,"function")}function j(a){throw new Error(a)}function k(a){return i(a)?a.prototype&&a.prototype.constructor?new a:a():a}function l(a,b){return Object.entries(b).forEach(b=>{let c=b[0],d=b[1];a[c]||(a[c]=d)}),a}function m(){return this}function n(a,b){return b.forEach(b=>{a[b]=a[b].bind(a)}),a}function o(a,b,c,d){return void 0===d&&(d={}),Object.defineProperty(a,b,Object.assign({value:c,enumerable:!1,writable:!1,configurable:!0},d)),a}function p(a,b,c){return Object.entries(b).forEach(b=>{let d=b[0],e=b[1];o(a,d,e,c)}),a}function q(a,b){return a.reduce((a,c)=>{const d=c.evaluate(b);return a[c.name]=d,a},{})}function r(a){const b=a.childNodes;b.forEach(b=>a.removeChild(b))}function s(a,b){return!!a&&!1===!!a(b)}function t(a){let b=a.itemName,c=a.indexName,d=a.index,e=a.item,f=a.scope;const g=Object.assign({[b]:e},f);return c?Object.assign({[c]:d},g):g}function u(a,b,c){const d=c.condition,e=c.template,f=c.childrenMap,g=c.itemName,h=c.getKey,j=c.indexName,k=c.root,l=new Set,m=new Map,n=[],o=[];return a.forEach((a,c)=>{const i=c-l.size,p=t({itemName:g,indexName:j,index:i,item:a,scope:b}),q=h?h(p):i,r=f.get(q);if(s(d,p))return void l.add(r);const u=r?r.tag:e.clone(),v=r?u.el:k.cloneNode();r?n.push(()=>u.update(p)):n.push(()=>u.mount(v,p)),o.push(v),m.set(q,{tag:u,context:p,index:i})}),{newChildrenMap:m,batches:n,futureNodes:o}}function v(a,b){const c=b.parentNode;c.insertBefore(a,b),c.removeChild(b)}function w(a,b){Object.entries(b).forEach(b=>{let c=b[0],d=b[1];return y(a,{name:c},d)})}function x(a,b){Object.keys(b).forEach(b=>a.removeAttribute(b))}function y(a,b,c,d){let e=b.name;return e?void("boolean"==typeof c&&(a[e]=c),a[z(c)](e,A(e,c))):void(c?w(a,c):d&&x(a,d))}function z(a){return a&&"object"!=typeof a?Ra:Qa}function A(a,b){return!0===b?a:b}function B(a){return null==a?"":a}function C(a,b){return Sa[a.type](a.node,a,b,a.value)}function D(a,b){return Object.assign({},Ta,b,{node:a})}function E(a,b,c){return b.reduce((b,d)=>Object.assign({},b,{[d]:b=>a.map(a=>a[d](b))&&c}),{})}function F(a,b,c){return void 0===b&&(b=[]),void 0===c&&(c=[]),a?a({slots:b,attributes:c}):Q(H(b),[...G(b),{expressions:c.map(a=>Object.assign({type:La},a))}])}function G(a){return a.reduce((a,b)=>{let c=b.bindings;return a.concat(c)},[])}function H(a){return a.reduce((a,b)=>a+b.html,"")}function I(a,b){const c=b.selector,d=b.type,e=b.redundantAttribute,f=b.expressions,g=c?a.querySelector(c):a;return e&&g.removeAttribute(e),(Va[d]||Va[oa])(g,Object.assign({},b,{expressions:f||[]}))}function J(a){const b=a.ownerSVGElement;return!!b||null===b}function K(a){const b=document.createElement("template");return b.innerHTML=a,b.content}function L(a,b){const c=b.ownerDocument.importNode(new window.DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">${a}</svg>`,"application/xml").documentElement,!0);return c}function M(a,b){return J(a)?L(b,a):K(b)}function N(a,b){a.firstChild&&(b.appendChild(a.firstChild),N(a,b))}function O(a,b){Wa.test(a.tagName)?N(b,a):a.appendChild(b)}function P(a,b){return b&&("string"==typeof b?M(a,b):b)}function Q(a,b){return void 0===b&&(b=[]),Object.assign({},Xa,{html:a,bindingsData:b})}function R(a,c){return b("string"==typeof a?(c||document).querySelectorAll(a):a)}function S(a){a.firstChild&&(a.parentNode.insertBefore(a.firstChild,a),S(a)),a.parentNode&&a.parentNode.removeChild(a)}function T(a,b,c){let d=c.name,e=c.slots;const f=e.find(a=>{let b=a.id;return b===d});return Object.assign({},Ya,{node:b,name:d,template:f&&Q(f.html,f.bindings).createDOM(a)})}function U(a,b){const c=R("slot",a),d=c.map(c=>{const d=e(c,"name")||"default";return T(a,c,{name:d,slots:b})});return{mount(a){return d.forEach(b=>b.mount(a)),this},update(a){return d.forEach(b=>b.update(a)),this},unmount(a){return d.forEach(b=>b.unmount(a)),this}}}function V(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return d=[...c,...d],d.length<a.length?V(a,...d):a(...d)}}function W(a){let b=a.css,c=a.template,d=a.tag,e=a.name;return a=>{let f=a.slots,g=a.attributes,h=a.props;const i=X({css:b,template:c,tag:d,name:e})({slots:f,attributes:g,props:h});return{mount(a,b,c){return i.mount(a,c,b)},update(a,b){return i.update(b,a)},unmount(){return i.unmount()}}}}function X(a){let b=a.css,c=a.template,d=a.tag,e=a.name;const f=k(d)||{},g=$(f.components);return b&&e&&ab.add(e,b),V(ba)(p(l(f,Object.assign({},cb,{state:{}})),Object.assign({slots:null,root:null},bb,{css:b,template:c?c(Q,Pa,qa,a=>g[a]||da.get(a)):db})))}function Y(a,b,c,d){return void 0===b&&(b=[]),void 0===d&&(d={}),b.length?c?q(b,c):d:f(a)}function Z(a){return Q(null,[{expressions:(a||[]).map(a=>Object.assign({type:Pa.ATTRIBUTE},a))}])}function $(a){return void 0===a&&(a={}),Object.entries(k(a)).reduce((a,b)=>{let c=b[0],d=b[1];return a[c]=W(Object.assign({name:c},d)),a},{})}function _(a){return[...fa].reduce((a,b)=>b(a)||a,a)}function aa(a,b){return Object.assign({},a,k(b))}function ba(a,b){let c=b.slots,d=b.attributes,e=b.props;const f=Z(d);return n(_(p(Object.create(a),{mount(a,b,g){return void 0===b&&(b={}),this.props=Object.assign({},e,Y(a,d,g)),this.state=aa(this.state,b),this[ia]=this.template.createDOM(a).clone(),this[ha]=f.createDOM(a).clone(),a[ea]=this,o(this,"root",a),this.onBeforeMount(this.state,this.props),this[ha].mount(a,g),this[ia].mount(a,this),this[ja]=U(a,c||[]).mount(g),this.onMounted(this.state,this.props),this},update(a,b){void 0===a&&(a={});const c=Y(this.root,d,b,this.props);if(!1!==this.shouldUpdate(c,this.props))return this.props=c,this.state=aa(this.state,a),this.onBeforeUpdate(this.state,this.props),b&&(this[ha].update(b),this[ja].update(b)),this[ia].update(this),this.onUpdated(this.state,this.props),this},unmount(a){return this.onBeforeUnmount(this.state,this.props),this[ha].unmount(),this[ja].unmount(),this[ia].unmount(this,!0===a),this.onUnmounted(this.state,this.props),this}})),Object.keys(a).filter(b=>i(a[b])))}function ca(a,b,c){const d=c||g(a);da.has(d)||j(`The component named "${d}" was never registered`);const e=da.get(d)({props:b});return e.mount(a)}const da=new Map,ea=Symbol("riot-component"),fa=new Set,ga="is",ha=Symbol("attributes"),ia=Symbol("template"),ja=Symbol("slots");var ka=Object.freeze({COMPONENTS_IMPLEMENTATION_MAP:da,DOM_COMPONENT_INSTANCE_PROPERTY:ea,PLUGINS_SET:fa,IS_DIRECTIVE:"is",ATTRIBUTES_KEY_SYMBOL:ha,TEMPLATE_KEY_SYMBOL:ia,SLOTS_KEY_SYMBOL:ja});const la=a=>1===a.length?a[0]:a,ma=0,na=1,oa=2,pa=3;var qa={EACH:ma,IF:na,SIMPLE:oa,TAG:pa},ra={};/*! (c) Andrea Giammarchi - ISC */try{ra.Map=Map}catch(a){ra.Map=function(){function a(a){return b=c.indexOf(a),-1<b}var b=0,c=[],d=[];return{delete:function(e){var f=a(e);return f&&(c.splice(b,1),d.splice(b,1)),f},get:function(c){return a(c)?d[b]:void 0},has:function(b){return a(b)},set:function(e,f){return d[a(e)?b:c.push(e)-1]=f,this}}}}var sa=ra.Map;const ta=(a,b,c,d,e,f)=>{if(2>e-d)b.insertBefore(a(c[d],1),f);else{const g=b.ownerDocument.createDocumentFragment();for(;d<e;)g.appendChild(a(c[d++],1));b.insertBefore(g,f)}},ua=(c,a)=>c==a,va=a=>a,wa=(a,b,c,d,e,f,g)=>{const h=f-e;if(1>h)return-1;for(;c-b>=h;){let h=b,i=e;for(;h<c&&i<f&&g(a[h],d[i]);)h++,i++;if(i===f)return b;b=h+1}return-1},xa=(a,b,c,d,e,f)=>{for(;d<e&&f(c[d],a[b-1]);)d++,b--;return 0===b},ya=(a,b,c,d,e)=>c<d?a(b[c],0):0<c?a(b[c-1],-0).nextSibling:e,za=(a,b,c,d,e)=>{if(2>e-d)b.removeChild(a(c[d],-1));else{const f=b.ownerDocument.createRange();f.setStartBefore(a(c[d],-1)),f.setEndAfter(a(c[e-1],-1)),f.deleteContents()}},Aa=-1,Ba=1,Ca=0,Da=(a,b,c,d,e,f,g,h)=>{let j=0,l=d<h?d:h;const m=Array(l++),n=Array(l);n[0]=-1;for(let j=1;j<l;j++)n[j]=g;const o=new sa;for(let j=f;j<g;j++)o.set(e[j],j);for(let k=b;k<c;k++){const b=o.get(a[k]);null!=b&&(j=Ga(n,l,b),-1<j&&(n[j]=b,m[j]={newi:k,oldi:b,prev:m[j-1]}))}for(j=--l,--g;n[j]>g;)--j;l=h+d-j;const p=Array(l);let q=m[j];for(--c;q;){const a=q,b=a.newi,d=a.oldi;for(;c>b;)p[--l]=Ba,--c;for(;g>d;)p[--l]=Aa,--g;p[--l]=Ca,--c,--g,q=q.prev}for(;c>=b;)p[--l]=Ba,--c;for(;g>=f;)p[--l]=Aa,--g;return p},Ea=(a,b,e,f,g,h,i)=>{const j=e+h,l=[];let m,n,o,p,q,s,t;outer:for(m=0;m<=j;m++){if(m>50)return null;for(t=m-1,q=m?l[m-1]:[0,0],s=l[m]=[],n=-m;n<=m;n+=2){for(p=n===-m||n!==m&&q[t+n-1]<q[t+n+1]?q[t+n+1]:q[t+n-1]+1,o=p-n;p<h&&o<e&&i(f[g+p],a[b+o]);)p++,o++;if(p===h&&o===e)break outer;s[m+n]=p}}const u=Array(m/2+j/2);let v=u.length-1;for(m=l.length-1;0<=m;m--){for(;0<p&&0<o&&i(f[g+p-1],a[b+o-1]);)u[v--]=Ca,p--,o--;if(!m)break;t=m-1,q=m?l[m-1]:[0,0],n=p-o,n===-m||n!==m&&q[t+n-1]<q[t+n+1]?(o--,u[v--]=Ba):(p--,u[v--]=Aa)}return u},Fa=(a,b,c,d,e,f,g,h,j)=>{const k=new sa,l=a.length;let m=g,n=0;for(;n<l;)switch(a[n++]){case Ca:e++,m++;break;case Ba:k.set(d[e],1),ta(b,c,d,e++,e,m<h?b(f[m],0):j);break;case Aa:m++;}for(n=0;n<l;)switch(a[n++]){case Ca:g++;break;case Aa:k.has(f[g])?g++:za(b,c,f,g++,g);}},Ga=(a,b,c)=>{let d=1,e=b;for(;d<e;){const b=(d+e)/2>>>0;c<a[b]?e=b:d=b+1}return d},Ha=(a,b,c,d,e,f,g,h,i,j,k,l,m)=>{Fa(Ea(c,d,f,g,h,j,l)||Da(c,d,e,f,g,h,i,j),a,b,c,d,g,h,k,m)},Ia=(a,b,c,d)=>{d||(d={});const e=d.compare||ua,f=d.node||va,g=null==d.before?null:f(d.before,0),h=b.length;let j=h,k=0,l=c.length,m=0;for(;k<j&&m<l&&e(b[k],c[m]);)k++,m++;for(;k<j&&m<l&&e(b[j-1],c[l-1]);)j--,l--;const n=k===j,o=m===l;if(n&&o)return c;if(n&&m<l)return ta(f,a,c,m,l,ya(f,b,k,h,g)),c;if(o&&k<j)return za(f,a,b,k,j),c;const p=j-k,q=l-m;let r=-1;if(p<q){if(r=wa(c,m,l,b,k,j,e),-1<r)return ta(f,a,c,m,r,f(b[k],0)),ta(f,a,c,r+p,l,ya(f,b,j,h,g)),c;}else if(q<p&&(r=wa(b,k,j,c,m,l,e),-1<r))return za(f,a,b,k,r),za(f,a,b,r+q,j),c;return 2>p||2>q?(ta(f,a,c,m,l,f(b[k],0)),za(f,a,b,k,j),c):p===q&&xa(c,l,b,k,j,e)?(ta(f,a,c,m,l,ya(f,b,j,h,g)),c):(Ha(f,a,c,m,l,q,b,k,j,p,h,e,g),c)},Ja=Object.seal({childrenMap:null,node:null,root:null,condition:null,evaluate:null,template:null,tags:[],getKey:null,indexName:null,itemName:null,afterPlaceholder:null,placeholder:null,mount(a){return this.update(a)},update(a){const b=this.placeholder,c=this.evaluate(a),d=c?Array.from(c):[],e=b.parentNode,f=u(d,a,this),g=f.newChildrenMap,h=f.batches,i=f.futureNodes,j=this.tags[this.tags.length-1];return Ia(e,this.tags,i,{before:j?j.nextSibling:b.nextSibling}),h.forEach(a=>a()),this.childrenMap=g,this.tags=i,this},unmount(){return Array.from(this.childrenMap.values()).forEach(a=>{let b=a.tag,c=a.context;b.unmount(c,!0)}),this.childrenMap=new Map,this.tags=[],this}}),Ka=Object.seal({node:null,evaluate:null,placeholder:null,template:"",mount(a){return v(this.placeholder,this.node),this.update(a)},update(a){const b=!!this.evaluate(a),c=!this.value&&b,d=this.value&&!b;switch(!0){case c:v(this.node,this.placeholder),this.template&&(this.template=this.template.clone(),this.template.mount(this.node,a));break;case d:v(this.placeholder,this.node),this.unmount(a);break;default:b&&this.template.update(a);}return this.value=b,this},unmount(a){const b=this.template;return b&&b.unmount(a),this}}),La=0,Ma=1,Na=2,Oa=3;var Pa={ATTRIBUTE:La,EVENT:Ma,TEXT:Na,VALUE:Oa};const Qa="removeAttribute",Ra="setAttribute";var Sa={[La]:y,[Ma]:function(a,b,c){let d=b.name;a[d]=c},[Na]:function(a,b,c){let d=b.childNodeIndex;const e=a.childNodes[d],f=B(c);if(e.nodeType===Node.COMMENT_NODE){const b=document.createTextNode(f);a.replaceChild(b,e)}else e.data=B(f)},[Oa]:function(a,b,c){a.value=c}};const Ta=Object.seal({node:null,value:null,mount(a){return this.value=this.evaluate(a),C(this,this.value),this},update(a){const b=this.evaluate(a);return this.value!==b&&(C(this,b),this.value=b),this},unmount(){return this}}),Ua=Object.seal({node:null,evaluate:null,name:null,slots:null,tag:null,attributes:null,getComponent:null,mount(a){return this.update(a)},update(a){const b=this.evaluate(a);return b===this.name?this.tag.update(a):(this.tag&&this.tag.unmount(a),this.name=b,this.tag=F(this.getComponent(b),this.slots,this.attributes),this.tag.mount(this.node,a)),this},unmount(a){return this.tag&&this.tag.unmount(a),this}});var Va={[na]:function(a,b){let c=b.evaluate,d=b.template;return Object.assign({},Ka,{node:a,evaluate:c,placeholder:document.createTextNode(""),template:d.createDOM(a)})},[oa]:function(a,b){let c=b.expressions;return Object.assign({},E(c.map(b=>D(a,b)),["mount","update","unmount"]))},[ma]:function(a,b){let c=b.evaluate,d=b.condition,e=b.itemName,f=b.indexName,g=b.getKey,h=b.template;const i=document.createTextNode(""),j=a.parentNode,k=a.cloneNode(),l=Array.from(j.childNodes).indexOf(a);return j.insertBefore(i,a),j.removeChild(a),Object.assign({},Ja,{childrenMap:new Map,node:a,root:k,offset:l,condition:d,evaluate:c,template:h.createDOM(a),getKey:g,indexName:f,itemName:e,placeholder:i})},[pa]:function(a,b){let c=b.evaluate,d=b.getComponent,e=b.slots,f=b.attributes;return Object.assign({},Ua,{node:a,evaluate:c,slots:e,attributes:f,getComponent:d})}};const Wa=/svg/i,Xa=Object.freeze({bindings:null,bindingsData:null,html:null,dom:null,el:null,createDOM(a){return this.dom=this.dom||P(a,this.html),this},mount(a,c){if(!a)throw new Error("Please provide DOM node to mount properly your template");return this.el&&this.unmount(c),this.el=a,this.createDOM(a),this.dom&&O(a,this.dom.cloneNode(!0)),this.bindings=this.bindingsData.map(a=>I(this.el,a)),this.bindings.forEach(a=>a.mount(c)),this},update(a){return this.bindings.forEach(c=>c.update(a)),this},unmount(a,b){return this.el&&(this.bindings.forEach(c=>c.unmount(a)),r(this.el),b&&this.el.parentNode.removeChild(this.el),this.el=null),this},clone(){return Object.assign({},this,{el:null})}}),Ya=Object.seal({node:null,name:null,template:null,mount(a){return this.template?(this.template.mount(this.node,a),S(this.node)):this.node.parentNode.removeChild(this.node),this},update(a){return this.template&&this.template.update(a),this},unmount(a){return this.template&&this.template.unmount(a),this}}),Za=function(){return"undefined"==typeof window?void 0:window}(),$a=new Map,_a=Za&&(()=>{const a=document.createElement("style");return d(a,"type","text/css"),document.head.appendChild(a),a})();var ab={add(a,b){return $a.has(a)||$a.set(a,b),this.inject(),this},inject(){return _a?(_a.innerHTML=[...$a.values()].join("\n"),this):this},remove(a){return _a?($a.has(a)&&($a.delete(a),this.inject()),this):this}};const bb=Object.freeze({$(a){return R(a,this.root)[0]},$$(a){return R(a,this.root)},ref(a){return R(a,this.root).map(a=>a[ea]||a)}}),cb=Object.freeze({shouldUpdate:m,onBeforeMount:m,onMounted:m,onBeforeUpdate:m,onUpdated:m,onBeforeUnmount:m,onUnmounted:m}),db={update:m,mount:m,unmount:m,clone:m,createDOM:m};const eb=ea,fb=da,gb=fa,hb=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce((a,b)=>function(){return a(b(...arguments))})}(a=>a({}),W);a.register=function(a,b){let c=b.css,d=b.template,e=b.tag;return fb.has(a)&&j(`The component "${a}" was already registered`),fb.set(a,W({name:a,css:c,template:d,tag:e})),fb},a.unregister=function(a){return fb.has(a)||j(`The component "${a}" was never registered`),fb.delete(a),ab.remove(a),fb},a.mount=function(a,b,c){return R(a).map(a=>ca(a,b,c))},a.unmount=function(a){return R(a).map(a=>(a[eb]&&a[eb].unmount(),a))},a.install=function(a){return i(a)||j("Plugins must be of type function"),gb.has(a)&&j("This plugin was already install"),gb.add(a),gb},a.uninstall=function(a){return gb.has(a)||j("This plugin was never installed"),gb.delete(a),gb},a.component=hb,a.version="v4.0.0-alpha.8",a.__={cssManager:ab,defineComponent:X,globals:ka},Object.defineProperty(a,"__esModule",{value:!0})});
