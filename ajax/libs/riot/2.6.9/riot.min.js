/* Riot v2.6.9, @license MIT */
!function(F,w){"use strict";var _={version:"v2.6.9",settings:{}},N=0,C=[],O={},L="__global_mixin",T="riot-",E=T+"tag",M="data-is",S="string",j="object",A="undefined",r="function",o="http://www.w3.org/1999/xlink",i=/^xlink:(\w+)/,t=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,R=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|parent|opts|trigger|o(?:n|ff|ne))$/,d=["altGlyph","animate","animateColor","circle","clipPath","defs","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","filter","font","foreignObject","g","glyph","glyphRef","image","line","linearGradient","marker","mask","missing-glyph","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tref","tspan","use"],k=0|(F&&F.document||{}).documentMode,$=F&&!!F.InstallTrigger;_.observable=function(a){a=a||{};var u={},f=Array.prototype.slice;function r(e,t){for(var n=e.split(" "),r=n.length,o=0;o<r;o++){var i=n[o];i&&t(i,o)}}return Object.defineProperties(a,{on:{value:function(e,n){return"function"!=typeof n||r(e,function(e,t){(u[e]=u[e]||[]).push(n),n.typed=0<t}),a},enumerable:!1,writable:!1,configurable:!1},off:{value:function(e,i){return"*"!=e||i?r(e,function(e,t){if(i)for(var n,r=u[e],o=0;n=r&&r[o];++o)n==i&&r.splice(o--,1);else delete u[e]}):u={},a},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,n){return a.on(t,function e(){a.off(t,e),n.apply(a,arguments)})},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(e){for(var o,t=arguments.length-1,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n+1];return r(e,function(e,t){o=f.call(u[e]||[],0);for(var n,r=0;n=o[r];++r)n.busy||(n.busy=1,n.apply(a,n.typed?[e].concat(i):i),o[r]!==n&&r--,n.busy=0);u["*"]&&"*"!=e&&a.trigger.apply(a,["*",e].concat(i))}),a},enumerable:!1,writable:!1,configurable:!1}}),a},function(e){var o,r,i,a,u,n=/^.+?\/\/+[^\/]+/,t="EventListener",f="remove"+t,s="add"+t,c="hasAttribute",l="replace",p="popstate",d="hashchange",g="trigger",h=3,v=void 0!==F&&F,m="undefined"!=typeof document&&document,y=v&&history,b=v&&(y.location||v.location),x=S.prototype,w=m&&m.ontouchstart?"touchstart":"click",_=!1,N=e.observable(),C=!1,O=[],L=0;function T(e){return e.split(/[/?#]/)}function E(e,t){var n=new RegExp("^"+t[l](/\*/g,"([^/?#]+?)")[l](/\.\./,".*")+"$"),r=e.match(n);if(r)return r.slice(1)}function M(e){var t,n,r;t=$,n=1,o=function(){clearTimeout(r),r=setTimeout(t,n)},v[s](p,o),v[s](d,o),m[s](w,I),e&&$(!0)}function S(){this.$=[],e.observable(this),N.on("stop",this.s.bind(this)),N.on("emit",this.e.bind(this))}function j(e){return e[l](/^\/|\/$/,"")}function A(e){return"string"==typeof e}function R(e){return(e||b.href)[l](n,"")}function k(e){return"#"==r[0]?(e||b.href||"").split(r)[1]||"":(b?R(e):e||"")[l](r,"")}function $(t){var e,n=0==L;if(!(h<=L)&&(L++,O.push(function(){var e=k();(t||e!=i)&&(N[g]("emit",e),i=e)}),n)){for(;e=O.shift();)e();L=0}}function I(e){if(!(1!=e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.target;t&&"A"!=t.nodeName;)t=t.parentNode;!t||"A"!=t.nodeName||t[c]("download")||!t[c]("href")||t.target&&"_self"!=t.target||-1==t.href.indexOf(b.href.match(n)[0])||t.href!=b.href&&(t.href.split("#")[0]==b.href.split("#")[0]||"#"!=r[0]&&0!==R(t.href).indexOf(r)||"#"==r[0]&&t.href.split(r)[0]!=b.href.split(r)[0]||!P(k(t.href),t.title||m.title))||e.preventDefault()}}function P(e,t,n){return y?(e=r+j(e),t=t||m.title,n?y.replaceState(null,t,e):y.pushState(null,t,e),m.title=t,C=!1,$(),C):N[g]("emit",k(e))}x.m=function(e,t,n){!A(e)||t&&!A(t)?t?this.r(e,t):this.r("@",e):P(e,t,n||!1)},x.s=function(){this.off("*"),this.$=[]},x.e=function(n){this.$.concat("@").some(function(e){var t=("@"==e?a:u)(j(n),j(e));if(void 0!==t)return this[g].apply(null,[e].concat(t)),C=!0},this)},x.r=function(e,t){"@"!=e&&(e="/"+j(e),this.$.push(e)),this.on(e,t)};var H=new S,D=H.m.bind(H);D.create=function(){var e=new S,t=e.m.bind(e);return t.stop=e.s.bind(e),t},D.base=function(e){r=e||"#",i=k()},D.exec=function(){$(!0)},D.parser=function(e,t){e||t||(a=T,u=E),e&&(a=e),t&&(u=t)},D.query=function(){var r={};return(b.href||i)[l](/[?&](.+?)=([^&]*)/g,function(e,t,n){r[t]=n}),r},D.stop=function(){_&&(v&&(v[f](p,o),v[f](d,o),m[f](w,I)),N[g]("stop"),_=!1)},D.start=function(e){_||(v&&("complete"==document.readyState?M(e):v[s]("load",function(){setTimeout(function(){M(e)},1)})),_=!0)},D.base(),D.parser(),e.route=D}(_);var m=function(e){var t,n,r="g",o=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,i=o.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,a=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),u=/(?=[[\]()*+?.^$|])/g,l={"(":RegExp("([()])|"+i,r),"[":RegExp("([[\\]])|"+i,r),"{":RegExp("([{}])|"+i,r)},f="{ }",s=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+i,r),f,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],c=void 0,p=[];function d(e){return e}function g(e,t){return t||(t=p),new RegExp(e.source.replace(/{/g,t[2]).replace(/}/g,t[3]),e.global?r:"")}function h(e){if(e===f)return s;var t=e.split(" ");if(2!==t.length||a.test(e))throw new Error('Unsupported brackets "'+e+'"');return(t=t.concat(e.replace(u,"\\").split(" ")))[4]=g(1<t[1].length?/{[\S\s]*?}/:s[4],t),t[5]=g(3<e.length?/\\({|})/g:s[5],t),t[6]=g(s[6],t),t[7]=RegExp("\\\\("+t[3]+")|([[({])|("+t[3]+")|"+i,r),t[8]=e,t}function v(e){return e instanceof RegExp?t(e):p[e]}function m(e){(e||(e=f))!==p[8]&&(p=h(e),t=e===f?d:g,p[9]=t(s[9])),c=e}return v.split=function(e,t,n){n||(n=p);var r,o,i,a,u=[],f=n[6];for(o=i=f.lastIndex=0;r=f.exec(e);){if(a=r.index,o){if(r[2]){f.lastIndex=c(e,r[2],f.lastIndex);continue}if(!r[3])continue}r[1]||(s(e.slice(i,a)),i=f.lastIndex,(f=n[6+(o^=1)]).lastIndex=i)}return e&&i<e.length&&s(e.slice(i)),u;function s(e){t||o?u.push(e&&e.replace(n[5],"$1")):u.push(e)}function c(e,t,n){var r,o=l[t];for(o.lastIndex=n,n=1;(r=o.exec(e))&&(!r[1]||(r[1]===t?++n:--n)););return n?e.length:o.lastIndex}},v.hasExpr=function(e){return p[4].test(e)},v.loopKeys=function(e){var t=e.match(p[9]);return t?{key:t[1],pos:t[2],val:p[0]+t[3].trim()+p[1]}:{val:e.trim()}},v.array=function(e){return e?h(e):p},Object.defineProperty(v,"settings",{set:function(e){var t;t=(e=e||{}).brackets,Object.defineProperty(e,"brackets",{set:m,get:function(){return c},enumerable:!0}),n=e,m(t)},get:function(){return n}}),v.settings=void 0!==_&&_.settings||{},v.set=m,v.R_STRINGS=o,v.R_MLCOMMS=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,v.S_QBLOCKS=i,v}(),I=function(){var n={};function r(e,t){return e?(n[e]||(n[e]=function(e){var t=function(e){var t,n=[],r=m.split(e.replace(u,'"'),1);if(2<r.length||r[0]){var o,i,a=[];for(o=i=0;o<r.length;++o)(t=r[o])&&(t=1&o?s(t,1,n):'"'+t.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(a[i++]=t);t=i<2?a[0]:"["+a.join(",")+'].join("")'}else t=s(r[1],0,n);n[0]&&(t=t.replace(f,function(e,t){return n[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")}));return t}(e);"try{return "!==t.slice(0,11)&&(t="return "+t);return new Function("E",t+";")}(e))).call(t,o):e}function o(e,t){r.errorHandler&&(e.riotData={tagName:t&&t.root&&t.root.tagName,_riot_id:t&&t._riot_id},r.errorHandler(e))}r.haveRaw=m.hasRaw,r.hasExpr=m.hasExpr,r.loopKeys=m.loopKeys,r.clearCache=function(){n={}},r.errorHandler=null;var c=String.fromCharCode(8279),l=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,p=RegExp(m.S_QBLOCKS,"g"),u=/\u2057/g,f=/\u2057(\d+)~/g;var d={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g};function s(i,e,n){if(i=i.replace(p,function(e,t){return 2<e.length&&!t?c+(n.push(e)-1)+"~":e}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var t,r=[],o=0;i&&(t=i.match(l))&&!t.index;){var a,u,f=/,|([[{(])|$/g;for(i=RegExp.rightContext,a=t[2]?n[t[2]].slice(1,-1).trim().replace(/\s+/g," "):t[1];u=(t=f.exec(i))[1];)s(u,f);u=i.slice(0,t.index),i=RegExp.rightContext,r[o++]=v(u,1,a)}i=o?1<o?"["+r.join(",")+'].join(" ").trim()':r[0]:v(i,e)}return i;function s(e,t){var n,r=1,o=d[e];for(o.lastIndex=t.lastIndex;n=o.exec(i);)if(n[0]===e)++r;else if(!--r)break;t.lastIndex=r?i.length:o.lastIndex}}var a='"in this?this:'+("object"!=typeof F?"global":"window")+").",g=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,h=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function v(e,t,n){var i;return e=e.replace(g,function(e,t,n,r,o){return n&&(r=i?0:r+e.length,"this"!==n&&"global"!==n&&"window"!==n?(e=t+'("'+n+a+n,r&&(i="."===(o=o[r])||"("===o||"["===o)):r&&(i=!h.test(o.slice(r)))),e}),i&&(e="try{return "+e+"}catch(e){E(e,this)}"),n?e=(i?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+n+'":""':t&&(e="function(v){"+(i?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'),e}return r.version=m.version="v2.4.2",r}(),P=function(){var u=/<yield\b/i,f=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,s=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,c=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,l={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},p=k&&k<10?t:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;function e(e,t,n){var r,o=e&&e.match(/^\s*<([-\w]+)/),i=o&&o[1].toLowerCase(),a=le("div",n&&(r=i,~d.indexOf(r)));return e=function(e,n){if(!u.test(e))return e;var r={};return n=n&&n.replace(s,function(e,t,n){return r[t]=r[t]||n,""}).trim(),e.replace(c,function(e,t,n){return r[t]||n||""}).replace(f,function(e,t){return n||t||""})}(e,t),p.test(i)?a=function(e,t,n){var r="o"===n[0],o=r?"select>":"table>";if(e.innerHTML="<"+o+t.trim()+"</"+o,o=e.firstChild,r)o.selectedIndex=-1;else{var i=l[n];i&&1===o.childElementCount&&(o=g(i,o))}return o}(a,e,i):function(e,t){if(typeof e.innerHTML!=A)e.innerHTML=t;else{var n=(new DOMParser).parseFromString(t,"application/xml");e.appendChild(e.ownerDocument.importNode(n.documentElement,!0))}}(a,e),a.stub=!0,a}return e}();function H(e,t,n){var r={};return r[e.key]=t,e.pos&&(r[e.pos]=n),r}function D(n,r){Object.keys(n.tags).forEach(function(t){var e=n.tags[t];ae(e)?Z(e,function(e){c(e,t,r)}):c(e,t,r)})}function B(e,t,n){var r,o=e._root;for(e._virts=[];o;)r=o.nextSibling,n?t.insertBefore(o,n._root):t.appendChild(o),e._virts.push(o),o=r}function K(e,t,n,r){for(var o,i=e._root,a=0;a<r;a++)o=i.nextSibling,t.insertBefore(i,n._root),i=o}function q(e,t,n,r,o,i,a){ce(t.root)||(e?i(t,r,n,a.childNodes.length):r.insertBefore(t.root,n.root))}function a(c,l,p){X(c,"each");var d,g=typeof J(c,"no-reorder")!==S||X(c,"no-reorder"),h=re(c),v=O[h]||{tmpl:function(e){{if(e.outerHTML)return e.outerHTML;var t=le("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}}(c)},m=t.test(h),y=c.parentNode,b=document.createTextNode(""),x=f(c),w="option"===h.toLowerCase(),_=[],N=[],C="VIRTUAL"==c.tagName;p=I.loopKeys(p),y.insertBefore(b,c),l.one("before-mount",function(){c.parentNode.removeChild(c),y.stub&&(y=l.root)}).on("update",function(){var t=I(p.val,l),e=document.createDocumentFragment();ae(t)||(t=(d=t||!1)?Object.keys(t).map(function(e){return H(p,e,t[e])}):[]);for(var n=0,r=t.length;n<r;n++){var o=t[n],i=g&&typeof o==j&&!d,a=N.indexOf(o),u=~a&&i?a:n,f=_[u];o=!d&&p.key?H(p,o,n):o,!i&&!f||i&&!~a||!f?((f=new V(v,{parent:l,isLoop:!0,hasImpl:!!O[h],root:m?y:c.cloneNode(),item:o},c.innerHTML)).mount(),C&&(f._root=f.root.firstChild),n!=_.length&&_[n]?(q(C,f,_[n],y,0,B,c),N.splice(n,0,o)):C?B(f,e):e.appendChild(f.root),_.splice(n,0,f),u=n):f.update(o,!0),u!==n&&i&&_[n]&&(ie(t,N[n])&&q(C,f,_[n],y,0,K,c),p.pos&&(f[p.pos]=n),_.splice(n,0,_.splice(u,1)[0]),N.splice(n,0,N.splice(u,1)[0]),!x&&f.tags&&D(f,n)),f._item=o,ne(f,"_parent",l)}if(function(e,t){for(var n,r=t.length,o=e.length;o<r;)n=t[--r],t.splice(r,1),n.unmount()}(t,_),y.insertBefore(e,b),w&&$&&!y.multiple)for(var s=0;s<y.length;s++)if(y[s].__riot1374){y.selectedIndex=s,delete y[s].__riot1374;break}x&&(l.tags[h]=_),N=t.slice()})}var u=function(e){if(!F)return{add:function(){},inject:function(){}};var t=function(){var e=le("style");ee(e,"type","text/css");var t=g("style[type=riot]");return t?(t.id&&(e.id=t.id),t.parentNode.replaceChild(e,t)):document.getElementsByTagName("head")[0].appendChild(e),e}(),n=t.styleSheet,r="";return Object.defineProperty(e,"styleNode",{value:t,writable:!0}),{add:function(e){r+=e},inject:function(){r&&(n?n.cssText+=r:t.innerHTML+=r,r="")}}}(_);function G(e,n,r,o){se(e,function(e){if(1==e.nodeType){if(e.isLoop=e.isLoop||e.parentNode&&e.parentNode.isLoop||J(e,"each")?1:0,r){var t=f(e);t&&!e.isLoop&&r.push(function(e,t,n,r){var o=new V(e,t,n),i=re(t.root),a=te(r);o.parent=a,o._parent=r,s(o,i,a),a!==r&&s(o,i,r);return t.root.innerHTML="",o}(t,{root:e,parent:n},e.innerHTML,n))}e.isLoop&&!o||function(t,n,r){var o,i=l(t),e=function(e){ie(r,i)||(o=ae(e),e?(!o||o&&!ie(e,t))&&(o?e.push(t):n[i]=[e,t]):n[i]=t)};if(!i)return;I.hasExpr(i)?n.one("mount",function(){i=l(t),e(n[i])}):e(n[i])}(e,n,[])}})}function U(e,n,r){function o(e,t,n){I.hasExpr(t)&&r.push(oe({dom:e,expr:t},n))}se(e,function(r){var e,t=r.nodeType;if(3==t&&"STYLE"!=r.parentNode.tagName&&o(r,r.nodeValue),1==t)return(e=J(r,"each"))?(a(r,n,e),!1):(Z(r.attributes,function(e){var t=e.name,n=t.split("__")[1];if(o(r,e.value,{attr:n||t,bool:n}),n)return X(r,t),!1}),!f(r)&&void 0)})}function V(n,e,t){var r,o,i=_.observable(this),a=(o=e.opts,Object.create(o||null)||{}),u=e.parent,f=e.isLoop,s=e.hasImpl,c=fe(e.item),l=[],p=[],d=e.root,g=d.tagName.toLowerCase(),h={},v=[];function m(){var n=s&&f?i:u||i;Z(d.attributes,function(e){if(!(e.name in h)){var t=e.value;a[Y(e.name)]=I.hasExpr(t)?I(t,n):t}}),Z(Object.keys(h),function(e){a[Y(e)]=I(h[e],n)})}function y(n){Z(Object.keys(n),function(e){var t=!R.test(e)&&ie(v,e);(typeof i[e]===A||t)&&(t||v.push(e),i[e]=n[e])})}function b(e){i.update(e,!0)}function x(t){if(Z(p,function(e){e[t?"mount":"unmount"]()}),u){var e=t?"on":"off";f?u[e]("unmount",i.unmount):u[e]("update",b)[e]("unmount",i.unmount)}}n.name&&d._tag&&d._tag.unmount(!0),this.isMounted=!1,d.isLoop=f,ne(d._tag=this,"_riot_id",++N),oe(this,{parent:u,root:d,opts:a},c),ne(this,"tags",{}),Z(d.attributes,function(e){var t=e.value;I.hasExpr(t)&&(h[e.name]=t)}),r=P(n.tmpl,t,f),ne(this,"update",function(e,t){var p;return e=fe(e),f&&y(i.parent),e&&W(c)&&(!function(e){for(var t in c)typeof i[t]!==A&&ue(i,t)&&(i[t]=e[t])}(e),c=e),oe(i,e),m(),i.trigger("update",e),p=i,Z(l,function(e,t){var n=e.dom,r=e.attr,o=I(e.expr,p),i=e.parent||e.dom.parentNode;if(e.bool?o=!!o:null==o&&(o=""),e.value!==o){if(e.value=o,!r)return o+="",void(i&&("TEXTAREA"===(e.parent=i).tagName?(i.value=o,k||(n.nodeValue=o)):n.nodeValue=o));var a,u,f,s;if("value"!==r)if(X(n,r),Q(o))u=o,s=p,(f=n)[r]=function(e){var t=s._parent,n=s._item;if(!n)for(;t&&!n;)n=t._item,t=t._parent;ue(e=e||F.event,"currentTarget")&&(e.currentTarget=f),ue(e,"target")&&(e.target=e.srcElement),ue(e,"which")&&(e.which=e.charCode||e.keyCode),e.item=n,!0===u.call(s,e)||/radio|check/.test(f.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||(n?te(t):s).update()};else if("if"==r){var c=e.stub,l=function(){z(n.parentNode,n,c)};o?c&&(z(c.parentNode,c,n),n.inStub=!1,ce(n)||se(n,function(e){e._tag&&!e._tag.isMounted&&(e._tag.isMounted=!!e._tag.trigger("mount"))})):(c=e.stub=c||document.createTextNode(""),n.parentNode?l():(p.parent||p).one("updated",l),n.inStub=!0)}else"show"===r?n.style.display=o?"":"none":"hide"===r?n.style.display=o?"none":"":e.bool?((n[r]=o)&&ee(n,r,r),$&&"selected"===r&&"OPTION"===n.tagName&&(n.__riot1374=o)):(0===o||o&&typeof o!==j)&&(a=T,r.slice(0,a.length)===a&&r!=E&&(r=r.slice(T.length)),ee(n,r,o));else n.value!==o&&(n.value=o,ee(n,r,o))}}),t&&i.parent?i.parent.one("updated",function(){i.trigger("updated")}):pe(function(){i.trigger("updated")}),this}),ne(this,"mixin",function(){return Z(arguments,function(e){var r,t,n=[];e=typeof e===S?_.mixin(e):e,r=Q(e)?new e:e;for(var o=Object.getPrototypeOf(r);n=n.concat(Object.getOwnPropertyNames(t||r)),t=Object.getPrototypeOf(t||r););Z(n,function(e){if("init"!=e&&"__proto__"!=e){var t=Object.getOwnPropertyDescriptor(r,e)||Object.getOwnPropertyDescriptor(o,e),n=t&&(t.get||t.set);!i.hasOwnProperty(e)&&n?Object.defineProperty(i,e,t):i[e]=Q(r[e])?r[e].bind(i):r[e]}}),r.init&&r.init.bind(i)()}),this}),ne(this,"mount",function(){m();var e=_.mixin(L);if(e)for(var t in e)e.hasOwnProperty(t)&&i.mixin(e[t]);if(i._parent&&i._parent.root.isLoop&&y(i._parent),n.fn&&n.fn.call(i,a),U(r,i,l),x(!0),n.attrs&&function(e,t){var n,r=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;for(;n=r.exec(e);)t(n[1].toLowerCase(),n[2]||n[3]||n[4])}(n.attrs,function(e,t){ee(d,e,t)}),(n.attrs||s)&&U(i.root,i,l),i.parent&&!f||i.update(c),i.trigger("before-mount"),f&&!s)d=r.firstChild;else{for(;r.firstChild;)d.appendChild(r.firstChild);d.stub&&(d=u.root)}ne(i,"root",d),f&&G(i.root,i.parent,null,!0),!i.parent||i.parent.isMounted?(i.isMounted=!0,i.trigger("mount")):i.parent.one("mount",function(){ce(i.root)||(i.parent.isMounted=i.isMounted=!0,i.trigger("mount"))})}),ne(this,"unmount",function(e){var n,t=d,r=t.parentNode,o=C.indexOf(i);if(i.trigger("before-unmount"),~o&&C.splice(o,1),r){if(u)ae((n=te(u)).tags[g])?Z(n.tags[g],function(e,t){e._riot_id==i._riot_id&&n.tags[g].splice(t,1)}):n.tags[g]=w;else for(;t.firstChild;)t.removeChild(t.firstChild);e?(X(r,M),X(r,E)):r.removeChild(t)}this._virts&&Z(this._virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),i.trigger("unmount"),x(),i.off("*"),i.isMounted=!1,delete d._tag}),G(r,this,p)}function z(e,t,n){e&&(e.insertBefore(n,t),e.removeChild(t))}function Z(e,t){for(var n,r=e?e.length:0,o=0;o<r;o++)null!=(n=e[o])&&!1===t(n,o)&&o--;return e}function Q(e){return typeof e===r||!1}function W(e){return e&&typeof e===j}function X(e,t){e.removeAttribute(t)}function Y(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function J(e,t){return e.getAttribute(t)}function ee(e,t,n){var r=i.exec(t);r&&r[1]?e.setAttributeNS(o,r[1],n):e.setAttribute(t,n)}function f(e){return e.tagName&&O[J(e,M)||J(e,E)||e.tagName.toLowerCase()]}function s(e,t,n){var r=n.tags[t];r?(ae(r)||r!==e&&(n.tags[t]=[r]),ie(n.tags[t],e)||n.tags[t].push(e)):n.tags[t]=e}function c(e,t,n){var r,o=e.parent;o&&(ae(r=o.tags[t])?r.splice(n,0,r.splice(r.indexOf(e),1)[0]):s(e,t,o))}function te(e){for(var t=e;!f(t.root)&&t.parent;)t=t.parent;return t}function ne(e,t,n,r){return Object.defineProperty(e,t,oe({value:n,enumerable:!1,writable:!1,configurable:!0},r)),e}function re(e){var t=f(e),n=J(e,"name");return n&&!I.hasExpr(n)?n:t?t.name:e.tagName.toLowerCase()}function oe(e){for(var t,n=arguments,r=1;r<n.length;++r)if(t=n[r])for(var o in t)ue(e,o)&&(e[o]=t[o]);return e}function ie(e,t){return~e.indexOf(t)}function ae(e){return Array.isArray(e)||e instanceof Array}function ue(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return typeof e[t]===A||n&&n.writable}function fe(e){if(!(e instanceof V||e&&typeof e.trigger==r))return e;var t={};for(var n in e)R.test(n)||(t[n]=e[n]);return t}function se(e,t){if(e){if(!1===t(e))return;for(e=e.firstChild;e;)se(e,t),e=e.nextSibling}}function ce(e){for(;e;){if(e.inStub)return!0;e=e.parentNode}return!1}function le(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(e)}function p(e,t){return(t||document).querySelectorAll(e)}function g(e,t){return(t||document).querySelector(e)}function l(e){return J(e,"id")||J(e,"name")}var h,v,y,pe=function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame;if(!t||/iP(ad|hone|od).*OS 6/.test(e.navigator.userAgent)){var r=0;t=function(e){var t=Date.now(),n=Math.max(16-(t-r),0);setTimeout(function(){e(r=t+n)},n)}}return t}(F||{});_.util={brackets:m,tmpl:I},_.mixin=(v=(h={})[L]={},y=0,function(e,t,n){if(W(e))_.mixin("__unnamed_"+y++,e,!0);else{var r=n?v:h;if(!t){if(typeof r[e]===A)throw new Error("Unregistered mixin: "+e);return r[e]}Q(t)?(oe(t.prototype,r[e]||{}),r[e]=t):r[e]=oe(r[e]||{},t)}}),_.tag=function(e,t,n,r,o){return Q(r)&&(o=r,/^[\w\-]+\s?=/.test(n)?(r=n,n=""):r=""),n&&(Q(n)?o=n:u.add(n)),e=e.toLowerCase(),O[e]={name:e,tmpl:t,attrs:r,fn:o},e},_.tag2=function(e,t,n,r,o){return n&&u.add(n),O[e]={name:e,tmpl:t,attrs:r,fn:o},e},_.mount=function(e,s,c){var t,n,l=[];function r(e){var t="";return Z(e,function(e){/[^-\w]/.test(e)||(e=e.trim().toLowerCase(),t+=",["+M+'="'+e+'"],['+E+'="'+e+'"]')}),t}function o(){var e=Object.keys(O);return e+r(e)}if(u.inject(),W(s)&&(c=s,s=0),t=typeof e===S?("*"===e?e=n=o():e+=r(e.split(/, */)),e?p(e):[]):e,"*"===s){if(s=n||o(),t.tagName)t=p(s,t);else{var i=[];Z(t,function(e){i.push(p(s,e))}),t=i}s=0}return function e(t){if(t.tagName){var n=J(t,M)||J(t,E);s&&n!==s&&(ee(t,M,n=s),ee(t,E,s));var r=(o=t,i=n||t.tagName.toLowerCase(),a=c,u=O[i],f=o._innerHTML=o._innerHTML||o.innerHTML,o.innerHTML="",u&&o&&(u=new V(u,{root:o,opts:a},f)),u&&u.mount&&(u.mount(),ie(C,u)||C.push(u)),u);r&&l.push(r)}else t.length&&Z(t,e);var o,i,a,u,f}(t),l},_.update=function(){return Z(C,function(e){e.update()})},_.vdom=C,_.Tag=V,typeof exports===j?module.exports=_:typeof define===r&&typeof define.amd!==A?define(function(){return _}):F.riot=_}("undefined"!=typeof window?window:void 0);
