{"version":3,"file":"parallax.min.js","sources":["../src/browser.js","../src/consts.js","../src/utils.js","../src/Parallax.js"],"sourcesContent":["/* eslint-disable no-new-func, no-nested-ternary */\n\nlet win;\n\nif (typeof window === \"undefined\") {\n\t// window is undefined in node.js\n\twin = {\n\t\tdocument: {},\n\t\tnavigator: {\n\t\t\tuserAgent: \"\",\n\t\t},\n\t};\n} else {\n\twin = window;\n}\n/* eslint-enable no-new-func, no-nested-ternary */\n\nexport {win as window};\nexport const document = win.document;\n","import {window, document} from \"./browser\";\n\nconst ua = window.navigator.userAgent;\n\nexport const SUPPORT_COMPUTEDSTYLE = !!(\"getComputedStyle\" in window);\nexport const SUPPORT_ADDEVENTLISTENER = !!(\"addEventListener\" in document);\nexport const SUPPORT_PASSIVE = (() => {\n\tlet supportsPassiveOption = false;\n\n\ttry {\n\t\tif (SUPPORT_ADDEVENTLISTENER && Object.defineProperty) {\n\t\t\tdocument.addEventListener(\"test\", null, Object.defineProperty({},\n\t\t\t\t\"passive\", {\n\t\t\t\t\tget() {\n\t\t\t\t\t\tsupportsPassiveOption = true;\n\t\t\t\t\t},\n\t\t\t\t}));\n\t\t}\n\t} catch (e) {}\n\treturn supportsPassiveOption;\n})();\n\nexport const IS_IE = /MSIE|Trident|Windows Phone|Edge/.test(ua);\nexport const IS_IOS = /iPhone|iPad/.test(ua);\nexport const IS_ANDROID2 = /Android 2\\./.test(ua);\nexport const CONTAINER_CLASSNAME = \"_eg-infinitegrid-container_\";\nexport const IGNORE_CLASSNAME = \"_eg-infinitegrid-ignore_\";\nexport const TRANSITION_NAME = \"_INFINITEGRID_TRANSITION\";\n\nexport const APPEND = true;\nexport const PREPEND = false;\nexport const VERTICAL = \"vertical\";\nexport const HORIZONTAL = \"horizontal\";\nexport const CACHE = true;\nexport const NO_CACHE = false;\nexport const TRUSTED = true;\nexport const NO_TRUSTED = false;\nexport const MULTI = true;\nexport const SINGLE = false;\nexport const DUMMY_POSITION = -100000;\nexport const GROUPKEY_ATT = \"data-groupkey\";\n\nexport const DEFAULT_OPTIONS = {\n\thorizontal: false,\n\tmargin: 0,\n};\n\nexport const agent = ua.toLowerCase();\nexport const isMobile = /mobi|ios|android/.test(agent);\n\nexport const ALIGN = {\n\tSTART: \"start\",\n\tCENTER: \"center\",\n\tEND: \"end\",\n\tJUSTIFY: \"justify\",\n};\n\nexport const IDLE = 0;\nexport const LOADING_APPEND = 1;\nexport const LOADING_PREPEND = 2;\nexport const PROCESSING = 4;\n\n\nconst webkit = /applewebkit\\/([\\d|.]*)/g.exec(agent);\n\nexport const WEBKIT_VERSION = (webkit && parseInt(webkit[1], 10)) || 0;\nexport const DEFENSE_BROWSER = (WEBKIT_VERSION && WEBKIT_VERSION < 537);\n\n\nexport const [TRANSFORM, TRANSITION, TRANSITION_END] = (function() {\n\tconst properties = {\n\t\ttransitionend: \"\",\n\t\twebkitTransitionEnd: \"-webkit-\",\n\t\toTransitionEnd: \"-o-\",\n\t\tmozTransitionEnd: \"-moz-\",\n\t};\n\n\tfor (const property in properties) {\n\t\tconst prefix = properties[property];\n\n\t\tif (`on${property.toLowerCase()}` in window) {\n\t\t\treturn [`${prefix}transform`, `${prefix}transition`, property];\n\t\t}\n\t}\n\treturn [];\n})();\n","import {window, document} from \"./browser\";\nimport {\n\tSUPPORT_COMPUTEDSTYLE,\n\tSUPPORT_ADDEVENTLISTENER,\n\tSUPPORT_PASSIVE,\n\tVERTICAL,\n\tHORIZONTAL,\n\tDEFAULT_OPTIONS,\n} from \"./consts\";\n\nexport function toArray(nodes) {\n\t// SCRIPT5014 in IE8\n\tconst array = [];\n\n\tif (nodes) {\n\t\tfor (let i = 0, len = nodes.length; i < len; i++) {\n\t\t\tarray.push(nodes[i]);\n\t\t}\n\t}\n\treturn array;\n}\nexport function matchHTML(html) {\n\treturn html.match(/^<([A-z]+)\\s*([^>]*)>/);\n}\n/**\n * Select or create element\n * @param {String|HTMLElement|jQuery} param\n *  when string given is as HTML tag, then create element\n *  otherwise it returns selected elements\n * @param {Boolean} multi\n * @returns {HTMLElement}\n */\nexport function $(param, multi = false) {\n\tlet el;\n\n\tif (typeof param === \"string\") { // String (HTML, Selector)\n\t\t// check if string is HTML tag format\n\t\tconst match = matchHTML(param);\n\n\t\t// creating element\n\t\tif (match) { // HTML\n\t\t\tconst dummy = document.createElement(\"div\");\n\n\t\t\tdummy.innerHTML = param;\n\t\t\tel = dummy.childNodes;\n\t\t} else { // Selector\n\t\t\tel = document.querySelectorAll(param);\n\t\t}\n\t\tif (multi) {\n\t\t\tel = toArray(el);\n\t\t} else {\n\t\t\tel = (el && el.length > 0 && el[0]) || undefined;\n\t\t}\n\t} else if (param === window) { // window\n\t\tel = param;\n\t} else if (param.nodeName &&\n\t\t(param.nodeType === 1 || param.nodeType === 9)) { // HTMLElement, Document\n\t\tel = param;\n\t} else if ((typeof window.jQuery === \"function\" && param instanceof window.jQuery) ||\n\t\tparam.constructor.prototype.jquery) { // jQuery\n\t\tel = $(multi ? param.toArray() : param.get(0), multi);\n\t} else if (Array.isArray(param)) {\n\t\tel = param.map(v => $(v));\n\t\tif (!multi) {\n\t\t\tel = el.length >= 1 ? el[0] : undefined;\n\t\t}\n\t}\n\treturn el;\n}\nexport function addEvent(element, type, handler, eventListenerOptions) {\n\tif (SUPPORT_ADDEVENTLISTENER) {\n\t\tlet options = eventListenerOptions || false;\n\n\t\tif (typeof eventListenerOptions === \"object\") {\n\t\t\toptions = SUPPORT_PASSIVE ? eventListenerOptions : false;\n\t\t}\n\t\telement.addEventListener(type, handler, options);\n\t} else if (element.attachEvent) {\n\t\telement.attachEvent(`on${type}`, handler);\n\t} else {\n\t\telement[`on${type}`] = handler;\n\t}\n}\nexport function removeEvent(element, type, handler) {\n\tif (element.removeEventListener) {\n\t\telement.removeEventListener(type, handler, false);\n\t} else if (element.detachEvent) {\n\t\telement.detachEvent(`on${type}`, handler);\n\t} else {\n\t\telement[`on${type}`] = null;\n\t}\n}\nexport function addOnceEvent(element, type, handler, eventListenerOptions) {\n\tconst callback = e => {\n\t\tremoveEvent(element, type, callback);\n\t\thandler(e);\n\t};\n\n\taddEvent(element, type, callback, eventListenerOptions);\n}\nexport function scroll(el, horizontal = false) {\n\tconst prop = `scroll${horizontal ? \"Left\" : \"Top\"}`;\n\n\tif (el === window) {\n\t\treturn window[horizontal ? \"pageXOffset\" : \"pageYOffset\"] || document.body[prop] || document.documentElement[prop];\n\t} else {\n\t\treturn el[prop];\n\t}\n}\nexport function scrollTo(el, x, y) {\n\tif (el === window) {\n\t\tel.scroll(x, y);\n\t} else {\n\t\tel.scrollLeft = x;\n\t\tel.scrollTop = y;\n\t}\n}\nexport function scrollBy(el, x, y) {\n\tif (el === window) {\n\t\tel.scrollBy(x, y);\n\t} else {\n\t\tel.scrollLeft += x;\n\t\tel.scrollTop += y;\n\t}\n}\nexport function getStyles(el) {\n\treturn (SUPPORT_COMPUTEDSTYLE ?\n\t\twindow.getComputedStyle(el) : el.currentStyle) || {};\n}\nfunction _getSize(el, name, isOffset) {\n\tif (el === window) { // WINDOW\n\t\treturn window[`inner${name}`] || document.body[`client${name}`];\n\t} else if (el.nodeType === 9) { // DOCUMENT_NODE\n\t\tconst doc = el.documentElement;\n\n\t\treturn Math.max(\n\t\t\tel.body[`scroll${name}`], doc[`scroll${name}`],\n\t\t\tel.body[`offset${name}`], doc[`offset${name}`],\n\t\t\tdoc[`client${name}`]\n\t\t);\n\t} else { // NODE\n\t\tlet size = 0;\n\n\t\tif (isOffset) {\n\t\t\tconst clientRect = el.getBoundingClientRect();\n\n\t\t\tsize = name === \"Width\" ? clientRect.right - clientRect.left : clientRect.bottom - clientRect.top;\n\t\t} else {\n\t\t\tsize = el[`client${name}`] || el[`offset${name}`];\n\t\t}\n\t\treturn parseFloat(size || getStyles(el)[name.toLowerCase()]) || 0;\n\t}\n}\nexport function innerWidth(el) {\n\treturn _getSize(el, \"Width\", false);\n}\nexport function innerHeight(el) {\n\treturn _getSize(el, \"Height\", false);\n}\nexport function outerWidth(el) {\n\treturn _getSize(el, \"Width\", true);\n}\nexport function outerHeight(el) {\n\treturn _getSize(el, \"Height\", true);\n}\nexport function getSize(el) {\n\treturn {\n\t\twidth: outerWidth(el),\n\t\theight: outerHeight(el),\n\t};\n}\nexport const STYLE = {\n\tvertical: {\n\t\tpos1: \"top\",\n\t\tendPos1: \"bottom\",\n\t\tsize1: \"height\",\n\t\tpos2: \"left\",\n\t\tendPos2: \"right\",\n\t\tsize2: \"width\",\n\t},\n\thorizontal: {\n\t\tpos1: \"left\",\n\t\tendPos1: \"right\",\n\t\tsize1: \"width\",\n\t\tpos2: \"top\",\n\t\tendPos2: \"bottom\",\n\t\tsize2: \"height\",\n\t},\n};\n\nexport function getStyleNames(isHorizontal) {\n\treturn STYLE[isHorizontal ? HORIZONTAL : VERTICAL];\n}\n\nexport function assignOptions(defaultOptions, options) {\n\treturn Object.assign({},\n\t\tDEFAULT_OPTIONS,\n\t\tdefaultOptions,\n\t\toptions);\n}\n\nexport function toZeroArray(outline) {\n\tif (!outline || !outline.length) {\n\t\treturn [0];\n\t}\n\treturn outline;\n}\nexport function cloneItems(items) {\n\treturn items.map(item => Object.assign({}, item));\n}\nexport function isWindow(el) {\n\treturn el === window;\n}\n\nexport function fill(arr, value) {\n\tconst length = arr.length;\n\n\tfor (let i = length - 1; i >= 0; --i) {\n\t\tarr[i] = value;\n\t}\n\n\treturn arr;\n}\n\nexport function isUndefined(target) {\n\treturn typeof target === \"undefined\";\n}\n","import {ALIGN, isMobile} from \"./consts\";\nimport {$, isWindow} from \"./utils\";\n\nconst style = {\n\t\"vertical\": {position: \"top\", size: \"height\", cammelSize: \"Height\", coordinate: \"Y\"},\n\t\"horizontal\": {position: \"left\", size: \"width\", cammelSize: \"Width\", coordinate: \"X\"},\n};\nconst {START, CENTER} = ALIGN;\nconst TRANSFORM = (function() {\n\tconst bodyStyle = (document.head || document.getElementsByTagName(\"head\")[0]).style;\n\tconst target = [\"transform\", \"webkitTransform\", \"msTransform\", \"mozTransform\"];\n\n\tfor (let i = 0, len = target.length; i < len; i++) {\n\t\tif (target[i] in bodyStyle) {\n\t\t\treturn target[i];\n\t\t}\n\t}\n\treturn \"\";\n})();\n\n/**\n * @classdesc Parallax is a displacement or difference in the apparent position of an object viewed along two different lines of sight. You can apply parallax by scrolling the image and speed of the item.\n * @ko Parallax는 서로 다른 두 개의 시선에서 바라본 물체의 외관상 위치의 변위 또는 차이입니다. 스크롤에 따라 이미지와 아이템의 속도를 차이를 줌으로써 parallax을 적용할 수 있습니다.\n * @class eg.Parallax\n * @param {Element|String} [root=window] Scrolling target. If you scroll in the body, set window. 스크롤하는 대상. 만약 body에서 스크롤하면 window로 설정한다.\n * @param {Object} [options] The option object of eg.Parallax module <ko>eg.Parallax 모듈의 옵션 객체</ko>\n * @param {Boolean} [options.horizontal=false] Direction of the scroll movement (false: vertical, true: horizontal) <ko>스크롤 이동 방향 (false: 세로방향, true: 가로방향)</ko>\n * @param {Element|String} [options.container=null] Container wrapping items. If root and container have no gaps, do not set option. <ko> 아이템들을 감싸고 있는 컨테이너. 만약 root와 container간의 차이가 없으면, 옵션을 설정하지 않아도 된다.</ko>\n * @param {String} [options.selector=\"img\"] The selector of the image to apply the parallax in the item <ko> 아이템안에 있는 parallax를 적용할 이미지의 selector </ko>\n * @param {Boolean} [options.strength=1] Dimensions that indicate the sensitivity of parallax. The higher the strength, the faster.\n * @param {Boolean} [options.center=0] The middle point of parallax. The top is 1 and the bottom is -1. <ko> parallax가 가운데로 오는 점. 상단이 1이고 하단이 -1이다. </ko>\n * @param {Boolean} [options.range=[-1, 1]] Range to apply the parallax. The top is 1 and the bottom is -1. <ko> parallax가 적용되는 범위, 상단이 1이고 하단이 -1이다. </ko>\n * @param {Boolean} [options.align=\"start\"] The alignment of the image in the item. (\"start\" : top or left, \"center\": middle) <ko> 아이템안의 이미지의 정렬 </ko>\n * @example\n```\n<script>\n// isOverflowScroll: false\nvar parallax = new eg.Parallax(window, {\n\tcontainer: \".container\",\n\tselector: \"img.parallax\",\n\tstrength: 0.8,\n\tcenter: 0,\n\trange: [-1, 1],\n\talign: \"center\",\n\thorizontal: true,\n});\n\n// isOverflowScroll: ture\nvar parallax = new eg.Parallax(\".container\", {\n\tselector: \"img.parallax\",\n\tstrength: 0.8,\n\tcenter: 0,\n\trange: [-1, 1],\n\talign: \"center\",\n\thorizontal: true,\n});\n\n// item interface\nvar item = {\n\t// original size\n\tsize: {\n\t\twidth: 100,\n\t\theight: 100,\n\t},\n\t// view size\n\trect: {\n\t\ttop: 100,\n\t\tleft: 100,\n\t\twidth: 100,\n\t\theight: 100,\n\t}\n};\n</script>\n```\n **/\nclass Parallax {\n\tconstructor(root = window, options = {}) {\n\t\tthis.options = Object.assign({\n\t\t\tcontainer: null,\n\t\t\tselector: \"img\",\n\t\t\tstrength: 1,\n\t\t\tcenter: 0,\n\t\t\trange: [-1, 1],\n\t\t\talign: START,\n\t\t\thorizontal: false,\n\t\t}, options);\n\t\tthis._root = $(root);\n\t\tthis._container = this.options.container && $(this.options.container);\n\t\tthis._rootSize = 0;\n\t\tthis._containerPosition = 0;\n\t\tthis._style = style[this.options.horizontal ? \"horizontal\" : \"vertical\"];\n\t\tthis.resize();\n\t}\n\t_checkParallaxItem(element) {\n\t\tif (!element) {\n\t\t\treturn;\n\t\t}\n\t\tconst selector = this.options.selector;\n\n\t\tif (!element.__IMAGE__) {\n\t\t\tconst img = element.querySelector(selector);\n\n\t\t\telement.__IMAGE__ = img || -1;\n\t\t\tif (element.__IMAGE__ === -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telement.__BOX__ = img.parentNode;\n\t\t}\n\t\tif (element.__IMAGE__ === -1) {\n\t\t\treturn;\n\t\t}\n\t\tconst sizeName = this._style.cammelSize;\n\n\t\telement.__IMAGE__.__SIZE__ = element.__IMAGE__[`offset${sizeName}`];\n\t\telement.__BOX__.__SIZE__ = element.__BOX__[`offset${sizeName}`];\n\t}\n\t/**\n\t * As the browser is resized, the gaps between the root and the container and the size of the items are updated.\n\t * @ko 브라우저의 크기가 변경됨으로 써 root와 container의 간격과 아이템들의 크기를 갱신한다.\n\t * @method eg.Parallax#resize\n\t * @param {Array} [items = []] Items to apply parallax. It does not apply if it is not in visible range. <ko>parallax를 적용할 아이템들. 가시거리에 존재하지 않으면 적용이 안된다.</ko>\n\t * @return {eg.Parallax} An instance of a module itself<ko>모듈 자신의 인스턴스</ko>\n\t * @example\n```js\nwindow.addEventListener(\"resize\", function (e) {\n\tparallax.resize(items);\n});\n```\n\t */\n\tresize(items = []) {\n\t\tconst root = this._root;\n\t\tconst container = this._container;\n\t\tconst positionName = this._style.position;\n\t\tconst sizeName = this._style.cammelSize;\n\n\t\tif (!container || root === container) {\n\t\t\tthis._containerPosition = 0;\n\t\t} else {\n\t\t\tconst rootRect = (isWindow(root) ? document.body : root).getBoundingClientRect();\n\t\t\tconst containertRect = container.getBoundingClientRect();\n\n\t\t\tthis._containerPosition = containertRect[positionName] - rootRect[positionName];\n\t\t}\n\t\tthis._rootSize = isWindow(root) ? window[`inner${sizeName}`] || document.documentElement[`client${sizeName}`] : root[`client${sizeName}`];\n\t\tif (isMobile & isWindow(root)) {\n\t\t\tconst bodyWidth = document.body.offsetWidth || document.documentElement.offsetWidth;\n\t\t\tconst windowWidth = window.innerWidth;\n\n\t\t\tthis._rootSize = this._rootSize / (bodyWidth / windowWidth);\n\t\t}\n\t\titems.forEach(item => {\n\t\t\tthis._checkParallaxItem(item.el);\n\t\t});\n\n\t\treturn this;\n\t}\n\t/**\n\t * Scrolls the image in the item by a parallax.\n\t * @ko 스크롤하면 아이템안의 이미지를 시차적용시킨다.\n\t * @method eg.Parallax#refresh\n\t * @param {Array} [items = []] Items to apply parallax. It does not apply if it is not in visible range. <ko>parallax를 적용할 아이템들. 가시거리에 존재하지 않으면 적용이 안된다.</ko>\n\t * @param {Number} [scrollPositionStart = 0] The scroll position.\n\t * @return {eg.Parallax} An instance of a module itself<ko>모듈 자신의 인스턴스</ko>\n\t * @example\n```js\ndocument.body.addEventListener(\"scroll\", function (e) {\n\tparallax.refresh(items, e.scrollTop);\n});\n```\n\t */\n\trefresh(items = [], scrollPositionStart = 0) {\n\t\tconst styleNames = this._style;\n\t\tconst positionName = styleNames.position;\n\t\tconst coordinateName = styleNames.coordinate;\n\t\tconst sizeName = styleNames.size;\n\t\tconst options = this.options;\n\t\tconst {strength, center, range, align} = options;\n\t\tconst rootSize = this._rootSize;\n\t\tconst scrollPositionEnd = scrollPositionStart + rootSize;\n\t\tconst containerPosition = this._containerPosition;\n\n\t\titems.forEach(item => {\n\t\t\tif (!item.rect || !item.size || !item.el) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst position = containerPosition + item.rect[positionName];\n\t\t\tconst itemSize = item.rect[sizeName] || item.size[sizeName];\n\n\t\t\t// check item is in container.\n\t\t\tif (scrollPositionStart > position + itemSize ||\n\t\t\t\tscrollPositionEnd < position) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst el = item.el;\n\n\t\t\tif (!el.__IMAGE__) {\n\t\t\t\tthis._checkParallaxItem(el);\n\t\t\t}\n\t\t\tif (el.__IMAGE__ === -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst imageElement = el.__IMAGE__;\n\t\t\tconst boxElement = el.__BOX__;\n\t\t\tconst boxSize = boxElement.__SIZE__;\n\t\t\tconst imageSize = imageElement.__SIZE__;\n\n\t\t\t// no parallax\n\t\t\tif (boxSize >= imageSize) {\n\t\t\t\t// remove transform style\n\t\t\t\timageElement.style[TRANSFORM] = \"\";\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// if area's position is center, ratio is 0.\n\t\t\t// if area is hidden at the top, ratio is 1.\n\t\t\t// if area is hidden at the bottom, ratio is -1.\n\t\t\tconst imagePosition = position + boxSize / 2;\n\t\t\tlet ratio = (scrollPositionStart + rootSize / 2 -\n\t\t\t\t(rootSize + boxSize) / 2 * center - imagePosition) /\n\t\t\t\t(rootSize + boxSize) * 2 * strength;\n\n\t\t\t// if ratio is out of the range of -1 and 1, show empty space.\n\t\t\tratio = Math.max(Math.min(ratio, range[1]), range[0]);\n\n\t\t\t// dist is the position when thumnail's image is centered.\n\t\t\tconst dist = (boxSize - imageSize) / 2;\n\t\t\tlet translate = dist * (1 - ratio);\n\n\t\t\tif (align === CENTER) {\n\t\t\t\ttranslate -= dist;\n\t\t\t}\n\n\t\t\timageElement.__TRANSLATE__ = translate;\n\t\t\timageElement.__RATIO__ = ratio;\n\t\t\timageElement.style[TRANSFORM] = `translate${coordinateName}(${translate}px)`;\n\t\t});\n\t\treturn this;\n\t}\n}\n\nexport default Parallax;\n"],"names":["win","document","window","navigator","userAgent","ua","SUPPORT_ADDEVENTLISTENER","agent","supportsPassiveOption","Object","defineProperty","addEventListener","get","e","test","toLowerCase","isMobile","ALIGN","webkit","exec","parseInt","properties","transitionend","webkitTransitionEnd","oTransitionEnd","mozTransitionEnd","property","prefix","$","param","multi","el","match","dummy","createElement","innerHTML","childNodes","querySelectorAll","nodes","array","i","len","length","push","toArray","undefined","nodeName","nodeType","jQuery","constructor","prototype","jquery","Array","isArray","map","v","isWindow","style","position","size","cammelSize","coordinate","START","CENTER","TRANSFORM","bodyStyle","head","getElementsByTagName","target","root","options","_extends","container","selector","strength","center","range","align","horizontal","_root","_container","this","_rootSize","_containerPosition","_style","resize","_checkParallaxItem","element","__IMAGE__","img","querySelector","__BOX__","parentNode","sizeName","__SIZE__","items","positionName","rootRect","body","getBoundingClientRect","containertRect","documentElement","bodyWidth","offsetWidth","windowWidth","innerWidth","forEach","item","_this","refresh","scrollPositionStart","styleNames","coordinateName","rootSize","scrollPositionEnd","containerPosition","rect","_this2","imageElement","boxSize","imageSize","ratio","dist","translate","Math","max","min","__TRANSLATE__","__RATIO__"],"mappings":"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"}