/*
Copyright (c) 2017 NAVER Corp.
@egjs/infinitegrid project is licensed under the MIT license

@egjs/infinitegrid JavaScript library
https://github.com/naver/egjs-infinitegrid

@version 3.5.0
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t.eg=t.eg||{},t.eg.Parallax=e())}(this,function(){"use strict";function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var o,r=(o="undefined"==typeof window?{document:{},navigator:{userAgent:""}}:window).document,t=o.navigator.userAgent,e=!!("addEventListener"in r),i=(function(){var t=!1;try{e&&Object.defineProperty&&r.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(t){}}(),/MSIE|Trident|Windows Phone|Edge/.test(t),/iPhone|iPad/.test(t),/Android 2\./.test(t),t.toLowerCase()),d=/mobi|ios|android/.test(i),s="start",a="center",_=/applewebkit\/([\d|.]*)/g.exec(i),c=(_&&parseInt(_[1],10),function(){var t={transitionend:"",webkitTransitionEnd:"-webkit-",oTransitionEnd:"-o-",mozTransitionEnd:"-moz-"};for(var e in t){var n=t[e];if("on"+e.toLowerCase()in o)return[n+"transform",n+"transition",e]}return[]}());c[0],c[1],c[2];function f(t,e){var n;if(void 0===e&&(e=!1),"string"==typeof t){if(t.match(/^<([A-z]+)\s*([^>]*)>/)){var i=r.createElement("div");i.innerHTML=t,n=i.childNodes}else n=r.querySelectorAll(t);n=e?function(t){var e=[];if(t)for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e}(n):n&&0<n.length&&n[0]||void 0}else t===o?n=t:!t.nodeName||1!==t.nodeType&&9!==t.nodeType?"function"==typeof o.jQuery&&t instanceof o.jQuery||t.constructor.prototype.jquery?n=f(e?t.toArray():t.get(0),e):Array.isArray(t)&&(n=t.map(function(t){return f(t)}),e||(n=1<=n.length?n[0]:void 0)):n=t;return n}function h(t){return t===o}var l={vertical:{position:"top",size:"height",cammelSize:"Height",coordinate:"Y"},horizontal:{position:"left",size:"width",cammelSize:"Width",coordinate:"X"}},u=s,z=a,A=function(){for(var t=(document.head||document.getElementsByTagName("head")[0]).style,e=["transform","webkitTransform","msTransform","mozTransform"],n=0,i=e.length;n<i;n++)if(e[n]in t)return e[n];return""}();return function(){function t(t,e){void 0===t&&(t=window),void 0===e&&(e={}),this.options=n({container:null,selector:"img",strength:1,center:0,range:[-1,1],align:u,horizontal:!1},e),this._root=f(t),this._container=this.options.container&&f(this.options.container),this._rootSize=0,this._containerPosition=0,this._style=l[this.options.horizontal?"horizontal":"vertical"],this.resize()}var e=t.prototype;return e._checkParallaxItem=function(t){if(t){var e=this.options.selector;if(!t.__IMAGE__){var n=t.querySelector(e);if(t.__IMAGE__=n||-1,-1===t.__IMAGE__)return;t.__BOX__=n.parentNode}if(-1!==t.__IMAGE__){var i=this._style.cammelSize;t.__IMAGE__.__SIZE__=t.__IMAGE__["offset"+i],t.__BOX__.__SIZE__=t.__BOX__["offset"+i]}}},e.resize=function(t){var e=this;void 0===t&&(t=[]);var n=this._root,i=this._container,o=this._style.position,r=this._style.cammelSize;if(i&&n!==i){var s=(h(n)?document.body:n).getBoundingClientRect(),a=i.getBoundingClientRect();this._containerPosition=a[o]-s[o]}else this._containerPosition=0;if(this._rootSize=h(n)?window["inner"+r]||document.documentElement["client"+r]:n["client"+r],d&h(n)){var _=document.body.offsetWidth||document.documentElement.offsetWidth,c=window.innerWidth;this._rootSize=this._rootSize/(_/c)}return t.forEach(function(t){e._checkParallaxItem(t.el)}),this},e.refresh=function(t,c){var d=this;void 0===t&&(t=[]),void 0===c&&(c=0);var e=this._style,f=e.position,h=e.coordinate,l=e.size,n=this.options,u=n.strength,m=n.center,v=n.range,p=n.align,y=this._rootSize,g=c+y,E=this._containerPosition;return t.forEach(function(t){if(t.rect&&t.size&&t.el){var e=E+t.rect[f];if(!(e+(t.rect[l]||t.size[l])<c||g<e)){var n=t.el;if(n.__IMAGE__||d._checkParallaxItem(n),-1!==n.__IMAGE__){var i=n.__IMAGE__,o=n.__BOX__.__SIZE__,r=i.__SIZE__;if(r<=o)i.style[A]="";else{var s=(c+y/2-(y+o)/2*m-(e+o/2))/(y+o)*2*u,a=(o-r)/2,_=a*(1-(s=Math.max(Math.min(s,v[1]),v[0])));p===z&&(_-=a),i.__TRANSLATE__=_,i.__RATIO__=s,i.style[A]="translate"+h+"("+_+"px)"}}}}}),this},t}()});
//# sourceMappingURL=parallax.min.js.map
