function kvLookup(t,e,n,o,i,a){var r=o,l=!1;if(null!=t&&(null!=n&&"object"==typeof n&&t in n?(r=n[t],l=!0):null!=e&&"object"==typeof e&&t in e?(r=e[t],l=!0):r=o,!0===l&&null!=i))switch(i){case"int":r=parseInt(r,10);break;case"float":r=parseFloat(r)}return r}function getColor(t,e,n,o,i){var a,r,l,c,u,m,f,g,s,d,p,h,v,x,b=i&&i.ranges&&0<i.ranges.length;o=o||b;if(b){!0===i.percents&&(t=100*e);for(var k=0;k<i.ranges.length;k++)if(t>=i.ranges[k].lo&&t<=i.ranges[k].hi)return i.ranges[k].color}if(1===(a=n.length))return n[0];for(r=o?1/a:1/(a-1),l=[],k=0;k<n.length;k++)c=o?r*(k+1):r*k,u=parseInt(cutHex(n[k]).substring(0,2),16),m=parseInt(cutHex(n[k]).substring(2,4),16),f=parseInt(cutHex(n[k]).substring(4,6),16),l[k]={pct:c,color:{r:u,g:m,b:f}};if(0===e)return"rgb("+[l[0].color.r,l[0].color.g,l[0].color.b].join(",")+")";for(var y=0;y<l.length;y++)if(e<=l[y].pct)return o?"rgb("+[l[y].color.r,l[y].color.g,l[y].color.b].join(",")+")":(g=l[y-1],d=(s=l[y]).pct-g.pct,h=1-(p=(e-g.pct)/d),v=p,"rgb("+[(x={r:Math.floor(g.color.r*h+s.color.r*v),g:Math.floor(g.color.g*h+s.color.g*v),b:Math.floor(g.color.b*h+s.color.b*v)}).r,x.g,x.b].join(",")+")")}function setDy(t,e,n){(!ie||9<ie)&&t.node.firstChild.attributes.dy&&(t.node.firstChild.attributes.dy.value=0)}function getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}function cutHex(t){return"#"==t.charAt(0)?t.substring(1,7):t}function humanFriendlyNumber(t,e){var n,o,i;for(n=Math.pow(10,e),i=" KMGTPE",o=0,1e3;(1e3<=t||t<=-1e3)&&++o<i.length;)t/=1e3;return o=i.length<=o?i.length-1:o,Math.round(t*n)/n+i[o]}function formatNumber(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function getStyle(t,e){var n="";return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,"").getPropertyValue(e):t.currentStyle&&(e=e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()}),n=t.currentStyle[e]),n}function onCreateElementNsReady(t){void 0!==document.createElementNS?t():setTimeout(function(){onCreateElementNsReady(t)},100)}JustGage=function(t){var e,w=this;if(null==t)return console.log("* justgage: Make sure to pass options to the constructor!"),!1;if(null!==t.id&&void 0!==t.id){if(!(e=document.getElementById(t.id)))return console.log("* justgage: No element with id : %s found",t.id),!1}else{if(null===t.parentNode||void 0===t.parentNode)return console.log("* justgage: Make sure to pass the existing element id or parentNode to the constructor."),!1;e=t.parentNode}var n,o,i,a,r,l,c,u,m,f,g,s,d,p,h,v,x,b,k,y=e.dataset?e.dataset:{},M=null!==t.defaults&&void 0!==t.defaults&&t.defaults;!1!==M&&delete(t=extend({},t,M)).defaults,w.config={id:t.id,value:kvLookup("value",t,y,0,"float"),defaults:kvLookup("defaults",t,y,0,!1),parentNode:kvLookup("parentNode",t,y,null),width:kvLookup("width",t,y,null),height:kvLookup("height",t,y,null),valueFontColor:kvLookup("valueFontColor",t,y,"#010101"),valueFontFamily:kvLookup("valueFontFamily",t,y,"Arial"),symbol:kvLookup("symbol",t,y,""),min:kvLookup("min",t,y,0,"float"),minTxt:kvLookup("minTxt",t,y,!1),max:kvLookup("max",t,y,100,"float"),maxTxt:kvLookup("maxTxt",t,y,!1),reverse:kvLookup("reverse",t,y,!1),humanFriendlyDecimal:kvLookup("humanFriendlyDecimal",t,y,0),textRenderer:kvLookup("textRenderer",t,y,null),onAnimationEnd:kvLookup("onAnimationEnd",t,y,null),gaugeWidthScale:kvLookup("gaugeWidthScale",t,y,1),gaugeColor:kvLookup("gaugeColor",t,y,"#edebeb"),label:kvLookup("label",t,y,""),labelFontColor:kvLookup("labelFontColor",t,y,"#b3b3b3"),shadowOpacity:kvLookup("shadowOpacity",t,y,.2),shadowSize:kvLookup("shadowSize",t,y,5),shadowVerticalOffset:kvLookup("shadowVerticalOffset",t,y,3),levelColors:kvLookup("levelColors",t,y,["#a9d70b","#f9c802","#ff0000"],"array",","),startAnimationTime:kvLookup("startAnimationTime",t,y,700),startAnimationType:kvLookup("startAnimationType",t,y,">"),refreshAnimationTime:kvLookup("refreshAnimationTime",t,y,700),refreshAnimationType:kvLookup("refreshAnimationType",t,y,">"),donutStartAngle:kvLookup("donutStartAngle",t,y,90),valueMinFontSize:kvLookup("valueMinFontSize",t,y,16),labelMinFontSize:kvLookup("labelMinFontSize",t,y,10),minLabelMinFontSize:kvLookup("minLabelMinFontSize",t,y,10),maxLabelMinFontSize:kvLookup("maxLabelMinFontSize",t,y,10),hideValue:kvLookup("hideValue",t,y,!1),hideMinMax:kvLookup("hideMinMax",t,y,!1),showInnerShadow:kvLookup("showInnerShadow",t,y,!1),humanFriendly:kvLookup("humanFriendly",t,y,!1),noGradient:kvLookup("noGradient",t,y,!1),donut:kvLookup("donut",t,y,!1),relativeGaugeSize:kvLookup("relativeGaugeSize",t,y,!1),counter:kvLookup("counter",t,y,!1),decimals:kvLookup("decimals",t,y,0),customSectors:kvLookup("customSectors",t,y,{}),formatNumber:kvLookup("formatNumber",t,y,!1),pointer:kvLookup("pointer",t,y,!1),pointerOptions:kvLookup("pointerOptions",t,y,{})},w.config.value>w.config.max&&(w.config.value=w.config.max),w.config.value<w.config.min&&(w.config.value=w.config.min),w.originalValue=kvLookup("value",t,y,-1,"float"),null!==w.config.id&&null!==document.getElementById(w.config.id)?w.canvas=Raphael(w.config.id,"100%","100%"):null!==w.config.parentNode&&(w.canvas=Raphael(w.config.parentNode,"100%","100%")),o=!0===w.config.relativeGaugeSize?!0===w.config.donut?(w.canvas.setViewBox(0,0,200,200,!0),n=200):(w.canvas.setViewBox(0,0,200,100,!0),n=200,100):null!==w.config.width&&null!==w.config.height?(n=w.config.width,w.config.height):null!==w.config.parentNode?(w.canvas.setViewBox(0,0,200,100,!0),n=200,100):(n=1*getStyle(document.getElementById(w.config.id),"width").slice(0,-2),1*getStyle(document.getElementById(w.config.id),"height").slice(0,-2)),k=(b=(x=!0===w.config.donut?(o<n?i=a=o:a=i=n,c=(o-a)/2,u=16<a/6.4?a/5.4:18,s=m=(l=(n-i)/2)+i/2,d=(f=""!==w.config.label?c+a/1.85:c+a/1.7)+(g=10<a/16?a/16:10),p=10<a/16?a/16:10,h=l+i/10+i/6.666666666666667*w.config.gaugeWidthScale/2,v=d,10<a/16?a/16:10):(o<n?n<(i=2*(a=o))&&(i/=r=i/n,a/=r):a=n<o?(i=n)/2:.5*(i=n),l=(n-i)/2,c=(o-a)/2,u=a/6.5>w.config.valueMinFontSize?a/6.5:w.config.valueMinFontSize,m=l+i/2,f=c+a/1.275,g=a/16>w.config.labelMinFontSize?a/16:w.config.labelMinFontSize,s=l+i/2,d=f+u/2+5,p=a/16>w.config.minLabelMinFontSize?a/16:w.config.minLabelMinFontSize,h=l+i/10+i/6.666666666666667*w.config.gaugeWidthScale/2,v=d,a/16>w.config.maxLabelMinFontSize?a/16:w.config.maxLabelMinFontSize),l+i-i/10-i/6.666666666666667*w.config.gaugeWidthScale/2),d),w.params={canvasW:n,canvasH:o,widgetW:i,widgetH:a,dx:l,dy:c,valueFontSize:u,valueX:m,valueY:f,labelFontSize:g,labelX:s,labelY:d,minFontSize:p,minX:h,minY:v,maxFontSize:x,maxX:b,maxY:k},k=null,w.canvas.customAttributes.pki=function(t,e,n,o,i,a,r,l,c,u){var m,f,g,s,d,p;return e<0&&(n-=e,t-=e,e=0),c?(m=(1-2*(t-e)/(n-e))*Math.PI,p="M"+((s=o/2+a)-(g=(f=o/2-o/30)-o/6.666666666666667*l))+","+(d=i/2+r)+" ",p+="L"+(s-f)+","+d+" ",(n-e)/2<t&&(p+="A"+f+","+f+" 0 0 1 "+(s+f)+","+d+" "),p+="A"+f+","+f+" 0 0 1 "+(s+f*Math.cos(m))+","+(d-f*Math.sin(m))+" ",p+="L"+(s+g*Math.cos(m))+","+(d-g*Math.sin(m))+" ",(n-e)/2<t&&(p+="A"+g+","+g+" 0 0 0 "+(s+g)+","+d+" ")):(m=(1-(t-e)/(n-e))*Math.PI,p="M"+((s=o/2+a)-(g=(f=o/2-o/10)-o/6.666666666666667*l))+","+(d=i/1.25+r)+" ",p+="L"+(s-f)+","+d+" ",p+="A"+f+","+f+" 0 0 1 "+(s+f*Math.cos(m))+","+(d-f*Math.sin(m))+" ",p+="L"+(s+g*Math.cos(m))+","+(d-g*Math.sin(m))+" "),p+="A"+g+","+g+" 0 0 0 "+(s-g)+","+d+" ",{path:p+="Z "}},w.canvas.customAttributes.ndl=function(t,e,n,o,i,a,r,l,c){var u,m,f,g,s,d,p,h,v,x,b,k,y,M=3.5*o/100,S=o/15,F=o/100;return null!=w.config.pointerOptions.toplength&&null!=w.config.pointerOptions.toplength&&(M=w.config.pointerOptions.toplength),null!=w.config.pointerOptions.bottomlength&&null!=w.config.pointerOptions.bottomlength&&(S=w.config.pointerOptions.bottomlength),null!=w.config.pointerOptions.bottomwidth&&null!=w.config.pointerOptions.bottomwidth&&(F=w.config.pointerOptions.bottomwidth),y=(k=(b=(x=(v=(h=(p=(d=(s=(g=c?(u=(1-2*(t-e)/(n-e))*Math.PI,f=(m=o/2-o/30)-o/6.666666666666667*l,i/2+r):(u=(1-(t-e)/(n-e))*Math.PI,f=(m=o/2-o/10)-o/6.666666666666667*l,i/1.25+r),o/2+a+m*Math.cos(u)),i-(i-g)-m*Math.sin(u)),o/2+a+f*Math.cos(u)),i-(i-g)-f*Math.sin(u)),s+M*Math.cos(u)),d-M*Math.sin(u)),p-S*Math.cos(u)),h+S*Math.sin(u)),"M"+(b+F*Math.sin(u))+","+(k+F*Math.cos(u))+" "),y+="L"+(b-F*Math.sin(u))+","+(k-F*Math.cos(u))+" ",y+="L"+v+","+x+" ",{path:y+="Z "}},w.gauge=w.canvas.path().attr({stroke:"none",fill:w.config.gaugeColor,pki:[w.config.max,w.config.min,w.config.max,w.params.widgetW,w.params.widgetH,w.params.dx,w.params.dy,w.config.gaugeWidthScale,w.config.donut,w.config.reverse]}),w.level=w.canvas.path().attr({stroke:"none",fill:getColor(w.config.value,(w.config.value-w.config.min)/(w.config.max-w.config.min),w.config.levelColors,w.config.noGradient,w.config.customSectors),pki:[w.config.min,w.config.min,w.config.max,w.params.widgetW,w.params.widgetH,w.params.dx,w.params.dy,w.config.gaugeWidthScale,w.config.donut,w.config.reverse]}),w.config.donut&&w.level.transform("r"+w.config.donutStartAngle+", "+(w.params.widgetW/2+w.params.dx)+", "+(w.params.widgetH/2+w.params.dy)),w.config.pointer&&(w.needle=w.canvas.path().attr({stroke:null!==w.config.pointerOptions.stroke&&void 0!==w.config.pointerOptions.stroke?w.config.pointerOptions.stroke:"none","stroke-width":null!==w.config.pointerOptions.stroke_width&&void 0!==w.config.pointerOptions.stroke_width?w.config.pointerOptions.stroke_width:0,"stroke-linecap":null!==w.config.pointerOptions.stroke_linecap&&void 0!==w.config.pointerOptions.stroke_linecap?w.config.pointerOptions.stroke_linecap:"square",fill:null!==w.config.pointerOptions.color&&void 0!==w.config.pointerOptions.color?w.config.pointerOptions.color:"#000000",ndl:[w.config.min,w.config.min,w.config.max,w.params.widgetW,w.params.widgetH,w.params.dx,w.params.dy,w.config.gaugeWidthScale,w.config.donut]}),w.config.donut&&w.needle.transform("r"+w.config.donutStartAngle+", "+(w.params.widgetW/2+w.params.dx)+", "+(w.params.widgetH/2+w.params.dy))),w.txtValue=w.canvas.text(w.params.valueX,w.params.valueY,0),w.txtValue.attr({"font-size":w.params.valueFontSize,"font-weight":"bold","font-family":w.config.valueFontFamily,fill:w.config.valueFontColor,"fill-opacity":"0"}),setDy(w.txtValue,w.params.valueFontSize,w.params.valueY),w.txtLabel=w.canvas.text(w.params.labelX,w.params.labelY,w.config.label),w.txtLabel.attr({"font-size":w.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:w.config.labelFontColor,"fill-opacity":"0"}),setDy(w.txtLabel,w.params.labelFontSize,w.params.labelY);var S=w.config.min;w.config.reverse&&(S=w.config.max),w.txtMinimum=S,w.config.minTxt?w.txtMinimum=w.config.minTxt:w.config.humanFriendly?w.txtMinimum=humanFriendlyNumber(S,w.config.humanFriendlyDecimal):w.config.formatNumber&&(w.txtMinimum=formatNumber(S)),w.txtMin=w.canvas.text(w.params.minX,w.params.minY,w.txtMinimum),w.txtMin.attr({"font-size":w.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:w.config.labelFontColor,"fill-opacity":w.config.hideMinMax||w.config.donut?"0":"1"}),setDy(w.txtMin,w.params.minFontSize,w.params.minY);var F=w.config.max;w.config.reverse&&(F=w.config.min),w.txtMaximum=F,w.config.maxTxt?w.txtMaximum=w.config.maxTxt:w.config.humanFriendly?w.txtMaximum=humanFriendlyNumber(F,w.config.humanFriendlyDecimal):w.config.formatNumber&&(w.txtMaximum=formatNumber(F)),w.txtMax=w.canvas.text(w.params.maxX,w.params.maxY,w.txtMaximum),w.txtMax.attr({"font-size":w.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:w.config.labelFontColor,"fill-opacity":w.config.hideMinMax||w.config.donut?"0":"1"}),setDy(w.txtMax,w.params.maxFontSize,w.params.maxY);var L=w.canvas.canvas.childNodes[1],A="http://www.w3.org/2000/svg";"undefined"!==ie&&ie<9||("undefined"!==ie?onCreateElementNsReady(function(){w.generateShadow(A,L)}):w.generateShadow(A,L)),A=null,w.config.textRenderer?w.originalValue=w.config.textRenderer(w.originalValue):w.config.humanFriendly?w.originalValue=humanFriendlyNumber(w.originalValue,w.config.humanFriendlyDecimal)+w.config.symbol:w.config.formatNumber?w.originalValue=formatNumber(w.originalValue)+w.config.symbol:w.originalValue=(1*w.originalValue).toFixed(w.config.decimals)+w.config.symbol,!0===w.config.counter?(eve.on("raphael.anim.frame."+w.level.id,function(){var t=w.level.attr("pki")[0];w.config.reverse&&(t=1*w.config.max+1*w.config.min-1*w.level.attr("pki")[0]),w.config.textRenderer?w.txtValue.attr("text",w.config.textRenderer(Math.floor(t))):w.config.humanFriendly?w.txtValue.attr("text",humanFriendlyNumber(Math.floor(t),w.config.humanFriendlyDecimal)+w.config.symbol):w.config.formatNumber?w.txtValue.attr("text",formatNumber(Math.floor(t))+w.config.symbol):w.txtValue.attr("text",(1*t).toFixed(w.config.decimals)+w.config.symbol),setDy(w.txtValue,w.params.valueFontSize,w.params.valueY),t=null}),eve.on("raphael.anim.finish."+w.level.id,function(){w.txtValue.attr({text:w.originalValue}),setDy(w.txtValue,w.params.valueFontSize,w.params.valueY)})):eve.on("raphael.anim.start."+w.level.id,function(){w.txtValue.attr({text:w.originalValue}),setDy(w.txtValue,w.params.valueFontSize,w.params.valueY)});var N=w.config.value;w.config.reverse&&(N=1*w.config.max+1*w.config.min-1*w.config.value),w.level.animate({pki:[N,w.config.min,w.config.max,w.params.widgetW,w.params.widgetH,w.params.dx,w.params.dy,w.config.gaugeWidthScale,w.config.donut,w.config.reverse]},w.config.startAnimationTime,w.config.startAnimationType,w.config.onAnimationEnd),w.config.pointer&&w.needle.animate({ndl:[N,w.config.min,w.config.max,w.params.widgetW,w.params.widgetH,w.params.dx,w.params.dy,w.config.gaugeWidthScale,w.config.donut]},w.config.startAnimationTime,w.config.startAnimationType),w.txtValue.animate({"fill-opacity":w.config.hideValue?"0":"1"},w.config.startAnimationTime,w.config.startAnimationType),w.txtLabel.animate({"fill-opacity":"1"},w.config.startAnimationTime,w.config.startAnimationType)},JustGage.prototype.refresh=function(t,e){var n,o,i=this;null!==(e=e||null)&&(i.config.max=e,i.txtMaximum=i.config.max,i.config.maxTxt?i.txtMaximum=i.config.maxTxt:i.config.humanFriendly?i.txtMaximum=humanFriendlyNumber(i.config.max,i.config.humanFriendlyDecimal):i.config.formatNumber&&(i.txtMaximum=formatNumber(i.config.max)),i.config.reverse?(i.txtMin.attr({text:i.txtMaximum}),i.txtMax.attr({text:i.txtMinimum}),setDy(i.txtMin,i.params.minFontSize,i.params.minY),setDy(i.txtMax,i.params.minFontSize,i.params.minY)):(i.txtMax.attr({text:i.txtMaximum}),setDy(i.txtMax,i.params.maxFontSize,i.params.maxY))),1*(n=t)>1*i.config.max&&(t=1*i.config.max),1*t<1*i.config.min&&(t=1*i.config.min),o=getColor(t,(t-i.config.min)/(i.config.max-i.config.min),i.config.levelColors,i.config.noGradient,i.config.customSectors),n=i.config.textRenderer?i.config.textRenderer(n):i.config.humanFriendly?humanFriendlyNumber(n,i.config.humanFriendlyDecimal)+i.config.symbol:i.config.formatNumber?formatNumber((1*n).toFixed(i.config.decimals))+i.config.symbol:(1*n).toFixed(i.config.decimals)+i.config.symbol,i.originalValue=n,i.config.value=1*t,i.config.counter||(i.txtValue.attr({text:n}),setDy(i.txtValue,i.params.valueFontSize,i.params.valueY));var a=i.config.value;i.config.reverse&&(a=1*i.config.max+1*i.config.min-1*i.config.value),i.level.animate({pki:[a,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut,i.config.reverse],fill:o},i.config.refreshAnimationTime,i.config.refreshAnimationType,i.config.onAnimationEnd),i.config.pointer&&i.needle.animate({ndl:[a,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut]},i.config.refreshAnimationTime,i.config.refreshAnimationType),e=null},JustGage.prototype.destroy=function(){document.getElementById(this.config.id).innerHTML=""},JustGage.prototype.generateShadow=function(t,e){var n,o,i,a,r,l,c,u=this,m="inner-shadow-"+u.config.id;(n=document.createElementNS(t,"filter")).setAttribute("id",m),e.appendChild(n),(o=document.createElementNS(t,"feOffset")).setAttribute("dx",0),o.setAttribute("dy",u.config.shadowVerticalOffset),n.appendChild(o),(i=document.createElementNS(t,"feGaussianBlur")).setAttribute("result","offset-blur"),i.setAttribute("stdDeviation",u.config.shadowSize),n.appendChild(i),(a=document.createElementNS(t,"feComposite")).setAttribute("operator","out"),a.setAttribute("in","SourceGraphic"),a.setAttribute("in2","offset-blur"),a.setAttribute("result","inverse"),n.appendChild(a),(r=document.createElementNS(t,"feFlood")).setAttribute("flood-color","black"),r.setAttribute("flood-opacity",u.config.shadowOpacity),r.setAttribute("result","color"),n.appendChild(r),(l=document.createElementNS(t,"feComposite")).setAttribute("operator","in"),l.setAttribute("in","color"),l.setAttribute("in2","inverse"),l.setAttribute("result","shadow"),n.appendChild(l),(c=document.createElementNS(t,"feComposite")).setAttribute("operator","over"),c.setAttribute("in","shadow"),c.setAttribute("in2","SourceGraphic"),n.appendChild(c),u.config.showInnerShadow&&(u.canvas.canvas.childNodes[2].setAttribute("filter","url("+window.location.pathname+"#"+m+")"),u.canvas.canvas.childNodes[3].setAttribute("filter","url("+window.location.pathname+"#"+m+")")),c=null};var ie=function(){for(var t=3,e=document.createElement("div"),n=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",n[0];);return 4<t?t:void 0}();function extend(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(t[n]=arguments[e][n]);return t}if("object"==typeof exports&&exports){var Raphael=require("raphael");module.exports=JustGage}