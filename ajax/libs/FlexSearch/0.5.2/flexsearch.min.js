/*
 FlexSearch v0.5.2
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(x,G,h){let y;(y=h.define)&&y.amd?y([],function(){return G}):(y=h.modules)?y[x.toLowerCase()]=G:"object"===typeof exports?module.exports=G:h[x]=G})("FlexSearch",function X(x){function h(a,b){const c=b?b.id:a&&a.id;this.id=c||0===c?c:Y++;this.init(a,b);H(this,"index",function(){return this.b});H(this,"length",function(){return Object.keys(this.b).length})}function y(a,b,c,d){this.v!==this.g&&(this.o=this.o.concat(c),this.v++,d&&this.o.length>=d&&(this.v=this.g),this.v===this.g&&
(this.cache&&this.l.set(b,this.o),this.G&&this.G(this.o)));return this}function I(a,b){const c=a.length,d=D(b),e=[];for(let f=0,k=0;f<c;f++){const c=a[f];if(d&&b(c)||!d&&!b[c])e[k++]=c}return e}function K(a,b,c,d,e,f){const k=this.h;b=R(b,e?0:d,f,this.u);{f=b.length;const a=Array(f);for(let c=0;c<f;c++)a[c]=k[b[c]];b=a}e&&(b=this.where(e,null,d,b));c&&(D(c)||(A=c.split(":"),1<A.length?c=Z:(A=A[0],c=aa)),b.sort(c));this.cache&&this.l.set(a,b);return b}function H(a,b,c){Object.defineProperty(a,b,{get:c})}
function g(a){return new RegExp(a,"g")}function E(a,b){for(let c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}function L(a,b,c,d,e,f,k,p){if(b[c])return b[c];e=e?(p-(k||p/1.5))*f+(k||p/1.5)*e:f;b[c]=e;e>=k&&(a=a[p-(e+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=d);return e}function P(a,b){if(a){const c=Object.keys(a);for(let d=0,e=c.length;d<e;d++){const e=c[d],k=a[e];if(k)for(let c=0,d=k.length;c<d;c++)if(k[c]===b){1===d?delete a[e]:k.splice(c,1);break}else B(k[c])&&P(k[c],b)}}}function Q(a){let b=
"",c="";var d="";for(let e=0;e<a.length;e++){const f=a[e];if(f!==c)if(e&&"h"===f){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)b+=f}else b+=f;d=e===a.length-1?"":a[e+1];c=f}return b}function ba(a,b){a=a.length-b.length;return 0>a?1:a?-1:0}function aa(a,b){a=a[A];b=b[A];return a<b?-1:a>b?1:0}function Z(a,b){const c=A.length;for(let d=0;d<c;d++)a=a[A[d]],b=b[A[d]];return a<b?-1:a>b?1:0}function R(a,b,c,d){c=[];let e;const f=
a.length;if(1<f){const p=u();let z=a[0],m=z.length,l=0;for(;l<m;)p["@"+z[l++]]=1;let g,q=0,n=0;for(;++n<f;){let h=!1;const r=n===f-1;e=[];z=a[n];m=z.length;for(l=0;l<m;){g=z[l++];var k="@"+g;if(p[k]){const a=p[k];if(a===n){if(r){if(c[q++]=g,b&&q===b)return c}else p[k]=n+1;h=!0}else d&&(k=e[a]||(e[a]=[]),k[k.length]=g)}}if(!h&&!d)break}if(d&&(q=c.length,(n=e.length)&&(!b||q<b)))for(;n--;)if(g=e[n])for(l=0,m=g.length;l<m;l++)if(c[q++]=g[l],b&&q===b)return c}else f&&(c=a[0],b&&c.length>b&&(c=c.slice(0,
b)));return c}function C(a){return"string"===typeof a}function w(a){return a.constructor===Array}function D(a){return"function"===typeof a}function B(a){return"object"===typeof a}function v(a){return"undefined"===typeof a}function S(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=u();return b}function u(){return Object.create(null)}function ca(){let a,b;self.onmessage=function(c){if(c=c.data)if(c.search){const d=b.search(c.content,c.threshold?{limit:c.limit,threshold:c.threshold,where:c.where}:c.limit);
self.postMessage({id:a,content:c.content,limit:c.limit,result:d})}else c.add?b.add(c.id,c.content):c.update?b.update(c.id,c.content):c.remove?b.remove(c.id):c.clear?b.clear():c.info?(c=b.info(),c.worker=a,console.log(c)):c.register&&(a=c.id,c.options.cache=!1,c.options.async=!1,c.options.worker=!1,b=(new Function(c.register.substring(c.register.indexOf("{")+1,c.register.lastIndexOf("}"))))(),b=new b(c.options))}}function da(a,b,c,d){a=x("flexsearch","id"+a,ca,function(a){(a=a.data)&&a.result&&d(a.id,
a.content,a.result,a.limit,a.where,a.cursor,a.suggest)},b);const e=X.toString();c.id=b;a.postMessage({register:e,options:c,id:b});return a}const t={encode:"icase",f:"forward",u:!1,cache:!1,async:!1,g:!1,F:!1,a:!1,J:!1,c:9,threshold:0,depth:0},T={memory:{encode:"extra",f:"strict",threshold:0,c:1},speed:{encode:"icase",f:"strict",threshold:1,c:3,depth:2},match:{encode:"extra",f:"full",threshold:1,c:3},score:{encode:"extra",f:"strict",threshold:1,c:9,depth:4},balance:{encode:"balance",f:"strict",threshold:0,
c:3,depth:3},fast:{encode:"icase",f:"strict",threshold:8,c:9,depth:1}},N=[];let Y=0;const U=/\W+/,V={},W={};h.create=function(a){return new h(a)};h.registerMatcher=function(a){for(const b in a)a.hasOwnProperty(b)&&N.push(g(b),a[b]);return this};h.registerEncoder=function(a,b){J[a]=b.bind(J);return this};h.registerLanguage=function(a,b){V[a]=b.filter;W[a]=b.stemmer;return this};h.encode=function(a,b){return J[a](b)};h.prototype.init=function(a,b){this.w=[];if(b){var c=b.preset;a=b}else a||(a=t),c=
a.preset;b={};C(a)?(b=T[a],a={}):c&&(b=T[c]);if(c=a.worker)if("undefined"===typeof Worker)a.worker=!1,this.m=null;else{var d=parseInt(c,10)||4;this.D=-1;this.v=0;this.o=[];this.G=null;this.m=Array(d);for(var e=0;e<d;e++)this.m[e]=da(this.id,e,a,y.bind(this))}this.f=a.tokenize||b.f||this.f||t.f;this.F=a.rtl||this.F||t.F;this.async="undefined"===typeof Promise||v(c=a.async)?this.async||t.async:c;this.g=v(c=a.worker)?this.g||t.g:c;this.threshold=v(c=a.threshold)?b.threshold||this.threshold||t.threshold:
c;this.c=v(c=a.resolution)?c=b.c||this.c||t.c:c;c<=this.threshold&&(this.c=this.threshold+1);this.depth=v(c=a.depth)?b.depth||this.depth||t.depth:c;this.J=v(c=a.paging)?this.J||t.J:c;this.u=v(c=a.suggest)?this.u||t.u:c;this.A=(c=v(c=a.encode)?b.encode||t.encode:c)&&J[c]&&J[c].bind(J)||(D(c)?c:this.A||!1);(c=a.matcher)&&this.addMatcher(c);if(c=a.filter){C(c)&&(c=V[c]);if(w(c)){b=this.A;d=u();for(e=0;e<c.length;e++){var f=b?b(c[e]):c[e];d[f]=1}c=d}this.filter=c}if(c=a.stemmer){var k;b=C(c)?W[c]:c;d=
this.A;e=[];for(k in b)b.hasOwnProperty(k)&&(f=d?d(k):k,e.push(g(f+"($|\\W)"),d?d(b[k]):b[k]));this.stemmer=k=e}this.a=e=(c=a.doc)?c:this.a||t.a;this.i=S(this.c-(this.threshold||0));this.j=u();this.b=u();if(e){this.h=u();a.doc=null;k=e.index={};b=e.keys=[];d=e.field;f=e.tag;w(e.id)||(e.id=e.id.split(":"));if(f){this.H=u();let b=u();if(d)if(C(d))b[d]=a;else if(w(d))for(let c=0;c<d.length;c++)b[d[c]]=a;else B(d)&&(b=d);w(f)||(e.tag=f=[f]);for(d=0;d<f.length;d++)this.H[f[d]]=u();this.K=f;d=b}if(d){let c;
w(d)||(B(d)?(c=d,e.field=d=Object.keys(d)):e.field=d=[d]);for(e=0;e<d.length;e++)f=d[e],w(f)||(c&&(a=c[f]),b[e]=f,d[e]=f.split(":")),k[f]=new h(a),k[f].h=this.h}}this.C=!0;this.l=(this.cache=c=v(c=a.cache)?this.cache||t.cache:c)?new ea(c):!1;return this};h.prototype.encode=function(a){a&&N.length&&(a=E(a,N));a&&this.w.length&&(a=E(a,this.w));a&&this.A&&(a=this.A(a));a&&this.stemmer&&(a=E(a,this.stemmer));return a};h.prototype.addMatcher=function(a){const b=this.w;for(const c in a)a.hasOwnProperty(c)&&
b.push(g(c),a[c]);return this};h.prototype.add=function(a,b,c,d,e){if(this.a&&B(a))return this.B("add",a,b);if(b&&C(b)&&(a||0===a)){var f="@"+a;if(this.b[f]&&!d)return this.update(a,b);if(this.g)return++this.D>=this.m.length&&(this.D=0),this.m[this.D].postMessage({add:!0,id:a,content:b}),this.b[f]=""+this.D,c&&c(),this;if(!e){if(this.async&&"function"!==typeof importScripts){let e=this;f=new Promise(function(c){setTimeout(function(){e.add(a,b,null,d,!0);e=null;c()})});if(c)f.then(c);else return f;
return this}if(c)return this.add(a,b,null,d,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.f;e=D(c)?c(b):b.split(U);this.filter&&(e=I(e,this.filter));const h=u();h._ctx=u();const q=e.length,n=this.threshold,z=this.depth,F=this.c,M=this.i,O=this.F;for(let b=0;b<q;b++){var k=e[b];if(k){var p=k.length,g=(O?b+1:q-b)/q,m="";switch(c){case "reverse":case "both":for(var l=p;--l;)m=k[l]+m,L(M,h,m,a,O?1:(p-l)/p,g,n,F-1);m="";case "forward":for(l=0;l<p;l++)m+=k[l],L(M,h,m,a,O?(l+1)/p:1,g,n,F-
1);break;case "full":for(l=0;l<p;l++){const b=(O?l+1:p-l)/p;for(let c=p;c>l;c--)m=k.substring(l,c),L(M,h,m,a,b,g,n,F-1)}break;default:if(p=L(M,h,k,a,1,g,n,F-1),z&&1<q&&p>=n)for(p=h._ctx[k]||(h._ctx[k]=u()),k=this.j[k]||(this.j[k]=S(F-(n||0))),g=b-z,m=b+z+1,0>g&&(g=0),m>q&&(m=q);g<m;g++)g!==b&&L(k,p,e[g],a,0,F-(g<b?b-g:g-b),n,F-1)}}}this.b[f]=1;this.C=!1}return this};h.prototype.B=function(a,b,c){if(w(b))for(let d=0,e=b.length;d<e;d++){if(d===e-1)return this.B(a,b[d],c);this.B(a,b[d])}else{const p=
this.a.index,h=this.a.keys;var d=this.a.tag,e=this.a.id;let l;let r;for(var f=0;f<e.length;f++)l=(l||b)[e[f]];if(d){for(e=0;e<d.length;e++){var k=d[e];var g=k.split(":");for(f=0;f<g.length;f++)r=(r||b)[g[f]];r="@"+r}g=this.H[k];g=g[r]||(g[r]=[])}if("remove"===a){delete this.h[l];for(let a=0,b=h.length;a<b;a++){if(a===b-1)return p[h[a]].remove(l,c);p[h[a]].remove(l)}}e=this.a.field;g&&(g[g.length]=b);for(let f=0,g=e.length;f<g;f++){d=e[f];let m;for(k=0;k<d.length;k++)m=(m||b)[d[k]];this.h[l]=b;d=p[h[f]];
k="add"===a?d.add:d.update;if(f===g-1)return k.call(d,l,m,c);k.call(d,l,m)}}};h.prototype.update=function(a,b,c){if(this.a&&B(a))return this.B("update",a,b);this.b["@"+a]&&C(b)&&(this.remove(a),this.add(a,b,c,!0));return this};h.prototype.remove=function(a,b,c){if(this.a&&B(a))return this.B("remove",a,b);var d="@"+a;if(this.b[d]){if(this.g)return this.m[this.b[d]].postMessage({remove:!0,id:a}),delete this.b[d],b&&b(),this;if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;d=new Promise(function(b){setTimeout(function(){c.remove(a,
null,!0);c=null;b()})});if(b)d.then(b);else return d;return this}if(b)return this.remove(a,null,!0),b(),this}for(b=0;b<this.c-(this.threshold||0);b++)P(this.i[b],a);this.depth&&P(this.j,a);delete this.b[d];this.C=!1}return this};let A;h.prototype.search=function(a,b,c,d){if(B(b)){if(w(b))for(var e=0;e<b.length;e++)b[e].query=a;else b.query=a;a=b;b=0}let f=a;let k,g,h=[];if(B(a)&&!w(a)){(c=a.callback||b)&&(f.callback=null);g=a.sort;k=a.where;b=a.limit;var m=a.threshold;a=a.query}if(this.a){m=this.a.index;
var l=f.field;if(l)f.field=null,w(l)||(l=[l]);else if(w(f)){var r=f;l=[];for(var q=0;q<f.length;q++)l[q]=f[q].field}else l=this.a.keys;g&&(f.sort=null);q=l.length;for(var n=0;n<q;n++)r&&(f=r[n]),h[n]=m[l[n]].search(f);if(c)return c(K.call(this,a,h,g,b,k,void 0));if(this.async){const c=this;return new Promise(function(d){Promise.all(h).then(function(e){d(K.call(c,a,e,g,b,k,void 0))})})}return K.call(this,a,h,g,b,k,void 0)}m||(m=this.threshold||0);D(b)?(c=b,b=1E3):b||0===b||(b=1E3);if(this.g)for(this.G=
c,this.v=0,this.o=[],l=0;l<this.g;l++)this.m[l].postMessage({search:!0,limit:b,cursor:void 0,threshold:m,where:k,content:a});else{if(!d){if(this.async&&"function"!==typeof importScripts){let a=this;m=new Promise(function(c){setTimeout(function(){c(a.search(f,b,null,!0));a=null})});if(c)m.then(c);else return m;return this}if(c)return c(this.search(f,b,null,!0)),this}if(!a||!C(a))return h;f=a;if(this.cache)if(this.C){if(c=this.l.get(a))return c}else this.l.clear(),this.C=!0;f=this.encode(f);if(!f.length)return h;
c=this.f;c=D(c)?c(f):f.split(U);this.filter&&(c=I(c,this.filter));r=c.length;d=!0;e=[];var t=u();1<r&&(this.depth?(l=!0,n=c[0],t[n]=1):c.sort(ba));if(!l||(q=this.j)[n]){let a=this.c;for(let b=l?1:0;b<r;b++){const f=c[b];if(f){if(!t[f]){const b=[];let c=!1,g=0;if(n=l?q[n]:this.i){let d;for(let e=0;e<a-m;e++)if(d=n[e][f])b[g++]=d,c=!0}if(c)e[e.length]=1<g?b.concat.apply([],b):b[0];else if(!this.u){d=!1;break}t[f]=1}n=f}}}else d=!1;d&&(h=R(e,b,void 0,this.u));this.cache&&!this.a&&this.l.set(a,h);return h}};
h.prototype.find=function(a,b){return this.where(a,b,1)[0]||null};h.prototype.where=function(a,b,c,d){const e=d||this.h,f=[];let g=0;var h;let t;if("number"===typeof a)return[e[a]];if(C(a)){if(v(b))return[e[a]];if("id"===a)return[e[b]];var m=1;var l=[a.split(":")];t=!0}else{if(D(a)){b=d||Object.keys(e);c=b.length;for(h=0;h<c;h++)m=d?d[h]:e[b[h]],a(m)&&(f[g++]=m);return f}c||(c=b);h=Object.keys(a);m=h.length;t=!1;if(1===m&&"id"===h[0])return[e[a.id]];if((l=this.K)&&!d)for(var r=0;r<l.length;r++){var q=
l[r],n=a[q];if(!v(n)){d=this.H[q]["@"+n];if(0===--m)return d;h.splice(h.indexOf(q),1);delete a[q];break}}l=Array(m);for(r=0;r<m;r++)l[r]=h[r].split(":")}r=d||Object.keys(e);q=r.length;for(n=0;n<q;n++){const k=d?d[n]:e[r[n]];let p=!0;for(let c=0;c<m;c++){t||(b=a[h[c]]);const d=l[c],e=d.length;let f=k;if(1<e)for(let a=0;a<e;a++)f=f[d[a]];else f=f[d[0]];if(f!==b){p=!1;break}}if(p&&(f[g++]=k,c&&g===c))break}return f};h.prototype.info=function(){if(this.g)for(var a=0;a<this.g;a++)this.m[a].postMessage({info:!0,
id:this.id});else{var b=0,c=0,d=0;for(var e=0;e<this.c-(this.threshold||0);e++){a=Object.keys(this.i[e]);for(let g=0;g<a.length;g++){var f=this.i[e][a[g]].length;b+=1*f+2*a[g].length+4;c+=f;d+=2*a[g].length}}a=Object.keys(this.b);f=a.length;for(e=0;e<f;e++)b+=2*a[e].length+2;return{id:this.id,memory:b,items:f,sequences:c,chars:d,cache:this.cache&&this.cache.s?this.cache.s.length:!1,matcher:N.length+(this.w?this.w.length:0),worker:this.g,threshold:this.threshold,depth:this.depth,contextual:this.depth&&
"strict"===this.f}}};h.prototype.clear=function(){return this.destroy().init()};h.prototype.destroy=function(){this.cache&&(this.l.clear(),this.l=null);this.i=this.j=this.b=null;if(this.a){const a=this.a.keys;for(let b=0;b<a.length;b++)this.a.index[a[b]].destroy();this.a=this.h=null}return this};h.prototype.export=function(){if(this.a){const a=this.a.keys,b=Array(a.length+1);let c=0;for(;c<a.length;c++){const d=this.a.index[a[c]];b[c]=[d.i,d.j,d.b]}b[c]=this.h;return JSON.stringify(b)}return JSON.stringify([this.i,
this.j,this.b])};h.prototype.import=function(a){a=JSON.parse(a);if(this.a){const b=this.a.keys,c=b.length;for(let d=0;d<c;d++){const e=this.a.index[b[d]];e.i=a[d][0];e.j=a[d][1];e.b=a[d][2];e.h=a[c]}this.h=a[c]}else this.i=a[0],this.j=a[1],this.b=a[2]};const J={icase:function(a){return a.toLowerCase()},simple:function(){const a=[g("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",g("[\u00e8\u00e9\u00ea\u00eb]"),"e",g("[\u00ec\u00ed\u00ee\u00ef]"),"i",g("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",g("[\u00f9\u00fa\u00fb\u00fc\u0171]"),
"u",g("[\u00fd\u0177\u00ff]"),"y",g("\u00f1"),"n",g("\u00e7"),"c",g("\u00df"),"s",g(" & ")," and ",g("[-/]")," ",g("[^a-z0-9 ]"),"",g("\\s+")," "];return function(b){b=E(b.toLowerCase(),a);return" "===b?"":b}}(),advanced:function(){const a=[g("ae"),"a",g("ai"),"ei",g("ay"),"ei",g("ey"),"ei",g("oe"),"o",g("ue"),"u",g("ie"),"i",g("sz"),"s",g("zs"),"s",g("sh"),"s",g("ck"),"k",g("cc"),"k",g("dt"),"t",g("ph"),"f",g("pf"),"f",g("ou"),"o",g("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);
2<b.length&&(b=E(b,a));c||1<b.length&&(b=Q(b));return b}}(),extra:function(){const a=[g("p"),"b",g("z"),"s",g("[cgq]"),"k",g("n"),"m",g("d"),"t",g("[vw]"),"f",g("[aeiouy]"),""];return function(b){if(!b)return b;b=this.advanced(b,!0);if(1<b.length){b=b.split(" ");for(let c=0;c<b.length;c++){const d=b[c];1<d.length&&(b[c]=d[0]+E(d.substring(1),a))}b=b.join(" ");b=Q(b)}return b}}(),balance:function(){const a=[g("[-/]")," ",g("[^a-z0-9 ]"),"",g("\\s+")," "];return function(b){return Q(E(b.toLowerCase(),
a))}}()},ea=function(){function a(a){this.clear();this.I=!0!==a&&a}a.prototype.clear=function(){this.cache=u();this.count=u();this.index=u();this.s=[]};a.prototype.set=function(a,c){if(this.I&&v(this.cache[a])){let b=this.s.length;if(b===this.I){b--;const a=this.s[b];delete this.cache[a];delete this.count[a];delete this.index[a]}this.index[a]=b;this.s[b]=a;this.count[a]=-1;this.cache[a]=c;this.get(a)}else this.cache[a]=c};a.prototype.get=function(a){const b=this.cache[a];if(this.I&&b){var d=++this.count[a];
const b=this.index;let c=b[a];if(0<c){const f=this.s;for(var e=c;this.count[f[--c]]<=d&&-1!==c;);c++;if(c!==e){for(d=e;d>c;d--)e=f[d-1],f[d]=e,b[e]=d;f[c]=a;b[a]=c}}}return b};return a}();return h}(function(){const x={},G="undefined"!==typeof Blob&&"undefined"!==typeof URL&&URL.createObjectURL;return function(h,y,I,K,H){I=G?URL.createObjectURL(new Blob(["("+I.toString()+")()"],{type:"text/javascript"})):h+".min.js";h+="-"+y;x[h]||(x[h]=[]);x[h][H]=new Worker(I);x[h][H].onmessage=K;return x[h][H]}}()),
this);
