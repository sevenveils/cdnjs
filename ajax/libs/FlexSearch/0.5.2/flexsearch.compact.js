/*
 FlexSearch v0.5.2
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(n,z,A){let x;(x=A.define)&&x.amd?x([],function(){return z}):(x=A.modules)?x[n.toLowerCase()]=z:"object"===typeof exports?module.exports=z:A[n]=z})("FlexSearch",function(){function n(b,a){const c=a?a.id:b&&b.id;this.id=c||0===c?c:T++;this.init(b,a);x(this,"index",function(){return this.f});x(this,"length",function(){return Object.keys(this.f).length})}function z(b,a){const c=b.length,d=E(a),f=[];for(let h=0,g=0;h<c;h++){const c=b[h];if(d&&a(c)||!d&&!a[c])f[g++]=c}return f}function A(b,
a,c,d,f,h){b=this.g;a=N(a,f?0:d,h,!1);{h=a.length;const c=Array(h);for(let d=0;d<h;d++)c[d]=b[a[d]];a=c}f&&(a=this.where(f,null,d,a));c&&(E(c)||(v=c.split(":"),1<v.length?c=U:(v=v[0],c=V)),a.sort(c));return a}function x(b,a,c){Object.defineProperty(b,a,{get:c})}function e(b){return new RegExp(b,"g")}function B(b,a){for(let c=0;c<a.length;c+=2)b=b.replace(a[c],a[c+1]);return b}function I(b,a,c,d,f,h,g,l){if(a[c])return a[c];f=f?(l-(g||l/1.5))*h+(g||l/1.5)*f:h;a[c]=f;f>=g&&(b=b[l-(f+.5>>0)],b=b[c]||
(b[c]=[]),b[b.length]=d);return f}function K(b,a){if(b){const c=Object.keys(b);for(let d=0,f=c.length;d<f;d++){const f=c[d],g=b[f];if(g)for(let c=0,d=g.length;c<d;c++)if(g[c]===a){1===d?delete b[f]:g.splice(c,1);break}else C(g[c])&&K(g[c],a)}}}function L(b){let a="",c="";var d="";for(let f=0;f<b.length;f++){const h=b[f];if(h!==c)if(f&&"h"===h){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)a+=h}else a+=h;d=f===b.length-
1?"":b[f+1];c=h}return a}function W(b,a){b=b.length-a.length;return 0>b?1:b?-1:0}function V(b,a){b=b[v];a=a[v];return b<a?-1:b>a?1:0}function U(b,a){const c=v.length;for(let d=0;d<c;d++)b=b[v[d]],a=a[v[d]];return b<a?-1:b>a?1:0}function N(b,a,c,d){c=[];let f;const h=b.length;if(1<h){const l=u();let e=b[0],m=e.length,k=0;for(;k<m;)l["@"+e[k++]]=1;let p,q=0,y=0;for(;++y<h;){let t=!1;const n=y===h-1;f=[];e=b[y];m=e.length;for(k=0;k<m;){p=e[k++];var g="@"+p;if(l[g]){const b=l[g];if(b===y){if(n){if(c[q++]=
p,a&&q===a)return c}else l[g]=y+1;t=!0}else d&&(g=f[b]||(f[b]=[]),g[g.length]=p)}}if(!t&&!d)break}if(d&&(q=c.length,(y=f.length)&&(!a||q<a)))for(;y--;)if(p=f[y])for(k=0,m=p.length;k<m;k++)if(c[q++]=p[k],a&&q===a)return c}else h&&(c=b[0],a&&c.length>a&&(c=c.slice(0,a)));return c}function F(b){return"string"===typeof b}function w(b){return b.constructor===Array}function E(b){return"function"===typeof b}function C(b){return"object"===typeof b}function G(b){return"undefined"===typeof b}function O(b){const a=
Array(b);for(let c=0;c<b;c++)a[c]=u();return a}function u(){return Object.create(null)}const r={encode:"icase",c:"forward",v:!1,cache:!1,async:!1,w:!1,m:!1,a:!1,s:!1,b:9,threshold:0,depth:0},P={memory:{encode:"extra",c:"strict",threshold:0,b:1},speed:{encode:"icase",c:"strict",threshold:1,b:3,depth:2},match:{encode:"extra",c:"full",threshold:1,b:3},score:{encode:"extra",c:"strict",threshold:1,b:9,depth:4},balance:{encode:"balance",c:"strict",threshold:0,b:3,depth:3},fast:{encode:"icase",c:"strict",
threshold:8,b:9,depth:1}},M=[];let T=0;const Q=/\W+/,R={},S={};n.create=function(b){return new n(b)};n.registerMatcher=function(b){for(const a in b)b.hasOwnProperty(a)&&M.push(e(a),b[a]);return this};n.registerEncoder=function(b,a){H[b]=a.bind(H);return this};n.registerLanguage=function(b,a){R[b]=a.filter;S[b]=a.stemmer;return this};n.encode=function(b,a){return H[b](a)};n.prototype.init=function(b,a){this.o=[];if(a){var c=a.preset;b=a}else b||(b=r),c=b.preset;a={};F(b)?(a=P[b],b={}):c&&(a=P[c]);
this.c=b.tokenize||a.c||this.c||r.c;this.m=b.rtl||this.m||r.m;this.async="undefined"===typeof Promise||G(c=b.async)?this.async||r.async:c;this.threshold=G(c=b.threshold)?a.threshold||this.threshold||r.threshold:c;this.b=G(c=b.resolution)?c=a.b||this.b||r.b:c;c<=this.threshold&&(this.b=this.threshold+1);this.depth=G(c=b.depth)?a.depth||this.depth||r.depth:c;this.s=G(c=b.paging)?this.s||r.s:c;this.i=(c=G(c=b.encode)?a.encode||r.encode:c)&&H[c]&&H[c].bind(H)||(E(c)?c:this.i||!1);(c=b.matcher)&&this.addMatcher(c);
if(c=b.filter){F(c)&&(c=R[c]);if(w(c)){a=this.i;var d=u();for(var f=0;f<c.length;f++){var h=a?a(c[f]):c[f];d[h]=1}c=d}this.filter=c}if(c=b.stemmer){var g;a=F(c)?S[c]:c;d=this.i;f=[];for(g in a)a.hasOwnProperty(g)&&(h=d?d(g):g,f.push(e(h+"($|\\W)"),d?d(a[g]):a[g]));this.stemmer=g=f}this.a=d=(c=b.doc)?c:this.a||r.a;this.l=O(this.b-(this.threshold||0));this.h=u();this.f=u();if(d&&(this.g=u(),b.doc=null,g=d.index={},c=d.keys=[],a=d.field,w(d.id)||(d.id=d.id.split(":")),a)){let h;w(a)||(C(a)?(h=a,d.field=
a=Object.keys(a)):d.field=a=[a]);for(d=0;d<a.length;d++)f=a[d],w(f)||(h&&(b=h[f]),c[d]=f,a[d]=f.split(":")),g[f]=new n(b),g[f].g=this.g}return this};n.prototype.encode=function(b){b&&M.length&&(b=B(b,M));b&&this.o.length&&(b=B(b,this.o));b&&this.i&&(b=this.i(b));b&&this.stemmer&&(b=B(b,this.stemmer));return b};n.prototype.addMatcher=function(b){const a=this.o;for(const c in b)b.hasOwnProperty(c)&&a.push(e(c),b[c]);return this};n.prototype.add=function(b,a,c,d,f){if(this.a&&C(b))return this.j("add",
b,a);if(a&&F(a)&&(b||0===b)){var h="@"+b;if(this.f[h]&&!d)return this.update(b,a);if(!f){if(this.async&&"function"!==typeof importScripts){let f=this;h=new Promise(function(c){setTimeout(function(){f.add(b,a,null,d,!0);f=null;c()})});if(c)h.then(c);else return h;return this}if(c)return this.add(b,a,null,d,!0),c(),this}a=this.encode(a);if(!a.length)return this;c=this.c;f=E(c)?c(a):a.split(Q);this.filter&&(f=z(f,this.filter));const p=u();p._ctx=u();const q=f.length,l=this.threshold,n=this.depth,D=this.b,
J=this.l,r=this.m;for(let a=0;a<q;a++){var g=f[a];if(g){var e=g.length,t=(r?a+1:q-a)/q,m="";switch(c){case "reverse":case "both":for(var k=e;--k;)m=g[k]+m,I(J,p,m,b,r?1:(e-k)/e,t,l,D-1);m="";case "forward":for(k=0;k<e;k++)m+=g[k],I(J,p,m,b,r?(k+1)/e:1,t,l,D-1);break;case "full":for(k=0;k<e;k++){const a=(r?k+1:e-k)/e;for(let c=e;c>k;c--)m=g.substring(k,c),I(J,p,m,b,a,t,l,D-1)}break;default:if(e=I(J,p,g,b,1,t,l,D-1),n&&1<q&&e>=l)for(e=p._ctx[g]||(p._ctx[g]=u()),g=this.h[g]||(this.h[g]=O(D-(l||0))),
t=a-n,m=a+n+1,0>t&&(t=0),m>q&&(m=q);t<m;t++)t!==a&&I(g,e,f[t],b,0,D-(t<a?a-t:t-a),l,D-1)}}}this.f[h]=1}return this};n.prototype.j=function(b,a,c){if(w(a))for(let d=0,f=a.length;d<f;d++){if(d===f-1)return this.j(b,a[d],c);this.j(b,a[d])}else{const g=this.a.index,m=this.a.keys;var d=this.a.tag,f=this.a.id;let k;let p;for(var h=0;h<f.length;h++)k=(k||a)[f[h]];if(d){for(f=0;f<d.length;f++){var e=d[f];var l=e.split(":");for(h=0;h<l.length;h++)p=(p||a)[l[h]];p="@"+p}l=this.u[e];l=l[p]||(l[p]=[])}if("remove"===
b){delete this.g[k];for(let a=0,b=m.length;a<b;a++){if(a===b-1)return g[m[a]].remove(k,c);g[m[a]].remove(k)}}f=this.a.field;l&&(l[l.length]=a);for(let h=0,l=f.length;h<l;h++){d=f[h];let p;for(e=0;e<d.length;e++)p=(p||a)[d[e]];this.g[k]=a;d=g[m[h]];e="add"===b?d.add:d.update;if(h===l-1)return e.call(d,k,p,c);e.call(d,k,p)}}};n.prototype.update=function(b,a,c){if(this.a&&C(b))return this.j("update",b,a);this.f["@"+b]&&F(a)&&(this.remove(b),this.add(b,a,c,!0));return this};n.prototype.remove=function(b,
a,c){if(this.a&&C(b))return this.j("remove",b,a);var d="@"+b;if(this.f[d]){if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;d=new Promise(function(a){setTimeout(function(){c.remove(b,null,!0);c=null;a()})});if(a)d.then(a);else return d;return this}if(a)return this.remove(b,null,!0),a(),this}for(a=0;a<this.b-(this.threshold||0);a++)K(this.l[a],b);this.depth&&K(this.h,b);delete this.f[d]}return this};let v;n.prototype.search=function(b,a,c,d){if(C(a)){if(w(a))for(var f=0;f<a.length;f++)a[f].query=
b;else a.query=b;b=a;a=0}let e=b;let g,l=[];if(C(b)&&!w(b)){(c=b.callback||a)&&(e.callback=null);g=b.sort;a=b.limit;var n=b.threshold;b=b.query}if(this.a){n=this.a.index;var m=e.field;if(m)e.field=null,w(m)||(m=[m]);else if(w(e)){var k=e;m=[];for(var p=0;p<e.length;p++)m[p]=e[p].field}else m=this.a.keys;g&&(e.sort=null);p=m.length;for(var q=0;q<p;q++)k&&(e=k[q]),l[q]=n[m[q]].search(e);if(c)return c(A.call(this,b,l,g,a,void 0,void 0));if(this.async){const c=this;return new Promise(function(d){Promise.all(l).then(function(e){d(A.call(c,
b,e,g,a,void 0,void 0))})})}return A.call(this,b,l,g,a,void 0,void 0)}n||(n=this.threshold||0);E(a)?(c=a,a=1E3):a||0===a||(a=1E3);if(!d){if(this.async&&"function"!==typeof importScripts){let b=this;n=new Promise(function(c){setTimeout(function(){c(b.search(e,a,null,!0));b=null})});if(c)n.then(c);else return n;return this}if(c)return c(this.search(e,a,null,!0)),this}if(!b||!F(b))return l;e=b;e=this.encode(e);if(!e.length)return l;c=this.c;c=E(c)?c(e):e.split(Q);this.filter&&(c=z(c,this.filter));k=
c.length;d=!0;f=[];const r=u();1<k&&(this.depth?(m=!0,q=c[0],r[q]=1):c.sort(W));if(!m||(p=this.h)[q]){let a=this.b;for(let b=m?1:0;b<k;b++){const e=c[b];if(e){if(!r[e]){const b=[];let c=!1,g=0;if(q=m?p[q]:this.l){let d;for(let f=0;f<a-n;f++)if(d=q[f][e])b[g++]=d,c=!0}if(c)f[f.length]=1<g?b.concat.apply([],b):b[0];else{d=!1;break}r[e]=1}q=e}}}else d=!1;d&&(l=N(f,a,void 0,!1));return l};n.prototype.clear=function(){return this.destroy().init()};n.prototype.destroy=function(){this.l=this.h=this.f=null;
if(this.a){const b=this.a.keys;for(let a=0;a<b.length;a++)this.a.index[b[a]].destroy();this.a=this.g=null}return this};const H={icase:function(b){return b.toLowerCase()},simple:function(){const b=[e("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",e("[\u00e8\u00e9\u00ea\u00eb]"),"e",e("[\u00ec\u00ed\u00ee\u00ef]"),"i",e("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",e("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",e("[\u00fd\u0177\u00ff]"),"y",e("\u00f1"),"n",e("\u00e7"),"c",e("\u00df"),"s",e(" & ")," and ",
e("[-/]")," ",e("[^a-z0-9 ]"),"",e("\\s+")," "];return function(a){a=B(a.toLowerCase(),b);return" "===a?"":a}}(),advanced:function(){const b=[e("ae"),"a",e("ai"),"ei",e("ay"),"ei",e("ey"),"ei",e("oe"),"o",e("ue"),"u",e("ie"),"i",e("sz"),"s",e("zs"),"s",e("sh"),"s",e("ck"),"k",e("cc"),"k",e("dt"),"t",e("ph"),"f",e("pf"),"f",e("ou"),"o",e("uo"),"u"];return function(a,c){if(!a)return a;a=this.simple(a);2<a.length&&(a=B(a,b));c||1<a.length&&(a=L(a));return a}}(),extra:function(){const b=[e("p"),"b",e("z"),
"s",e("[cgq]"),"k",e("n"),"m",e("d"),"t",e("[vw]"),"f",e("[aeiouy]"),""];return function(a){if(!a)return a;a=this.advanced(a,!0);if(1<a.length){a=a.split(" ");for(let c=0;c<a.length;c++){const d=a[c];1<d.length&&(a[c]=d[0]+B(d.substring(1),b))}a=a.join(" ");a=L(a)}return a}}(),balance:function(){const b=[e("[-/]")," ",e("[^a-z0-9 ]"),"",e("\\s+")," "];return function(a){return L(B(a.toLowerCase(),b))}}()};return n}(!1),this);
