/*
 FlexSearch v0.3.6
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(f,p,d){let k;(k=d.define)&&k.amd?k([],function(){return p}):(k=d.modules)?k[f.toLowerCase()]=p:"object"===typeof exports?module.exports=p:d[f]=p})("FlexSearch",function(){function f(b){z(b)&&(b=F[b]);b||(b=v);this.id=b.id||L++;this.init(b);p(this,"index",function(){return this.b});p(this,"length",function(){return Object.keys(this.b).length})}function p(b,a,c){Object.defineProperty(b,a,{get:c})}function d(b){return new RegExp(b,"g")}function k(b,a){for(let c=0;c<a.length;c+=
2)b=b.replace(a[c],a[c+1]);return b}function y(b,a,c,g,e,d,n){if(a[c])return a[c];e=e?4.5*(d+e):d;a[c]=e;e>=n&&(b=b[9-(e+.5>>0)],b=b[c]||(b[c]=[]),b[b.length]=g);return e}function C(b,a){if(b){const c=Object.keys(b);for(let g=0,d=c.length;g<d;g++){const d=c[g],e=b[d];if(e)for(let c=0,g=e.length;c<g;c++)if(e[c]===a){1===g?delete b[d]:e.splice(c,1);break}else"object"===typeof e[c]&&C(e[c],a)}}}function D(b){let a="",c="";var d="";for(let e=0;e<b.length;e++){const g=b[e];if(g!==c)if(e&&"h"===g){if(d=
"a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)a+=g}else a+=g;d=e===b.length-1?"":b[e+1];c=g}return a}function M(b,a){b=b.length-a.length;return 0>b?1:b?-1:0}function N(b,a){b=b.length-a.length;return 0>b?-1:b?1:0}function O(b,a,c){let d=[],e;const t=b.length;if(1<t){b.sort(N);const g=u();let l=b[0],m=l.length,h=0;for(;h<m;)g["@"+l[h++]]=1;let f,q=0,r=0;for(;++r<t;){let G=!1;const k=r===t-1;e=[];l=b[r];m=l.length;for(h=0;h<m;){f=
l[h++];var n="@"+f;if(g[n]){const b=g[n];if(b===r){if(k){if(d[q++]=f,a&&q===a)return d}else g[n]=r+1;G=!0}else c&&(n=e[b]||(e[b]=[]),n[n.length]=f)}}if(!G&&!c)break}if(c&&(q=d.length,(r=e.length)&&(!a||q<a)))for(;r--;)if(f=e[r])for(h=0,m=f.length;h<m;h++)if(d[q++]=f[h],a&&q===a)return d}else t&&(d=b[0],a&&d.length>a&&(d=d.slice(0,a)));return d}function z(b){return"string"===typeof b}function A(b){return"function"===typeof b}function B(b){return"undefined"===typeof b}function H(b){const a=Array(b);
for(let c=0;c<b;c++)a[c]=u();return a}function u(){return Object.create(null)}const v={encode:"icase",a:"forward",j:!1,cache:!1,async:!1,l:!1,h:!1,threshold:0,depth:0},F={memory:{encode:"extra",a:"strict",threshold:7},speed:{encode:"icase",a:"strict",threshold:7,depth:2},match:{encode:"extra",a:"full"},score:{encode:"extra",a:"strict",threshold:5,depth:4},balance:{encode:"balance",a:"strict",threshold:6,depth:3},fastest:{encode:"icase",a:"strict",threshold:9,depth:1}},E=[];let L=0;const I=d("\\W+"),
J={},K={};f.create=function(b){return new f(b)};f.registerMatcher=function(b){for(const a in b)b.hasOwnProperty(a)&&E.push(d(a),b[a]);return this};f.registerEncoder=function(b,a){x[b]=a.bind(x);return this};f.registerLanguage=function(b,a){J[b]=a.filter;K[b]=a.stemmer;return this};f.encode=function(b,a){return x[b](a)};f.prototype.init=function(b){this.i=[];b||(b=v);var a=b.preset,c=a?F[a]:{};this.a=b.tokenize||c.a||this.a||v.a;this.h=b.rtl||this.h||v.h;this.async="undefined"===typeof Promise||B(a=
b.async)?this.async||v.async:a;this.threshold=B(a=b.threshold)?c.threshold||this.threshold||v.threshold:a;this.depth=B(a=b.depth)?c.depth||this.depth||v.depth:a;this.f=(a=B(a=b.encode)?c.encode:a)&&x[a]&&x[a].bind(x)||(A(a)?a:this.f||!1);(a=b.matcher)&&this.addMatcher(a);if(a=b.filter){a=J[a]||a;c=this.f;var g=u();if(a)for(let b=0;b<a.length;b++){const d=c?c(a[b]):a[b];g[d]=String.fromCharCode(65E3-a.length+b)}this.filter=a=g}if(a=b.stemmer){var e;b=K[a]||a;a=this.f;c=[];if(b)for(e in b)b.hasOwnProperty(e)&&
(g=a?a(e):e,c.push(d("(?=.{"+(g.length+3)+",})"+g+"$"),a?a(b[e]):b[e]));this.stemmer=e=c}this.g=H(10-(this.threshold||0));this.c=u();this.b=u();return this};f.prototype.encode=function(b){b&&E.length&&(b=k(b,E));b&&this.i.length&&(b=k(b,this.i));b&&this.f&&(b=this.f(b));b&&this.stemmer&&(b=k(b,this.stemmer));return b};f.prototype.addMatcher=function(b){const a=this.i;for(const c in b)b.hasOwnProperty(c)&&a.push(d(c),b[c]);return this};f.prototype.add=function(b,a,c,d,e){if(a&&z(a)&&(b||0===b)){var g=
"@"+b;if(this.b[g]&&!d)return this.update(b,a);if(!e){if(this.async&&"function"!==typeof importScripts){let e=this;g=new Promise(function(c){setTimeout(function(){e.add(b,a,null,d,!0);e=null;c()})});if(c)g.then(c);else return g;return this}if(c)return this.add(b,a,null,d,!0),c(),this}a=this.encode(a);if(!a.length)return this;c=this.a;e=A(c)?c(a):a.split(I);const k=u();k._ctx=u();const q=this.threshold,r=this.depth,t=this.g,w=e.length,p=this.h;for(let a=0;a<w;a++){var n=e[a];if(n){var f=n.length,l=
(p?a+1:w-a)/w,m="";switch(c){case "reverse":case "both":for(var h=f;--h;)m=n[h]+m,y(t,k,m,b,p?1:(f-h)/f,l,q);m="";case "forward":for(h=0;h<f;h++)m+=n[h],y(t,k,m,b,p?(h+1)/f:1,l,q);break;case "full":for(h=0;h<f;h++){const a=(p?h+1:f-h)/f;for(let c=f;c>h;c--)m=n.substring(h,c),y(t,k,m,b,a,l,q)}break;default:if(f=y(t,k,n,b,1,l,q),r&&1<w&&f>=q)for(f=k._ctx[n]||(k._ctx[n]=u()),n=this.c[n]||(this.c[n]=H(10-(q||0))),l=a-r,m=a+r+1,0>l&&(l=0),m>w&&(m=w);l<m;l++)l!==a&&y(n,f,e[l],b,0,10-(l<a?a-l:l-a),q)}}}this.b[g]=
1}return this};f.prototype.update=function(b,a,c){this.b["@"+b]&&z(a)&&(this.remove(b),this.add(b,a,c,!0));return this};f.prototype.remove=function(b,a,c){var d="@"+b;if(this.b[d]){if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;d=new Promise(function(a){setTimeout(function(){c.remove(b,null,!0);c=null;a()})});if(a)d.then(a);else return d;return this}if(a)return this.remove(b,null,!0),a(),this}for(a=0;a<10-(this.threshold||0);a++)C(this.g[a],b);this.depth&&C(this.c,b);delete this.b[d]}return this};
f.prototype.search=function(b,a,c,d){let e=b;let f=[];if("object"===typeof b){(c=b.callback||a)&&(e.callback=null);a=b.limit;var g=b.threshold;b=b.query}g||(g=this.threshold||0);A(a)?(c=a,a=1E3):a||0===a||(a=1E3);if(!d){if(this.async&&"function"!==typeof importScripts){let b=this;g=new Promise(function(c){setTimeout(function(){c(b.search(e,a,null,!0));b=null})});if(c)g.then(c);else return g;return this}if(c)return c(this.search(e,a,null,!0)),this}if(!b||!z(b))return f;e=b;e=this.encode(e);if(!e.length)return f;
c=this.a;c=A(c)?c(e):e.split(I);b=c.length;d=!0;const k=[],l=u();let m;if(1<b)if(this.depth){m=!0;var h=c[0];l[h]=1}else c.sort(M);let p;if(!m||(p=this.c)[h])for(let a=m?1:0;a<b;a++){const b=c[a];if(b){if(!l[b]){const a=[];let c=!1,e=0;if(h=m?p[h]:this.g){let d;for(let f=0;f<10-g;f++)if(d=h[f][b])a[e++]=d,c=!0}if(c)k[k.length]=1<e?a.concat.apply([],a):a[0];else{d=!1;break}l[b]=1}h=b}}else d=!1;d&&(f=O(k,a,!1));return f};f.prototype.clear=function(){return this.destroy().init()};f.prototype.destroy=
function(){this.g=this.c=this.b=null;return this};const x={icase:function(b){return b.toLowerCase()},simple:function(){const b=[d("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",d("[\u00e8\u00e9\u00ea\u00eb]"),"e",d("[\u00ec\u00ed\u00ee\u00ef]"),"i",d("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",d("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",d("[\u00fd\u0177\u00ff]"),"y",d("\u00f1"),"n",d("\u00e7"),"c",d("\u00df"),"s",d(" & ")," and ",d("[-/]")," ",d("[^a-z0-9 ]"),"",d("\\s+")," "];return function(a){a=
k(a.toLowerCase(),b);return" "===a?"":a}}(),advanced:function(){const b=[d("ae"),"a",d("ai"),"ei",d("ay"),"ei",d("ey"),"ei",d("oe"),"o",d("ue"),"u",d("ie"),"i",d("sz"),"s",d("zs"),"s",d("sh"),"s",d("ck"),"k",d("cc"),"k",d("dt"),"t",d("ph"),"f",d("pf"),"f",d("ou"),"o",d("uo"),"u"];return function(a,c){if(!a)return a;a=this.simple(a);2<a.length&&(a=k(a,b));c||1<a.length&&(a=D(a));return a}}(),extra:function(){const b=[d("p"),"b",d("z"),"s",d("[cgq]"),"k",d("n"),"m",d("d"),"t",d("[vw]"),"f",d("[aeiouy]"),
""];return function(a){if(!a)return a;a=this.advanced(a,!0);if(1<a.length){a=a.split(" ");for(let c=0;c<a.length;c++){const d=a[c];1<d.length&&(a[c]=d[0]+k(d.substring(1),b))}a=a.join(" ");a=D(a)}return a}}(),balance:function(){const b=[d("[-/]")," ",d("[^a-z0-9 ]"),"",d("\\s+")," "];return function(a){return D(k(a.toLowerCase(),b))}}()};return f}(!1),this);
