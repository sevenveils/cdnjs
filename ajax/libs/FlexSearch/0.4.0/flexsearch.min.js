/*
 FlexSearch v0.4.0
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(t,A,g){let w;(w=g.define)&&w.amd?w([],function(){return A}):(w=g.modules)?w[t.toLowerCase()]=A:"object"===typeof exports?module.exports=A:g[t]=A})("FlexSearch",function Q(t){function g(a,b){const c=b?b.id:a&&a.id;this.id=c||0===c?c:R++;this.init(a,b);B(this,"index",function(){return this.a});B(this,"length",function(){return Object.keys(this.a).length})}function w(a,b,c,e){this.s!==this.f&&(this.j=this.j.concat(c),this.s++,e&&this.j.length>=e&&(this.s=this.f),this.F&&this.s===
this.f&&(this.cache&&this.m.set(b,this.j),this.F(this.j),this.j=[]));return this}function B(a,b,c){Object.defineProperty(a,b,{get:c})}function f(a){return new RegExp(a,"g")}function n(a,b){for(let c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}function F(a,b,c,e,d,l,h){if(b[c])return b[c];d=d?(9-(h||6))*l+(h||6)*d:l;b[c]=d;d>=h&&(a=a[9-(d+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=e);return d}function J(a,b){if(a){const c=Object.keys(a);for(let e=0,d=c.length;e<d;e++){const d=c[e],h=a[d];if(h)for(let c=
0,e=h.length;c<e;c++)if(h[c]===b){1===e?delete a[d]:h.splice(c,1);break}else z(h[c])&&J(h[c],b)}}}function K(a){let b="",c="";var e="";for(let d=0;d<a.length;d++){const l=a[d];if(l!==c)if(d&&"h"===l){if(e="a"===e||"e"===e||"i"===e||"o"===e||"u"===e||"y"===e,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&e||" "===c)b+=l}else b+=l;e=d===a.length-1?"":a[d+1];c=l}return b}function S(a,b){a=a.length-b.length;return 0>a?1:a?-1:0}function T(a,b){a=a.length-b.length;return 0>a?-1:a?1:0}function U(a,
b,c,e){let d=[],l;const h=a.length;if(1<h){a.sort(T);const x=u();let k=a[0],r=k.length,g=0;for(;g<r;)x["@"+k[g++]]=1;let m,C=0,v=0;for(;++v<h;){let p=!1;const V=v===h-1;l=[];k=a[v];r=k.length;for(g=0;g<r;){m=k[g++];var f="@"+m;if(x[f]){const a=x[f];if(a===v){if(V){if(d[C++]=c?c[f]:m,b&&C===b)return d}else x[f]=v+1;p=!0}else e&&(f=l[a]||(l[a]=[]),f[f.length]=m)}}if(!p&&!e)break}if(e&&(C=d.length,(v=l.length)&&(!b||C<b)))for(;v--;)if(m=l[v])for(g=0,r=m.length;g<r;g++)if(d[C++]=c?c["@"+m[g]]:m[g],b&&
C===b)return d}else if(h)if(c)for(a=a[0],e=a.length,b&&b<e&&(e=b),d=Array(e),b=0;b<e;b++)d[b]=c["@"+a[b]];else d=a[0],b&&d.length>b&&(d=d.slice(0,b));return d}function G(a){return"string"===typeof a}function H(a){return"function"===typeof a}function z(a){return"object"===typeof a}function y(a){return"undefined"===typeof a}function L(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=u();return b}function u(){return Object.create(null)}function W(){let a,b;self.onmessage=function(c){if(c=c.data)if(c.search){const e=
b.search(c.content,c.threshold?{limit:c.limit,threshold:c.threshold}:c.limit);self.postMessage({id:a,content:c.content,limit:c.limit,result:e})}else c.add?b.add(c.id,c.content):c.update?b.update(c.id,c.content):c.remove?b.remove(c.id):c.clear?b.clear():c.info?(c=b.info(),c.worker=a,console.log(c)):c.register&&(a=c.id,c.options.cache=!1,c.options.async=!1,c.options.worker=!1,b=(new Function(c.register.substring(c.register.indexOf("{")+1,c.register.lastIndexOf("}"))))(),b=new b(c.options))}}function X(a,
b,c,e){a=t("flexsearch","id"+a,W,function(a){(a=a.data)&&a.result&&e(a.id,a.content,a.result,a.limit)},b);const d=Q.toString();c.id=b;a.postMessage({register:d,options:c,id:b});return a}const q={encode:"icase",c:"forward",A:!1,cache:!1,async:!1,f:!1,D:!1,threshold:0,depth:0,b:!1},M={memory:{encode:"extra",c:"strict",threshold:7},speed:{encode:"icase",c:"strict",threshold:7,depth:2},match:{encode:"extra",c:"full"},score:{encode:"extra",c:"strict",threshold:5,depth:4},balance:{encode:"balance",c:"strict",
threshold:6,depth:3},fastest:{encode:"icase",c:"strict",threshold:9,depth:1}},I=[];let R=0;const N=f("\\W+"),O={},P={};g.create=function(a){return new g(a)};g.registerMatcher=function(a){for(const b in a)a.hasOwnProperty(b)&&I.push(f(b),a[b]);return this};g.registerEncoder=function(a,b){E[a]=b.bind(E);return this};g.registerLanguage=function(a,b){O[a]=b.filter;P[a]=b.stemmer;return this};g.encode=function(a,b){return E[a](b)};g.prototype.init=function(a,b){this.u=[];if(b){var c=b.preset;a=b}else a||
(a=q),c=a.preset;b={};G(a)?(b=M[a],a={}):c&&(b=M[c]);if(c=a.worker)if("undefined"===typeof Worker)a.worker=!1,this.l=null;else{var e=parseInt(c,10)||4;this.C=-1;this.s=0;this.j=[];this.F=null;this.l=Array(e);for(var d=0;d<e;d++)this.l[d]=X(this.id,d,a,w.bind(this))}this.c=a.tokenize||b.c||this.c||q.c;this.D=a.rtl||this.D||q.D;this.async="undefined"===typeof Promise||y(c=a.async)?this.async||q.async:c;this.f=y(c=a.worker)?this.f||q.f:c;this.threshold=y(c=a.threshold)?b.threshold||this.threshold||q.threshold:
c;this.depth=y(c=a.depth)?b.depth||this.depth||q.depth:c;this.A=y(c=a.suggest)?this.A||q.A:c;this.v=(c=y(c=a.encode)?b.encode||q.encode:c)&&E[c]&&E[c].bind(E)||(H(c)?c:this.v||!1);(c=a.matcher)&&this.addMatcher(c);if(c=a.filter){c=O[c]||c;b=this.v;e=u();if(c)for(d=0;d<c.length;d++){var l=b?b(c[d]):c[d];e[l]=String.fromCharCode(65E3-c.length+d)}this.filter=c=e}if(c=a.stemmer){var h;b=P[c]||c;e=this.v;d=[];if(b)for(h in b)b.hasOwnProperty(h)&&(l=e?e(h):h,d.push(f("(?=.{"+(l.length+3)+",})"+l+"$"),e?
e(b[h]):b[h]));this.stemmer=h=d}this.b=d=(c=a.doc)?c:this.b||q.b;this.h=L(10-(this.threshold||0));this.i=u();this.a=u();this.g=d&&u();if(d)if(a.doc=null,h=d.field,b=d.index=[],e=d.ref={},d.id=d.id.split(":"),h.constructor===Array)for(d=0;d<h.length;d++)e[h[d]]=d,h[d]=h[d].split(":"),b[d]=new g(a),b[d].g=this.g;else e[h]=0,d.field=[h.split(":")],b[0]=new g(a),b[0].g=this.g;this.B=!0;this.m=(this.cache=c=y(c=a.cache)?this.cache||q.cache:c)?new Y(c):!1;return this};g.prototype.encode=function(a){a&&
I.length&&(a=n(a,I));a&&this.u.length&&(a=n(a,this.u));a&&this.v&&(a=this.v(a));a&&this.stemmer&&(a=n(a,this.stemmer));return a};g.prototype.addMatcher=function(a){const b=this.u;for(const c in a)a.hasOwnProperty(c)&&b.push(f(c),a[c]);return this};g.prototype.add=function(a,b,c,e,d){if(this.b&&z(a))return this.w("add",a,b);if(b&&G(b)&&(a||0===a)){var l="@"+a;if(this.a[l]&&!e)return this.update(a,b);if(this.f)return++this.C>=this.l.length&&(this.C=0),this.l[this.C].postMessage({add:!0,id:a,content:b}),
this.a[l]=""+this.C,c&&c(),this;if(!d){if(this.async&&"function"!==typeof importScripts){let d=this;l=new Promise(function(c){setTimeout(function(){d.add(a,b,null,e,!0);d=null;c()})});if(c)l.then(c);else return l;return this}if(c)return this.add(a,b,null,e,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.c;d=H(c)?c(b):b.split(N);const r=u();r._ctx=u();const m=this.threshold,x=this.depth,v=this.h,D=d.length,n=this.D;for(let b=0;b<D;b++){var h=d[b];if(h){var f=h.length,g=(n?b+1:D-b)/D,
k="";switch(c){case "reverse":case "both":for(var p=f;--p;)k=h[p]+k,F(v,r,k,a,n?1:(f-p)/f,g,m);k="";case "forward":for(p=0;p<f;p++)k+=h[p],F(v,r,k,a,n?(p+1)/f:1,g,m);break;case "full":for(p=0;p<f;p++){const b=(n?p+1:f-p)/f;for(let c=f;c>p;c--)k=h.substring(p,c),F(v,r,k,a,b,g,m)}break;default:if(f=F(v,r,h,a,1,g,m),x&&1<D&&f>=m)for(f=r._ctx[h]||(r._ctx[h]=u()),h=this.i[h]||(this.i[h]=L(10-(m||0))),g=b-x,k=b+x+1,0>g&&(g=0),k>D&&(k=D);g<k;g++)g!==b&&F(h,f,d[g],a,0,10-(g<b?b-g:g-b),m)}}}this.a[l]=1;this.B=
!1}return this};g.prototype.w=function(a,b,c){if(b.constructor===Array)for(let d=0,e=b.length;d<e;d++){if(d===e-1)return this.w(a,b[d],c);this.w(a,b[d])}else{const f=this.b.index;let h=this.b.id,g;for(var e=0;e<h.length;e++)g=(g||b)[h[e]];if("remove"===a){delete this.g["@"+g];for(let a=0,b=f.length;a<b;a++){if(a===b-1)return f[a].remove(g,c);f[a].remove(g)}}h=this.b.field;for(let l=0,k=h.length;l<k;l++){e=h[l];let r;for(var d=0;d<e.length;d++)r=(r||b)[e[d]];this.g["@"+g]=b;e=f[l];d="add"===a?e.add:
e.update;if(l===k-1)return d.call(e,g,r,c);d.call(e,g,r)}}};g.prototype.update=function(a,b,c){if(this.b&&z(a))return this.w("update",a,b);this.a["@"+a]&&G(b)&&(this.remove(a),this.add(a,b,c,!0));return this};g.prototype.remove=function(a,b,c){if(this.b&&z(a))return this.w("remove",a,b);var e="@"+a;if(this.a[e]){if(this.f)return this.l[this.a[e]].postMessage({remove:!0,id:a}),delete this.a[e],b&&b(),this;if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;e=new Promise(function(b){setTimeout(function(){c.remove(a,
null,!0);c=null;b()})});if(b)e.then(b);else return e;return this}if(b)return this.remove(a,null,!0),b(),this}for(b=0;b<10-(this.threshold||0);b++)J(this.h[b],a);this.depth&&J(this.i,a);delete this.a[e];this.B=!1}return this};g.prototype.search=function(a,b,c,e){if(z(b)){if(b.constructor===Array)for(var d=0;d<b.length;d++)b[d].query=a;else b.query=a;a=b;b=0}let f=a;let h=[];if(z(a)&&a.constructor!==Array){(c=a.callback||b)&&(f.callback=null);b=a.limit;var g=a.threshold;var n=a.boost;a=a.query}if(this.b){a=
this.b.ref;g=this.b.index;var k=f.field;if(k)f.field=null;else if(f.constructor===Array){var p=f;k=[];for(var q=0;q<f.length;q++)k[q]=f[q].field}else k=Object.keys(a);if(z(k)){k.constructor===Array||(k=[k]);q=k.length;for(var m=0;m<q;m++)p&&(f=p[m]),h[m]=g[a[k[m]]].search(f);return c?c(h.concat.apply([],h)):this.async?new Promise(function(a){Promise.all(h).then(function(b){a(b.concat.apply([],b))})}):h.concat.apply([],h)}return g[a[k]].search(f,c)}g||(g=this.threshold||0);H(b)?(c=b,b=1E3):b||0===
b||(b=1E3);if(this.f)for(this.F=c,this.s=0,this.j=[],k=0;k<this.f;k++)this.l[k].postMessage({search:!0,limit:b,threshold:g,content:a});else{if(!e){if(this.async&&"function"!==typeof importScripts){let d=this;a=new Promise(function(a){setTimeout(function(){a(d.search(f,b,null,!0));d=null})});if(c)a.then(c);else return a;return this}if(c)return c(this.search(f,b,null,!0)),this}if(!a||!G(a))return h;f=a;if(this.cache)if(this.B){if(c=this.m.get(a))return c}else this.m.clear(),this.B=!0;f=this.encode(f);
if(!f.length)return h;c=this.c;c=H(c)?c(f):f.split(N);p=c.length;e=!0;d=[];var t=u();1<p&&(this.depth?(k=!0,m=c[0],t[m]=1):c.sort(S));if(!k||(q=this.i)[m]){let a=0;n&&(g=(g||1)/n,0>n&&(a=g));for(n=k?1:0;n<p;n++){const b=c[n];if(b){if(!t[b]){const c=[];let f=!1,h=0;if(m=k?q[m]:this.h){let d;for(let e=a;e<10-g;e++)if(d=m[e][b])c[h++]=d,f=!0}if(f)d[d.length]=1<h?c.concat.apply([],c):c[0];else if(!this.A){e=!1;break}t[b]=1}m=b}}}else e=!1;e&&(h=U(d,b,this.g,this.A));this.cache&&this.m.set(a,h);return h}};
g.prototype.info=function(){if(this.f)for(var a=0;a<this.f;a++)this.l[a].postMessage({info:!0,id:this.id});else{var b=0,c=0,e=0;for(var d=0;d<10-(this.threshold||0);d++){a=Object.keys(this.h[d]);for(let h=0;h<a.length;h++){var f=this.h[d][a[h]].length;b+=1*f+2*a[h].length+4;c+=f;e+=2*a[h].length}}a=Object.keys(this.a);f=a.length;for(d=0;d<f;d++)b+=2*a[d].length+2;return{id:this.id,memory:b,items:f,sequences:c,chars:e,cache:this.cache&&this.cache.o?this.cache.o.length:!1,matcher:I.length+(this.u?this.u.length:
0),worker:this.f,threshold:this.threshold,depth:this.depth,contextual:this.depth&&"strict"===this.c}}};g.prototype.clear=function(){return this.destroy().init()};g.prototype.destroy=function(){this.cache&&(this.m.clear(),this.m=null);this.h=this.i=this.a=null;return this};g.prototype.export=function(){if(this.b){const a=this.b.index,b=Array(a.length+1);let c=0;for(;c<a.length;c++)b[c]=[a[c].h,a[c].i,a[c].a];b[c]=this.g;return JSON.stringify(b)}return JSON.stringify([this.h,this.i,this.a])};g.prototype.import=
function(a){a=JSON.parse(a);if(this.b){const b=this.b.index,c=b.length;for(let e=0;e<c;e++){const d=b[e];d.h=a[e][0];d.i=a[e][1];d.a=a[e][2];d.g=a[c]}this.g=a[c]}else this.h=a[0],this.i=a[1],this.a=a[2],this.g=a[3]};const E={icase:function(a){return a.toLowerCase()},simple:function(){const a=[f("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",f("[\u00e8\u00e9\u00ea\u00eb]"),"e",f("[\u00ec\u00ed\u00ee\u00ef]"),"i",f("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",f("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",
f("[\u00fd\u0177\u00ff]"),"y",f("\u00f1"),"n",f("\u00e7"),"c",f("\u00df"),"s",f(" & ")," and ",f("[-/]")," ",f("[^a-z0-9 ]"),"",f("\\s+")," "];return function(b){b=n(b.toLowerCase(),a);return" "===b?"":b}}(),advanced:function(){const a=[f("ae"),"a",f("ai"),"ei",f("ay"),"ei",f("ey"),"ei",f("oe"),"o",f("ue"),"u",f("ie"),"i",f("sz"),"s",f("zs"),"s",f("sh"),"s",f("ck"),"k",f("cc"),"k",f("dt"),"t",f("ph"),"f",f("pf"),"f",f("ou"),"o",f("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);2<b.length&&
(b=n(b,a));c||1<b.length&&(b=K(b));return b}}(),extra:function(){const a=[f("p"),"b",f("z"),"s",f("[cgq]"),"k",f("n"),"m",f("d"),"t",f("[vw]"),"f",f("[aeiouy]"),""];return function(b){if(!b)return b;b=this.advanced(b,!0);if(1<b.length){b=b.split(" ");for(let c=0;c<b.length;c++){const e=b[c];1<e.length&&(b[c]=e[0]+n(e.substring(1),a))}b=b.join(" ");b=K(b)}return b}}(),balance:function(){const a=[f("[-/]")," ",f("[^a-z0-9 ]"),"",f("\\s+")," "];return function(b){return K(n(b.toLowerCase(),a))}}()},
Y=function(){function a(a){this.clear();this.G=!0!==a&&a}a.prototype.clear=function(){this.cache=u();this.count=u();this.index=u();this.o=[]};a.prototype.set=function(a,c){if(this.G&&y(this.cache[a])){let b=this.o.length;if(b===this.G){b--;const a=this.o[b];delete this.cache[a];delete this.count[a];delete this.index[a]}this.index[a]=b;this.o[b]=a;this.count[a]=-1;this.cache[a]=c;this.get(a)}else this.cache[a]=c};a.prototype.get=function(a){const b=this.cache[a];if(this.G&&b){var e=++this.count[a];
const b=this.index;let c=b[a];if(0<c){const f=this.o;for(var d=c;this.count[f[--c]]<=e&&-1!==c;);c++;if(c!==d){for(e=d;e>c;e--)d=f[e-1],f[e]=d,b[d]=e;f[c]=a;b[a]=c}}}return b};return a}();return g}(function(){const t={},A="undefined"!==typeof Blob&&"undefined"!==typeof URL&&URL.createObjectURL;return function(g,w,B,f,n){B=A?URL.createObjectURL(new Blob(["("+B.toString()+")()"],{type:"text/javascript"})):g+".min.js";g+="-"+w;t[g]||(t[g]=[]);t[g][n]=new Worker(B);t[g][n].onmessage=f;return t[g][n]}}()),
this);
