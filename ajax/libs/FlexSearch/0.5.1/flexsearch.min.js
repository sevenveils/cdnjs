/*
 FlexSearch v0.5.1
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(w,F,g){let y;(y=g.define)&&y.amd?y([],function(){return F}):(y=g.modules)?y[w.toLowerCase()]=F:"object"===typeof exports?module.exports=F:g[w]=F})("FlexSearch",function U(w){function g(a,b){const c=b?b.id:a&&a.id;this.id=c||0===c?c:V++;this.init(a,b);K(this,"index",function(){return this.b});K(this,"length",function(){return Object.keys(this.b).length})}function y(a,b,c,d){this.u!==this.g&&(this.l=this.l.concat(c),this.u++,d&&this.l.length>=d&&(this.u=this.g),this.G&&this.u===
this.g&&(this.cache&&this.o.set(b,this.l),this.G(this.l),this.l=[]));return this}function B(a,b){a=a.concat.apply([],a);b&&(G(b)||(z=b.split(":"),1<z.length?b=W:(z=z[0],b=X)),a.sort(b));return a}function K(a,b,c){Object.defineProperty(a,b,{get:c})}function f(a){return new RegExp(a,"g")}function E(a,b){for(let c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}function J(a,b,c,d,e,l,k,h){if(b[c])return b[c];e=e?(h-(k||h/1.5))*l+(k||h/1.5)*e:l;b[c]=e;e>=k&&(a=a[h-(e+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=
d);return e}function N(a,b){if(a){const c=Object.keys(a);for(let d=0,e=c.length;d<e;d++){const e=c[d],k=a[e];if(k)for(let c=0,d=k.length;c<d;c++)if(k[c]===b){1===d?delete a[e]:k.splice(c,1);break}else A(k[c])&&N(k[c],b)}}}function O(a){let b="",c="";var d="";for(let e=0;e<a.length;e++){const l=a[e];if(l!==c)if(e&&"h"===l){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)b+=l}else b+=l;d=e===a.length-1?"":a[e+1];c=l}return b}
function Y(a,b){a=a.length-b.length;return 0>a?1:a?-1:0}function Z(a,b){a=a.length-b.length;return 0>a?-1:a?1:0}function X(a,b){a=a[z];b=b[z];return a<b?-1:a>b?1:0}function W(a,b){const c=z.length;for(let d=0;d<c;d++)a=a[z[d]],b=b[z[d]];return a<b?-1:a>b?1:0}function aa(a,b,c,d,e){c=[];let l;const k=a.length;if(1<k){a.sort(Z);const C=r();let f=a[0],q=f.length,m=0;for(;m<q;)C["@"+f[m++]]=1;let p,g=0,t=0;for(;++t<k;){let n=!1;const D=t===k-1;l=[];f=a[t];q=f.length;for(m=0;m<q;){p=f[m++];var h="@"+p;
if(C[h]){const a=C[h];if(a===t){if(D){if(c[g++]=d?d[p]:p,b&&g===b)return c}else C[h]=t+1;n=!0}else e&&(h=l[a]||(l[a]=[]),h[h.length]=p)}}if(!n&&!e)break}if(e&&(g=c.length,(t=l.length)&&(!b||g<b)))for(;t--;)if(p=l[t])for(m=0,q=p.length;m<q;m++)if(c[g++]=d?d[p[m]]:p[m],b&&g===b)return c}else if(k)if(d)for(a=a[0],e=a.length,b&&b<e&&(e=b),c=Array(e),b=0;b<e;b++)c[b]=d[a[b]];else c=a[0],b&&c.length>b&&(c=c.slice(0,b));return c}function H(a){return"string"===typeof a}function x(a){return a.constructor===
Array}function G(a){return"function"===typeof a}function A(a){return"object"===typeof a}function v(a){return"undefined"===typeof a}function P(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=r();return b}function r(){return Object.create(null)}function ba(){let a,b;self.onmessage=function(c){if(c=c.data)if(c.search){const d=b.search(c.content,c.threshold?{limit:c.limit,threshold:c.threshold}:c.limit);self.postMessage({id:a,content:c.content,limit:c.limit,result:d})}else c.add?b.add(c.id,c.content):c.update?
b.update(c.id,c.content):c.remove?b.remove(c.id):c.clear?b.clear():c.info?(c=b.info(),c.worker=a,console.log(c)):c.register&&(a=c.id,c.options.cache=!1,c.options.async=!1,c.options.worker=!1,b=(new Function(c.register.substring(c.register.indexOf("{")+1,c.register.lastIndexOf("}"))))(),b=new b(c.options))}}function ca(a,b,c,d){a=w("flexsearch","id"+a,ba,function(a){(a=a.data)&&a.result&&d(a.id,a.content,a.result,a.limit)},b);const e=U.toString();c.id=b;a.postMessage({register:e,options:c,id:b});return a}
const u={encode:"icase",f:"forward",B:!1,cache:!1,async:!1,g:!1,F:!1,a:!1,J:!1,c:9,threshold:0,depth:0},Q={memory:{encode:"extra",f:"strict",threshold:0,c:1},speed:{encode:"icase",f:"strict",threshold:1,c:3,depth:2},match:{encode:"extra",f:"full",threshold:1,c:3},score:{encode:"extra",f:"strict",threshold:1,c:9,depth:4},balance:{encode:"balance",f:"strict",threshold:0,c:3,depth:3},fast:{encode:"icase",f:"strict",threshold:8,c:9,depth:1}},M=[];let V=0;const R=f("\\W+"),S={},T={};g.create=function(a){return new g(a)};
g.registerMatcher=function(a){for(const b in a)a.hasOwnProperty(b)&&M.push(f(b),a[b]);return this};g.registerEncoder=function(a,b){I[a]=b.bind(I);return this};g.registerLanguage=function(a,b){S[a]=b.filter;T[a]=b.stemmer;return this};g.encode=function(a,b){return I[a](b)};g.prototype.init=function(a,b){this.v=[];if(b){var c=b.preset;a=b}else a||(a=u),c=a.preset;b={};H(a)?(b=Q[a],a={}):c&&(b=Q[c]);if(c=a.worker)if("undefined"===typeof Worker)a.worker=!1,this.m=null;else{var d=parseInt(c,10)||4;this.D=
-1;this.u=0;this.l=[];this.G=null;this.m=Array(d);for(var e=0;e<d;e++)this.m[e]=ca(this.id,e,a,y.bind(this))}this.f=a.tokenize||b.f||this.f||u.f;this.F=a.rtl||this.F||u.F;this.async="undefined"===typeof Promise||v(c=a.async)?this.async||u.async:c;this.g=v(c=a.worker)?this.g||u.g:c;this.threshold=v(c=a.threshold)?b.threshold||this.threshold||u.threshold:c;this.c=v(c=a.resolution)?c=b.c||this.c||u.c:c;c<=this.threshold&&(this.c=this.threshold+1);this.depth=v(c=a.depth)?b.depth||this.depth||u.depth:
c;this.J=v(c=a.paging)?this.J||u.J:c;this.B=v(c=a.suggest)?this.B||u.B:c;this.w=(c=v(c=a.encode)?b.encode||u.encode:c)&&I[c]&&I[c].bind(I)||(G(c)?c:this.w||!1);(c=a.matcher)&&this.addMatcher(c);if(c=a.filter){c=S[c]||c;b=this.w;d=r();if(c)for(e=0;e<c.length;e++){var l=b?b(c[e]):c[e];d[l]=String.fromCharCode(65E3-c.length+e)}this.filter=c=d}if(c=a.stemmer){var k;b=T[c]||c;d=this.w;e=[];if(b)for(k in b)b.hasOwnProperty(k)&&(l=d?d(k):k,e.push(f("(?=.{"+(l.length+3)+",})"+l+"$"),d?d(b[k]):b[k]));this.stemmer=
k=e}this.a=d=(c=a.doc)?c:this.a||u.a;this.i=P(this.c-(this.threshold||0));this.j=r();this.b=r();if(d){this.h=r();a.doc=null;k=d.index=[];b=d.ref={};e=d.field;l=d.tag;x(d.id)||(d.id=d.id.split(":"));if(l){this.H=r();let b=r();if(e)if(H(e))b[e]=a;else if(x(e))for(let c=0;c<e.length;c++)b[e[c]]=a;else A(e)&&(b=e);x(l)||(d.tag=l=[l]);for(e=0;e<l.length;e++)this.H[l[e]]=r();this.K=l;e=b}if(e){let c;x(e)||(A(e)?(c=e,d.field=e=Object.keys(e)):d.field=e=[e]);for(d=0;d<e.length;d++)x(e[d])||(c&&(a=c[e[d]]),
b[e[d]]=d,e[d]=e[d].split(":")),k[d]=new g(a),k[d].h=this.h}}this.C=!0;this.o=(this.cache=c=v(c=a.cache)?this.cache||u.cache:c)?new da(c):!1;return this};g.prototype.encode=function(a){a&&M.length&&(a=E(a,M));a&&this.v.length&&(a=E(a,this.v));a&&this.w&&(a=this.w(a));a&&this.stemmer&&(a=E(a,this.stemmer));return a};g.prototype.addMatcher=function(a){const b=this.v;for(const c in a)a.hasOwnProperty(c)&&b.push(f(c),a[c]);return this};g.prototype.add=function(a,b,c,d,e){if(this.a&&A(a))return this.A("add",
a,b);if(b&&H(b)&&(a||0===a)){var l="@"+a;if(this.b[l]&&!d)return this.update(a,b);if(this.g)return++this.D>=this.m.length&&(this.D=0),this.m[this.D].postMessage({add:!0,id:a,content:b}),this.b[l]=""+this.D,c&&c(),this;if(!e){if(this.async&&"function"!==typeof importScripts){let e=this;l=new Promise(function(c){setTimeout(function(){e.add(a,b,null,d,!0);e=null;c()})});if(c)l.then(c);else return l;return this}if(c)return this.add(a,b,null,d,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.f;
e=G(c)?c(b):b.split(R);const m=r();m._ctx=r();const p=this.threshold,C=this.depth,t=this.c,q=this.i,D=e.length,L=this.F;for(let b=0;b<D;b++){var k=e[b];if(k){var h=k.length,f=(L?b+1:D-b)/D,n="";switch(c){case "reverse":case "both":for(var g=h;--g;)n=k[g]+n,J(q,m,n,a,L?1:(h-g)/h,f,p,t-1);n="";case "forward":for(g=0;g<h;g++)n+=k[g],J(q,m,n,a,L?(g+1)/h:1,f,p,t-1);break;case "full":for(g=0;g<h;g++){const b=(L?g+1:h-g)/h;for(let c=h;c>g;c--)n=k.substring(g,c),J(q,m,n,a,b,f,p,t-1)}break;default:if(h=J(q,
m,k,a,1,f,p,t-1),C&&1<D&&h>=p)for(h=m._ctx[k]||(m._ctx[k]=r()),k=this.j[k]||(this.j[k]=P(t-(p||0))),f=b-C,n=b+C+1,0>f&&(f=0),n>D&&(n=D);f<n;f++)f!==b&&J(k,h,e[f],a,0,t-(f<b?b-f:f-b),p,t-1)}}}this.b[l]=1;this.C=!1}return this};g.prototype.A=function(a,b,c){if(x(b))for(let d=0,e=b.length;d<e;d++){if(d===e-1)return this.A(a,b[d],c);this.A(a,b[d])}else{const g=this.a.index;var d=this.a.tag,e=this.a.id;let h;let q;for(var l=0;l<e.length;l++)h=(h||b)[e[l]];if(d){for(e=0;e<d.length;e++){var k=d[e];var f=
k.split(":");for(l=0;l<f.length;l++)q=(q||b)[f[l]];q="@"+q}f=this.H[k];f=f[q]||(f[q]=[])}if("remove"===a){delete this.h[h];for(let a=0,b=g.length;a<b;a++){if(a===b-1)return g[a].remove(h,c);g[a].remove(h)}}e=this.a.field;f&&(f[f.length]=b);for(let f=0,l=e.length;f<l;f++){d=e[f];let m;for(k=0;k<d.length;k++)m=(m||b)[d[k]];this.h[h]=b;d=g[f];k="add"===a?d.add:d.update;if(f===l-1)return k.call(d,h,m,c);k.call(d,h,m)}}};g.prototype.update=function(a,b,c){if(this.a&&A(a))return this.A("update",a,b);this.b["@"+
a]&&H(b)&&(this.remove(a),this.add(a,b,c,!0));return this};g.prototype.remove=function(a,b,c){if(this.a&&A(a))return this.A("remove",a,b);var d="@"+a;if(this.b[d]){if(this.g)return this.m[this.b[d]].postMessage({remove:!0,id:a}),delete this.b[d],b&&b(),this;if(!c){if(this.async&&"function"!==typeof importScripts){let c=this;d=new Promise(function(b){setTimeout(function(){c.remove(a,null,!0);c=null;b()})});if(b)d.then(b);else return d;return this}if(b)return this.remove(a,null,!0),b(),this}for(b=0;b<
this.c-(this.threshold||0);b++)N(this.i[b],a);this.depth&&N(this.j,a);delete this.b[d];this.C=!1}return this};let z;g.prototype.search=function(a,b,c,d){if(A(b)){if(x(b))for(var e=0;e<b.length;e++)b[e].query=a;else b.query=a;a=b;b=0}let f=a;let k,h=[];if(A(a)&&!x(a)){(c=a.callback||b)&&(f.callback=null);var g=a.where;k=a.sort;b=a.limit;var n=a.threshold;a=a.query}if(this.a){a=this.a.ref;n=this.a.index;if(g=f.field)f.field=null;else if(x(f)){var q=f;g=[];for(var m=0;m<f.length;m++)g[m]=f[m].field}else g=
Object.keys(a);if(A(g)){k&&(f.sort=null);x(g)||(g=[g]);m=g.length;for(var p=0;p<m;p++)q&&(f=q[p]),h[p]=n[a[g[p]]].search(f);return c?c(B(h,k)):this.async?new Promise(function(a){Promise.all(h).then(function(b){a(B(b,k))})}):B(h,k)}return n[a[g]].search(f,c)}n||(n=this.threshold||0);G(b)?(c=b,b=1E3):b||0===b||(b=1E3);if(this.g)for(this.G=c,this.u=0,this.l=[],g=0;g<this.g;g++)this.m[g].postMessage({search:!0,limit:b,threshold:n,content:a});else{if(!d){if(this.async&&"function"!==typeof importScripts){let d=
this;a=new Promise(function(a){setTimeout(function(){a(d.search(f,b,null,!0));d=null})});if(c)a.then(c);else return a;return this}if(c)return c(this.search(f,b,null,!0)),this}if(!a||!H(a))return h;f=a;if(this.cache)if(this.C){if(c=this.o.get(a))return c}else this.o.clear(),this.C=!0;f=this.encode(f);if(!f.length)return h;c=this.f;c=G(c)?c(f):f.split(R);q=c.length;d=!0;e=[];var u=r();if(1<q)if(this.depth){m=!0;var t=c[0];u[t]=1}else c.sort(Y);if(!m||(p=this.j)[t]){let a=this.c;for(let b=m?1:0;b<q;b++){const f=
c[b];if(f){if(!u[f]){const b=[];let c=!1,g=0;if(t=m?p[t]:this.i){let d;for(let e=0;e<a-n;e++)if(d=t[e][f])b[g++]=d,c=!0}if(c)e[e.length]=1<g?b.concat.apply([],b):b[0];else if(!this.B){d=!1;break}u[f]=1}t=f}}}else d=!1;d&&(h=aa(e,b,void 0,this.h,this.B));g&&(h=this.where(g,null,b,h));k&&(h=B([h],k));this.cache&&this.o.set(a,h);return h}};g.prototype.find=function(a,b){return this.where(a,b,1)[0]||null};g.prototype.where=function(a,b,c,d){const e=d||this.h,f=[];let g=0;var h;let u;if("number"===typeof a)return[e[a]];
if(H(a)){if(v(b))return[e[a]];if("id"===a)return[e[b]];var n=1;var q=[a.split(":")];u=!0}else{if(G(a)){b=d||Object.keys(e);c=b.length;for(h=0;h<c;h++)n=d?d[h]:e[b[h]],a(n)&&(f[g++]=n);return f}c||(c=b);h=Object.keys(a);n=h.length;u=!1;if(1===n&&"id"===h[0])return[e[a.id]];if((q=this.K)&&!d)for(var m=0;m<q.length;m++){var p=q[m],r=a[p];if(!v(r)){d=this.H[p]["@"+r];if(0===--n)return d;h.splice(h.indexOf(p),1);delete a[p];break}}q=Array(n);for(m=0;m<n;m++)q[m]=h[m].split(":")}m=d||Object.keys(e);p=m.length;
for(r=0;r<p;r++){const k=d?d[r]:e[m[r]];let l=!0;for(let c=0;c<n;c++){u||(b=a[h[c]]);const d=q[c],e=d.length;let f=k;if(1<e)for(let a=0;a<e;a++)f=f[d[a]];else f=f[d[0]];if(f!==b){l=!1;break}}if(l&&(f[g++]=k,c&&g===c))break}return f};g.prototype.info=function(){if(this.g)for(var a=0;a<this.g;a++)this.m[a].postMessage({info:!0,id:this.id});else{var b=0,c=0,d=0;for(var e=0;e<this.c-(this.threshold||0);e++){a=Object.keys(this.i[e]);for(let g=0;g<a.length;g++){var f=this.i[e][a[g]].length;b+=1*f+2*a[g].length+
4;c+=f;d+=2*a[g].length}}a=Object.keys(this.b);f=a.length;for(e=0;e<f;e++)b+=2*a[e].length+2;return{id:this.id,memory:b,items:f,sequences:c,chars:d,cache:this.cache&&this.cache.s?this.cache.s.length:!1,matcher:M.length+(this.v?this.v.length:0),worker:this.g,threshold:this.threshold,depth:this.depth,contextual:this.depth&&"strict"===this.f}}};g.prototype.clear=function(){return this.destroy().init()};g.prototype.destroy=function(){this.cache&&(this.o.clear(),this.o=null);this.i=this.j=this.b=null;
if(this.a){const a=this.h.index;for(let b=0;b<a.length;b++)a.destroy();this.h=null}return this};g.prototype.export=function(){if(this.a){const a=this.a.index,b=Array(a.length+1);let c=0;for(;c<a.length;c++)b[c]=[a[c].i,a[c].j,a[c].b];b[c]=this.h;return JSON.stringify(b)}return JSON.stringify([this.i,this.j,this.b])};g.prototype.import=function(a){a=JSON.parse(a);if(this.a){const b=this.a.index,c=b.length;for(let d=0;d<c;d++){const e=b[d];e.i=a[d][0];e.j=a[d][1];e.b=a[d][2];e.h=a[c]}this.h=a[c]}else this.i=
a[0],this.j=a[1],this.b=a[2],this.h=a[3]};const I={icase:function(a){return a.toLowerCase()},simple:function(){const a=[f("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",f("[\u00e8\u00e9\u00ea\u00eb]"),"e",f("[\u00ec\u00ed\u00ee\u00ef]"),"i",f("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",f("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",f("[\u00fd\u0177\u00ff]"),"y",f("\u00f1"),"n",f("\u00e7"),"c",f("\u00df"),"s",f(" & ")," and ",f("[-/]")," ",f("[^a-z0-9 ]"),"",f("\\s+")," "];return function(b){b=E(b.toLowerCase(),
a);return" "===b?"":b}}(),advanced:function(){const a=[f("ae"),"a",f("ai"),"ei",f("ay"),"ei",f("ey"),"ei",f("oe"),"o",f("ue"),"u",f("ie"),"i",f("sz"),"s",f("zs"),"s",f("sh"),"s",f("ck"),"k",f("cc"),"k",f("dt"),"t",f("ph"),"f",f("pf"),"f",f("ou"),"o",f("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);2<b.length&&(b=E(b,a));c||1<b.length&&(b=O(b));return b}}(),extra:function(){const a=[f("p"),"b",f("z"),"s",f("[cgq]"),"k",f("n"),"m",f("d"),"t",f("[vw]"),"f",f("[aeiouy]"),""];return function(b){if(!b)return b;
b=this.advanced(b,!0);if(1<b.length){b=b.split(" ");for(let c=0;c<b.length;c++){const d=b[c];1<d.length&&(b[c]=d[0]+E(d.substring(1),a))}b=b.join(" ");b=O(b)}return b}}(),balance:function(){const a=[f("[-/]")," ",f("[^a-z0-9 ]"),"",f("\\s+")," "];return function(b){return O(E(b.toLowerCase(),a))}}()},da=function(){function a(a){this.clear();this.I=!0!==a&&a}a.prototype.clear=function(){this.cache=r();this.count=r();this.index=r();this.s=[]};a.prototype.set=function(a,c){if(this.I&&v(this.cache[a])){let b=
this.s.length;if(b===this.I){b--;const a=this.s[b];delete this.cache[a];delete this.count[a];delete this.index[a]}this.index[a]=b;this.s[b]=a;this.count[a]=-1;this.cache[a]=c;this.get(a)}else this.cache[a]=c};a.prototype.get=function(a){const b=this.cache[a];if(this.I&&b){var d=++this.count[a];const b=this.index;let c=b[a];if(0<c){const f=this.s;for(var e=c;this.count[f[--c]]<=d&&-1!==c;);c++;if(c!==e){for(d=e;d>c;d--)e=f[d-1],f[d]=e,b[e]=d;f[c]=a;b[a]=c}}}return b};return a}();return g}(function(){const w=
{},F="undefined"!==typeof Blob&&"undefined"!==typeof URL&&URL.createObjectURL;return function(g,y,B,K,f){B=F?URL.createObjectURL(new Blob(["("+B.toString()+")()"],{type:"text/javascript"})):g+".min.js";g+="-"+y;w[g]||(w[g]=[]);w[g][f]=new Worker(B);w[g][f].onmessage=K;return w[g][f]}}()),this);
