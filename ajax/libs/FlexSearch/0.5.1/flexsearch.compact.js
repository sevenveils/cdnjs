/*
 FlexSearch v0.5.1
 Copyright 2019 Nextapps GmbH
 Author: Thomas Wilkerling
 Released under the Apache 2.0 Licence
 https://github.com/nextapps-de/flexsearch
*/
'use strict';(function(n,u,A){let f;(f=A.define)&&f.amd?f([],function(){return u}):(f=A.modules)?f[n.toLowerCase()]=u:"object"===typeof exports?module.exports=u:A[n]=u})("FlexSearch",function(){function n(a,b){const c=b?b.id:a&&a.id;this.id=c||0===c?c:Q++;this.init(a,b);A(this,"index",function(){return this.f});A(this,"length",function(){return Object.keys(this.f).length})}function u(a,b){a=a.concat.apply([],a);b&&(F(b)||(x=b.split(":"),1<x.length?b=R:(x=x[0],b=S)),a.sort(b));return a}function A(a,
b,c){Object.defineProperty(a,b,{get:c})}function f(a){return new RegExp(a,"g")}function z(a,b){for(let c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);return a}function G(a,b,c,d,g,h,e,k){if(b[c])return b[c];g=g?(k-(e||k/1.5))*h+(e||k/1.5)*g:h;b[c]=g;g>=e&&(a=a[k-(g+.5>>0)],a=a[c]||(a[c]=[]),a[a.length]=d);return g}function I(a,b){if(a){const c=Object.keys(a);for(let d=0,g=c.length;d<g;d++){const g=c[d],e=a[g];if(e)for(let c=0,d=e.length;c<d;c++)if(e[c]===b){1===d?delete a[g]:e.splice(c,1);break}else y(e[c])&&
I(e[c],b)}}}function J(a){let b="",c="";var d="";for(let g=0;g<a.length;g++){const h=a[g];if(h!==c)if(g&&"h"===h){if(d="a"===d||"e"===d||"i"===d||"o"===d||"u"===d||"y"===d,("a"===c||"e"===c||"i"===c||"o"===c||"u"===c||"y"===c)&&d||" "===c)b+=h}else b+=h;d=g===a.length-1?"":a[g+1];c=h}return b}function T(a,b){a=a.length-b.length;return 0>a?1:a?-1:0}function U(a,b){a=a.length-b.length;return 0>a?-1:a?1:0}function S(a,b){a=a[x];b=b[x];return a<b?-1:a>b?1:0}function R(a,b){const c=x.length;for(let d=
0;d<c;d++)a=a[x[d]],b=b[x[d]];return a<b?-1:a>b?1:0}function V(a,b,c,d,g){c=[];let h;const e=a.length;if(1<e){a.sort(U);const k=v();let m=a[0],l=m.length,w=0;for(;w<l;)k["@"+m[w++]]=1;let p,B=0,r=0;for(;++r<e;){let q=!1;const n=r===e-1;h=[];m=a[r];l=m.length;for(w=0;w<l;){p=m[w++];var f="@"+p;if(k[f]){const a=k[f];if(a===r){if(n){if(c[B++]=d?d[p]:p,b&&B===b)return c}else k[f]=r+1;q=!0}else g&&(f=h[a]||(h[a]=[]),f[f.length]=p)}}if(!q&&!g)break}if(g&&(B=c.length,(r=h.length)&&(!b||B<b)))for(;r--;)if(p=
h[r])for(w=0,l=p.length;w<l;w++)if(c[B++]=d?d[p[w]]:p[w],b&&B===b)return c}else if(e)if(d)for(a=a[0],g=a.length,b&&b<g&&(g=b),c=Array(g),b=0;b<g;b++)c[b]=d[a[b]];else c=a[0],b&&c.length>b&&(c=c.slice(0,b));return c}function H(a){return"string"===typeof a}function F(a){return"function"===typeof a}function y(a){return"object"===typeof a}function D(a){return"undefined"===typeof a}function L(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=v();return b}function v(){return Object.create(null)}const t={encode:"icase",
c:"forward",v:!1,cache:!1,async:!1,w:!1,m:!1,b:!1,s:!1,a:9,threshold:0,depth:0},M={memory:{encode:"extra",c:"strict",threshold:0,a:1},speed:{encode:"icase",c:"strict",threshold:1,a:3,depth:2},match:{encode:"extra",c:"full",threshold:1,a:3},score:{encode:"extra",c:"strict",threshold:1,a:9,depth:4},balance:{encode:"balance",c:"strict",threshold:0,a:3,depth:3},fast:{encode:"icase",c:"strict",threshold:8,a:9,depth:1}},K=[];let Q=0;const N=f("\\W+"),O={},P={};n.create=function(a){return new n(a)};n.registerMatcher=
function(a){for(const b in a)a.hasOwnProperty(b)&&K.push(f(b),a[b]);return this};n.registerEncoder=function(a,b){E[a]=b.bind(E);return this};n.registerLanguage=function(a,b){O[a]=b.filter;P[a]=b.stemmer;return this};n.encode=function(a,b){return E[a](b)};n.prototype.init=function(a,b){this.o=[];if(b){var c=b.preset;a=b}else a||(a=t),c=a.preset;b={};H(a)?(b=M[a],a={}):c&&(b=M[c]);this.c=a.tokenize||b.c||this.c||t.c;this.m=a.rtl||this.m||t.m;this.async="undefined"===typeof Promise||D(c=a.async)?this.async||
t.async:c;this.threshold=D(c=a.threshold)?b.threshold||this.threshold||t.threshold:c;this.a=D(c=a.resolution)?c=b.a||this.a||t.a:c;c<=this.threshold&&(this.a=this.threshold+1);this.depth=D(c=a.depth)?b.depth||this.depth||t.depth:c;this.s=D(c=a.paging)?this.s||t.s:c;this.i=(c=D(c=a.encode)?b.encode||t.encode:c)&&E[c]&&E[c].bind(E)||(F(c)?c:this.i||!1);(c=a.matcher)&&this.addMatcher(c);if(c=a.filter){c=O[c]||c;b=this.i;var d=v();if(c)for(var g=0;g<c.length;g++){var h=b?b(c[g]):c[g];d[h]=String.fromCharCode(65E3-
c.length+g)}this.filter=c=d}if(c=a.stemmer){var e;b=P[c]||c;d=this.i;g=[];if(b)for(e in b)b.hasOwnProperty(e)&&(h=d?d(e):e,g.push(f("(?=.{"+(h.length+3)+",})"+h+"$"),d?d(b[e]):b[e]));this.stemmer=e=g}this.b=e=(c=a.doc)?c:this.b||t.b;this.l=L(this.a-(this.threshold||0));this.h=v();this.f=v();if(e&&(this.g=v(),a.doc=null,c=e.index=[],b=e.ref={},d=e.field,e.id.constructor===Array||(e.id=e.id.split(":")),d)){let g;d.constructor!==Array&&(y(d)?(g=d,e.field=d=Object.keys(d)):e.field=d=[d]);for(e=0;e<d.length;e++)d[e].constructor!==
Array&&(g&&(a=g[d[e]]),b[d[e]]=e,d[e]=d[e].split(":")),c[e]=new n(a),c[e].g=this.g}return this};n.prototype.encode=function(a){a&&K.length&&(a=z(a,K));a&&this.o.length&&(a=z(a,this.o));a&&this.i&&(a=this.i(a));a&&this.stemmer&&(a=z(a,this.stemmer));return a};n.prototype.addMatcher=function(a){const b=this.o;for(const c in a)a.hasOwnProperty(c)&&b.push(f(c),a[c]);return this};n.prototype.add=function(a,b,c,d,g){if(this.b&&y(a))return this.j("add",a,b);if(b&&H(b)&&(a||0===a)){var f="@"+a;if(this.f[f]&&
!d)return this.update(a,b);if(!g){if(this.async&&"function"!==typeof importScripts){let e=this;f=new Promise(function(c){setTimeout(function(){e.add(a,b,null,d,!0);e=null;c()})});if(c)f.then(c);else return f;return this}if(c)return this.add(a,b,null,d,!0),c(),this}b=this.encode(b);if(!b.length)return this;c=this.c;g=F(c)?c(b):b.split(N);const h=v();h._ctx=v();const p=this.threshold,n=this.depth,r=this.a,t=this.l,C=g.length,u=this.m;for(let b=0;b<C;b++){var e=g[b];if(e){var k=e.length,q=(u?b+1:C-b)/
C,m="";switch(c){case "reverse":case "both":for(var l=k;--l;)m=e[l]+m,G(t,h,m,a,u?1:(k-l)/k,q,p,r-1);m="";case "forward":for(l=0;l<k;l++)m+=e[l],G(t,h,m,a,u?(l+1)/k:1,q,p,r-1);break;case "full":for(l=0;l<k;l++){const b=(u?l+1:k-l)/k;for(let c=k;c>l;c--)m=e.substring(l,c),G(t,h,m,a,b,q,p,r-1)}break;default:if(k=G(t,h,e,a,1,q,p,r-1),n&&1<C&&k>=p)for(k=h._ctx[e]||(h._ctx[e]=v()),e=this.h[e]||(this.h[e]=L(r-(p||0))),q=b-n,m=b+n+1,0>q&&(q=0),m>C&&(m=C);q<m;q++)q!==b&&G(e,k,g[q],a,0,r-(q<b?b-q:q-b),p,r-
1)}}}this.f[f]=1}return this};n.prototype.j=function(a,b,c){if(b.constructor===Array)for(let d=0,e=b.length;d<e;d++){if(d===e-1)return this.j(a,b[d],c);this.j(a,b[d])}else{const h=this.b.index;var d=this.b.tag,g=this.b.id;let m;let l;for(var f=0;f<g.length;f++)m=(m||b)[g[f]];if(d){for(g=0;g<d.length;g++){var e=d[g];var k=e.split(":");for(f=0;f<k.length;f++)l=(l||b)[k[f]];l="@"+l}k=this.u[e];k=k[l]||(k[l]=[])}if("remove"===a){delete this.g[m];for(let a=0,b=h.length;a<b;a++){if(a===b-1)return h[a].remove(m,
c);h[a].remove(m)}}g=this.b.field;k&&(k[k.length]=b);for(let f=0,k=g.length;f<k;f++){d=g[f];let l;for(e=0;e<d.length;e++)l=(l||b)[d[e]];this.g[m]=b;d=h[f];e="add"===a?d.add:d.update;if(f===k-1)return e.call(d,m,l,c);e.call(d,m,l)}}};n.prototype.update=function(a,b,c){if(this.b&&y(a))return this.j("update",a,b);this.f["@"+a]&&H(b)&&(this.remove(a),this.add(a,b,c,!0));return this};n.prototype.remove=function(a,b,c){if(this.b&&y(a))return this.j("remove",a,b);var d="@"+a;if(this.f[d]){if(!c){if(this.async&&
"function"!==typeof importScripts){let c=this;d=new Promise(function(b){setTimeout(function(){c.remove(a,null,!0);c=null;b()})});if(b)d.then(b);else return d;return this}if(b)return this.remove(a,null,!0),b(),this}for(b=0;b<this.a-(this.threshold||0);b++)I(this.l[b],a);this.depth&&I(this.h,a);delete this.f[d]}return this};let x;n.prototype.search=function(a,b,c,d){if(y(b)){if(b.constructor===Array)for(var f=0;f<b.length;f++)b[f].query=a;else b.query=a;a=b;b=0}let h=a;let e,k=[];if(y(a)&&a.constructor!==
Array){(c=a.callback||b)&&(h.callback=null);e=a.sort;b=a.limit;var q=a.threshold;a=a.query}if(this.b){q=this.b.ref;var m=this.b.index,l=h.field;if(l)h.field=null;else if(h.constructor===Array){var n=h;l=[];for(var p=0;p<h.length;p++)l[p]=h[p].field}else l=Object.keys(q);if(y(l)){e&&(h.sort=null);l.constructor===Array||(l=[l]);p=l.length;for(a=0;a<p;a++)n&&(h=n[a]),k[a]=m[q[l[a]]].search(h);return c?c(u(k,e)):this.async?new Promise(function(a){Promise.all(k).then(function(b){a(u(b,e))})}):u(k,e)}return m[q[l]].search(h,
c)}q||(q=this.threshold||0);F(b)?(c=b,b=1E3):b||0===b||(b=1E3);if(!d){if(this.async&&"function"!==typeof importScripts){let a=this;q=new Promise(function(c){setTimeout(function(){c(a.search(h,b,null,!0));a=null})});if(c)q.then(c);else return q;return this}if(c)return c(this.search(h,b,null,!0)),this}if(!a||!H(a))return k;h=a;h=this.encode(h);if(!h.length)return k;c=this.c;c=F(c)?c(h):h.split(N);n=c.length;a=!0;d=[];f=v();1<n&&(this.depth?(m=!0,p=c[0],f[p]=1):c.sort(T));if(!m||(l=this.h)[p]){let b=
this.a;for(let e=m?1:0;e<n;e++){const g=c[e];if(g){if(!f[g]){const c=[];let e=!1,h=0;if(p=m?l[p]:this.l){let a;for(let d=0;d<b-q;d++)if(a=p[d][g])c[h++]=a,e=!0}if(e)d[d.length]=1<h?c.concat.apply([],c):c[0];else{a=!1;break}f[g]=1}p=g}}}else a=!1;a&&(k=V(d,b,void 0,this.g,!1));e&&(k=u([k],e));return k};n.prototype.clear=function(){return this.destroy().init()};n.prototype.destroy=function(){this.l=this.h=this.f=null;if(this.b){const a=this.g.index;for(let b=0;b<a.length;b++)a.destroy();this.g=null}return this};
const E={icase:function(a){return a.toLowerCase()},simple:function(){const a=[f("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]"),"a",f("[\u00e8\u00e9\u00ea\u00eb]"),"e",f("[\u00ec\u00ed\u00ee\u00ef]"),"i",f("[\u00f2\u00f3\u00f4\u00f5\u00f6\u0151]"),"o",f("[\u00f9\u00fa\u00fb\u00fc\u0171]"),"u",f("[\u00fd\u0177\u00ff]"),"y",f("\u00f1"),"n",f("\u00e7"),"c",f("\u00df"),"s",f(" & ")," and ",f("[-/]")," ",f("[^a-z0-9 ]"),"",f("\\s+")," "];return function(b){b=z(b.toLowerCase(),a);return" "===b?"":b}}(),advanced:function(){const a=
[f("ae"),"a",f("ai"),"ei",f("ay"),"ei",f("ey"),"ei",f("oe"),"o",f("ue"),"u",f("ie"),"i",f("sz"),"s",f("zs"),"s",f("sh"),"s",f("ck"),"k",f("cc"),"k",f("dt"),"t",f("ph"),"f",f("pf"),"f",f("ou"),"o",f("uo"),"u"];return function(b,c){if(!b)return b;b=this.simple(b);2<b.length&&(b=z(b,a));c||1<b.length&&(b=J(b));return b}}(),extra:function(){const a=[f("p"),"b",f("z"),"s",f("[cgq]"),"k",f("n"),"m",f("d"),"t",f("[vw]"),"f",f("[aeiouy]"),""];return function(b){if(!b)return b;b=this.advanced(b,!0);if(1<b.length){b=
b.split(" ");for(let c=0;c<b.length;c++){const d=b[c];1<d.length&&(b[c]=d[0]+z(d.substring(1),a))}b=b.join(" ");b=J(b)}return b}}(),balance:function(){const a=[f("[-/]")," ",f("[^a-z0-9 ]"),"",f("\\s+")," "];return function(b){return J(z(b.toLowerCase(),a))}}()};return n}(!1),this);
