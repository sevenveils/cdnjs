{"version":3,"sources":["modules.js"],"names":["mod","exports","module","require","define","amd","tern","signal","infer","Modules","server","options","this","modules","Object","create","nonRelative","knownModules","resolvers","modNameTests","importTests","completableTypes","resolvePath","parent","sub","test","m","exec","length","lastSlash","lastIndexOf","slice","dirName","path","fs","isRelative","filter","word","string","query","caseInsensitive","toLowerCase","indexOf","preCondenseReach","state","mods","cx","node","roots","Obj","name","id","origin","prop","defProp","replace","propagate","postLoadDef","data","me","definitions","props","get","known","findTypeAt","_file","_pos","expr","type","modType","getModType","inner","getType","originNode","doc","url","findCompletions","file","wordEnd","resolvePos","end","types","findExpressionAround","ast","scope","isModName","argNode","value","start","raw","quote","charAt","completions","completeFileName","completeModuleName","text","outputPos","isProperty","map","rec","JSON","stringify","displayName","findModuleCompletions","imp","isImport","resolveModule","sourceFile","forAllPropertiesOf","obj","depth","protos","addCompletion","isSpecifier","findImportCompletions","prototype","mixin","buildWrappingScope","Scope","maybeOverride","hasOwnProperty","override","def","parsePath","topScope","load","parentFile","over","dontLoad","RegExp","ANull","resolved","relative","i","findFile","defaultResolver","addFile","AVal","findIn","array","pos","fromObj","useVal","pathsSeen","val","afterSlash","found","dir","_dir","baseName","added","modName","getObjType","hasProp","getProp","pDir","projectDir","endSlash","pt","resolve","dirname","base","filePart","basename","readdirSync","forEach","projectPath","normalizeFilename","registerPlugin","on","defineQueryType","takesFile","run","describe","aval","target","toString","span","getSpan","storeSpan","resp"],"mappings":"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"}