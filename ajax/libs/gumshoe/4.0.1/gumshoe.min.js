/*! gumshoe v4.0.1 | (c) 2019 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/gumshoe */
!(function(t,n){"function"==typeof define&&define.amd?define([],(function(){return n(t)})):"object"==typeof exports?module.exports=n(t):t.Gumshoe=n(t)})("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(t){"use strict";var n={navClass:"active",contentClass:"active",nested:!1,nestedClass:"active",offset:0,reflow:!1,events:!0},e=function(t,n,e){if(e.settings.events){var o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:e});n.dispatchEvent(o)}},o=function(t){var n=0;if(t.offsetParent)for(;t;)n+=t.offsetTop,t=t.offsetParent;return n>=0?n:0},s=function(t){t.sort((function(t,n){return o(t.content)<o(n.content)?-1:1}))},i=function(t,n){var e=t.getBoundingClientRect(),o=(function(t){return"function"==typeof t.offset?parseFloat(t.offset()):parseFloat(t.offset)})(n);return parseInt(e.top,10)<=o&&parseInt(e.bottom,10)>o},r=function(t,n){if(n.nested){var e=t.parentNode.closest("li");e&&(e.classList.remove(n.nestedClass),r(e,n))}},a=function(t,n){if(t){var o=t.nav.closest("li");o&&(o.classList.remove(n.navClass),t.content.classList.remove(n.contentClass),r(o,n),e("gumshoeDeactivate",o,{link:t.nav,content:t.content,settings:n}))}},c=function(t,n){if(n.nested){var e=t.parentNode.closest("li");e&&(e.classList.add(n.nestedClass),c(e,n))}};return function(o,r){var f,l,u,d,v,p={};p.setup=function(){f=document.querySelectorAll(o),l=[],Array.prototype.forEach.call(f,(function(t){var n=document.getElementById(decodeURIComponent(t.hash.substr(1)));n&&l.push({nav:t,content:n})})),s(l)},p.detect=function(){var t=(function(t,n){for(var e=t.length-1;e>=0;e--)if(i(t[e].content,n))return t[e]})(l,v);t?u&&t.content===u.content||(a(u,v),(function(t,n){if(t){var o=t.nav.closest("li");o&&(o.classList.add(n.navClass),t.content.classList.add(n.contentClass),c(o,n),e("gumshoeActivate",o,{link:t.nav,content:t.content,settings:n}))}})(t,v),u=t):u&&(a(u,v),u=null)};var m=function(n){d&&t.cancelAnimationFrame(d),d=t.requestAnimationFrame(p.detect)},y=function(n){d&&t.cancelAnimationFrame(d),d=t.requestAnimationFrame((function(){s(),p.detect()}))};return p.destroy=function(){u&&a(u),t.removeEventListener("scroll",m,!1),v.reflow&&t.removeEventListener("resize",y,!1),l=null,f=null,u=null,d=null,v=null},p.init=function(e){v=(function(){var t={};return Array.prototype.forEach.call(arguments,(function(n){for(var e in n){if(!n.hasOwnProperty(e))return;t[e]=n[e]}})),t})(n,e||{}),p.setup(),p.detect(),t.addEventListener("scroll",m,!1),v.reflow&&t.addEventListener("resize",y,!1)},p.init(r),p}}));