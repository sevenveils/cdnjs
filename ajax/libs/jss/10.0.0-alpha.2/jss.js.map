{"version":3,"file":"jss.js","sources":["../../../node_modules/@babel/runtime/helpers/esm/extends.js","../../../node_modules/is-in-browser/dist/module.js","../../../node_modules/warning/warning.js","../../../node_modules/rollup-plugin-node-globals/src/global.js","../../../node_modules/symbol-observable/es/ponyfill.js","../../../node_modules/symbol-observable/es/index.js","../src/utils/cloneStyle.js","../src/utils/createRule.js","../../../node_modules/@babel/runtime/helpers/esm/createClass.js","../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../src/utils/toCssValue.js","../src/utils/toCss.js","../src/utils/escape.js","../src/plugins/styleRule.js","../src/plugins/conditionalRule.js","../src/plugins/keyframesRule.js","../src/plugins/keyframeRule.js","../src/plugins/fontFaceRule.js","../src/plugins/viewportRule.js","../src/plugins/simpleRule.js","../src/plugins/index.js","../src/RuleList.js","../src/StyleSheet.js","../src/PluginsRegistry.js","../src/SheetsRegistry.js","../src/sheets.js","../src/utils/moduleId.js","../src/utils/createGenerateId.js","../src/renderers/DomRenderer.js","../src/renderers/VirtualRenderer.js","../src/Jss.js","../src/utils/getDynamicStyles.js","../src/SheetsManager.js","../src/index.js"],"sourcesContent":["export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexport var isBrowser = (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\" && (typeof document === \"undefined\" ? \"undefined\" : _typeof(document)) === 'object' && document.nodeType === 9;\n\nexport default isBrowser;\n","/**\n * Copyright 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function() {};\n\nif (__DEV__) {\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n        '`warning(condition, format, ...args)` requires a warning ' +\n        'message argument'\n      );\n    }\n\n    if (format.length < 10 || (/^[s\\W]*$/).test(format)) {\n      throw new Error(\n        'The warning format should be able to uniquely identify this ' +\n        'warning. Please, use a more descriptive format than: ' + format\n      );\n    }\n\n    if (!condition) {\n      var argIndex = 0;\n      var message = 'Warning: ' +\n        format.replace(/%s/g, function() {\n          return args[argIndex++];\n        });\n      if (typeof console !== 'undefined') {\n        console.error(message);\n      }\n      try {\n        // This error was thrown as a convenience so that you can use this stack\n        // to find the callsite that caused this warning to fire.\n        throw new Error(message);\n      } catch(x) {}\n    }\n  };\n}\n\nmodule.exports = warning;\n","export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","import $$observable from 'symbol-observable'\nimport type {JssStyle} from '../types'\n\nconst {isArray} = Array\n\n// TODO: This should propably not be here, need to find a better place\nconst isObservable = value => value && value[$$observable] && value === value[$$observable]()\n\nexport default function cloneStyle(style: JssStyle): JssStyle {\n  // Support empty values in case user ends up with them by accident.\n  if (style == null) return style\n\n  // Support string value for SimpleRule.\n  const typeOfStyle = typeof style\n\n  if (typeOfStyle === 'string' || typeOfStyle === 'number' || typeOfStyle === 'function') {\n    return style\n  }\n\n  // It is a CSSTOM value.\n  // TODO will not work if instance comes from a different window.\n  if (global.CSSStyleValue && style instanceof global.CSSStyleValue) {\n    return style\n  }\n\n  // Support array for FontFaceRule.\n  if (isArray(style)) return style.map(cloneStyle)\n\n  // Support Observable styles.  Observables are immutable, so we don't need to\n  // copy them.\n  if (isObservable(style)) return style\n\n  const newStyle = {}\n  for (const name in style) {\n    const value = style[name]\n    if (typeof value === 'object') {\n      newStyle[name] = cloneStyle(value)\n      continue\n    }\n    newStyle[name] = value\n  }\n\n  return newStyle\n}\n","/* @flow */\nimport warning from 'warning'\nimport type {Rule, RuleOptions, JssStyle} from '../types'\nimport cloneStyle from './cloneStyle'\n\n/**\n * Create a rule instance.\n */\nexport default function createRule(\n  name: string = 'unnamed',\n  decl: JssStyle,\n  options: RuleOptions\n): Rule | null {\n  const {jss} = options\n  const declCopy = cloneStyle(decl)\n\n  const rule = jss.plugins.onCreateRule(name, declCopy, options)\n  if (rule) return rule\n\n  // It is an at-rule and it has no instance.\n  if (name[0] === '@') {\n    warning(false, '[JSS] Unknown rule %s', name)\n  }\n\n  return null\n}\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","/* @flow */\n\nconst join = (value, by) => {\n  let result = ''\n  for (let i = 0; i < value.length; i++) {\n    // Remove !important from the value, it will be readded later.\n    if (value[i] === '!important') break\n    if (result) result += by\n    result += value[i]\n  }\n  return result\n}\n\n/**\n * Converts array values to string.\n *\n * `margin: [['5px', '10px']]` > `margin: 5px 10px;`\n * `border: ['1px', '2px']` > `border: 1px, 2px;`\n * `margin: [['5px', '10px'], '!important']` > `margin: 5px 10px !important;`\n * `color: ['red', !important]` > `color: red !important;`\n */\nexport default function toCssValue(value: any, ignoreImportant: boolean = false) {\n  if (!Array.isArray(value)) return value\n\n  let cssValue = ''\n\n  // Support space separated values via `[['5px', '10px']]`.\n  if (Array.isArray(value[0])) {\n    for (let i = 0; i < value.length; i++) {\n      if (value[i] === '!important') break\n      if (cssValue) cssValue += ', '\n      cssValue += join(value[i], ' ')\n    }\n  } else cssValue = join(value, ', ')\n\n  // Add !important, because it was ignored.\n  if (!ignoreImportant && value[value.length - 1] === '!important') {\n    cssValue += ' !important'\n  }\n\n  return cssValue\n}\n","/* @flow */\nimport toCssValue from './toCssValue'\nimport type {ToCssOptions, JssStyle} from '../types'\n\n/**\n * Indent a string.\n * http://jsperf.com/array-join-vs-for\n */\nfunction indentStr(str: string, indent: number): string {\n  let result = ''\n  for (let index = 0; index < indent; index++) result += '  '\n  return result + str\n}\n\n/**\n * Converts a Rule to CSS string.\n */\nexport default function toCss(\n  selector?: string,\n  style: JssStyle,\n  options: ToCssOptions = {}\n): string {\n  let result = ''\n\n  if (!style) return result\n\n  let {indent = 0} = options\n  const {fallbacks} = style\n\n  if (selector) indent++\n\n  // Apply fallbacks first.\n  if (fallbacks) {\n    // Array syntax {fallbacks: [{prop: value}]}\n    if (Array.isArray(fallbacks)) {\n      for (let index = 0; index < fallbacks.length; index++) {\n        const fallback = fallbacks[index]\n        for (const prop in fallback) {\n          const value = fallback[prop]\n          if (value != null) {\n            if (result) result += '\\n'\n            result += `${indentStr(`${prop}: ${toCssValue(value)};`, indent)}`\n          }\n        }\n      }\n    } else {\n      // Object syntax {fallbacks: {prop: value}}\n      for (const prop in fallbacks) {\n        const value = fallbacks[prop]\n        if (value != null) {\n          if (result) result += '\\n'\n          result += `${indentStr(`${prop}: ${toCssValue(value)};`, indent)}`\n        }\n      }\n    }\n  }\n\n  for (const prop in style) {\n    const value = style[prop]\n    if (value != null && prop !== 'fallbacks') {\n      if (result) result += '\\n'\n      result += `${indentStr(`${prop}: ${toCssValue(value)};`, indent)}`\n    }\n  }\n\n  // Allow empty style in this case, because properties will be added dynamically.\n  if (!result && !options.allowEmpty) return result\n\n  // When rule is being stringified before selector was defined.\n  if (!selector) return result\n\n  indent--\n\n  if (result) result = `\\n${result}\\n`\n\n  return indentStr(`${selector} {${result}`, indent) + indentStr('}', indent)\n}\n","const env = process.env.NODE_ENV\nconst escapeRegex = /([[\\].#*$><+~=|^:(),\"'`\\s])/g\n\nexport default str => {\n  // We don't need to escape it in production, because we are not using user's\n  // input for selectors, we are generating a valid selector.\n  if (env === 'production') return str\n\n  const nativeEscape = typeof CSS !== 'undefined' && CSS.escape\n\n  return nativeEscape ? nativeEscape(str) : str.replace(escapeRegex, '\\\\$1')\n}\n","/* @flow */\nimport warning from 'warning'\nimport toCss from '../utils/toCss'\nimport toCssValue from '../utils/toCssValue'\nimport escape from '../utils/escape'\nimport type {\n  CSSStyleRule,\n  ToCssOptions,\n  RuleOptions,\n  UpdateOptions,\n  Renderer as RendererInterface,\n  JssStyle,\n  JssValue,\n  BaseRule\n} from '../types'\n\nexport class BaseStyleRule implements BaseRule {\n  type = 'style'\n\n  key: string\n\n  isProcessed: boolean = false\n\n  style: JssStyle\n\n  renderer: RendererInterface\n\n  renderable: ?Object\n\n  options: RuleOptions\n\n  constructor(key: string, style: JssStyle, options: RuleOptions) {\n    const {sheet, Renderer} = options\n    this.key = key\n    this.options = options\n    this.style = style\n    this.renderer = sheet ? sheet.renderer : new Renderer()\n  }\n\n  /**\n   * Get or set a style property.\n   */\n  prop(name: string, value?: JssValue, options?: UpdateOptions): this | string {\n    // It's a getter.\n    if (value === undefined) return this.style[name]\n\n    // Don't do anything if the value has not changed.\n    const force = options ? options.force : false\n    if (!force && this.style[name] === value) return this\n\n    let newValue = value\n    if (!options || options.process !== false) {\n      newValue = this.options.jss.plugins.onChangeValue(value, name, this)\n    }\n\n    const isEmpty = newValue == null || newValue === false\n    const isDefined = name in this.style\n\n    // Value is empty and wasn't defined before.\n    if (isEmpty && !isDefined) return this\n\n    // We are going to remove this value.\n    const remove = isEmpty && isDefined\n\n    if (remove) delete this.style[name]\n    else this.style[name] = newValue\n\n    // Renderable is defined if StyleSheet option `link` is true.\n    if (this.renderable) {\n      if (remove) this.renderer.removeProperty(this.renderable, name)\n      else this.renderer.setProperty(this.renderable, name, newValue)\n      return this\n    }\n\n    const {sheet} = this.options\n    if (sheet && sheet.attached) {\n      warning(false, '[JSS] Rule is not linked. Missing sheet option \"link: true\".')\n    }\n    return this\n  }\n}\n\nexport class StyleRule extends BaseStyleRule {\n  selectorText: string\n\n  id: ?string\n\n  renderable: ?CSSStyleRule\n\n  constructor(key: string, style: JssStyle, options: RuleOptions) {\n    super(key, style, options)\n    const {selector, scoped, sheet, generateId} = options\n    if (selector) {\n      this.selectorText = selector\n    } else if (scoped !== false) {\n      this.id = generateId(this, sheet)\n      this.selectorText = `.${escape(this.id)}`\n    }\n  }\n\n  /**\n   * Set selector string.\n   * Attention: use this with caution. Most browsers didn't implement\n   * selectorText setter, so this may result in rerendering of entire Style Sheet.\n   */\n  set selector(selector: string): void {\n    if (selector === this.selectorText) return\n\n    this.selectorText = selector\n\n    if (!this.renderable) return\n\n    const hasChanged = this.renderer.setSelector(this.renderable, selector)\n\n    // If selector setter is not implemented, rerender the rule.\n    if (!hasChanged) {\n      this.renderer.replaceRule(((this.renderable: any): CSSRule), this)\n    }\n  }\n\n  /**\n   * Get selector string.\n   */\n  get selector(): string {\n    return this.selectorText\n  }\n\n  /**\n   * Apply rule to an element inline.\n   */\n  applyTo(renderable: HTMLElement): this {\n    const json = this.toJSON()\n    for (const prop in json) this.renderer.setProperty(renderable, prop, json[prop])\n    return this\n  }\n\n  /**\n   * Returns JSON representation of the rule.\n   * Fallbacks are not supported.\n   * Useful for inline styles.\n   */\n  toJSON(): Object {\n    const json = {}\n    for (const prop in this.style) {\n      const value = this.style[prop]\n      if (typeof value !== 'object') json[prop] = value\n      else if (Array.isArray(value)) json[prop] = toCssValue(value)\n    }\n    return json\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    const {sheet} = this.options\n    const link = sheet ? sheet.options.link : false\n    const opts = link ? {...options, allowEmpty: true} : options\n    return toCss(this.selectorText, this.style, opts)\n  }\n}\n\nexport default {\n  onCreateRule(name: string, style: JssStyle, options: RuleOptions): StyleRule | null {\n    if (name[0] === '@' || (options.parent && options.parent.type === 'keyframes')) {\n      return null\n    }\n    return new StyleRule(name, style, options)\n  }\n}\n","/* @flow */\nimport RuleList from '../RuleList'\nimport type {CSSMediaRule, Rule, RuleOptions, ToCssOptions, JssStyle, ContainerRule} from '../types'\n\nconst defaultToStringOptions = {\n  indent: 1,\n  children: true\n}\n\nconst atRegExp = /@([\\w-]+)/\n\n/**\n * Conditional rule for @media, @supports\n */\nexport class ConditionalRule implements ContainerRule {\n  type = 'conditional'\n\n  at: string\n\n  key: string\n\n  rules: RuleList\n\n  options: RuleOptions\n\n  isProcessed: boolean = false\n\n  renderable: ?CSSMediaRule\n\n  constructor(key: string, styles: Object, options: RuleOptions) {\n    this.key = key\n    const atMatch = key.match(atRegExp)\n    this.at = atMatch ? atMatch[1] : 'unknown'\n    this.options = options\n    this.rules = new RuleList({...options, parent: this})\n\n    for (const name in styles) {\n      this.rules.add(name, styles[name])\n    }\n\n    this.rules.process()\n  }\n\n  /**\n   * Get a rule.\n   */\n  getRule(name: string): Rule {\n    return this.rules.get(name)\n  }\n\n  /**\n   * Get index of a rule.\n   */\n  indexOf(rule: Rule): number {\n    return this.rules.indexOf(rule)\n  }\n\n  /**\n   * Create and register rule, run plugins.\n   */\n  addRule(name: string, style: JssStyle, options?: RuleOptions): Rule | null {\n    const rule = this.rules.add(name, style, options)\n    if (!rule) return null\n    this.options.jss.plugins.onProcessRule(rule)\n    return rule\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  toString(options?: ToCssOptions = defaultToStringOptions): string {\n    if (options.children === false) {\n      return `${this.key} {}`\n    }\n    const children = this.rules.toString(options)\n    return children ? `${this.key} {\\n${children}\\n}` : ''\n  }\n}\n\nconst keyRegExp = /@media|@supports\\s+/\n\nexport default {\n  onCreateRule(key: string, styles: JssStyle, options: RuleOptions): ConditionalRule | null {\n    return keyRegExp.test(key) ? new ConditionalRule(key, styles, options) : null\n  }\n}\n","/* @flow */\nimport warning from 'warning'\nimport RuleList from '../RuleList'\nimport type StyleSheet from '../StyleSheet'\nimport type {\n  CSSKeyframesRule,\n  JssStyle,\n  Rule,\n  RuleOptions,\n  ToCssOptions,\n  ContainerRule,\n  KeyframesMap\n} from '../types'\n\nconst defaultToStringOptions = {\n  indent: 1,\n  children: true\n}\n\nconst nameRegExp = /@keyframes\\s+([\\w-]+)/\n\n/**\n * Rule for @keyframes\n */\nexport class KeyframesRule implements ContainerRule {\n  type = 'keyframes'\n\n  at: string = '@keyframes'\n\n  key: string\n\n  name: string\n\n  id: string\n\n  rules: RuleList\n\n  options: RuleOptions\n\n  isProcessed: boolean = false\n\n  renderable: ?CSSKeyframesRule\n\n  constructor(key: string, frames: Object, options: RuleOptions) {\n    const nameMatch = key.match(nameRegExp)\n    if (nameMatch && nameMatch[1]) {\n      this.name = nameMatch[1]\n    } else {\n      this.name = 'noname'\n      warning(false, '[JSS] Bad keyframes name %s', key)\n    }\n    this.key = `${this.type}-${this.name}`\n    this.options = options\n    const {scoped, sheet, generateId} = options\n    this.id = scoped === false ? this.name : generateId(this, sheet)\n    this.rules = new RuleList({...options, parent: this})\n\n    for (const name in frames) {\n      this.rules.add(name, frames[name], {\n        ...options,\n        parent: this\n      })\n    }\n\n    this.rules.process()\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  toString(options?: ToCssOptions = defaultToStringOptions): string {\n    if (options.children === false) {\n      return `${this.at} ${this.id} {}`\n    }\n    let children = this.rules.toString(options)\n    if (children) children = `\\n${children}\\n`\n    return `${this.at} ${this.id} {${children}}`\n  }\n}\n\nconst keyRegExp = /@keyframes\\s+/\n\nconst refRegExp = /\\$([\\w-]+)/\n\n/**\n * Replace the reference for a animation name.\n */\nconst replaceRef = (style: JssStyle, prop: string, keyframes: KeyframesMap) => {\n  const value = style[prop]\n\n  if (typeof value === 'string') {\n    const ref = refRegExp.exec(value)\n\n    if (!ref) return\n\n    if (ref[1] in keyframes) {\n      style[prop] = value.replace(ref[0], keyframes[ref[1]])\n    } else {\n      warning(false, '[JSS] Referenced keyframes rule \"%s\" is not defined.', ref[1])\n    }\n  }\n}\n\nexport default {\n  onCreateRule(key: string, frames: JssStyle, options: RuleOptions): KeyframesRule | null {\n    return keyRegExp.test(key) ? new KeyframesRule(key, frames, options) : null\n  },\n\n  // Animation name ref replacer.\n  onProcessStyle: (style: JssStyle, rule: Rule, sheet?: StyleSheet): JssStyle => {\n    if (rule.type !== 'style' || !sheet) return style\n\n    if ('animation-name' in style) replaceRef(style, 'animation-name', sheet.keyframes)\n    if ('animation' in style) replaceRef(style, 'animation', sheet.keyframes)\n    return style\n  }\n}\n","/* @flow */\nimport toCss from '../utils/toCss'\nimport type {JssStyle, RuleOptions, ToCssOptions, CSSKeyframeRule} from '../types'\nimport {BaseStyleRule} from './styleRule'\n\nexport class KeyframeRule extends BaseStyleRule {\n  renderable: ?CSSKeyframeRule\n\n  /**\n   * Generates a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    const {sheet} = this.options\n    const link = sheet ? sheet.options.link : false\n    const opts = link ? {...options, allowEmpty: true} : options\n    return toCss(this.key, this.style, opts)\n  }\n}\n\nexport default {\n  onCreateRule(key: string, style: JssStyle, options: RuleOptions): KeyframeRule | null {\n    if (options.parent && options.parent.type === 'keyframes') {\n      return new KeyframeRule(key, style, options)\n    }\n    return null\n  }\n}\n","/* @flow */\nimport toCss from '../utils/toCss'\nimport type {CSSFontFaceRule, RuleOptions, JssStyle, ToCssOptions, BaseRule} from '../types'\n\nexport class FontFaceRule implements BaseRule {\n  type = 'font-face'\n\n  at: string = '@font-face'\n\n  key: string\n\n  style: JssStyle\n\n  options: RuleOptions\n\n  isProcessed: boolean = false\n\n  renderable: ?CSSFontFaceRule\n\n  constructor(key: string, style: JssStyle, options: RuleOptions) {\n    this.key = key\n    this.style = style\n    this.options = options\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    if (Array.isArray(this.style)) {\n      let str = ''\n      for (let index = 0; index < this.style.length; index++) {\n        str += toCss(this.key, this.style[index])\n        if (this.style[index + 1]) str += '\\n'\n      }\n      return str\n    }\n\n    return toCss(this.key, this.style, options)\n  }\n}\n\nexport default {\n  onCreateRule(key: string, style: JssStyle, options: RuleOptions): FontFaceRule | null {\n    return key === '@font-face' ? new FontFaceRule(key, style, options) : null\n  }\n}\n","/* @flow */\nimport toCss from '../utils/toCss'\nimport type {CSSViewportRule, RuleOptions, JssStyle, ToCssOptions, BaseRule} from '../types'\n\nexport class ViewportRule implements BaseRule {\n  type = 'viewport'\n\n  at: string = '@viewport'\n\n  key: string\n\n  style: JssStyle\n\n  options: RuleOptions\n\n  isProcessed: boolean = false\n\n  renderable: ?CSSViewportRule\n\n  constructor(key: string, style: JssStyle, options: RuleOptions) {\n    this.key = key\n    this.style = style\n    this.options = options\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    return toCss(this.key, this.style, options)\n  }\n}\n\nexport default {\n  onCreateRule(key: string, style: JssStyle, options: RuleOptions): ViewportRule | null {\n    return key === '@viewport' || key === '@-ms-viewport'\n      ? new ViewportRule(key, style, options)\n      : null\n  }\n}\n","/* @flow */\nimport type {CSSSimpleRule, RuleOptions, JssStyle, ToCssOptions, BaseRule} from '../types'\n\nexport class SimpleRule implements BaseRule {\n  type = 'simple'\n\n  key: string\n\n  value: string\n\n  options: RuleOptions\n\n  isProcessed: boolean = false\n\n  renderable: ?CSSSimpleRule\n\n  constructor(key: string, value: string, options: RuleOptions) {\n    this.key = key\n    this.value = value\n    this.options = options\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  // eslint-disable-next-line no-unused-vars\n  toString(options?: ToCssOptions): string {\n    if (Array.isArray(this.value)) {\n      let str = ''\n      for (let index = 0; index < this.value.length; index++) {\n        str += `${this.key} ${this.value[index]};`\n        if (this.value[index + 1]) str += '\\n'\n      }\n      return str\n    }\n\n    return `${this.key} ${this.value};`\n  }\n}\n\nconst keysMap = {\n  '@charset': true,\n  '@import': true,\n  '@namespace': true\n}\n\nexport default {\n  onCreateRule(key: string, value: JssStyle, options: RuleOptions): SimpleRule | null {\n    return key in keysMap ? new SimpleRule(key, ((value: any): string), options) : null\n  }\n}\n","import pluginStyleRule, {StyleRule} from './styleRule'\nimport pluginConditionalRule, {ConditionalRule} from './conditionalRule'\nimport pluginKeyframesRule, {KeyframesRule} from './keyframesRule'\nimport pluginKeyframeRule, {KeyframeRule} from './keyframeRule'\nimport pluginFontFaceRule, {FontFaceRule} from './fontFaceRule'\nimport pluginViewportRule, {ViewportRule} from './viewportRule'\nimport pluginSimpleRule, {SimpleRule} from './simpleRule'\n\nexport const plugins = [\n  pluginStyleRule,\n  pluginConditionalRule,\n  pluginKeyframesRule,\n  pluginKeyframeRule,\n  pluginFontFaceRule,\n  pluginViewportRule,\n  pluginSimpleRule\n]\n\nexport {\n  StyleRule,\n  ConditionalRule,\n  KeyframesRule,\n  KeyframeRule,\n  FontFaceRule,\n  ViewportRule,\n  SimpleRule\n}\n","/* @flow */\nimport createRule from './utils/createRule'\nimport {StyleRule, KeyframesRule} from './plugins/index'\nimport type {\n  RuleListOptions,\n  ToCssOptions,\n  Rule,\n  RuleOptions,\n  JssStyle,\n  Classes,\n  KeyframesMap,\n  UpdateArguments\n} from './types'\nimport escape from './utils/escape'\n\nconst defaultUpdateOptions = {\n  process: true\n}\n\nconst forceUpdateOptions = {\n  force: true,\n  process: true\n}\n\n/**\n * Contains rules objects and allows adding/removing etc.\n * Is used for e.g. by `StyleSheet` or `ConditionalRule`.\n */\nexport default class RuleList {\n  // Rules registry for access by .get() method.\n  // It contains the same rule registered by name and by selector.\n  map: {[key: string]: Rule} = {}\n\n  // Original styles object.\n  raw: {[key: string]: JssStyle} = {}\n\n  // Used to ensure correct rules order.\n  index: Array<Rule> = []\n\n  options: RuleListOptions\n\n  classes: Classes\n\n  keyframes: KeyframesMap\n\n  constructor(options: RuleListOptions) {\n    this.options = options\n    this.classes = options.classes\n    this.keyframes = options.keyframes\n  }\n\n  /**\n   * Create and register rule.\n   *\n   * Will not render after Style Sheet was rendered the first time.\n   */\n  add(key: string, decl: JssStyle, ruleOptions?: RuleOptions): Rule | null {\n    const {parent, sheet, jss, Renderer, generateId, scoped} = this.options\n    const options = {\n      classes: this.classes,\n      parent,\n      sheet,\n      jss,\n      Renderer,\n      generateId,\n      scoped,\n      ...ruleOptions\n    }\n\n    // We need to save the original decl before creating the rule\n    // because cache plugin needs to use it as a key to return a cached rule.\n    this.raw[key] = decl\n\n    if (key in this.classes) {\n      // For e.g. rules inside of @media container\n      options.selector = `.${escape(this.classes[key])}`\n    }\n\n    const rule = createRule(key, decl, options)\n\n    if (!rule) return null\n\n    this.register(rule)\n\n    const index = options.index === undefined ? this.index.length : options.index\n    this.index.splice(index, 0, rule)\n\n    return rule\n  }\n\n  /**\n   * Get a rule.\n   */\n  get(name: string): Rule {\n    return this.map[name]\n  }\n\n  /**\n   * Delete a rule.\n   */\n  remove(rule: Rule): void {\n    this.unregister(rule)\n    delete this.raw[rule.key]\n    this.index.splice(this.indexOf(rule), 1)\n  }\n\n  /**\n   * Get index of a rule.\n   */\n  indexOf(rule: Rule): number {\n    return this.index.indexOf(rule)\n  }\n\n  /**\n   * Run `onProcessRule()` plugins on every rule.\n   */\n  process(): void {\n    const {plugins} = this.options.jss\n    // We need to clone array because if we modify the index somewhere else during a loop\n    // we end up with very hard-to-track-down side effects.\n    this.index.slice(0).forEach(plugins.onProcessRule, plugins)\n  }\n\n  /**\n   * Register a rule in `.map` and `.classes` maps.\n   */\n  register(rule: Rule): void {\n    this.map[rule.key] = rule\n    if (rule instanceof StyleRule) {\n      this.map[rule.selector] = rule\n      if (rule.id) this.classes[rule.key] = rule.id\n    } else if (rule instanceof KeyframesRule && this.keyframes) {\n      this.keyframes[rule.name] = rule.id\n    }\n  }\n\n  /**\n   * Unregister a rule.\n   */\n  unregister(rule: Rule): void {\n    delete this.map[rule.key]\n    if (rule instanceof StyleRule) {\n      delete this.map[rule.selector]\n      delete this.classes[rule.key]\n    } else if (rule instanceof KeyframesRule) {\n      delete this.keyframes[rule.name]\n    }\n  }\n\n  /**\n   * Update the function values with a new data.\n   */\n  update(...args: UpdateArguments): void {\n    let name\n    let data\n    let options\n\n    if (typeof args[0] === 'string') {\n      name = args[0]\n      // $FlowFixMe\n      data = args[1]\n      // $FlowFixMe\n      options = args[2]\n    } else {\n      data = args[0]\n      // $FlowFixMe\n      options = args[1]\n      name = null\n    }\n\n    if (name) {\n      this.onUpdate(data, this.get(name), options)\n    } else {\n      for (let index = 0; index < this.index.length; index++) {\n        this.onUpdate(data, this.index[index], options)\n      }\n    }\n  }\n\n  /**\n   * Execute plugins, update rule props.\n   */\n  onUpdate(data: Object, rule: Rule, options?: Object = defaultUpdateOptions) {\n    const {\n      jss: {plugins},\n      sheet\n    } = this.options\n\n    // It is a rules container like for e.g. ConditionalRule.\n    if (rule.rules instanceof RuleList) {\n      rule.rules.update(data, options)\n      return\n    }\n\n    const styleRule: StyleRule = (rule: any)\n    const {style} = styleRule\n\n    plugins.onUpdate(data, rule, sheet, options)\n\n    // We rely on a new `style` ref in case it was mutated during onUpdate hook.\n    if (options.process && style && style !== styleRule.style) {\n      // We need to run the plugins in case new `style` relies on syntax plugins.\n      plugins.onProcessStyle(styleRule.style, styleRule, sheet)\n      // Update, remove and add props.\n      for (const prop in styleRule.style) {\n        const nextValue = styleRule.style[prop]\n        const prevValue = style[prop]\n        // Since we use `force` option, we should optimize the `.prop()` call\n        // for cases where the primive value has not changed.\n        // It can't do that check, because it doesn't have the previous `style`\n        // object.\n        if (nextValue !== prevValue) {\n          styleRule.prop(prop, nextValue, forceUpdateOptions)\n        }\n      }\n    }\n  }\n\n  /**\n   * Convert rules to a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    let str = ''\n    const {sheet} = this.options\n    const link = sheet ? sheet.options.link : false\n\n    for (let index = 0; index < this.index.length; index++) {\n      const rule = this.index[index]\n      const css = rule.toString(options)\n\n      // No need to render an empty rule.\n      if (!css && !link) continue\n\n      if (str) str += '\\n'\n      str += css\n    }\n\n    return str\n  }\n}\n","/* @flow */\nimport RuleList from './RuleList'\nimport type {\n  InternalStyleSheetOptions,\n  Rule,\n  ToCssOptions,\n  RuleOptions,\n  StyleSheetOptions,\n  UpdateArguments,\n  JssStyle,\n  Classes,\n  KeyframesMap\n} from './types'\n\nexport default class StyleSheet {\n  options: InternalStyleSheetOptions\n\n  deployed: boolean\n\n  attached: boolean\n\n  rules: RuleList\n\n  renderer: Object\n\n  classes: Classes\n\n  keyframes: KeyframesMap\n\n  queue: ?Array<Rule>\n\n  constructor(styles: Object, options: StyleSheetOptions) {\n    this.attached = false\n    this.deployed = false\n    this.classes = {}\n    this.keyframes = {}\n    this.options = {\n      ...options,\n      sheet: this,\n      parent: this,\n      classes: this.classes,\n      keyframes: this.keyframes\n    }\n    this.renderer = new options.Renderer(this)\n    this.rules = new RuleList(this.options)\n\n    for (const name in styles) {\n      this.rules.add(name, styles[name])\n    }\n\n    this.rules.process()\n  }\n\n  /**\n   * Attach renderable to the render tree.\n   */\n  attach(): this {\n    if (this.attached) return this\n    this.renderer.attach()\n    this.attached = true\n    // Order is important, because we can't use insertRule API if style element is not attached.\n    if (!this.deployed) this.deploy()\n    return this\n  }\n\n  /**\n   * Remove renderable from render tree.\n   */\n  detach(): this {\n    if (!this.attached) return this\n    this.renderer.detach()\n    this.attached = false\n    return this\n  }\n\n  /**\n   * Add a rule to the current stylesheet.\n   * Will insert a rule also after the stylesheet has been rendered first time.\n   */\n  addRule(name: string, decl: JssStyle, options?: RuleOptions): Rule | null {\n    const {queue} = this\n\n    // Plugins can create rules.\n    // In order to preserve the right order, we need to queue all `.addRule` calls,\n    // which happen after the first `rules.add()` call.\n    if (this.attached && !queue) this.queue = []\n\n    const rule = this.rules.add(name, decl, options)\n\n    if (!rule) return null\n\n    this.options.jss.plugins.onProcessRule(rule)\n\n    if (this.attached) {\n      if (!this.deployed) return rule\n      // Don't insert rule directly if there is no stringified version yet.\n      // It will be inserted all together when .attach is called.\n      if (queue) queue.push(rule)\n      else {\n        this.insertRule(rule)\n        if (this.queue) {\n          this.queue.forEach(this.insertRule, this)\n          this.queue = undefined\n        }\n      }\n      return rule\n    }\n\n    // We can't add rules to a detached style node.\n    // We will redeploy the sheet once user will attach it.\n    this.deployed = false\n\n    return rule\n  }\n\n  /**\n   * Insert rule into the StyleSheet\n   */\n  insertRule(rule: Rule) {\n    this.renderer.insertRule(rule)\n  }\n\n  /**\n   * Create and add rules.\n   * Will render also after Style Sheet was rendered the first time.\n   */\n  addRules(styles: Object, options?: RuleOptions): Array<Rule> {\n    const added = []\n    for (const name in styles) {\n      const rule = this.addRule(name, styles[name], options)\n      if (rule) added.push(rule)\n    }\n    return added\n  }\n\n  /**\n   * Get a rule by name.\n   */\n  getRule(name: string): Rule {\n    return this.rules.get(name)\n  }\n\n  /**\n   * Delete a rule by name.\n   * Returns `true`: if rule has been deleted from the DOM.\n   */\n  deleteRule(name: string): boolean {\n    const rule = this.rules.get(name)\n\n    if (!rule) return false\n\n    this.rules.remove(rule)\n\n    if (this.attached && rule.renderable) {\n      return this.renderer.deleteRule(rule.renderable)\n    }\n\n    return true\n  }\n\n  /**\n   * Get index of a rule.\n   */\n  indexOf(rule: Rule): number {\n    return this.rules.indexOf(rule)\n  }\n\n  /**\n   * Deploy pure CSS string to a renderable.\n   */\n  deploy(): this {\n    this.renderer.deploy()\n    this.deployed = true\n    return this\n  }\n\n  /**\n   * Update the function values with a new data.\n   */\n  update(...args: UpdateArguments): this {\n    this.rules.update(...args)\n    return this\n  }\n\n  /**\n   * Convert rules to a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    return this.rules.toString(options)\n  }\n}\n","/* @flow */\nimport warning from 'warning'\nimport type StyleSheet from './StyleSheet'\nimport type {\n  Plugin,\n  Rule,\n  RuleOptions,\n  UpdateOptions,\n  JssStyle,\n  JssValue,\n  OnCreateRule,\n  OnProcessRule,\n  OnProcessStyle,\n  OnProcessSheet,\n  OnChangeValue,\n  OnUpdate\n} from './types'\nimport type {StyleRule} from './plugins/styleRule'\n\ntype Registry = {\n  onCreateRule: Array<OnCreateRule>,\n  onProcessRule: Array<OnProcessRule>,\n  onProcessStyle: Array<OnProcessStyle>,\n  onProcessSheet: Array<OnProcessSheet>,\n  onChangeValue: Array<OnChangeValue>,\n  onUpdate: Array<OnUpdate>\n}\n\nexport default class PluginsRegistry {\n  plugins: {\n    internal: Array<Plugin>,\n    external: Array<Plugin>\n  } = {\n    internal: [],\n    external: []\n  }\n\n  registry: Registry\n\n  /**\n   * Call `onCreateRule` hooks and return an object if returned by a hook.\n   */\n  onCreateRule(name?: string, decl: JssStyle, options: RuleOptions): Rule | null {\n    for (let i = 0; i < this.registry.onCreateRule.length; i++) {\n      const rule = this.registry.onCreateRule[i](name, decl, options)\n      if (rule) return rule\n    }\n\n    return null\n  }\n\n  /**\n   * Call `onProcessRule` hooks.\n   */\n  onProcessRule(rule: Rule): void {\n    if (rule.isProcessed) return\n    const {sheet} = rule.options\n    for (let i = 0; i < this.registry.onProcessRule.length; i++) {\n      this.registry.onProcessRule[i](rule, sheet)\n    }\n\n    // $FlowFixMe\n    if (rule.style) this.onProcessStyle(rule.style, rule, sheet)\n\n    rule.isProcessed = true\n  }\n\n  /**\n   * Call `onProcessStyle` hooks.\n   */\n  onProcessStyle(style: JssStyle, rule: Rule, sheet?: StyleSheet): void {\n    for (let i = 0; i < this.registry.onProcessStyle.length; i++) {\n      // $FlowFixMe\n      rule.style = this.registry.onProcessStyle[i](rule.style, rule, sheet)\n    }\n  }\n\n  /**\n   * Call `onProcessSheet` hooks.\n   */\n  onProcessSheet(sheet: StyleSheet): void {\n    for (let i = 0; i < this.registry.onProcessSheet.length; i++) {\n      this.registry.onProcessSheet[i](sheet)\n    }\n  }\n\n  /**\n   * Call `onUpdate` hooks.\n   */\n  onUpdate(data: Object, rule: Rule, sheet: StyleSheet, options: UpdateOptions): void {\n    for (let i = 0; i < this.registry.onUpdate.length; i++) {\n      this.registry.onUpdate[i](data, rule, sheet, options)\n    }\n  }\n\n  /**\n   * Call `onChangeValue` hooks.\n   */\n  onChangeValue(value: JssValue, prop: string, rule: StyleRule): JssValue {\n    let processedValue = value\n    for (let i = 0; i < this.registry.onChangeValue.length; i++) {\n      processedValue = this.registry.onChangeValue[i](processedValue, prop, rule)\n    }\n    return processedValue\n  }\n\n  /**\n   * Register a plugin.\n   */\n  use(newPlugin: Plugin, options: {queue: 'internal' | 'external'} = {queue: 'external'}): void {\n    const plugins = this.plugins[options.queue]\n\n    // Avoids applying same plugin twice, at least based on ref.\n    if (plugins.indexOf(newPlugin) !== -1) {\n      return\n    }\n\n    plugins.push(newPlugin)\n\n    this.registry = [...this.plugins.external, ...this.plugins.internal].reduce(\n      (registry: Registry, plugin: Plugin) => {\n        for (const name in plugin) {\n          if (name in registry) {\n            registry[name].push(plugin[name])\n          } else warning(false, '[JSS] Unknown hook \"%s\".', name)\n        }\n        return registry\n      },\n      {\n        onCreateRule: [],\n        onProcessRule: [],\n        onProcessStyle: [],\n        onProcessSheet: [],\n        onChangeValue: [],\n        onUpdate: []\n      }\n    )\n  }\n}\n","/* @flow */\nimport type {ToCssOptions} from './types'\nimport type StyleSheet from './StyleSheet'\n\n/**\n * Sheets registry to access them all at one place.\n */\nexport default class SheetsRegistry {\n  registry: Array<StyleSheet> = []\n\n  /**\n   * Current highest index number.\n   */\n  get index(): number {\n    return this.registry.length === 0 ? 0 : this.registry[this.registry.length - 1].options.index\n  }\n\n  /**\n   * Register a Style Sheet.\n   */\n  add(sheet: StyleSheet): void {\n    const {registry} = this\n    const {index} = sheet.options\n\n    if (registry.indexOf(sheet) !== -1) return\n\n    if (registry.length === 0 || index >= this.index) {\n      registry.push(sheet)\n      return\n    }\n\n    // Find a position.\n    for (let i = 0; i < registry.length; i++) {\n      if (registry[i].options.index > index) {\n        registry.splice(i, 0, sheet)\n        return\n      }\n    }\n  }\n\n  /**\n   * Reset the registry.\n   */\n  reset(): void {\n    this.registry = []\n  }\n\n  /**\n   * Remove a Style Sheet.\n   */\n  remove(sheet: StyleSheet): void {\n    const index = this.registry.indexOf(sheet)\n    this.registry.splice(index, 1)\n  }\n\n  /**\n   * Convert all attached sheets to a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    return this.registry\n      .filter(sheet => sheet.attached)\n      .map(sheet => sheet.toString(options))\n      .join('\\n')\n  }\n}\n","/* @flow */\nimport SheetsRegistry from './SheetsRegistry'\n\n/**\n * This is a global sheets registry. Only DomRenderer will add sheets to it.\n * On the server one should use an own SheetsRegistry instance and add the\n * sheets to it, because you need to make sure to create a new registry for\n * each request in order to not leak sheets across requests.\n */\nexport default new SheetsRegistry()\n","const ns = '2f1acc6c3a606b082e5eef5e54414ffb'\nif (global[ns] == null) global[ns] = 0\n\n// Bundle may contain multiple JSS versions at the same time. In order to identify\n// the current version with just one short number and use it for classes generation\n// we use a counter. Also it is more accurate, because user can manually reevaluate\n// the module.\nexport default global[ns]++\n","/* @flow */\nimport warning from 'warning'\nimport type {Rule, GenerateId} from '../types'\nimport StyleSheet from '../StyleSheet'\nimport moduleId from './moduleId'\n\nconst maxRules = 1e10\n\nconst env = process.env.NODE_ENV\n\n/**\n * Returns a function which generates unique class names based on counters.\n * When new generator function is created, rule counter is reseted.\n * We need to reset the rule counter for SSR for each request.\n */\nexport default (): GenerateId => {\n  let ruleCounter = 0\n  const defaultPrefix = env === 'production' ? 'c' : ''\n\n  return (rule: Rule, sheet?: StyleSheet): string => {\n    ruleCounter += 1\n\n    if (ruleCounter > maxRules) {\n      warning(false, '[JSS] You might have a memory leak. Rule counter is at %s.', ruleCounter)\n    }\n\n    let prefix = defaultPrefix\n    let jssId = ''\n\n    if (sheet) {\n      prefix = sheet.options.classNamePrefix || defaultPrefix\n      if (sheet.options.jss.id != null) jssId += sheet.options.jss.id\n    }\n\n    if (env === 'production') {\n      return `${prefix}${moduleId}${jssId}${ruleCounter}`\n    }\n\n    return `${prefix + rule.key}-${moduleId}${jssId && `-${jssId}`}-${ruleCounter}`\n  }\n}\n","/* @flow */\nimport warning from 'warning'\nimport sheets from '../sheets'\nimport type StyleSheet from '../StyleSheet'\nimport type {\n  CSSStyleRule,\n  CSSMediaRule,\n  CSSKeyframesRule,\n  CSSKeyframeRule,\n  Rule,\n  ContainerRule,\n  JssValue,\n  InsertionPoint\n} from '../types'\nimport toCssValue from '../utils/toCssValue'\n\ntype PriorityOptions = {\n  index: number,\n  insertionPoint?: InsertionPoint\n}\n\n/**\n * Cache the value from the first time a function is called.\n */\nconst memoize = <Value>(fn: () => Value): (() => Value) => {\n  let value\n  return () => {\n    if (!value) value = fn()\n    return value\n  }\n}\n\n/**\n * Get a style property value.\n */\nfunction getPropertyValue(\n  cssRule: HTMLElement | CSSStyleRule | CSSKeyframeRule,\n  prop: string\n): string {\n  try {\n    // Support CSSTOM.\n    if ('attributeStyleMap' in cssRule) {\n      // $FlowFixMe\n      return cssRule.attributeStyleMap.get(prop)\n    }\n    return cssRule.style.getPropertyValue(prop)\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return ''\n  }\n}\n\n/**\n * Set a style property.\n */\nfunction setProperty(\n  cssRule: HTMLElement | CSSStyleRule | CSSKeyframeRule,\n  prop: string,\n  value: JssValue\n): boolean {\n  try {\n    let cssValue = ((value: any): string)\n\n    if (Array.isArray(value)) {\n      cssValue = toCssValue(value, true)\n\n      if (value[value.length - 1] === '!important') {\n        cssRule.style.setProperty(prop, cssValue, 'important')\n        return true\n      }\n    }\n\n    // Support CSSTOM.\n    if ('attributeStyleMap' in cssRule) {\n      // $FlowFixMe\n      cssRule.attributeStyleMap.set(prop, cssValue)\n    } else {\n      cssRule.style.setProperty(prop, cssValue)\n    }\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return false\n  }\n  return true\n}\n\n/**\n * Remove a style property.\n */\nfunction removeProperty(cssRule: HTMLElement | CSSStyleRule | CSSKeyframeRule, prop: string) {\n  try {\n    // Support CSSTOM.\n    if ('attributeStyleMap' in cssRule) {\n      // $FlowFixMe\n      cssRule.attributeStyleMap.delete(prop)\n    } else {\n      cssRule.style.removeProperty(prop)\n    }\n  } catch (err) {\n    warning(\n      false,\n      '[JSS] DOMException \"%s\" was thrown. Tried to remove property \"%s\".',\n      err.message,\n      prop\n    )\n  }\n}\n\n/**\n * Set the selector.\n */\nfunction setSelector(cssRule: CSSStyleRule, selectorText: string): boolean {\n  cssRule.selectorText = selectorText\n\n  // Return false if setter was not successful.\n  // Currently works in chrome only.\n  return cssRule.selectorText === selectorText\n}\n\n/**\n * Gets the `head` element upon the first call and caches it.\n * We assume it can't be null.\n */\nconst getHead = memoize((): HTMLElement => (document.querySelector('head'): any))\n\n/**\n * Find attached sheet with an index higher than the passed one.\n */\nfunction findHigherSheet(registry: Array<StyleSheet>, options: PriorityOptions): StyleSheet | null {\n  for (let i = 0; i < registry.length; i++) {\n    const sheet = registry[i]\n    if (\n      sheet.attached &&\n      sheet.options.index > options.index &&\n      sheet.options.insertionPoint === options.insertionPoint\n    ) {\n      return sheet\n    }\n  }\n  return null\n}\n\n/**\n * Find attached sheet with the highest index.\n */\nfunction findHighestSheet(\n  registry: Array<StyleSheet>,\n  options: PriorityOptions\n): StyleSheet | null {\n  for (let i = registry.length - 1; i >= 0; i--) {\n    const sheet = registry[i]\n    if (sheet.attached && sheet.options.insertionPoint === options.insertionPoint) {\n      return sheet\n    }\n  }\n  return null\n}\n\n/**\n * Find a comment with \"jss\" inside.\n */\nfunction findCommentNode(text: string): Node | null {\n  const head = getHead()\n  for (let i = 0; i < head.childNodes.length; i++) {\n    const node = head.childNodes[i]\n    if (node.nodeType === 8 && node.nodeValue.trim() === text) {\n      return node\n    }\n  }\n  return null\n}\n\ntype PrevNode = {\n  parent: ?Node,\n  node: ?Node\n}\n\n/**\n * Find a node before which we can insert the sheet.\n */\nfunction findPrevNode(options: PriorityOptions): PrevNode | false {\n  const {registry} = sheets\n\n  if (registry.length > 0) {\n    // Try to insert before the next higher sheet.\n    let sheet = findHigherSheet(registry, options)\n    if (sheet) {\n      return {\n        parent: sheet.renderer.element.parentNode,\n        node: sheet.renderer.element\n      }\n    }\n\n    // Otherwise insert after the last attached.\n    sheet = findHighestSheet(registry, options)\n    if (sheet) {\n      return {\n        parent: sheet.renderer.element.parentNode,\n        node: sheet.renderer.element.nextSibling\n      }\n    }\n  }\n\n  // Try to find a comment placeholder if registry is empty.\n  const {insertionPoint} = options\n  if (insertionPoint && typeof insertionPoint === 'string') {\n    const comment = findCommentNode(insertionPoint)\n    if (comment) {\n      return {\n        parent: comment.parentNode,\n        node: comment.nextSibling\n      }\n    }\n\n    // If user specifies an insertion point and it can't be found in the document -\n    // bad specificity issues may appear.\n    warning(insertionPoint === 'jss', '[JSS] Insertion point \"%s\" not found.', insertionPoint)\n  }\n\n  return false\n}\n\n/**\n * Insert style element into the DOM.\n */\nfunction insertStyle(style: HTMLElement, options: PriorityOptions) {\n  const {insertionPoint} = options\n  const nextNode = findPrevNode(options)\n\n  if (nextNode !== false && nextNode.parent) {\n    nextNode.parent.insertBefore(style, nextNode.node)\n\n    return\n  }\n\n  // Works with iframes and any node types.\n  if (insertionPoint && typeof insertionPoint.nodeType === 'number') {\n    // https://stackoverflow.com/questions/41328728/force-casting-in-flow\n    const insertionPointElement: HTMLElement = (insertionPoint: any)\n    const {parentNode} = insertionPointElement\n    if (parentNode) parentNode.insertBefore(style, insertionPointElement.nextSibling)\n    else warning(false, '[JSS] Insertion point is not in the DOM.')\n    return\n  }\n\n  getHead().appendChild(style)\n}\n\n/**\n * Read jss nonce setting from the page if the user has set it.\n */\nconst getNonce = memoize(\n  (): ?string => {\n    const node = document.querySelector('meta[property=\"csp-nonce\"]')\n    return node ? node.getAttribute('content') : null\n  }\n)\n\nconst insertRule = (\n  container: CSSStyleSheet | CSSKeyframesRule | CSSMediaRule,\n  rule: string,\n  index?: number = container.cssRules.length\n): false | Object => {\n  try {\n    if ('insertRule' in container) {\n      const c = ((container: any): CSSStyleSheet)\n      c.insertRule(rule, index)\n    }\n    // Keyframes rule.\n    else if ('appendRule' in container) {\n      const c = ((container: any): CSSKeyframesRule)\n      c.appendRule(rule)\n    }\n  } catch (err) {\n    warning(false, '[JSS] Can not insert an unsupported rule \\n\\r%s', rule)\n    return false\n  }\n  return container.cssRules[index]\n}\n\nexport default class DomRenderer {\n  getPropertyValue = getPropertyValue\n\n  setProperty = setProperty\n\n  removeProperty = removeProperty\n\n  setSelector = setSelector\n\n  // HTMLStyleElement needs fixing https://github.com/facebook/flow/issues/2696\n  element: any\n\n  sheet: ?StyleSheet\n\n  hasInsertedRules: boolean = false\n\n  constructor(sheet?: StyleSheet) {\n    // There is no sheet when the renderer is used from a standalone StyleRule.\n    if (sheet) sheets.add(sheet)\n\n    this.sheet = sheet\n    const {media, meta, element} = this.sheet ? this.sheet.options : {}\n    this.element = element || document.createElement('style')\n    this.element.setAttribute('data-jss', '')\n    if (media) this.element.setAttribute('media', media)\n    if (meta) this.element.setAttribute('data-meta', meta)\n    const nonce = getNonce()\n    if (nonce) this.element.setAttribute('nonce', nonce)\n  }\n\n  /**\n   * Insert style element into render tree.\n   */\n  attach(): void {\n    // In the case the element node is external and it is already in the DOM.\n    if (this.element.parentNode || !this.sheet) return\n\n    insertStyle(this.element, this.sheet.options)\n\n    // When rules are inserted using `insertRule` API, after `sheet.detach().attach()`\n    // browsers remove those rules.\n    // TODO figure out if its a bug and if it is known.\n    // Workaround is to redeploy the sheet.\n    if (this.hasInsertedRules) {\n      this.hasInsertedRules = false\n      this.deploy()\n    }\n  }\n\n  /**\n   * Remove style element from render tree.\n   */\n  detach(): void {\n    this.element.parentNode.removeChild(this.element)\n  }\n\n  /**\n   * Inject CSS string into element.\n   */\n  deploy(): void {\n    const {sheet} = this\n    if (!sheet) return\n    if (sheet.options.link) {\n      sheet.rules.index.forEach(this.insertRule, this)\n      return\n    }\n    this.element.textContent = `\\n${sheet.toString()}\\n`\n  }\n\n  /**\n   * Insert a rule into element.\n   */\n  insertRule(rule: Rule, index?: number): false | CSSRule {\n    const {sheet} = this.element\n\n    if (rule.type === 'conditional' || rule.type === 'keyframes') {\n      const containerRule: ContainerRule = (rule: any)\n      // We need to render the container without children first.\n      const cssRule = insertRule(sheet, containerRule.toString({children: false}), index)\n      if (cssRule === false) {\n        return false\n      }\n      containerRule.rules.index.forEach((childRule, childIndex) => {\n        const cssChildRule = insertRule(cssRule, childRule.toString(), childIndex)\n        if (cssChildRule !== false) childRule.renderable = cssChildRule\n      })\n      return cssRule\n    }\n\n    const ruleStr = rule.toString()\n\n    if (!ruleStr) return false\n\n    const cssRule = insertRule(sheet, ruleStr, index)\n    if (cssRule === false) {\n      return false\n    }\n\n    this.hasInsertedRules = true\n    rule.renderable = cssRule\n    return cssRule\n  }\n\n  /**\n   * Delete a rule.\n   */\n  deleteRule(cssRule: CSSRule): boolean {\n    const {sheet} = this.element\n    const index = this.indexOf(cssRule)\n    if (index === -1) return false\n    sheet.deleteRule(index)\n    return true\n  }\n\n  /**\n   * Get index of a CSS Rule.\n   */\n  indexOf(cssRule: CSSRule): number {\n    const {cssRules} = this.element.sheet\n    for (let index = 0; index < cssRules.length; index++) {\n      if (cssRule === cssRules[index]) return index\n    }\n    return -1\n  }\n\n  /**\n   * Generate a new CSS rule and replace the existing one.\n   *\n   * Only used for some old browsers because they can't set a selector.\n   */\n  replaceRule(cssRule: CSSRule, rule: Rule): false | CSSRule {\n    const index = this.indexOf(cssRule)\n    if (index === -1) return false\n    this.element.sheet.deleteRule(index)\n    return this.insertRule(rule, index)\n  }\n\n  /**\n   * Get all rules elements.\n   */\n  getRules(): CSSRuleList {\n    return this.element.sheet.cssRules\n  }\n}\n","/* @flow */\n/* eslint-disable class-methods-use-this */\n\n/**\n * Rendering backend to do nothing in nodejs.\n */\nexport default class VirtualRenderer {\n  setProperty() {\n    return true\n  }\n\n  getPropertyValue() {\n    return ''\n  }\n\n  removeProperty() {}\n\n  setSelector() {\n    return true\n  }\n\n  attach() {}\n\n  detach() {}\n\n  deploy() {}\n\n  insertRule() {\n    return false\n  }\n\n  deleteRule() {\n    return true\n  }\n\n  replaceRule() {\n    return false\n  }\n\n  getRules() {}\n\n  indexOf() {\n    return -1\n  }\n}\n","/* @flow */\nimport isInBrowser from 'is-in-browser'\nimport StyleSheet from './StyleSheet'\nimport PluginsRegistry from './PluginsRegistry'\nimport sheets from './sheets'\nimport {plugins as internalPlugins} from './plugins/index'\nimport createGenerateIdDefault from './utils/createGenerateId'\nimport createRule from './utils/createRule'\nimport DomRenderer from './renderers/DomRenderer'\nimport VirtualRenderer from './renderers/VirtualRenderer'\nimport type {\n  Rule,\n  RuleFactoryOptions,\n  RuleOptions,\n  StyleSheetFactoryOptions,\n  Plugin,\n  JssOptions,\n  InternalJssOptions,\n  JssStyle,\n  GenerateId\n} from './types'\n\nlet instanceCounter = 0\n\nexport default class Jss {\n  id = instanceCounter++\n\n  version = process.env.VERSION\n\n  plugins = new PluginsRegistry()\n\n  options: InternalJssOptions = {\n    createGenerateId: createGenerateIdDefault,\n    Renderer: isInBrowser ? DomRenderer : VirtualRenderer,\n    plugins: []\n  }\n\n  generateId: GenerateId = createGenerateIdDefault()\n\n  constructor(options?: JssOptions) {\n    for (let i = 0; i < internalPlugins.length; i++) {\n      this.plugins.use(internalPlugins[i], {queue: 'internal'})\n    }\n    this.setup(options)\n  }\n\n  /**\n   * Prepares various options, applies plugins.\n   * Should not be used twice on the same instance, because there is no plugins\n   * deduplication logic.\n   */\n  setup(options?: JssOptions = {}): this {\n    if (options.createGenerateId) {\n      this.options.createGenerateId = options.createGenerateId\n      // $FlowFixMe\n      this.generateId = options.createGenerateId()\n    }\n\n    if (options.insertionPoint != null) this.options.insertionPoint = options.insertionPoint\n    if (options.virtual || options.Renderer) {\n      this.options.Renderer = options.Renderer || (options.virtual ? VirtualRenderer : DomRenderer)\n    }\n\n    // eslint-disable-next-line prefer-spread\n    if (options.plugins) this.use.apply(this, options.plugins)\n\n    return this\n  }\n\n  /**\n   * Create a Style Sheet.\n   */\n  createStyleSheet(styles: Object, options: StyleSheetFactoryOptions = {}): StyleSheet {\n    let {index} = options\n    if (typeof index !== 'number') {\n      index = sheets.index === 0 ? 0 : sheets.index + 1\n    }\n    const sheet = new StyleSheet(styles, {\n      ...options,\n      jss: this,\n      generateId: options.generateId || this.generateId,\n      insertionPoint: this.options.insertionPoint,\n      Renderer: this.options.Renderer,\n      index\n    })\n    this.plugins.onProcessSheet(sheet)\n\n    return sheet\n  }\n\n  /**\n   * Detach the Style Sheet and remove it from the registry.\n   */\n  removeStyleSheet(sheet: StyleSheet): this {\n    sheet.detach()\n    sheets.remove(sheet)\n    return this\n  }\n\n  /**\n   * Create a rule without a Style Sheet.\n   */\n  createRule(name?: string, style?: JssStyle = {}, options?: RuleFactoryOptions = {}): Rule | null {\n    // Enable rule without name for inline styles.\n    if (typeof name === 'object') {\n      return this.createRule(undefined, name, style)\n    }\n\n    const ruleOptions: RuleOptions = {...options, jss: this, Renderer: this.options.Renderer}\n\n    if (!ruleOptions.generateId) ruleOptions.generateId = this.generateId\n    if (!ruleOptions.classes) ruleOptions.classes = {}\n    if (!ruleOptions.keyframes) ruleOptions.keyframes = {}\n\n    const rule = createRule(name, style, ruleOptions)\n\n    if (rule) this.plugins.onProcessRule(rule)\n\n    return rule\n  }\n\n  /**\n   * Register plugin. Passed function will be invoked with a rule instance.\n   */\n  use(...plugins: Array<Plugin>): this {\n    plugins.forEach(plugin => {\n      this.plugins.use(plugin)\n    })\n\n    return this\n  }\n}\n","/**\n * Extracts a styles object with only props that contain function values.\n */\nexport default function getDynamicStyles(styles: Object): Object | null {\n  let to = null\n\n  for (const key in styles) {\n    const value = styles[key]\n    const type = typeof value\n\n    if (type === 'function') {\n      if (!to) to = {}\n      to[key] = value\n    } else if (type === 'object' && value !== null && !Array.isArray(value)) {\n      const extracted = getDynamicStyles(value)\n      if (extracted) {\n        if (!to) to = {}\n        to[key] = extracted\n      }\n    }\n  }\n\n  return to\n}\n","/* @flow */\nimport warn from 'warning'\nimport type StyleSheet from './StyleSheet'\n\n/**\n * SheetsManager is like a WeakMap which is designed to count StyleSheet\n * instances and attach/detach automatically.\n */\nexport default class SheetsManager {\n  sheets: Array<StyleSheet> = []\n\n  refs: Array<number> = []\n\n  keys: Array<Object> = []\n\n  get size(): number {\n    return this.keys.length\n  }\n\n  get(key: Object): StyleSheet {\n    const index = this.keys.indexOf(key)\n    return this.sheets[index]\n  }\n\n  add(key: Object, sheet: StyleSheet): number {\n    const {sheets, refs, keys} = this\n    const index = sheets.indexOf(sheet)\n\n    if (index !== -1) return index\n\n    sheets.push(sheet)\n    refs.push(0)\n    keys.push(key)\n\n    return sheets.length - 1\n  }\n\n  manage(key: Object): StyleSheet {\n    const index = this.keys.indexOf(key)\n    const sheet = this.sheets[index]\n    if (this.refs[index] === 0) sheet.attach()\n    this.refs[index]++\n    if (!this.keys[index]) this.keys.splice(index, 0, key)\n    return sheet\n  }\n\n  unmanage(key: Object): void {\n    const index = this.keys.indexOf(key)\n    if (index === -1) {\n      // eslint-ignore-next-line no-console\n      warn(false, \"SheetsManager: can't find sheet to unmanage\")\n      return\n    }\n    if (this.refs[index] > 0) {\n      this.refs[index]--\n      if (this.refs[index] === 0) this.sheets[index].detach()\n    }\n  }\n}\n","/* @flow */\n/**\n * A better abstraction over CSS.\n *\n * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present\n * @website https://github.com/cssinjs/jss\n * @license MIT\n */\nimport Jss from './Jss'\nimport type StyleSheet from './StyleSheet'\nimport type {\n  ConditionalRule,\n  KeyframesRule,\n  StyleRule,\n  ViewportRule,\n  SimpleRule,\n  FontFaceRule\n} from './plugins'\nimport type {JssOptions} from './types'\n\n/**\n * Export types for better typing inside plugins and integrations.\n */\nexport type {\n  StyleSheetFactoryOptions,\n  JssValue,\n  JssOptions,\n  JssStyle,\n  Plugin,\n  GenerateId,\n  RuleListOptions,\n  Rule,\n  Renderer,\n  RuleOptions,\n  UpdateOptions,\n  Classes,\n  BaseRule,\n  ContainerRule\n} from './types'\n\nexport type {\n  Jss,\n  StyleSheet,\n  ConditionalRule,\n  KeyframesRule,\n  StyleRule,\n  ViewportRule,\n  SimpleRule,\n  FontFaceRule\n}\n\n/**\n * Export a constant indicating if this browser has CSSTOM support.\n * https://developers.google.com/web/updates/2018/03/cssom\n */\nexport const hasCSSTOMSupport = typeof CSS !== 'undefined' && CSS && 'number' in CSS\n\n/**\n * Extracts a styles object with only rules that contain function values.\n */\nexport {default as getDynamicStyles} from './utils/getDynamicStyles'\n\n/**\n * Converts JSS array value to a CSS string.\n */\nexport {default as toCssValue} from './utils/toCssValue'\n\n/**\n * Create a rule instance.\n */\nexport {default as createRule} from './utils/createRule'\n\n/**\n * SheetsRegistry for SSR.\n */\nexport {default as SheetsRegistry} from './SheetsRegistry'\n\n/**\n * SheetsManager for react-jss and co.\n */\nexport {default as SheetsManager} from './SheetsManager'\n\n/**\n * RuleList for plugins.\n */\nexport {default as RuleList} from './RuleList'\n\n/**\n * Default global SheetsRegistry instance.\n */\nexport {default as sheets} from './sheets'\n\n/**\n * Class name generator creator.\n */\nexport {default as createGenerateId} from './utils/createGenerateId'\n\n/**\n * Creates a new instance of Jss.\n */\nexport const create = (options?: JssOptions): Jss => new Jss(options)\n\n/**\n * A global Jss instance.\n */\nexport default create()\n"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_typeof","Symbol","iterator","obj","constructor","isBrowser","window","document","nodeType","warning","condition","format","args","len","Array","undefined","Error","test","argIndex","message","replace","console","error","x","module","global","self","symbolObservablePonyfill","root","result","observable","Function","ponyfill","isArray","isObservable","value","$$observable","cloneStyle","style","typeOfStyle","CSSStyleValue","map","newStyle","name","createRule","decl","options","jss","declCopy","rule","plugins","onCreateRule","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","Constructor","protoProps","staticProps","_inheritsLoose","subClass","superClass","create","__proto__","_assertThisInitialized","ReferenceError","join","by","toCssValue","ignoreImportant","cssValue","indentStr","str","indent","index","toCss","selector","fallbacks","fallback","prop","allowEmpty","escapeRegex","nativeEscape","CSS","escape","BaseStyleRule","type","isProcessed","renderer","renderable","sheet","Renderer","force","newValue","process","onChangeValue","isEmpty","isDefined","remove","removeProperty","setProperty","attached","StyleRule","selectorText","id","scoped","generateId","applyTo","json","toJSON","toString","link","opts","hasChanged","setSelector","replaceRule","parent","defaultToStringOptions","children","atRegExp","ConditionalRule","styles","at","rules","atMatch","match","RuleList","add","getRule","get","indexOf","addRule","onProcessRule","keyRegExp","nameRegExp","KeyframesRule","frames","nameMatch","refRegExp","replaceRef","keyframes","ref","exec","onProcessStyle","KeyframeRule","FontFaceRule","ViewportRule","SimpleRule","keysMap","pluginStyleRule","pluginConditionalRule","pluginKeyframesRule","pluginKeyframeRule","pluginFontFaceRule","pluginViewportRule","pluginSimpleRule","defaultUpdateOptions","forceUpdateOptions","raw","classes","ruleOptions","register","splice","unregister","slice","forEach","update","data","onUpdate","styleRule","nextValue","prevValue","css","StyleSheet","deployed","queue","attach","deploy","detach","push","insertRule","addRules","added","deleteRule","PluginsRegistry","internal","external","registry","onProcessSheet","processedValue","use","newPlugin","reduce","plugin","SheetsRegistry","reset","filter","ns","maxRules","ruleCounter","defaultPrefix","env","prefix","jssId","classNamePrefix","moduleId","memoize","fn","getPropertyValue","cssRule","attributeStyleMap","err","set","delete","getHead","querySelector","findHigherSheet","insertionPoint","findHighestSheet","findCommentNode","text","head","childNodes","node","nodeValue","trim","findPrevNode","sheets","element","parentNode","nextSibling","comment","insertStyle","nextNode","insertBefore","insertionPointElement","appendChild","getNonce","getAttribute","container","cssRules","c","appendRule","DomRenderer","hasInsertedRules","media","meta","createElement","setAttribute","nonce","removeChild","textContent","containerRule","childRule","childIndex","cssChildRule","ruleStr","getRules","VirtualRenderer","instanceCounter","Jss","version","createGenerateId","createGenerateIdDefault","isInBrowser","internalPlugins","setup","virtual","createStyleSheet","removeStyleSheet","getDynamicStyles","to","extracted","SheetsManager","refs","keys","manage","unmanage","warn","hasCSSTOMSupport"],"mappings":"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"}