!function(v){v.extend(!0,window,{Slick:{DraggableGrouping:function(t){var l,d,c,a,i,p,u,s={},o=new Slick.Event;var g=[];function f(a,i){var s=i.attr("id").replace(d,""),n=!0;g.forEach(function(e,o,r){e.id==s&&(n=!1)}),n&&(c.forEach(function(e,o,r){if(e.id==s&&null!=e.grouping&&!v.isEmptyObject(e.grouping)){var n=v("<div id='"+d+e.id+"_entry' data-id='"+e.id+"' class='slick-dropped-grouping'>");v("<div style='display: inline-flex'>"+i.text()+"</div>").appendTo(n);var l=v("<div class='slick-groupby-remove'>&nbsp;</div>");t.deleteIconCssClass&&l.addClass(t.deleteIconCssClass),t.deleteIconImage&&l.css("background","url("+t.deleteIconImage+") no-repeat center right"),t.deleteIconCssClass||t.deleteIconImage||l.addClass("slick-groupby-remove-image"),l.appendTo(n),v("</div>").appendTo(n),n.appendTo(a),function(e){g.push(e),h("add-group")}(e),function(e,o,r,n){var l=n;v("#"+d+e+"_entry >.slick-groupby-remove").on("click",function(){v(this).off("click"),function(e,o,r){r.remove();var n=[];c.forEach(function(e,o,r){n[e.id]=e}),function(e){var o,r,n=arguments,l=n.length;for(;1<l&&e.length;)for(o=n[--l];-1!=(r=e.indexOf(o));)e.splice(r,1)}(g,n[e]),0==g.length&&p.show();h("remove-group")}(e,0,l)})}(e.id,0,0,n)}}),u.css("display","block"))}function h(e){if(0==g.length)return a.setGrouping([]),void o.notify({caller:e,groupColumns:[]});var n=[];g.forEach(function(e,o,r){n.push(e.grouping)}),a.setGrouping(n),o.notify({caller:e,groupColumns:n})}v.extend(this,{init:function(e){t=v.extend(!0,{},s,t),d=(l=e).getUID(),c=l.getColumns(),a=l.getData(),i=v(l.getPreHeaderPanel());var o=t.dropPlaceHolderText||"Drop a column header here to group by the column";i.html("<div class='slick-placeholder'>"+o+"</div><div class='slick-group-toggle-all expanded' style='display:none'></div>"),p=i.find(".slick-placeholder"),u=i.find(".slick-group-toggle-all"),i.droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",accept:":not(.ui-sortable-helper)",deactivate:function(e,o){i.removeClass("slick-header-column-denied")},drop:function(e,o){f(this,o.draggable)},over:function(e,o){var n=o.draggable.attr("id").replace(d,"");c.forEach(function(e,o,r){e.id==n&&null==e.grouping&&i.addClass("slick-header-column-denied")})}}),i.sortable({items:"div.slick-dropped-grouping",cursor:"default",tolerance:"pointer",helper:"clone",update:function(e,o){for(var r=v(this).sortable("toArray",{attribute:"data-id"}),n=[],l=0,a=r.length;l<a;l++)for(var i=0,s=g.length;i<s;i++)if(g[i].id==r[l]){n.push(g[i]);break}g=n,h("sort-group")}}),i.html(),u.on("click",function(e){this.classList.contains("collapsed")?(this.classList.remove("collapsed"),this.classList.add("expanded"),a.expandAllGroups()):(this.classList.add("collapsed"),this.classList.remove("expanded"),a.collapseAllGroups())}),l.onHeaderCellRendered.subscribe(function(e,o){var r=o.column,n=o.node;if(!v.isEmptyObject(r.grouping)){var l=v("<span class='slick-column-groupable' />");t.groupIconCssClass&&l.addClass(t.groupIconCssClass),t.groupIconImage&&l.css("background","url("+t.groupIconImage+") no-repeat center center"),v(n).css("cursor","pointer").append(l)}});for(var r=0;r<c.length;r++){var n=c[r].field;l.updateColumnHeader(n)}},destroy:function(){o.unsubscribe()},pluginName:"DraggableGrouping",onGroupChanged:o,setDroppedGroups:function(e){var o=e instanceof Array?e:[e];p.hide();for(var r=0;r<o.length;r++){var n=v(l.getHeaderColumn(o[r]));f(i,n)}},clearDroppedGroups:function(){g=[],h("clear-all"),i.find(".slick-dropped-grouping").remove(),u.css("display","none"),p.show()},getSetupColumnReorder:function(l,a,e,i,s,t,d,c,p){a.filter(":ui-sortable").sortable("destroy");var r=v(l.getPreHeaderPanel());a.sortable({distance:3,cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,appendTo:"body",start:function(e,o){v(o.helper).addClass("slick-header-column-active"),r.find(".slick-placeholder").show(),r.find(".slick-dropped-grouping").hide()},beforeStop:function(e,o){v(o.helper).removeClass("slick-header-column-active"),0<r.find(".slick-dropped-grouping").length&&(r.find(".slick-placeholder").hide(),r.find(".slick-dropped-grouping").show())},stop:function(e){if(l.getEditorLock().commitCurrentEdit()){for(var o=a.sortable("toArray"),r=[],n=0;n<o.length;n++)r.push(t[d(o[n].replace(c,""))]);i(r),p(l.onColumnsReordered,{grid:l}),e.stopPropagation(),s()}else v(this).sortable("cancel")}})}})}}})}(jQuery);