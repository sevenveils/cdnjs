!function(R){R.extend(!0,window,{Slick:{CheckboxSelectColumn:function(e){var s,u=null,h=g(),o=new Slick.EventHandler,f={},p=!1,b=R.extend(!0,{},{columnId:"_checkbox_selector",cssClass:null,hideSelectAllCheckbox:!1,toolTip:"Select/Deselect All",width:30,hideInColumnTitleRow:!1,hideInFilterHeaderRow:!0},e);"function"==typeof b.selectableOverride&&C(b.selectableOverride);function l(){s.updateColumnHeader(b.columnId,"","")}function n(){R("#filter-checkbox-selectall-container").hide()}function t(e,t){var o,l,n,c=s.getSelectedRows(),i={},r=0;if("function"==typeof u)for(n=0;n<s.getDataLength();n++){k(l,s.getDataItem(n),s)||r++}var d=[];for(l=0;l<c.length;l++){o=c[l],k(l,s.getDataItem(o),s)?(i[o]=!0,i[o]!==f[o]&&(s.invalidateRow(o),delete f[o])):d.push(o)}for(l in f)s.invalidateRow(l);f=i,s.render(),p=c.length&&c.length+r>=s.getDataLength(),b.hideInColumnTitleRow||b.hideSelectAllCheckbox||w(p),b.hideInFilterHeaderRow||R("#header-filter-selector"+h).prop("checked",p);if(0<d.length){for(l=0;l<d.length;l++){var a=c.indexOf(d[l]);c.splice(a,1)}s.setSelectedRows(c)}}function c(e,t){32==e.which&&s.getColumns()[t.cell].id===b.columnId&&(s.getEditorLock().isActive()&&!s.getEditorLock().commitCurrentEdit()||r(t.row),e.preventDefault(),e.stopImmediatePropagation())}function i(e,t){if(s.getColumns()[t.cell].id===b.columnId&&R(e.target).is(":checkbox")){if(s.getEditorLock().isActive()&&!s.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();r(t.row),e.stopPropagation(),e.stopImmediatePropagation()}}function r(t){var e=s.getDataItem(t);k(t,e,s)&&(f[t]?s.setSelectedRows(R.grep(s.getSelectedRows(),function(e){return e!=t})):s.setSelectedRows(s.getSelectedRows().concat(t)),s.setActiveCell(t,function(){if(null===a){a=0;for(var e=s.getColumns(),t=0;t<e.length;t++)e[t].id==b.columnId&&(a=t)}return a}()))}function d(e,t){if(t.column.id==b.columnId&&R(e.target).is(":checkbox")){if(s.getEditorLock().isActive()&&!s.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();if(R(e.target).is(":checked")){for(var o=[],l=0;l<s.getDataLength();l++){!1!==s.getDataItem(l).selectableRow&&o.push(l)}s.setSelectedRows(o)}else s.setSelectedRows([]);e.stopPropagation(),e.stopImmediatePropagation()}}var a=null;function g(){return Math.round(1e7*Math.random())}function m(e,t,o,l,n,c){var i=g()+e;return n&&k(e,n,c)?f[e]?"<input id='selector"+i+"' type='checkbox' checked='checked'><label for='selector"+i+"'></label>":"<input id='selector"+i+"' type='checkbox'><label for='selector"+i+"'></label>":null}function k(e,t,o){return"function"!=typeof u||u(e,t,o)}function w(e){e?s.updateColumnHeader(b.columnId,"<input id='header-selector"+h+"' type='checkbox' checked='checked'><label for='header-selector"+h+"'></label>",b.toolTip):s.updateColumnHeader(b.columnId,"<input id='header-selector"+h+"' type='checkbox'><label for='header-selector"+h+"'></label>",b.toolTip)}function C(e){u=e}R.extend(this,{init:function(e){s=e,o.subscribe(s.onSelectedRowsChanged,t).subscribe(s.onClick,i).subscribe(s.onKeyDown,c),b.hideInFilterHeaderRow||function(e){e.onHeaderRowCellRendered.subscribe(function(e,t){"sel"===t.column.field&&(R(t.node).empty(),R("<span id='filter-checkbox-selectall-container'><input id='header-filter-selector"+h+"' type='checkbox'><label for='header-filter-selector"+h+"'></label></span>").appendTo(t.node).on("click",function(e){d(e,t)}))})}(e),b.hideInColumnTitleRow||o.subscribe(s.onHeaderClick,d)},destroy:function(){o.unsubscribeAll()},pluginName:"CheckboxSelectColumn",deSelectRows:function(e){var t,o=e.length,l=[];for(t=0;t<o;t++)f[e[t]]&&(l[l.length]=e[t]);s.setSelectedRows(R.grep(s.getSelectedRows(),function(e){return l.indexOf(e)<0}))},selectRows:function(e){var t,o=e.length,l=[];for(t=0;t<o;t++)f[e[t]]||(l[l.length]=e[t]);s.setSelectedRows(s.getSelectedRows().concat(l))},getColumnDefinition:function(){return{id:b.columnId,name:b.hideSelectAllCheckbox||b.hideInColumnTitleRow?"":"<input id='header-selector"+h+"' type='checkbox'><label for='header-selector"+h+"'></label>",toolTip:b.toolTip,field:"sel",width:b.width,resizable:!1,sortable:!1,cssClass:b.cssClass,hideSelectAllCheckbox:b.hideSelectAllCheckbox,formatter:m}},getOptions:function(){return b},selectableOverride:C,setOptions:function(e){if((b=R.extend(!0,{},b,e)).hideSelectAllCheckbox)l(),n();else if(b.hideInColumnTitleRow?l():(w(p),o.subscribe(s.onHeaderClick,d)),b.hideInFilterHeaderRow)n();else{var t=R("#filter-checkbox-selectall-container");t.show(),t.find('input[type="checkbox"]').prop("checked",p)}}})}}})}(jQuery);