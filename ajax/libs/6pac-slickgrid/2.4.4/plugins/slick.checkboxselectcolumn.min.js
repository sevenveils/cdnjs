!function(R){R.extend(!0,window,{Slick:{CheckboxSelectColumn:function(e){var h,f=null,p=s(),o=new Slick.EventHandler,b={},g=!1,m=R.extend(!0,{},{columnId:"_checkbox_selector",cssClass:null,hideSelectAllCheckbox:!1,toolTip:"Select/Deselect All",width:30,hideInColumnTitleRow:!1,hideInFilterHeaderRow:!0},e);function l(){h.updateColumnHeader(m.columnId,"","")}function n(){R("#filter-checkbox-selectall-container").hide()}function t(e,t){var o,l,n=h.getSelectedRows(),c={},i=0;if("function"==typeof f)for(k=0;k<h.getDataLength();k++){var r=h.getDataItem(k);w(l,r,h)||i++}var d=[];for(l=0;l<n.length;l++){o=n[l];var a=h.getDataItem(o);w(l,a,h)?(c[o]=!0,c[o]!==b[o]&&(h.invalidateRow(o),delete b[o])):d.push(o)}for(l in b)h.invalidateRow(l);if(b=c,h.render(),g=n.length&&n.length+i>=h.getDataLength(),m.hideInColumnTitleRow||m.hideSelectAllCheckbox||C(g),!m.hideInFilterHeaderRow){var s=R("#header-filter-selector"+p);s.prop("checked",g)}if(0<d.length){for(l=0;l<d.length;l++){var u=n.indexOf(d[l]);n.splice(u,1)}h.setSelectedRows(n)}}function c(e,t){32==e.which&&h.getColumns()[t.cell].id===m.columnId&&(h.getEditorLock().isActive()&&!h.getEditorLock().commitCurrentEdit()||r(t.row),e.preventDefault(),e.stopImmediatePropagation())}function i(e,t){if(h.getColumns()[t.cell].id===m.columnId&&R(e.target).is(":checkbox")){if(h.getEditorLock().isActive()&&!h.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();r(t.row),e.stopPropagation(),e.stopImmediatePropagation()}}function r(t){var e=h.getDataItem(t);w(t,e,h)&&(b[t]?h.setSelectedRows(R.grep(h.getSelectedRows(),function(e){return e!=t})):h.setSelectedRows(h.getSelectedRows().concat(t)),h.setActiveCell(t,function(){if(null===a){a=0;for(var e=h.getColumns(),t=0;t<e.length;t++)e[t].id==m.columnId&&(a=t)}return a}()))}function d(e,t){if(t.column.id==m.columnId&&R(e.target).is(":checkbox")){if(h.getEditorLock().isActive()&&!h.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();if(R(e.target).is(":checked")){for(var o=[],l=0;l<h.getDataLength();l++){var n=h.getDataItem(l);!1!==n.selectableRow&&o.push(l)}h.setSelectedRows(o)}else h.setSelectedRows([]);e.stopPropagation(),e.stopImmediatePropagation()}}var a=null;function s(){return Math.round(1e7*Math.random())}function u(e,t,o,l,n,c){var i=s()+e;return n&&w(e,n,c)?b[e]?"<input id='selector"+i+"' type='checkbox' checked='checked'><label for='selector"+i+"'></label>":"<input id='selector"+i+"' type='checkbox'><label for='selector"+i+"'></label>":null}function w(e,t,o){return"function"!=typeof f||f(e,t,o)}function C(e){e?h.updateColumnHeader(m.columnId,"<input id='header-selector"+p+"' type='checkbox' checked='checked'><label for='header-selector"+p+"'></label>",m.toolTip):h.updateColumnHeader(m.columnId,"<input id='header-selector"+p+"' type='checkbox'><label for='header-selector"+p+"'></label>",m.toolTip)}R.extend(this,{init:function(e){h=e,o.subscribe(h.onSelectedRowsChanged,t).subscribe(h.onClick,i).subscribe(h.onKeyDown,c),m.hideInFilterHeaderRow||e.onHeaderRowCellRendered.subscribe(function(e,t){"sel"===t.column.field&&(R(t.node).empty(),R("<span id='filter-checkbox-selectall-container'><input id='header-filter-selector"+p+"' type='checkbox'><label for='header-filter-selector"+p+"'></label></span>").appendTo(t.node).on("click",function(e){d(e,t)}))});m.hideInColumnTitleRow||o.subscribe(h.onHeaderClick,d)},destroy:function(){o.unsubscribeAll()},deSelectRows:function(e){var t,o=e.length,l=[];for(t=0;t<o;t++)b[e[t]]&&(l[l.length]=e[t]);h.setSelectedRows(R.grep(h.getSelectedRows(),function(e){return l.indexOf(e)<0}))},selectRows:function(e){var t,o=e.length,l=[];for(t=0;t<o;t++)b[e[t]]||(l[l.length]=e[t]);h.setSelectedRows(h.getSelectedRows().concat(l))},getColumnDefinition:function(){return{id:m.columnId,name:m.hideSelectAllCheckbox||m.hideInColumnTitleRow?"":"<input id='header-selector"+p+"' type='checkbox'><label for='header-selector"+p+"'></label>",toolTip:m.toolTip,field:"sel",width:m.width,resizable:!1,sortable:!1,cssClass:m.cssClass,hideSelectAllCheckbox:m.hideSelectAllCheckbox,formatter:u}},getOptions:function(){return m},canRowBeSelected:function(e){f=e},setOptions:function(e){if((m=R.extend(!0,{},m,e)).hideSelectAllCheckbox)l(),n();else if(m.hideInColumnTitleRow?l():(C(g),o.subscribe(h.onHeaderClick,d)),m.hideInFilterHeaderRow)n();else{var t=R("#filter-checkbox-selectall-container");t.show(),t.find('input[type="checkbox"]').prop("checked",g)}}})}}})}(jQuery);