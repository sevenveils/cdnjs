!function(b){b.extend(!0,window,{Slick:{DraggableGrouping:function(u){var l,g,f,a,i,h,s,t={},o=new Slick.Event;var v=[];function d(d,c){var p=c.attr("id").replace(g,""),n=!0;v.forEach(function(e,o,r){e.id==p&&(n=!1)}),n&&(f.forEach(function(e,o,r){if(e.id==p&&null!=e.grouping&&!b.isEmptyObject(e.grouping)){var n=b("<div id='"+g+e.id+"_entry' data-id='"+e.id+"' class='slick-dropped-grouping'>"),l=b("<div style='display: inline-flex'>"+c.text()+"</div>");l.appendTo(n);var a=b("<div class='slick-groupby-remove'>&nbsp;</div>");u.deleteIconCssClass&&a.addClass(u.deleteIconCssClass),u.deleteIconImage&&a.css("background","url("+u.deleteIconImage+") no-repeat center right"),u.deleteIconCssClass||u.deleteIconImage||a.addClass("slick-groupby-remove-image"),a.appendTo(n),b("</div>").appendTo(n),n.appendTo(d),t=e,v.push(t),m("add-group"),i=e.id,s=n,b("#"+g+i+"_entry >.slick-groupby-remove").on("click",function(){b(this).off("click"),function(e,o,r){r.remove();var n=[];f.forEach(function(e,o,r){n[e.id]=e}),function(e){for(var o,r,n=arguments,l=n.length;1<l&&e.length;)for(o=n[--l];-1!=(r=e.indexOf(o));)e.splice(r,1)}(v,n[e]),0==v.length&&h.show(),m("remove-group")}(i,0,s)})}var i,s,t}),s.css("display","block"))}function m(e){if(0==v.length)return a.setGrouping([]),void o.notify({caller:e,groupColumns:[]});var n=[];v.forEach(function(e,o,r){n.push(e.grouping)}),a.setGrouping(n),o.notify({caller:e,groupColumns:n})}b.extend(this,{init:function(e){u=b.extend(!0,{},t,u),g=(l=e).getUID(),f=l.getColumns(),a=l.getData(),i=b(l.getPreHeaderPanel());var o=u.dropPlaceHolderText||"Drop a column header here to group by the column";i.html("<div class='slick-placeholder'>"+o+"</div><div class='slick-group-toggle-all expanded' style='display:none'></div>"),h=i.find(".slick-placeholder"),s=i.find(".slick-group-toggle-all"),i.droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",accept:":not(.ui-sortable-helper)",deactivate:function(e,o){i.removeClass("slick-header-column-denied")},drop:function(e,o){d(this,o.draggable)},over:function(e,o){var n=o.draggable.attr("id").replace(g,"");f.forEach(function(e,o,r){e.id==n&&null==e.grouping&&i.addClass("slick-header-column-denied")})}}),i.sortable({items:"div.slick-dropped-grouping",cursor:"default",tolerance:"pointer",helper:"clone",update:function(e,o){for(var r=b(this).sortable("toArray",{attribute:"data-id"}),n=[],l=0,a=r.length;l<a;l++)for(var i=0,s=v.length;i<s;i++)if(v[i].id==r[l]){n.push(v[i]);break}v=n,m("sort-group")}}),i.html(),s.on("click",function(e){this.classList.contains("collapsed")?(this.classList.remove("collapsed"),this.classList.add("expanded"),a.expandAllGroups()):(this.classList.add("collapsed"),this.classList.remove("expanded"),a.collapseAllGroups())}),l.onHeaderCellRendered.subscribe(function(e,o){var r=o.column,n=o.node;if(!b.isEmptyObject(r.grouping)){var l=b("<span class='slick-column-groupable' />");u.groupIconCssClass&&l.addClass(u.groupIconCssClass),u.groupIconImage&&l.css("background","url("+u.groupIconImage+") no-repeat center center"),b(n).css("cursor","pointer").append(l)}});for(var r=0;r<f.length;r++){var n=f[r].field;l.updateColumnHeader(n)}},destroy:function(){o.unsubscribe()},onGroupChanged:o,setDroppedGroups:function(e){groupingInfos=e instanceof Array?e:[e],h.hide();for(var o=0;o<groupingInfos.length;o++){var r=b(l.getHeaderColumn(groupingInfos[o]));d(i,r)}},clearDroppedGroups:function(){v=[],m("clear-all"),i.find(".slick-dropped-grouping").remove(),s.css("display","none"),h.show()},getSetupColumnReorder:function(l,a,e,i,s,t,d,c,p){a.filter(":ui-sortable").sortable("destroy");var n=b(l.getPreHeaderPanel());a.sortable({distance:3,cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,appendTo:"body",start:function(e,o){b(o.helper).addClass("slick-header-column-active"),n.find(".slick-placeholder").show(),n.find(".slick-dropped-grouping").hide()},beforeStop:function(e,o){b(o.helper).removeClass("slick-header-column-active");var r=n.find(".slick-dropped-grouping").length;0<r&&(n.find(".slick-placeholder").hide(),n.find(".slick-dropped-grouping").show())},stop:function(e){if(l.getEditorLock().commitCurrentEdit()){for(var o=a.sortable("toArray"),r=[],n=0;n<o.length;n++)r.push(t[d(o[n].replace(c,""))]);i(r),p(l.onColumnsReordered,{grid:l}),e.stopPropagation(),s()}else b(this).sortable("cancel")}})}})}}})}(jQuery);